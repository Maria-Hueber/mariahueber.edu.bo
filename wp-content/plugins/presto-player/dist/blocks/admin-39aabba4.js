/*!
 * 
 * Presto Player
 * 
 * @author Presto Made, Inc
 * @version 0.1.0
 * @link undefined
 * @license GPL
 * 
 * Copyright (c) 2021 Presto Made, Inc
 * 
 * This software is released under the GPL License
 * https://opensource.org/licenses/GPL
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprestoPlayerblocksJsonp=window.wpackioprestoPlayerblocksJsonp||[]).push([[0],[,,,,,,,,function(e,t,r){"use strict";var n=wp.i18n.__;t.a=function(){return React.createElement("div",{className:"presto-player__pro-badge"},n("Pro","presto-player"))}},,function(e,t,r){"use strict";var n,a=r(3),o=(n={visibility:{type:String,default:"public"},color:{type:String,default:"#00b3ff"},blockAlignment:{type:String},mutedPreview:{type:Object,default:{enabled:!1,captions:!1}},mutedOverlay:{type:Object,default:{enabled:!1,src:"",width:200,focalPoint:{x:.5,y:.5}}},mutedPreviewCaptions:{type:Boolean},mutedOverlayType:{type:String,default:"text"},mutedOverlayText:{type:String,default:"Click to play"},mutedOverlaySrc:{type:String},mutedOverlayImageWidth:{type:Number,default:200},mutedOverlayFocalPoint:{type:Object}},Object(a.a)(n,"mutedOverlay",{type:Object,default:{enabled:!1,type:"text",text:"",src:"",width:200,focalPoint:{x:.5,y:.5}}}),Object(a.a)(n,"autoplay",{type:Boolean}),Object(a.a)(n,"preload",{type:String}),Object(a.a)(n,"playsInline",{type:Boolean}),Object(a.a)(n,"id",{type:Number}),Object(a.a)(n,"attachment_id",{type:Number}),Object(a.a)(n,"src",{type:String}),Object(a.a)(n,"imageID",{type:Number}),Object(a.a)(n,"poster",{type:String}),Object(a.a)(n,"content",{type:Boolean}),Object(a.a)(n,"preset",{type:Number}),Object(a.a)(n,"chapters",{type:Array,default:[]}),Object(a.a)(n,"tracks",{type:"array",items:{type:"object"},default:[]}),n);t.a={attributes:o,category:"presto",supports:{align:!0},save:function(){return null}}},function(e,t,r){"use strict";function n(e){var t,r=(e||"").match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return r&&11===(null==r||null===(t=r[2])||void 0===t?void 0:t.length)?r[2]:null}function a(e){var t=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/.exec(e||"");return(null==t?void 0:t[5])||""}function o(e){var t=a(e);if(t)return{video_id:t,type:"vimeo"};var r=n(e);return r?{video_id:r,type:"youtube"}:{$video_id:0,$type:"none"}}function l(e){return e.includes(".m3u8")}r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return l}))},function(e,t,r){"use strict";var n=r(3),a=r(28);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=wp.data.useSelect;t.a=function(e){var t,r,n,o=e.src,i=e.preset,s=e.branding,u=e.attributes,p=e.adminPreview,d=e.type,b=u.chapters,m=u.mutedOverlay,v=u.mutedPreview,f=c((function(e){var t;return null===(t=e("presto-player/player"))||void 0===t?void 0:t.youtube()}));return React.createElement("div",{className:"wp-block-video presto-block-video",style:l(l(l({"--presto-player-border-radius":"".concat(null==i?void 0:i.border_radius,"px")},(null==i?void 0:i.caption_background)?{"--plyr-captions-background":i.caption_background}:{}),(null==s?void 0:s.color)?{"--plyr-color-main":s.color}:{}),{},{"--presto-player-email-border-radius":"".concat((null==i||null===(t=i.email_collection)||void 0===t?void 0:t.border_radius)||0,"px"),"--presto-player-logo-width":"".concat((null==s?void 0:s.logo_width)||75,"px")})},React.createElement(a.b,{src:o,isAdmin:!0,preload:"metadata",preset:i,bunny:{thumbnail:null==u?void 0:u.previewThumbnail,preview:null==u?void 0:u.preview},youtube:{channelId:null==f?void 0:f.channel_id},branding:s,chapters:b,blockAttributes:u,poster:u.poster,provider:d},React.createElement("div",{slot:"player-end"},(null==v?void 0:v.enabled)&&(null==m?void 0:m.enabled)&&React.createElement("div",{className:"presto-player__overlay is-image",style:{position:"absolute",width:"".concat((null==m?void 0:m.width)||100,"%"),left:"".concat(100*((null==m||null===(r=m.focalPoint)||void 0===r?void 0:r.x)||.5),"%"),top:"".concat(100*((null==m||null===(n=m.focalPoint)||void 0===n?void 0:n.y)||.5),"%")}},React.createElement("img",{src:null==m?void 0:m.src,style:{transform:"translateX(-50%) translateY(-50%)"}})),p)))}},function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return c}));var n=wp.element,a=n.useRef,o=n.useEffect;function l(e){var t=a();return o((function(){t.current=e})),t.current}function c(e){var t=e.status,r=void 0===t?"success":t,n=e.message;wp.data.dispatch("core/notices").createNotice(r,n,{type:"snackbar"})}},function(e,t,r){"use strict";var n=wp.data.withSelect;t.a=function(e){return n((function(e){return{branding:e("presto-player/player").branding(),loading:e("presto-player/player").presetsLoading(),presets:e("presto-player/player").getPresets(),defaultPreset:e("presto-player/player").getDefaultPreset()}}))}},function(e,t,r){"use strict";var n=r(8),a=r(3),o=r(11);r(43);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=wp.i18n.__,s=wp.components,u=(s.PanelRow,s.TextControl,s.SelectControl,s.BaseControl),p=s.Button,d=s.FocalPointPicker,b=s.RangeControl,m=wp.blockEditor,v=m.MediaUpload,f=m.MediaUploadCheck,y=(wp.element.useState,["image"]),h=function(e){var t=e.attributes,r=e.setAttributes,n=e.instanceId,a=t.mutedOverlay,o="video-block__overlay-image-description-".concat(n);return React.createElement(React.Fragment,null,React.createElement(f,null,React.createElement(u,{className:"editor-video-overlay-control"},React.createElement(u.VisualLabel,null,React.createElement("p",null,i("Overlay Image","presto-player"))),React.createElement(v,{title:i("Select overlay image","presto-player"),onSelect:function(e){r({mutedOverlay:c(c({},a),{src:e.url})})},allowedTypes:y,render:function(e){var t=e.open;return React.createElement(p,{className:"presto-setting__poster",isPrimary:!0,onClick:t},(null==a?void 0:a.src)?i("Replace","presto-player"):i("Select","presto-player"))}}),React.createElement("p",{id:o,hidden:!0},(null==a?void 0:a.src)?sprintf(i("The current overlay image url is %s","presto-player"),null==a?void 0:a.src):i("There is no overlay image currently selected","presto-player")),!!(null==a?void 0:a.src)&&React.createElement(p,{onClick:function(){r({mutedOverlay:c(c({},a),{src:""})})},className:"presto-setting__remove-poster",isTertiary:!0},i("Remove","presto-player")))),!!(null==a?void 0:a.src)&&React.createElement(d,{url:"",dimensions:{width:160,height:90},value:null==a?void 0:a.focalPoint,onChange:function(e){return r({mutedOverlay:c(c({},a),{focalPoint:e})})}}),!!(null==a?void 0:a.src)&&React.createElement(b,{label:i("Max Width (%)","presto-player"),value:null==a?void 0:a.width,onChange:function(e){return r({mutedOverlay:c(c({},a),{width:e})})},min:1,max:100}))};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=wp.i18n.__,E=wp.components,j=E.ToggleControl,R=E.SelectControl,_=E.BaseControl,k=E.Button,P=E.PanelRow,x=E.Icon,C=E.Flex,S=wp.data.dispatch,N=wp.blockEditor,D=N.MediaUpload,T=N.MediaUploadCheck,B=["image"],L=function(e){var t=e.setAttributes,r=e.attributes,l=e.instanceId,c=r.mutedPreview,i=r.autoplay,s=r.playsInline,u=r.preload,p=r.poster,d=r.mutedOverlay,b="video-block__poster-image-description-".concat(l),m=function(e){return function(r){t(Object(a.a)({},e,r))}};var v,f;return React.createElement(React.Fragment,null,!i&&React.createElement(React.Fragment,null,React.createElement(j,{label:React.createElement(React.Fragment,null,w("Muted Autoplay Preview","presto-player")," ",!(null===(v=prestoPlayer)||void 0===v?void 0:v.isPremium)&&React.createElement(n.a,null)),onChange:function(e){var r;(null===(r=prestoPlayer)||void 0===r?void 0:r.isPremium)?t({mutedPreview:O(O({},c),{enabled:e})}):S("presto-player/player").setProModal(!0)},checked:null==c?void 0:c.enabled,className:"presto-setting__mutedPreview",help:w("Shows a muted preview of the video.","presto-player")}),!!(null==c?void 0:c.enabled)&&!(null==r?void 0:r.video_id)&&React.createElement(P,null,React.createElement(j,{label:w("Muted Preview Captions","presto-player"),onChange:function(e){t({mutedPreview:O(O({},c),{captions:e})})},checked:null==c?void 0:c.captions,className:"presto-setting__mutedPreviewCaptions",help:w("Play captions during muted autoplay","presto-player")})),!!c.enabled&&React.createElement(P,null,React.createElement(j,{label:React.createElement(React.Fragment,null,w("Muted Preview Overlay","presto-player")," ",!(null===(f=prestoPlayer)||void 0===f?void 0:f.isPremium)&&React.createElement(n.a,null)),onChange:function(e){var r;(null===(r=prestoPlayer)||void 0===r?void 0:r.isPremium)?t({mutedOverlay:O(O({},d),{enabled:e})}):S("presto-player/player").setProModal(!0)},checked:null==d?void 0:d.enabled,className:"presto-setting__mutedOverlay",help:w("Show an image over the top of the video either before or after the video.","presto-player")})),(null==d?void 0:d.enabled)&&(null==c?void 0:c.enabled)&&React.createElement(h,{attributes:r,setAttributes:t})),!(null==c?void 0:c.enabled)&&React.createElement(j,{label:w("Autoplay","presto-player"),className:"presto-setting__autoplay",onChange:m("autoplay"),checked:i,help:function(e){return e?w("Note: Autoplaying videos may cause usability issues for some visitors.","presto-player"):null}}),React.createElement(P,null,React.createElement(j,{label:w("Play inline","presto-player"),className:"presto-setting__playsInline","data-cy":"playsInline",onChange:m("playsInline"),checked:s,help:w("On mobile browsers, play the video on the page instead of opening it up fullscreen.","presto-player")})),!(null==r?void 0:r.video_id)&&React.createElement(P,null,React.createElement(R,{label:React.createElement(C,null,React.createElement("div",null,w("Performance Preference","presto-player")),React.createElement("a",{href:"https://prestoplayer.com/docs/performance-preferences-explained",target:"_blank",style:{textDecoration:"none"}},React.createElement(x,{icon:"editor-help"}))),className:"presto-setting__preload",value:u,onChange:function(e){return t({preload:e})},help:(!!((null==r?void 0:r.src)&&Object(o.d)(null==r?void 0:r.src)&&["metadata","none"].includes(u))||"none"===u&&!p)&&w("A poster image is recommended for this setting.","presto-player"),options:[{value:"auto",label:w("Video Playback Speed","presto-player")},{value:"metadata",label:w("Page Load Speed","presto-player")},{value:"none",label:w("Page Load Speed (Extreme)","presto-player")}]})),React.createElement(T,null,React.createElement(_,{className:"editor-video-poster-control"},React.createElement(_.VisualLabel,null,React.createElement("p",null,w("Poster image","presto-player"))),React.createElement(D,{title:w("Select poster image","presto-player"),onSelect:function(e){t({poster:e.url})},allowedTypes:B,render:function(e){var t=e.open;return React.createElement(k,{className:"presto-setting__poster",isPrimary:!0,onClick:t,"aria-describedby":b},w(p?"Replace":"Select","presto-player"))}}),React.createElement("p",{id:b,hidden:!0},p?sprintf(w("The current poster image url is %s","presto-player"),p):w("There is no poster image currently selected","presto-player")),!!p&&React.createElement(k,{onClick:function(){t({poster:""})},className:"presto-setting__remove-poster",isTertiary:!0},w("Remove","presto-player")))))},A=r(2),I=r.n(A),V=r(5),U=r(1),F=wp.i18n.__,M=wp.components,z=M.ColorPicker,H=M.Button,W=M.withNotices,Y=M.BaseControl,G=M.RangeControl,q=wp.blockEditor,Z=q.MediaUpload,K=q.MediaUploadCheck,Q=wp.compose.useInstanceId,X=wp.element.useState,J=wp.data,$=J.dispatch,ee=J.useSelect,te=["image"];var re=W((function e(t){t.setAttributes,t.attributes,t.type;var r,a=Q(e),o=X(1),l=Object(U.a)(o,2),c=l[0],i=l[1],s=ee((function(e){return e("presto-player/player").branding()})),u=function(){var e=Object(V.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("presto-player/player").saveOptions({branding:s});case 2:wp.data.dispatch("core/notices").createNotice("success","Player branding saved.",{type:"snackbar",isDismissible:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement("div",{className:"presto-player__panel--branding"},React.createElement("p",null,F("Here you can select the global player branding This will apply to all players on the site.","presto-player")),React.createElement(K,null,React.createElement(Y,{className:"editor-video-poster-control"},React.createElement(Y.VisualLabel,null,React.createElement("p",null,F("Logo Overlay","presto-player")," ",!(null===(r=prestoPlayer)||void 0===r?void 0:r.isPremium)&&React.createElement(n.a,null))),React.createElement(Z,{title:F("Select logo overlay image","presto-player"),onSelect:function(e){$("presto-player/player").updateBranding("logo",e.url)},allowedTypes:te,render:function(e){var t=e.open;return React.createElement(H,{className:"presto-setting__logo",isSecondary:!0,onClick:function(){var e;(null===(e=prestoPlayer)||void 0===e?void 0:e.isPremium)?t():$("presto-player/player").setProModal(!0)},"aria-describedby":"video-block__logo-image-description-".concat(a)},(null==s?void 0:s.logo)?F("Replace","presto-player"):F("Select","presto-player"))}}),React.createElement("p",{id:"video-block__logo-image-description-".concat(a),hidden:!0},(null==s?void 0:s.logo)?sprintf(F("The current logo image url is %s","presto-player"),null==s?void 0:s.logo):F("There is no logo image currently selected","presto-player")),!!(null==s?void 0:s.logo)&&React.createElement(H,{onClick:function(){$("presto-player/player").updateBranding("logo","")},isTertiary:!0},F("Remove","presto-player")))),!!(null==s?void 0:s.logo)&&React.createElement(G,{label:F("Logo Max Width","presto-player"),value:(null==s?void 0:s.logo_width)||150,onChange:function(e){return $("presto-player/player").updateBranding("logo_width",e)},min:1,max:400}),React.createElement(z,{color:null==s?void 0:s.color,onChangeComplete:function(e){$("presto-player/player").updateBranding("color",e.hex)},key:c,disableAlpha:!0}),(null==s?void 0:s.color)&&React.createElement(Y,null,React.createElement(H,{isSecondary:!0,onClick:function(){var e,t;$("presto-player/player").updateBranding("color",(null===(e=prestoPlayer)||void 0===e||null===(t=e.defaults)||void 0===t?void 0:t.color)||"#00b3ff"),i(c+1)}},F("Reset Color","presto-player"))),React.createElement(H,{isPrimary:!0,onClick:u},F("Save Branding","presto-player")))})),ne=r(6),ae=wp.i18n.__,oe=wp.components,le=oe.Flex,ce=oe.FlexItem,ie=oe.FlexBlock,se=oe.TextControl,ue=oe.Button,pe=wp.element.useState,de=function(e){var t=e.update,r=e.add,n=e.remove,o=e.className,l=e.time,c=e.title,i=(e.disabled,e.showNotice,pe(l)),s=Object(U.a)(i,2),u=s[0],p=s[1];return React.createElement(le,{align:"center",className:o},React.createElement(ce,null,React.createElement(se,Object(a.a)({className:"presto-player__caption--time",style:{width:"60px"},placeholder:"0:00",value:u,onChange:function(e){return p(e)},onBlur:function(){var e=function(e){var t=e;if(!(t=t.replace(/[^\d\d:\d\d.-]/g,"")).includes(":"))return"".concat(t,":00");0===t.substr(0,t.indexOf(":")).length&&(t="0".concat(t));var r=t.indexOf(":");return t=t.substring(0,r+3)}(u);t({time:e}),p(e)},autoComplete:"off"},"placeholder","0:00"))),React.createElement(ie,null,React.createElement(se,{className:"presto-player__caption--title",placeholder:ae("Title","presto-player"),value:c||"",onChange:function(e){return t({title:e})},autoComplete:"off"})),React.createElement(ce,null,n&&React.createElement(ue,{icon:"minus",className:"ph-chapter__remove",style:{marginBottom:"8px"},label:ae("Remove Chapter","presto-player"),onClick:n}),r&&React.createElement(ue,{icon:"plus-alt",className:"ph-chapter__add",label:ae("Add Chapter","presto-player"),style:{marginBottom:"8px"},onClick:function(){r(),p("")}})))};function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}wp.i18n.__;var ve=wp.element.useState,fe=wp.data.dispatch,ye=function(e){var t,r=e.setAttributes,n=e.attributes,a=function(){fe("presto-player/player").setProModal(!0)};if(!(null===(t=prestoPlayer)||void 0===t?void 0:t.isPremium))return React.createElement(de,{disabled:!0,className:"ph-chapter is-new",time:"",title:"",update:function(){},showNotice:a,add:a});var o=n.chapters,l=ve({title:"",time:""}),c=Object(U.a)(l,2),i=c[0],s=c[1];return React.createElement(React.Fragment,null,(o||[]).sort((function(e,t){return parseInt(e.time.split(":")[0])-parseInt(t.time.split(":")[0])==0?parseInt(e.time.split(":")[1])-parseInt(t.time.split(":")[1]):parseInt(e.time.split(":")[0])-parseInt(t.time.split(":")[0])})).map((function(e,t){return React.createElement(de,{key:"".concat(t,"-").concat(e.time),className:"ph-chapter",time:e.time,title:e.title,chapter:e,update:function(t){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.indexOf(e),a=o.map((function(e,r){return r!==n?e:me(me({},e),t)}));r({chapters:a})}(e,t)},remove:function(){!function(e){var t=o.indexOf(e);r({chapters:o.filter((function(e,r){return r!==t}))})}(e)}})})),React.createElement(de,{className:"ph-chapter is-new",time:i.time,title:i.title,update:function(e){s(me(me({},i),e))},add:function(){i.time&&i.title&&(r({chapters:[].concat(Object(ne.a)(o||[]),[{time:i.time,title:i.title}])}),s({title:"",time:""}))}}))},he=r(13),ge=wp.i18n.__,Oe=wp.components,we=Oe.ToggleControl,Ee=Oe.BaseControl,je=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(Ee,null,React.createElement("h3",null,ge("Controls","presto-player"))),React.createElement(Ee,{className:"presto-player__control--large-play"},React.createElement(we,{label:ge("Large Play Button","presto-player"),help:ge("Adds a large play button over the top of the player.","presto-player"),onChange:function(e){r({"play-large":e})},checked:t["play-large"]})),React.createElement(Ee,{className:"presto-player__control--rewind"},React.createElement(we,{label:ge("Rewind","presto-player"),help:ge("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({rewind:e})},checked:t.rewind})),React.createElement(Ee,{className:"presto-player__control--play"},React.createElement(we,{label:ge("Small Play Button","presto-player"),help:ge("Adds a small play button to the bottom of the player.","presto-player"),onChange:function(e){r({play:e})},checked:t.play})),React.createElement(Ee,{className:"presto-player__control--fast-forward"},React.createElement(we,{label:ge("Fast Forward","presto-player"),help:ge("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({"fast-forward":e})},checked:t["fast-forward"]})),React.createElement(Ee,{className:"presto-player__control--progress"},React.createElement(we,{label:ge("Progress Bar","presto-player"),help:ge("Shows a seekable progress bar.","presto-player"),onChange:function(e){r({progress:e})},checked:t.progress})),React.createElement(Ee,{className:"presto-player__control--current-time"},React.createElement(we,{label:ge("Current Time","presto-player"),help:ge("Shows the video timestamp.","presto-player"),onChange:function(e){r({"current-time":e})},checked:t["current-time"]})),React.createElement(Ee,{className:"presto-player__control--volume"},React.createElement(we,{label:ge("Volume","presto-player"),help:ge("Shows a volume bar.","presto-player"),onChange:function(e){r({volume:e,mute:e})},checked:t.volume})),React.createElement(Ee,{className:"presto-player__control--speed"},React.createElement(we,{label:ge("Speed","presto-player"),help:ge("Shows playback speed controls.","presto-player"),onChange:function(e){r({speed:e})},checked:t.speed})),React.createElement(Ee,{className:"presto-player__control--pip"},React.createElement(we,{label:ge("Picture In Picture (HTML5 only)","presto-player"),help:ge("Allows users to dock the player on their screen and watch when using other app on their computer.","presto-player"),onChange:function(e){r({pip:e})},checked:t.pip})),React.createElement(Ee,{className:"presto-player__control--fullscreen"},React.createElement(we,{label:ge("Fullscreen","presto-player"),help:ge("Adds a button to allow the player to be fullscreen.","presto-player"),onChange:function(e){r({fullscreen:e})},checked:t.fullscreen})))},Re=wp.i18n.__,_e=wp.components,ke=_e.ToggleControl,Pe=_e.BaseControl,xe=_e.HorizontalRule,Ce=(_e.SelectControl,function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(Pe,null,React.createElement("h3",null,Re("Behavior","presto-player"))),React.createElement(Pe,null,React.createElement(ke,{label:Re("Auto-Hide Controls","presto-player"),help:Re("Hide video controls automatically after 2 seconds of no mouse movement.","presto-player"),onChange:function(e){r({auto_hide:e})},checked:t.auto_hide})),React.createElement(Pe,null,React.createElement(ke,{label:Re("Save Play Position","presto-player"),help:Re("Saves the user's play position so when they come back to the page they can continue the video from where they left off.","presto-player"),onChange:function(e){r({save_player_position:e})},checked:t.save_player_position})),React.createElement(Pe,null,React.createElement(ke,{label:Re("Sticky On Scroll","presto-player"),help:Re("Stick videos to the side of the screen when the page is scrolled and the video is playing.","presto-player"),onChange:function(e){r({sticky_scroll:e})},checked:t.sticky_scroll})),React.createElement(xe,null),React.createElement(Pe,null),React.createElement(Pe,null,React.createElement("h3",null,Re("Youtube","presto-player"))),React.createElement(Pe,null,React.createElement(ke,{label:Re("Hide Youtube UI (Experimental)","presto-player"),help:Re("Hides the Youtube logo and related videos.","presto-player"),onChange:function(e){r({hide_youtube:e})},checked:t.hide_youtube})),React.createElement(Pe,null,React.createElement(ke,{label:Re("Lazy Load Videos","presto-player"),help:Re("Improves page loading performance by only loading the video when clicked.","presto-player"),onChange:function(e){r({lazy_load_youtube:e})},checked:t.lazy_load_youtube})))}),Se=wp.i18n.__,Ne=wp.components,De=Ne.ToggleControl,Te=Ne.BaseControl,Be=Ne.RangeControl,Le=Ne.SelectControl,Ae=Ne.ColorPicker,Ie=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(Te,null,React.createElement("h3",null,Se("Style","presto-player"))),React.createElement(Te,null,React.createElement(De,{label:Se("Hide Logo","presto-player"),help:Se("Hides the logo on this video.","presto-player"),onChange:function(e){r({hide_logo:e})},checked:t.hide_logo})),React.createElement(Te,null,React.createElement(Be,{label:Se("Round Corners","presto-player"),help:Se("Player border radius size.","presto-player"),value:(null==t?void 0:t.border_radius)||0,onChange:function(e){return r({border_radius:e})},min:0,max:25})),React.createElement(Te,null,React.createElement(Le,{label:Se("Caption Style","presto-player"),labelPosition:"top",value:null==t?void 0:t.caption_style,options:[{label:Se("Default","presto-player"),value:"default"},{label:Se("Full","presto-player"),value:"full"}],onChange:function(e){r({caption_style:e})}})),React.createElement(Te,null,React.createElement(Te.VisualLabel,null,React.createElement("p",null,Se("Caption Background","presto-player"))),React.createElement(Ae,{color:(null==t?void 0:t.caption_background)||"#000000",onChangeComplete:function(e){r({caption_background:e.hex})},disableAlpha:!0})))},Ve=function(){return React.createElement("div",null,React.createElement("presto-player-skeleton",{style:{width:"30%",marginBottom:"10px"}}),React.createElement("presto-player-skeleton",{style:{height:"2rem",marginBottom:"20px"}}))},Ue=wp.i18n.__,Fe=wp.components,Me=Fe.SelectControl,ze=Fe.TextControl,He=Fe.Notice,We=wp.element,Ye=We.useEffect,Ge=We.useState,qe=function(e){var t=e.options,r=e.updateEmailState,n=Ge(!1),a=Object(U.a)(n,2),o=a[0],l=a[1],c=Ge([{value:null,label:Ue("Choose an audience","presto-player")}]),i=Object(U.a)(c,2),s=i[0],u=i[1],p=Ge(""),d=Object(U.a)(p,2),b=d[0],m=d[1],v=function(){var e=Object(V.a)(I.a.mark((function e(){var t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/mailchimp/lists"});case 4:t=e.sent,r=s,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.name}])})),u(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&m(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Ye((function(){v()}),[]),o?React.createElement("div",null,React.createElement(Ve,null),React.createElement(Ve,null)):b?React.createElement(He,{className:"presto-notice",status:"error",isDismissible:!1},b):React.createElement("div",null,React.createElement(Me,{label:Ue("Choose an audience","presto-player"),value:null==t?void 0:t.provider_list,options:s,onChange:function(e){return r({provider_list:e})}}),React.createElement(ze,{label:Ue("Tag","presto-player"),help:React.createElement("p",null,Ue("Give this contact an optional tag when they are added to the list.","presto-player")),value:null==t?void 0:t.provider_tag,onChange:function(e){return r({provider_tag:e})}}))},Ze=wp.i18n.__,Ke=wp.components,Qe=Ke.SelectControl,Xe=Ke.Notice,Je=wp.element,$e=Je.useEffect,et=Je.useState,tt=function(e){var t=e.options,r=e.updateEmailState,n=et(!1),a=Object(U.a)(n,2),o=a[0],l=a[1],c=et([{value:null,label:Ze("Choose a group","presto-player")}]),i=Object(U.a)(c,2),s=i[0],u=i[1],p=et(""),d=Object(U.a)(p,2),b=d[0],m=d[1],v=function(){var e=Object(V.a)(I.a.mark((function e(){var t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/mailerlite/groups"});case 4:t=e.sent,r=s,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.name}])})),u(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&m(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return $e((function(){v()}),[]),o?React.createElement(Ve,null):b?React.createElement(Xe,{className:"presto-notice",status:"error",isDismissible:!1},b):React.createElement("div",null,React.createElement(Qe,{label:Ze("Choose a group","presto-player"),value:null==t?void 0:t.provider_list,options:s,onChange:function(e){return r({provider_list:e})}}))},rt=wp.i18n.__,nt=wp.components,at=nt.SelectControl,ot=nt.Notice,lt=wp.element,ct=lt.useEffect,it=lt.useState,st=function(e){var t=e.options,r=e.updateEmailState,n=it(!1),a=Object(U.a)(n,2),o=a[0],l=a[1],c=it(!1),i=Object(U.a)(c,2),s=i[0],u=i[1],p=it([{value:null,label:rt("Choose a list","presto-player")}]),d=Object(U.a)(p,2),b=d[0],m=d[1],v=it([{value:null,label:rt("Choose a tag","presto-player")}]),f=Object(U.a)(v,2),y=f[0],h=f[1],g=it(""),O=Object(U.a)(g,2),w=O[0],E=O[1],j=function(){var e=Object(V.a)(I.a.mark((function e(){var t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/activecampaign/lists"});case 4:t=e.sent,r=b,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.name||rt("Default list","presto-player")}])})),m(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&E(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(V.a)(I.a.mark((function e(){var t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/activecampaign/tags"});case 4:t=e.sent,r=y,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.tag}])})),h(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&E(e.t0.message);case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return ct((function(){j(),R()}),[]),w?React.createElement(ot,{className:"presto-notice",status:"error",isDismissible:!1},w):React.createElement("div",null,o?React.createElement(Ve,null):b.length>1&&React.createElement(at,{label:rt("Choose a list","presto-player"),value:null==t?void 0:t.provider_list,options:b,onChange:function(e){return r({provider_list:e})}}),s?React.createElement(Ve,null):y.length>1&&React.createElement(at,{label:rt("Choose a tag","presto-player"),value:null==t?void 0:t.provider_tag,options:y,onChange:function(e){return r({provider_tag:e})}}))},ut=wp.i18n.__,pt=wp.components,dt=pt.SelectControl,bt=pt.Notice,mt=wp.element,vt=mt.useEffect,ft=mt.useState,yt=function(e){var t=e.options,r=e.updateEmailState,n=ft(!1),a=Object(U.a)(n,2),o=a[0],l=a[1],c=ft(!1),i=Object(U.a)(c,2),s=i[0],u=i[1],p=ft([{value:null,label:ut("Choose a list","presto-player")}]),d=Object(U.a)(p,2),b=d[0],m=d[1],v=ft([{value:null,label:ut("Choose a tag","presto-player")}]),f=Object(U.a)(v,2),y=f[0],h=f[1],g=ft(""),O=Object(U.a)(g,2),w=O[0],E=O[1],j=function(){var e=Object(V.a)(I.a.mark((function e(){var t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/fluentcrm/lists"});case 4:t=e.sent,r=b,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.title||e.slug}])})),m(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&E(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(V.a)(I.a.mark((function e(){var t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/fluentcrm/tags"});case 4:t=e.sent,r=y,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.title||e.slug}])})),h(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&E(e.t0.message);case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return vt((function(){j(),R()}),[]),w?React.createElement(bt,{className:"presto-notice",status:"error",isDismissible:!1},w):React.createElement("div",null,o?React.createElement(Ve,null):b.length>1&&React.createElement(dt,{label:ut("Choose a list","presto-player"),value:null==t?void 0:t.provider_list,options:b,onChange:function(e){return r({provider_list:e})}}),s?React.createElement(Ve,null):y.length>1&&React.createElement(dt,{label:ut("Choose a tag","presto-player"),value:null==t?void 0:t.provider_tag,options:y,onChange:function(e){return r({provider_tag:e})}}))},ht=wp.i18n.__,gt=wp.components,Ot=gt.SelectControl,wt=gt.Button,Et=gt.Flex,jt=gt.Icon,Rt=wp.element,_t=Rt.useEffect,kt=Rt.useState,Pt=function(e){var t=e.options,r=e.updateEmailState,n=kt(!1),a=Object(U.a)(n,2),o=a[0],l=a[1],c=kt([{value:"none",label:ht("None","presto-player")}]),i=Object(U.a)(c,2),s=i[0],u=i[1],p=kt(""),d=Object(U.a)(p,2),b=d[0],m=d[1],v={presto_player_activecampaign:{label:"ActiveCampaign",value:"activecampaign"},presto_player_mailchimp:{label:"MailChimp",value:"mailchimp"},presto_player_mailerlite:{label:"MailerLite",value:"mailerlite"},presto_player_fluentcrm:{label:"FluentCRM",value:"fluentcrm"}},f=function(){var e=Object(V.a)(I.a.mark((function e(){var t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),m(""),e.prev=2,e.next=5,wp.apiFetch({path:"wp/v2/settings"});case 5:t=e.sent,r=s,Object.keys(t).forEach((function(e){var n;(null==v?void 0:v[e])&&(null===(n=t[e])||void 0===n?void 0:n.connected)&&(r=[].concat(Object(ne.a)(r),[v[e]]))})),u(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&m(e.t0.message);case 14:return e.prev=14,l(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();_t((function(){f()}),[]);return o?React.createElement(Ve,null):React.createElement("div",null,b,s.length>1?React.createElement("div",null,React.createElement(Ot,{label:ht("Choose an email provider","presto-player"),value:null==t?void 0:t.provider,options:s,onChange:function(e){return r({provider:e})}}),function(){var e=s.find((function(e){return e.value===(null==t?void 0:t.provider)}));if(Object.keys(e||{}).length)switch(null==t?void 0:t.provider){case"mailchimp":return React.createElement(qe,{options:t,updateEmailState:r});case"mailerlite":return React.createElement(tt,{options:t,updateEmailState:r});case"activecampaign":return React.createElement(st,{options:t,updateEmailState:r});case"fluentcrm":return React.createElement(yt,{options:t,updateEmailState:r})}}()):React.createElement(Et,null,React.createElement(wt,{target:"_blank",href:"/wp-admin/edit.php?post_type=pp_video_block&page=presto-player-settings#/integrations",isSecondary:!0,isSmall:!0},ht("Connect a provider","presto-player")),React.createElement(wt,{isSmall:!0,onClick:function(e){e.preventDefault(),f()}},React.createElement(jt,{icon:"update"}))))};function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var St=wp.i18n.__,Nt=wp.components,Dt=Nt.ToggleControl,Tt=Nt.BaseControl,Bt=Nt.RangeControl,Lt=Nt.TextControl,At=Nt.TextareaControl,It=function(e){var t=e.state,r=e.updateState,n=e.className,a=t.email_collection,o=function(e){r(Ct(Ct({},t),{},{email_collection:Ct(Ct({},a),e)}))};return React.createElement("div",{className:n},React.createElement(Tt,null,React.createElement("h3",null,St("Email Capture","presto-player"))),React.createElement(Tt,{className:"presto-player__control--large-play"},React.createElement(Dt,{label:St("Enable","presto-player"),help:St("Show an email collection form and message over your video.","presto-player"),onChange:function(e){o({enabled:e})},checked:null==a?void 0:a.enabled})),!!(null==a?void 0:a.enabled)&&React.createElement(React.Fragment,null,React.createElement(Tt,{className:"presto-player__control--percentage-watched"},React.createElement(Bt,{label:St("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){o({percentage:e})},marks:[{value:0,label:"Start"},{value:50,label:"50% Watched"},{value:100,label:"End"}],shiftStep:5,value:(null==a?void 0:a.percentage)||0})),React.createElement(Tt,{className:"presto-player__control--large-play"},React.createElement(Dt,{label:St("Allow Skipping","presto-player"),help:St("Let the viewer skip","presto-player"),onChange:function(e){o({allow_skip:e})},checked:null==a?void 0:a.allow_skip})),React.createElement(Tt,{className:"presto-player__control--large-play"},React.createElement(At,{label:St("Headline","presto-player"),help:St("The headline for your form.","presto-player"),value:null==a?void 0:a.headline,onChange:function(e){o({headline:e})}})),React.createElement(Tt,{className:"presto-player__control--large-play"},React.createElement(At,{label:St("Bottom Text","presto-player"),help:St("Text displayed below the form. HTML allowed.","presto-player"),value:null==a?void 0:a.bottom_text,onChange:function(e){o({bottom_text:e})}})),React.createElement(Tt,{className:"presto-player__control--large-play"},React.createElement(Lt,{label:St("Play Button Text","presto-player"),help:React.createElement("p",null,St("Submit button text","presto-player")),value:null==a?void 0:a.button_text,onChange:function(e){return o({button_text:e})}})),React.createElement("h3",null,St("Integrate","presto-player")),React.createElement(Tt,null,React.createElement(Pt,{updateEmailState:o,options:a})),React.createElement("h3",null,St("Style","presto-player")),React.createElement(Tt,null,React.createElement(Bt,{label:St("Round Corners","presto-player"),help:St("Border radius of form elements.","presto-player"),value:(null==a?void 0:a.border_radius)||0,onChange:function(e){return o({border_radius:e})},min:0,max:25}))))},Vt=r(0),Ut=wp.components,Ft=Ut.ColorPicker,Mt=Ut.ColorIndicator,zt=Ut.Popover,Ht=Ut.Button,Wt=(Ut.Flex,wp.element),Yt=Wt.useState,Gt=Wt.useEffect,qt=function(e){var t=e.color,r=e.setColor,n=Yt(!1),a=Object(U.a)(n,2),o=a[0],l=a[1],c=Yt(t),i=Object(U.a)(c,2),s=i[0],u=i[1];return Gt((function(){o&&t&&u(t)}),[o]),Object(Vt.b)("span",null,Object(Vt.b)(Mt,{css:{width:"25px",height:"25px",borderRadius:"9999px"},colorValue:t,onClick:function(){return l(!o)}}),!!o&&Object(Vt.b)(zt,{position:"bottom left"},Object(Vt.b)(Ft,{color:t||"",onChangeComplete:function(e){return(null==e?void 0:e.hex)&&r(e)},disableAlpha:!0}),Object(Vt.b)("div",{css:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px"}},Object(Vt.b)(Ht,{css:{margin:"0 5px"},isTertiary:!0,onClick:function(){r({hex:null}),l(!1)}},"Reset"),Object(Vt.b)("div",{css:{display:"flex",justifyContent:"flex-end",padding:"10px"}},Object(Vt.b)(Ht,{css:{margin:"0 5px"},isTertiary:!0,onClick:function(){r({hex:s}),l(!1)}},"Cancel"),Object(Vt.b)(Ht,{isPrimary:!0,onClick:function(){return l(!1)}},"Apply")))))},Zt=r(4);function Kt(){var e=Object(Zt.a)(["\n                cursor: pointer;\n                opacity: 0.75;\n                margin: 0 2px;\n                fontsize: 18px;\n                width: 18px;\n                height: 18px;\n\n                &:hover {\n                  color: #cc1818;\n                }\n              "]);return Kt=function(){return e},e}function Qt(){var e=Object(Zt.a)(["\n              display: flex;\n              align-items: center;\n            "]);return Qt=function(){return e},e}function Xt(){var e=Object(Zt.a)(["\n                  cursor: pointer;\n                  opacity: 0.75;\n                  margin: 0 2px;\n                  font-size: 16px;\n                  width: 16px;\n                  height: 16px;\n                  text-decoration: none;\n                "]);return Xt=function(){return e},e}function Jt(){var e=Object(Zt.a)(["\n                padding: 10px;\n                background: #f3f3f3;\n                border-radius: 4px;\n                width: 100%;\n                display: inline-flex;\n                align-items: center;\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                text-decoration: none;\n              "]);return Jt=function(){return e},e}function $t(){var e=Object(Zt.a)(["\n              max-width: 85%;\n              overflow: hidden;\n              display: flex;\n              align-items: center;\n            "]);return $t=function(){return e},e}function er(){var e=Object(Zt.a)(["\n            display: flex;\n            justify-content: space-between;\n          "]);return er=function(){return e},e}function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nr=wp.i18n.__,ar=wp.components,or=ar.Button,lr=ar.Popover,cr=ar.Icon,ir=wp.blockEditor.__experimentalLinkControl,sr=wp.element.useState,ur=wp.url.prependHTTP,pr=function(e){var t=e.setSettings,r=e.settings,n=sr(!1),a=Object(U.a)(n,2),o=a[0],l=a[1],c=r.url,i=sr(),s=Object(U.a)(i,2),u=s[0],p=s[1],d=rr({url:null==r?void 0:r.url,type:null==r?void 0:r.type,id:null==r?void 0:r.id,opensInNewTab:"_blank"===(null==r?void 0:r.target)},u),b=function(e){e=rr(rr({},u),e);var r=d.opensInNewTab!==e.opensInNewTab&&d.url===e.url&&void 0===e.url;if(p(r?e:void 0),!r){var n=ur(e.url);t({url:n,type:e.type,id:void 0!==e.id&&null!==e.id?String(e.id):void 0,opensInNewTab:e.opensInNewTab})}};return Object(Vt.b)("span",null,c?Object(Vt.b)("div",{css:Object(Vt.a)(er())},Object(Vt.b)("div",{css:Object(Vt.a)($t())},Object(Vt.b)("a",{href:"#",css:Object(Vt.a)(Jt()),onClick:function(){return l(!o)}},Object(Vt.b)(cr,{icon:"edit",css:Object(Vt.a)(Xt())}),c),o&&Object(Vt.b)(lr,{position:"bottom center",onClose:function(){return l(!1)}},Object(Vt.b)(ir,{value:r,onChange:b}))),Object(Vt.b)("div",{css:Object(Vt.a)(Qt())},Object(Vt.b)(cr,{onClick:function(){confirm(nr("Are you sure you wish to remove this link?","presto-player"))&&t({})},icon:"trash",className:"presto-icon",css:Object(Vt.a)(Kt())}))):Object(Vt.b)("span",null,Object(Vt.b)(or,{isPrimary:!0,isSmall:!0,onClick:function(){return l(!o)}},nr("Add Link","presto-player")),o&&Object(Vt.b)(lr,{position:"bottom center",onClose:function(){return l(!1)}},Object(Vt.b)(ir,{value:r,onChange:b}))))};function dr(){var e=Object(Zt.a)(["\n          margin-bottom: 1em;\n        "]);return dr=function(){return e},e}function br(){var e=Object(Zt.a)(["\n          margin-bottom: 1em;\n        "]);return br=function(){return e},e}function mr(){var e=Object(Zt.a)(["\n          margin-bottom: 0 !important;\n        "]);return mr=function(){return e},e}function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yr=wp.i18n.__,hr=wp.components,gr=hr.TextControl,Or=hr.ExternalLink,wr=hr.Button,Er=(hr.Flex,wp.element),jr=Er.useState,Rr=Er.useEffect,_r=wp.data,kr=_r.useSelect,Pr=_r.dispatch,xr=function(e){var t=e.onClose,r=jr(""),n=Object(U.a)(r,2),a=n[0],o=n[1],l=jr(!1),c=Object(U.a)(l,2),i=c[0],s=c[1],u=wp.data.useSelect((function(e){return e("core").canUser("read","settings")})),p=kr((function(e){return e("presto-player/player").youtube()}));Rr((function(){o(p.channel_id)}),[null==p?void 0:p.channel_id]);var d=function(){var e=Object(V.a)(I.a.mark((function e(r){var n,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),s(!0),Pr("presto-player/player").updateYoutube({channel_id:a}),n=fr(fr({},p),{channel_id:a}),e.prev=4,e.next=7,wp.apiFetch({path:"wp/v2/settings",method:"POST",data:{presto_player_youtube:n}});case 7:(null==(o=e.sent)?void 0:o.presto_player_youtube)&&(Pr("presto-player/player").setYoutube(null==o?void 0:o.presto_player_youtube),t()),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,11,13,16]])})));return function(t){return e.apply(this,arguments)}}();return u?Object(Vt.b)("form",{onSubmit:d},Object(Vt.b)(gr,{css:Object(Vt.a)(mr()),label:yr("Youtube Channel ID","presto-player"),help:Object(Vt.b)("p",null,Object(Vt.b)(Or,{href:"https://support.google.com/youtube/answer/3250431?hl=en"},yr("Find my channel id","presto-player"))),value:a,onChange:function(e){return o(e)}}),Object(Vt.b)(wr,{disabled:i,isBusy:i,css:Object(Vt.a)(br()),isPrimary:!0,type:"submot"},yr("Save","presto-player")),Object(Vt.b)(wr,{onClick:t,css:Object(Vt.a)(dr()),isTertiary:!0},yr("Cancel","presto-player"))):""};function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nr=wp.i18n.__,Dr=wp.components,Tr=Dr.ToggleControl,Br=Dr.Flex,Lr=Dr.Button,Ar=Dr.BaseControl,Ir=Dr.RangeControl,Vr=Dr.TextControl,Ur=Dr.SelectControl,Fr=Dr.TextareaControl,Mr=wp.element,zr=Mr.useEffect,Hr=Mr.useState,Wr=wp.data.useSelect,Yr=function(e){var t=e.state,r=e.updateState,n=e.className,a=t.action_bar,o=Hr(!1),l=Object(U.a)(o,2),c=l[0],i=l[1],s=Wr((function(e){return e("presto-player/player").branding()})),u=Wr((function(e){return e("presto-player/player").youtube()})),p=function(e){r(Sr(Sr({},t),{},{action_bar:Sr(Sr({},a),e)}))};zr((function(){(null==a?void 0:a.text)||p({text:"Like this video?"}),(null==a?void 0:a.button_type)||p({button_type:"custom"}),(null==a?void 0:a.button_text)||p({button_text:"Click Here"})}),[t]);return React.createElement("div",{className:n},React.createElement(Ar,null,React.createElement("h3",null,Nr("Action Bar","presto-player"))),React.createElement(Ar,{className:"presto-player__control--large-play"},React.createElement(Tr,{label:Nr("Enable","presto-player"),help:Nr("Show an action bar below your video while it's playing.","presto-player"),onChange:function(e){p({enabled:e})},checked:null==a?void 0:a.enabled})),!!(null==a?void 0:a.enabled)&&React.createElement(React.Fragment,null,React.createElement(Ar,{className:"presto-player__control--percentage-watched"},React.createElement(Ir,{label:Nr("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){p({percentage_start:e})},marks:[{value:0,label:"Start"},{value:50,label:"50% Watched"},{value:100,label:"End"}],shiftStep:5,value:(null==a?void 0:a.percentage_start)||0})),React.createElement(Ar,{className:"presto-player__control--large-play"},React.createElement(Fr,{label:Nr("Text","presto-player"),help:Nr("Action bar text.","presto-player"),value:null==a?void 0:a.text,onChange:function(e){return p({text:e})}})),React.createElement(Ar,{className:"presto-player__control--large-play"},React.createElement(Br,null,React.createElement(Ar.VisualLabel,null,Nr("Action Bar Background","presto-player")),React.createElement(qt,{color:(null==a?void 0:a.background_color)||"#1d1d1d",setColor:function(e){return p({background_color:e&&e.hex})}}))),React.createElement(Ar,null,React.createElement("h3",null,Nr("Button","presto-player"))),React.createElement(Ar,{className:"presto-player__control--button-type"},React.createElement(Ur,{label:Nr("Button Type","presto-player"),value:null==a?void 0:a.button_type,options:[{value:"custom",label:Nr("Custom","presto-player")},{value:"youtube",label:Nr("YouTube Subscribe","presto-player")},{value:"none",label:Nr("None","presto-player")}],onChange:function(e){return p({button_type:e})}})),"youtube"===(null==a?void 0:a.button_type)&&(null==u?void 0:u.channel_id)&&React.createElement(Tr,{label:Nr("Show Count","presto-player"),help:Nr("Show your follower count.","presto-player"),onChange:function(e){p({button_count:e})},checked:null==a?void 0:a.button_count}),function(){if("youtube"===(null==a?void 0:a.button_type))return c?React.createElement(xr,{onClose:function(){return i(!1)}}):React.createElement("div",null,React.createElement(Lr,{isSecondary:!0,onClick:function(e){e.preventDefault(),i(!0)}},(null==u?void 0:u.channel_id)?Nr("Update Youtube Channel Id","presto-player"):Nr("Add Youtube Channel Id","presto-player")),React.createElement("br",null),React.createElement("br",null),React.createElement("br",null))}(),"custom"===(null==a?void 0:a.button_type)&&React.createElement("div",null,React.createElement(Ar,{className:"presto-player__control--button-text"},React.createElement(Vr,{label:Nr("Button Text","presto-player"),help:React.createElement("p",null,Nr("Submit button text","presto-player")),value:null==a?void 0:a.button_text,onChange:function(e){return p({button_text:e})}})),React.createElement(Ar,{className:"presto-player__control--button-text"},React.createElement(Ar.VisualLabel,null,React.createElement("p",null," ",Nr("Button Link","presto-player"))),React.createElement(pr,{setSettings:function(e){p({button_link:e})},settings:(null==a?void 0:a.button_link)||{}})),React.createElement(Ar,{className:"presto-player__control--button-radius"},React.createElement(Ir,{label:Nr("Round Corners","presto-player"),help:Nr("Border radius of the button","presto-player"),value:(null==a?void 0:a.button_radius)||0,onChange:function(e){return p({button_radius:e})},min:0,max:25})),React.createElement(Ar,{className:"presto-player__control--button-color"},React.createElement(Br,null,React.createElement(Ar.VisualLabel,null,Nr("Button Color","presto-player")),React.createElement(qt,{color:(null==a?void 0:a.button_color)||(null==s?void 0:s.color),setColor:function(e){return p({button_color:e&&e.hex})}}))))))},Gr=r(17),qr=r.n(Gr),Zr=wp.i18n.__,Kr=wp.element,Qr=Kr.useState,Xr=Kr.useEffect,Jr=lodash,$r=Jr.partial,en=Jr.noop,tn=Jr.find,rn=wp.components,nn=rn.NavigableMenu,an=rn.Animate,on=function(e){var t,r=e.className,n=e.children,o=e.items,l=e.title,c=e.orientation,i=void 0===c?"horizontal":c,s=e.activeClass,u=void 0===s?"is-active":s,p=e.onSelect,d=void 0===p?en:p,b=Qr(null),m=Object(U.a)(b,2),v=m[0],f=m[1],y=Qr("left"),h=Object(U.a)(y,2),g=(h[0],h[1]),O=function(e){f(e),d&&d(e)},w=function(e,t){t.click()},E=tn(o,{name:v}),j="".concat(null!==(t=null==E?void 0:E.name)&&void 0!==t?t:"none");return Xr((function(){g(v?"right":"left")}),[v]),React.createElement("div",{className:r},React.createElement(an,{type:"slide-in",origin:E?"right":"left"},(function(e){var t=e.className;return E?React.createElement("div",{key:j,"aria-labelledby":j,role:"itempanel",id:"".concat(j,"-view"),className:qr()(t,"presto-player__menu-content")},React.createElement("div",{className:"presto-player__menu-items"},React.createElement("div",{className:"presto-player__menu-item is-back-button",onClick:function(){return O("")}},React.createElement("svg",{class:"back-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",role:"img","aria-hidden":"true",focusable:"false"},React.createElement("path",{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),Zr("Back","presto-player"))),n(E)):React.createElement("div",{className:qr()(t,"is-from-right")},!!l&&React.createElement("h2",null,l),React.createElement(nn,{role:"itemlist",orientation:i,onNavigate:w,className:qr()("presto-player__menu-items")},o.map((function(e){return React.createElement("div",{className:qr()("presto-player__menu-item",e.className,Object(a.a)({},u,e.name===v)),itemId:"".concat(e.name),"aria-controls":"".concat(e.name,"-view"),selected:e.name===v,key:e.name,onClick:$r(O,e.name)},!!e.icon&&React.createElement("div",{class:"presto-player__menu-icon"},e.icon),e.title,React.createElement("svg",{className:"submenu-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",role:"img",ariaHidden:"true",focusable:"false"},React.createElement("path",{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})))}))))})))},ln=r(12),cn=r(28),sn=wp.i18n.__,un=wp.components.Disabled,pn=wp.element,dn=pn.useState,bn=pn.useEffect,mn=(wp.data.useSelect,function(e){var t=e.state,r=e.branding,n=e.menu,a=dn(1),o=Object(U.a)(a,2),l=o[0],c=o[1],i=t.email_collection;bn((function(){c(l+1)}),[t.skin,t["play-large"],t.rewind,t.play,t["fast-forward"],t.progress,t["current-time"],t.mute,t.volume,t.speed,t.pip,t.fullscreen,t.hide_logo]);var s={email:!!(null==i?void 0:i.enabled)&&React.createElement(cn.a,{className:"email-overlay",slot:"player-end",headline:null==i?void 0:i.headline,defaultHeadline:sn("Enter your email to watch this video.","presto-player"),bottomText:null==i?void 0:i.bottom_text,allowSkip:null==i?void 0:i.allow_skip,skipText:sn("Skip","presto-player"),buttonText:null==i?void 0:i.button_text,placeholder:sn("Email address","presto-player")})};return React.createElement(un,null,React.createElement("div",{className:"presto-player__wrapper"},React.createElement(ln.a,{preset:t,branding:r,attributes:{chapters:[],poster:"https://source.unsplash.com/daily"},setAttributes:function(){},key:l,adminPreview:s[n]})))});function vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yn=wp.i18n.__,hn=wp.components,gn=hn.TextControl,On=hn.BaseControl,wn=(hn.TabPanel,hn.Icon),En=(hn.Animate,hn.Notice),jn=hn.Button,Rn=hn.Flex,_n=(hn.Panel,hn.PanelBody,hn.FlexItem),kn=hn.SelectControl,Pn=hn.FlexBlock,xn=(hn.Disabled,hn.Modal),Cn=wp.element,Sn=Cn.useState,Nn=(Cn.useEffect,wp.data.useSelect);var Dn=function(e){var t=e.type,r=void 0===t?"new":t,n=e.closeModal,a=e.addPreset,o=e.onSave,l=e.updatePreset,c=e.name,i=void 0===c?"":c,s=e.preset,u=void 0===s?{"play-large":!0,rewind:!0,play:!0,"fast-forward":!0,progress:!0,"current-time":!0,mute:!0,volume:!0,speed:!1,pip:!1,fullscreen:!0,save_player_position:!1,reset_on_end:!1,auto_hide:!0,sticky_scroll:!1,hide_logo:!1,border_radius:0,skin:"default",caption_style:"default",caption_background:"#000000",hide_youtube:!1,lazy_load_youtube:!1,email_collection:{},action_bar:{}}:s,p=Sn(!1),d=Object(U.a)(p,2),b=d[0],m=d[1],v=Sn(""),f=Object(U.a)(v,2),y=f[0],h=f[1],g=Sn(""),O=Object(U.a)(g,2),w=O[0],E=O[1],j=Sn(i),R=Object(U.a)(j,2),_=R[0],k=R[1],P=Sn(u),x=Object(U.a)(P,2),C=x[0],S=x[1],N=Nn((function(e){return e("presto-player/player").branding()})),D={message:yn("The preset could not be saved. Please reload the page and try again.","presto-player")},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(fn(fn({},C),e))},B=function(){var e=Object(V.a)(I.a.mark((function e(){var t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,t=fn(fn({},C),{name:_}),e.next=5,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"preset/").concat(u.id),{_method:"PUT"}),data:t});case 5:if(r=e.sent){e.next=8;break}throw D;case 8:l(r),n(),o&&o(r),Object(he.a)({message:yn("Preset updated!","presto-player")}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),h((null===e.t0||void 0===e.t0?void 0:e.t0.message)?e.t0.message:D);case 17:return e.prev=17,m(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(V.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,wp.apiFetch({method:"POST",url:prestoPlayer.root+prestoPlayer.prestoVersionString+"preset",data:fn(fn({},{name:_}),C)});case 4:if(t=e.sent){e.next=7;break}throw D;case 7:a(t),n(),o&&o(t),Object(he.a)({message:yn("Preset created!","presto-player")}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),h((null===e.t0||void 0===e.t0?void 0:e.t0.message)?e.t0.message:D);case 16:return e.prev=16,m(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),A=[{name:"controls",title:yn("Controls","presto-player"),icon:React.createElement(wn,{icon:"admin-settings"}),component:React.createElement(je,{updateState:T,state:C})},{name:"behavior",title:yn("Behavior","presto-player"),icon:React.createElement(wn,{icon:"admin-generic"}),component:React.createElement(Ce,{updateState:T,state:C})},{name:"style",title:yn("Style","presto-player"),icon:React.createElement(wn,{icon:"admin-customizer"}),component:React.createElement(Ie,{updateState:T,state:C})},{name:"email",title:yn("Email Capture","presto-player"),icon:React.createElement(wn,{icon:"email"}),component:React.createElement(It,{updateState:T,state:C})},{name:"action_bar",title:yn("Action Bar","presto-player"),icon:React.createElement(wn,{icon:"cover-image"}),component:React.createElement(Yr,{updateState:T,state:C})}];return React.createElement(xn,{title:yn("edit"==r?"Edit A Video Preset":"Create A New Video Preset","presto-player"),onRequestClose:n,className:"presto-player__modal-presets",overlayClassName:"presto-player__modal-presets-overlay"},React.createElement("div",{className:"presto-player__preset-options","data-cy":"preset-modal"},React.createElement(gn,{value:_,hideLabelFromVision:!0,label:yn("Preset Name","presto-player"),onChange:function(e){return k(e)},placeholder:yn("Enter a preset name...","presto-player"),className:"presto-player__modal--style-name",autoFocus:!0}),React.createElement(Rn,{align:"stretch",className:"presto-player__style-preview-area"},React.createElement(_n,{className:"presto-player__style-sidebar"},React.createElement("div",null,React.createElement(on,{items:A,title:yn("Customize","presto-player"),onSelect:E},(function(e){return e.component})))),React.createElement(Pn,{className:"presto-player__style-preview-panel"},React.createElement("div",{style:{position:"absolute",top:0,left:0,padding:"20px"}},React.createElement(kn,{label:yn("Skin","presto-player"),labelPosition:"side",value:null==C?void 0:C.skin,hideLabelFromVision:!0,options:[{label:yn("Basic","presto-player"),value:"default"},{label:yn("Stacked","presto-player"),value:"stacked"}],onChange:function(e){T({skin:e})}})),React.createElement(mn,{state:C,branding:N,menu:w}))),React.createElement("br",null),y&&React.createElement(On,null,React.createElement(En,{className:"presto-player__modal--error-notice",status:"error",isDismissible:!1,style:{margin:0}},y.replace(/(<([^>]+)>)/gi,""))),React.createElement("div",{style:{textAlign:"right"}},React.createElement(jn,{isTertiary:!0,onClick:n,style:{margin:"0 6px"}},yn("Cancel","presto-player")),React.createElement(jn,{isPrimary:!0,isBusy:b,disabled:b,onClick:function(){if(_)return"edit"===r?B():L();h(yn("You must enter a name for the preset.","presto-player"))},"data-cy":"submit-preset"},yn("edit"==r?"Update Preset":"Create Preset","presto-player")))))},Tn=wp.i18n.__,Bn=wp.components,Ln=Bn.Icon,An=Bn.Spinner,In=Bn.Modal,Vn=Bn.Button,Un=Bn.ButtonGroup,Fn=wp.element.useState,Mn=function(e){var t,r,n=e.preset,a=e.index,o=e.isActive,l=e.remove,c=e.setPreset,i=e.onEdit,s=Fn(!1),u=Object(U.a)(s,2),p=u[0],d=u[1],b=Fn(!1),m=Object(U.a)(b,2),v=m[0],f=m[1],y=function(){return f(!1)},h=function(){var e=Object(V.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id){e.next=3;break}return l(n),e.abrupt("return");case 3:return e.prev=3,d(!0),e.next=7,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"preset/").concat(n.id),{_method:"DELETE"})});case 7:e.sent&&(l(n),wp.data.dispatch("core/notices").createNotice("success",Tn("Preset trashed.","presto-player"),{type:"snackbar",isDismissible:!0})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&wp.data.dispatch("core/notices").createNotice("error",e.t0.message,{type:"snackbar",isDismissible:!0});case 15:return e.prev=15,f(!1),d(!1),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[3,11,15,19]])})));return function(){return e.apply(this,arguments)}}();return p?React.createElement("div",{className:"block-editor-block-styles__item",role:"button",tabIndex:a,"aria-label":"Fill",style:{color:o?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:o?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0,display:"flex","align-items":"center","justify-content":"center"}},React.createElement(An,null))):React.createElement("div",{className:"block-editor-block-styles__item presto-preset-".concat(n.slug),onClick:function(){c(n)},role:"button",tabIndex:a,"aria-label":"Fill",style:{color:o?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:o?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0}},React.createElement("div",{style:{textAlign:"center",width:"100%",color:o?"var(--wp-admin-theme-color)":"inherit",opacity:o?1:.75}},(null==n?void 0:n.icon)?React.createElement(Ln,{icon:null==n?void 0:n.icon,style:{fontSize:"30px",width:"30px",height:"30px"}}):React.createElement("h1",{style:{opacity:.75}},(null==n||null===(t=n.name)||void 0===t||null===(r=t.charAt(0))||void 0===r?void 0:r.toUpperCase())||"Untitled"))),React.createElement("div",{className:"block-editor-block-styles__item-label",style:{fontWeight:"bold",textTransform:"capitalize"}},(null==n?void 0:n.name)||"Untitled"),!(null==n?void 0:n.is_locked)&&React.createElement("div",{className:"block-editor-block-styles__item-edit"},React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:i},React.createElement(Ln,{icon:"edit"})),React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:function(){return f(!0)}},React.createElement(Ln,{icon:"trash"}))),v&&React.createElement(In,{title:Tn("Trash Preset?","presto-player"),onRequestClose:y,style:{maxWidth:"250px"}},React.createElement("p",null,React.createElement("strong",null,Tn("Warning!","presto-player")," "),Tn("Any videos assigned to this preset will automatically use the default preset.","presto-player")),React.createElement(Un,null,React.createElement(Vn,{isDestructive:!0,onClick:h,style:{margin:"0 4px"}},Tn("Trash","presto-player")),React.createElement(Vn,{isTertiary:!0,onClick:y,style:{margin:"0 4px",boxShadow:"none"}},Tn("Cancel","presto-player")))))},zn=wp.i18n.__,Hn=wp.components,Wn=Hn.withNotices,Yn=Hn.BaseControl,Gn=Hn.Spinner,qn=Hn.Button,Zn=wp.element,Kn=Zn.useState,Qn=Zn.useEffect,Xn=wp.data,Jn=Xn.useSelect,$n=Xn.dispatch;var ea=Wn((function(e){var t,r=e.attributes,a=e.setAttributes,o=Kn(!1),l=Object(U.a)(o,2),c=l[0],i=l[1],s=function(){return i(!1)},u=Kn(null),p=Object(U.a)(u,2),d=p[0],b=p[1],m=Kn(null),v=Object(U.a)(m,2),f=v[0],y=v[1],h=Kn(!0),g=Object(U.a)(h,2),O=g[0],w=g[1],E=Jn((function(e){return e("presto-player/player").getPresets()})),j=function(e){$n("presto-player/player").addPreset(e)},R=function(e){$n("presto-player/player").removePreset(e)};Qn((function(){w(!E.length)}),[E]);var _=function(e){a({preset:e.id})};return O?React.createElement("div",{className:"presto-settings__loading"},React.createElement(Gn,null)):React.createElement(React.Fragment,null,E.length?React.createElement("p",null,zn("Select a video configuration preset, or add your own.","presto-player")):"",React.createElement(Yn,null,React.createElement("div",{className:"block-editor-block-styles"},(E||[]).length?E.map((function(e,t){return React.createElement(Mn,{setPreset:_,index:t,isActive:(null==r?void 0:r.preset)===e.id,preset:e,key:e.id,onEdit:function(){y(e.name),b(e),i("edit")},remove:R})})):zn("No style presets. You can create a new style by clicking 'Add New Style'.","presto-plugin"))),React.createElement(Yn,null,React.createElement(qn,{isPrimary:!0,"data-cy":"add-new-preset",onClick:function(){var e;(null===(e=prestoPlayer)||void 0===e?void 0:e.isPremium)?i("new"):$n("presto-player/player").setProModal(!0)}},zn("Add New Preset","presto-player")),!(null===(t=prestoPlayer)||void 0===t?void 0:t.isPremium)&&React.createElement(n.a,null)),"new"==c&&React.createElement(Dn,{closeModal:s,addPreset:j,type:"new",onSave:_}),"edit"==c&&React.createElement(Dn,{closeModal:s,addPreset:j,updatePreset:function(e){$n("presto-player/player").updatePreset(e)},type:"edit",preset:d,name:f}))})),ta=wp.components.PanelBody,ra=wp.i18n.__;t.a=function(e){var t,r,a=e.attributes,o=e.setAttributes;return React.createElement(React.Fragment,null,React.createElement(ta,{title:React.createElement(React.Fragment,null,ra("Chapters","presto-player")," ",!(null===(t=prestoPlayer)||void 0===t?void 0:t.isPremium)&&React.createElement(n.a,null)),initialOpen:null===(r=prestoPlayer)||void 0===r?void 0:r.isPremium},React.createElement(ye,{setAttributes:o,attributes:a})),React.createElement(ta,{title:ra("Video settings","presto-player")},React.createElement(L,{setAttributes:o,attributes:a})),React.createElement(ta,{title:ra("Video Preset","presto-player")},React.createElement(ea,{setAttributes:o,attributes:a})),React.createElement(ta,{title:ra("Global Player Branding","presto-player"),initialOpen:!1},React.createElement(re,{setAttributes:o,attributes:a})))}},function(e,t,r){"use strict";var n=r(2),a=r.n(n),o=r(3),l=r(5),c=r(1),i=r(13),s=wp.apiFetch;s.use(s.createNonceMiddleware(prestoPlayer.nonce)),s.use(s.createRootURLMiddleware(prestoPlayer.root+prestoPlayer.prestoVersionString));var u=s;function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=wp.compose.createHigherOrderComponent,m=wp.element,v=m.useEffect,f=m.useState;t.a=function(){return b((function(e){return function(t){var r=t.presets,n=t.attributes,o=t.setAttributes,s=t.defaultPreset,p=t.isSelected,b=t.branding,m=f({}),y=Object(c.a)(m,2),h=y[0],g=y[1],O=f(1),w=Object(c.a)(O,2),E=w[0],j=w[1],R=n.poster,k=n.chapters;v((function(){p&&(null==n?void 0:n.id)&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")}),[p]),v((function(){p&&(null==n?void 0:n.selectionOverrideClientId)&&wp.data.dispatch("core/block-editor").selectBlock(null==n?void 0:n.selectionOverrideClientId)}),[p]),v((function(){if(r&&r.length){var e=r.find((function(e){return e.id===(null==n?void 0:n.preset)}));e?g(e):(g(s),o({preset:null==s?void 0:s.id}))}}),[r,null==n?void 0:n.preset]),v((function(){P()}),[R,h,k,b.logo]);var P=function(){j(E+1)},x=Object(i.b)(k);v((function(){var e=null==k?void 0:k.map((function(e){return e.time})),t=null==x?void 0:x.map((function(e){return e.time}));_.difference(e,t).length&&P()}),[k]);var C=function(){var e=Object(l.a)(a.a.mark((function e(t){var r,n,l,c,i,s,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.src,n=t.external_id,l=t.attachment_id,c=t.type,i=t.title,r||n||l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u({method:"POST",path:"/presto-player/v1/videos",data:d(d({attachment_id:l,post_id:wp.data.select("core/editor").getCurrentPostId(),external_id:n},i?{title:i}:{}),{},{src:r,type:c})});case 5:s=e.sent,p=s.id,o({id:p});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(null==n?void 0:n.preset)||o({preset:null==s?void 0:s.id}),React.createElement(e,Object.assign({},t,{lockSave:function(){return wp.data.dispatch("core/editor").lockPostSaving("presto-player")},unlockSave:function(){return wp.data.dispatch("core/editor").unlockPostSaving("presto-player")},createVideo:C,onUpdate:P,onRemoveSrc:function(){confirm("Remove this video?")&&o(d(d(d(d({src:"",id:void 0},(null==n?void 0:n.thumbnail)?{thumbnail:null}:{}),(null==n?void 0:n.preview)?{preview:null}:{}),(null==n?void 0:n.previewSrc)?{previewSrc:null}:{}),(null==n?void 0:n.previewThumbnail)?{previewThumbnail:null}:{}))},presetData:h,setPresetData:g,renderKey:E}))}}),"withPlayerEdit")}},,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var n=r(6),a=r(33),o=r(1),l=r(3);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=wp.i18n,u=s.__,p=s.sprintf,d=wp.components,b=d.NavigableMenu,m=d.MenuItem,v=d.FormFileUpload,f=d.MenuGroup,y=d.ToolbarGroup,h=d.ToolbarButton,g=d.Dropdown,O=(d.SVG,d.Rect,d.Path,d.Button),w=d.TextControl,E=(d.SelectControl,wp.blockEditor),j=E.MediaUpload,R=E.MediaUploadCheck,_=wp.data.useSelect,k=wp.element.useState,P=["text/vtt"],x=React.createElement("svg",{viewBox:"0 0 29 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5014 20.2854H28.6316V0.764648H0.110825V20.2854H11.241L14.3712 24.2854L17.5014 20.2854ZM14.3712 21.0401L16.5269 18.2854H26.6316V2.76465H2.11082V18.2854H12.2155L14.3712 21.0401Z"}),React.createElement("path",{d:"M10.4503 14.9446C9.56226 14.9446 8.76226 14.7606 8.05026 14.3926C7.33826 14.0166 6.77826 13.4966 6.37026 12.8326C5.97026 12.1606 5.77026 11.4006 5.77026 10.5526C5.77026 9.70464 5.97026 8.94864 6.37026 8.28464C6.77826 7.61264 7.33826 7.09264 8.05026 6.72464C8.76226 6.34864 9.56226 6.16064 10.4503 6.16064C11.2663 6.16064 11.9943 6.30464 12.6343 6.59264C13.2743 6.88064 13.8023 7.29664 14.2183 7.84064L12.4303 9.43664C11.9103 8.78064 11.2983 8.45264 10.5943 8.45264C10.0023 8.45264 9.52626 8.64464 9.16626 9.02864C8.80626 9.40464 8.62626 9.91264 8.62626 10.5526C8.62626 11.1926 8.80626 11.7046 9.16626 12.0886C9.52626 12.4646 10.0023 12.6526 10.5943 12.6526C11.2983 12.6526 11.9103 12.3246 12.4303 11.6686L14.2183 13.2646C13.8023 13.8086 13.2743 14.2246 12.6343 14.5126C11.9943 14.8006 11.2663 14.9446 10.4503 14.9446Z"}),React.createElement("path",{d:"M19.2042 14.9446C18.3162 14.9446 17.5162 14.7606 16.8042 14.3926C16.0922 14.0166 15.5322 13.4966 15.1242 12.8326C14.7242 12.1606 14.5242 11.4006 14.5242 10.5526C14.5242 9.70464 14.7242 8.94864 15.1242 8.28464C15.5322 7.61264 16.0922 7.09264 16.8042 6.72464C17.5162 6.34864 18.3162 6.16064 19.2042 6.16064C20.0202 6.16064 20.7482 6.30464 21.3882 6.59264C22.0282 6.88064 22.5562 7.29664 22.9722 7.84064L21.1842 9.43664C20.6642 8.78064 20.0522 8.45264 19.3482 8.45264C18.7562 8.45264 18.2802 8.64464 17.9202 9.02864C17.5602 9.40464 17.3802 9.91264 17.3802 10.5526C17.3802 11.1926 17.5602 11.7046 17.9202 12.0886C18.2802 12.4646 18.7562 12.6526 19.3482 12.6526C20.0522 12.6526 20.6642 12.3246 21.1842 11.6686L22.9722 13.2646C22.5562 13.8086 22.0282 14.2246 21.3882 14.5126C20.7482 14.8006 20.0202 14.9446 19.2042 14.9446Z"}));function C(e){var t,r=e.tracks,n=e.onEditPress;return t=0===r.length?React.createElement("p",{className:"block-library-video-tracks-editor__tracks-informative-message"},u("Captions are .vtt files that help make your content more accesible to a wider range of users.","presto-player")):r.map((function(e,t){return React.createElement("div",{key:t,className:"block-library-video-tracks-editor__track-list-track"},React.createElement("span",null,e.label," "),React.createElement(O,{isTertiary:!0,onClick:function(){return n(t)},"aria-label":p(u("Edit %s","presto-player"),e.label)},u("Edit","presto-player")))})),React.createElement(f,{label:u("Captions","presto-player"),className:"block-library-video-tracks-editor__track-list"},t)}function S(e){var t=e.track,r=e.onChange,n=e.onClose,a=e.onRemove,o=t.src,l=void 0===o?"":o,c=t.label,s=void 0===c?"":c,p=t.srcLang,d=void 0===p?"":p,m=(t.kind,l.startsWith("blob:")?"":l.substring(l.lastIndexOf("/")+1));return React.createElement(b,null,React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor"},React.createElement("span",{className:"block-library-video-tracks-editor__single-track-editor-edit-track-label"},u("Edit caption track","presto-player")),React.createElement("span",null,u("File","presto-player"),": ",React.createElement("b",null,m)),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-label-language"},React.createElement(w,{autoFocus:!0,onChange:function(e){return r(i(i({},t),{},{label:e}))},label:u("Label","presto-player"),value:s,help:u("Title of track","presto-player")}),React.createElement(w,{onChange:function(e){return r(i(i({},t),{},{srcLang:e}))},label:u("Source language","presto-player"),value:d,help:u("Language tag (en, fr, etc.)","presto-player")})),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-buttons-container"},React.createElement(O,{isSecondary:!0,onClick:function(){var e={},a=!1;""===s&&(e.label=u("English","presto-player"),a=!0),""===d&&(e.srcLang="en",a=!0),a&&r(i(i({},t),e)),n()}},u("Close","presto-player")),React.createElement(O,{isDestructive:!0,isLink:!0,onClick:a},u("Remove track","presto-player")))))}function N(e){var t=e.tracks,r=void 0===t?[]:t,l=e.onChange,c=_((function(e){return e("core/block-editor").getSettings().mediaUpload}),[]),s=k(null),p=Object(o.a)(s,2),d=p[0],O=p[1];return c?React.createElement(g,{contentClassName:"block-library-video-tracks-editor",renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return React.createElement(y,null,React.createElement(h,{label:u("Captions","presto-player"),showTooltip:!0,"aria-expanded":t,"aria-haspopup":"true",onClick:r,icon:x}))},renderContent:function(e){return Object(a.a)(e),null!==d?React.createElement(S,{track:r[d],onChange:function(e){var t=Object(n.a)(r);t[d]=e,l(t)},onClose:function(){return O(null)},onRemove:function(){l(r.filter((function(e,t){return t!==d}))),O(null)}}):React.createElement(React.Fragment,null,React.createElement(b,null,React.createElement(C,{tracks:r,onEditPress:O}),React.createElement(f,{className:"block-library-video-tracks-editor__add-tracks-container",label:u("Add caption languages","presto-player")},React.createElement(j,{onSelect:function(e){var t=e.url,a=r.length;l([].concat(Object(n.a)(r),[{src:t}])),O(a)},allowedTypes:P,render:function(e){var t=e.open;return React.createElement(m,{icon:"media",onClick:t},u("Open Media Library","presto-player"))}}),React.createElement(R,null,React.createElement(v,{onChange:function(e){var t=e.target.files,a=r.length;c({allowedTypes:P,filesList:t,onFileChange:function(e){var t=Object(o.a)(e,1)[0].url,c=Object(n.a)(r);c[a]||(c[a]={}),c[a]=i(i({},r[a]),{},{src:t}),l(c),O(a)}})},accept:".vtt,text/vtt",render:function(e){var t=e.openFileDialog;return React.createElement(m,{icon:"upload",onClick:function(){t()}},u("Upload","presto-player"))}})))))}}):null}},,,,function(e,t,r){"use strict";var n=r(1),a=wp.components,o=a.Button,l=a.Placeholder,c=a.TextControl,i=a.Flex,s=a.FlexItem,u=a.FlexBlock,p=wp.element.useState,d=wp.i18n.__;t.a=function(e){var t=e.attributes,r=(e.setAttributes,e.icon),a=e.onSelectURL,b=e.label,m=e.instructions,v=e.placeholder,f=t.src,y=p({src:f}),h=Object(n.a)(y,2),g=h[0],O=h[1];return React.createElement(l,{icon:r,label:b||d("Presto Embedded Video","presto-player"),instructions:m||d("Enter video URL","presto-player")},React.createElement("form",{onSubmit:function(e){e.preventDefault(),a(g.url)}},React.createElement(i,{style:{width:"100%",maxWidth:"400px"}},React.createElement(u,null,React.createElement(c,{type:"url",className:"presto-link-placeholder-input",placeholder:v||d("Youtube URL","presto-player"),value:g.url,onChange:function(e){return O({url:e})}})),React.createElement(s,null,React.createElement(o,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},d("Add Video","presto-player"))))))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"b",(function(){return k}));var n=r(29),a=r(24),o=r(25),l=r(18),c=r(30),i=r(26),s=r(19),u=r(3),p=r(7),d=r.n(p),b=r(9),m=function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))},v=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Element){var n=f(e.classList,t,r);""!==n&&(e.className=n),Object.keys(t).forEach((function(r){if("children"!==r&&"style"!==r&&"ref"!==r&&"class"!==r&&"className"!==r&&"forwardedRef"!==r)if(0===r.indexOf("on")&&r[2]===r[2].toUpperCase()){var n=r.substring(2),a=n[0].toLowerCase()+n.substring(1);"undefined"==typeof document||y(a,document)||h(e,a,t[r])}else{e[r]=t[r],"string"===Object(b.a)(t[r])?e.setAttribute(m(r),t[r]):e[r]=t[r]}}))}},f=function(e,t,r){var n=t.className||t.class,a=r.className||r.class,o=g(e),l=g(n?n.split(" "):[]),c=g(a?a.split(" "):[]),i=[];return o.forEach((function(e){l.has(e)?(i.push(e),l.delete(e)):c.has(e)||i.push(e)})),l.forEach((function(e){return i.push(e)})),i.join(" ")},y=function(e,t){var r="on"+e,n=r in t;if(!n){var a=t.createElement("div");a.setAttribute(r,"return;"),n="function"==typeof a[r]}return n},h=function(e,t,r){var n=e.__events||(e.__events={}),a=n[t];a&&e.removeEventListener(t,a),e.addEventListener(t,n[t]=function(e){r&&r.call(this,e)})},g=function(e){var t=new Map;return e.forEach((function(e){return t.set(e,e)})),t},O=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.forEach((function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)}))}};function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){Object(u.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(i.a)(this,r)}}var R=function(e,t,r){var i=e.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(""),s=function(t){Object(c.a)(p,t);var s=j(p);function p(e){var t;return Object(a.a)(this,p),t=s.call(this,e),Object(u.a)(Object(l.a)(t),"setComponentElRef",(function(e){t.componentEl=e})),t}return Object(o.a)(p,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){v(this.componentEl,this.props,e)}},{key:"render",value:function(){var t=this.props,a=t.children,o=t.forwardedRef,l=t.style,c=(t.className,t.ref,Object(n.a)(t,["children","forwardedRef","style","className","ref"])),i=Object.keys(c).reduce((function(e,t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var r=t.substring(2).toLowerCase();"undefined"!=typeof document&&y(r,document)&&(e[t]=c[t])}else e[t]=c[t];return e}),{});r&&(i=r(this.props,i));var s=E(E({},i),{},{ref:O(o,this.setComponentElRef),style:l});return d.a.createElement(e,s,a)}}],[{key:"displayName",get:function(){return i}}]),p}(d.a.Component);return t&&(s.contextType=t),function(e,t){var r=function(t,r){return d.a.createElement(e,Object.assign({},t,{forwardedRef:r}))};return r.displayName=t,d.a.forwardRef(r)}(s,i)};r(2),r(5),r(44),r(34);var _=R("presto-email-overlay-ui"),k=R("presto-player")},,,,,,,function(e,t,r){r(36),e.exports=r(51)},,,,function(e,t,r){},function(e,t,r){var n={"./bunny/index.js":50,"./hosted/index.js":52,"./reusable-display/index.js":54,"./reusable-edit/index.js":48,"./vimeo/index.js":55,"./youtube/index.js":56};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=40},,,function(e,t,r){},function(e,t){},,,,function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return f})),r.d(t,"options",(function(){return y}));var n=wp.i18n.__,a=wp.blockEditor,o=a.InnerBlocks,l=a.useBlockProps,c=wp.data,i=c.useSelect,s=c.dispatch,u=wp.components,p=u.Button,d=u.Placeholder,b=wp.plugins,m=(b.getPlugins,b.unregisterPlugin),v=wp.element.useEffect,f="presto-player/reusable-edit",y={title:"Reusable Block Container",category:"presto",supports:{inserter:!1,reusable:!1,html:!1},icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),React.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),edit:function(e){var t=l(),r=e.clientId,a=e.isSelected,c=i((function(e){return e("core/block-editor").getBlock(r).innerBlocks}));v((function(){a&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")}),[a]),s("core/block-editor").setTemplateValidity(!0),v((function(){m("presto-player")}),[]);var u,b=function(e){var t=wp.blocks.createBlock("presto-player/".concat(e));return s("core/block-editor").insertBlock(t,0,r)};return(null==c?void 0:c.length)?React.createElement("div",null,React.createElement("div",t,React.createElement(o,{templateLock:!1,renderAppender:function(){return 0===c.length&&React.createElement(o.ButtonBlockAppender,null)}}))):React.createElement("div",null,React.createElement("div",t,React.createElement(d,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),instructions:n("Choose a video type to get started.","presto-player"),label:n("Choose a Video Type","presto-player")},React.createElement(p,{isPrimary:!0,onClick:function(){b("self-hosted")}},n("Video","presto-player")),React.createElement(p,{isPrimary:!0,onClick:function(){b("youtube")}},n("Youtube","presto-player")),React.createElement(p,{isPrimary:!0,onClick:function(){b("vimeo")}},n("Vimeo","presto-player")),(null===(u=prestoPlayer)||void 0===u?void 0:u.isPremium)?React.createElement(p,{isPrimary:!0,onClick:function(){b("bunny")}},n("Bunny.net","presto-player")):""),React.createElement(o,{templateLock:!1,renderAppender:function(){return!1}})))},save:function(){var e=l.save();return React.createElement("div",e,React.createElement(o.Content,null))}}},function(e,t,r){var n={"./reusable-videos/index.js":53};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=49},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return xa})),r.d(t,"options",(function(){return Ca}));var n={};r.r(n),r.d(n,"videos",(function(){return K})),r.d(n,"collections",(function(){return Q})),r.d(n,"uploads",(function(){return X})),r.d(n,"isPrivate",(function(){return J})),r.d(n,"isLoading",(function(){return $})),r.d(n,"errors",(function(){return ee})),r.d(n,"videosFetched",(function(){return te})),r.d(n,"currentCollection",(function(){return re})),r.d(n,"ui",(function(){return ne})),r.d(n,"requestType",(function(){return ae}));var a={};r.r(a),r.d(a,"setVideos",(function(){return oe})),r.d(a,"addVideos",(function(){return le})),r.d(a,"removeVideo",(function(){return ce})),r.d(a,"setCollections",(function(){return ie})),r.d(a,"addCollection",(function(){return se})),r.d(a,"setIsPrivate",(function(){return ue})),r.d(a,"setSearch",(function(){return pe})),r.d(a,"setCollectionRequest",(function(){return de})),r.d(a,"setUploads",(function(){return be})),r.d(a,"addUploads",(function(){return me})),r.d(a,"removeUpload",(function(){return ve})),r.d(a,"setVideosFetched",(function(){return fe})),r.d(a,"setLoading",(function(){return ye})),r.d(a,"setUI",(function(){return he})),r.d(a,"addError",(function(){return ge})),r.d(a,"removeError",(function(){return Oe}));var o=r(3),l=r(2),c=r.n(l),i=r(5),s=r(1),u=r(16),p=r(14),d=r(23),b=function(e){var t=e.file,r=e.path,n=e.onProgress,a=e.onComplete,o=e.onError,l=0,s=!1,u=Math.min(prestoPlayerAdmin.wp_max_upload_size-1e6,159e5),p=Math.max(u,19e5);p=Math.min(p,104857600);var d=function(){var e=Object(i.a)(c.a.mark((function e(i){var u,b,m,v,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=i+p+1,b=t.slice(i,u),m=Math.ceil(t.size/(p+1)),l++,n(l/m*100),(v=new FormData).append("file",b),v.append("name",t.name),v.append("chunk",l),v.append("chunks",m),e.prev=10,e.next=13,wp.apiFetch({path:r,method:"POST",body:v});case 13:if(f=e.sent,!s){e.next=17;break}return console.log("cancelled"),e.abrupt("return");case 17:u<t.size?(n(void 0),d(u)):a(f),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(10),o(e.t0),console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t){return e.apply(this,arguments)}}();return l=0,new FileReader,d(0),{cancel:function(){s=!0}}},m=r(4),v=function(e){var t=e.item,r=e.onClick,n=e.className;var a,l=function(){return!!(null==t?void 0:t.encodeProgress)&&100!==t.encodeProgress};return React.createElement("div",{className:"presto-player__media-list-item ".concat(n),onClick:r},React.createElement("div",{className:"presto-player__media-list-item-icon"},React.createElement("svg",Object(o.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},"strokeLinecap","round"),React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}))),React.createElement("div",{className:"presto-player__media-list-item-title"},null==t?void 0:t.title),l()&&React.createElement("div",{className:"presto-player__media-list-item-size"},"Encoding..."),!l()&&React.createElement("div",{className:"presto-player__media-list-item-size"},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(null==t?void 0:t.size)),!l()&&React.createElement("div",{className:"presto-player__media-list-item-modified"},(a=t.updated_at,new Date(a).toLocaleString())))},f=function(e){var t,r=e.item,n=e.onClick,a=e.className;return React.createElement("div",{className:"presto-player__media-list-item ".concat(a),onClick:n},React.createElement("div",{className:"presto-player__media-list-item-icon"},React.createElement("svg",Object(o.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},"strokeLinecap","round"),React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}))),React.createElement("div",{className:"presto-player__media-list-item-title"},null==r?void 0:r.title),React.createElement("div",{className:"presto-player__media-list-item-size"},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(null==r?void 0:r.size)),React.createElement("div",{className:"presto-player__media-list-item-modified"},(t=r.updated_at,new Date(t).toLocaleString())))},y=r(0);function h(){var e=Object(m.a)(["\n                margin-left: 10px;\n              "]);return h=function(){return e},e}function g(){var e=Object(m.a)(["\n              display: flex;\n              align-items: center;\n            "]);return g=function(){return e},e}var O=wp.i18n.__,w=wp.components,E=w.Modal,j=w.Spinner,R=w.Button,_=w.BaseControl,k=w.Flex,P=w.FlexBlock,x=w.Notice,C=w.Card,S=w.CardBody,N=w.Disabled,D=w.DropZone,T=w.FormFileUpload,B=w.DropZoneProvider,L=wp.element,A=L.useEffect,I=L.useState,V=L.useRef,U=function(e){var t=e.onClose,r=e.title,n=e.header,a=e.onLoad,o=e.items,l=e.folders,c=e.fetching,i=e.progressMessage,u=e.onSelect,p=e.error,d=e.onDelete,b=e.onUpload,m=e.progress,w=I({}),L=Object(s.a)(w,2),U=L[0],F=L[1],M=I(!1),z=Object(s.a)(M,2),H=z[0],W=z[1],Y=V();A((function(){a&&a()}),[]);var G,q,Z,K,Q=function(){d(U),W(!1)},X=function(){return Object.keys(U||{}).length};return Object(y.b)(E,{title:n||O("Add Media","presto-player"),onRequestClose:t,className:"presto-player__media-modal presto-player__full-modal",overlayClassName:"presto-player__modal-overlay"},Object(y.b)("div",{className:"presto-player__media-modal-layout","data-cy":"media-modal"},Object(y.b)("div",{className:"presto-player__media-modal-header"},Object(y.b)("div",{className:"presto-player__media-modal-upload",css:Object(y.a)(g())},Object(y.b)(T,{isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(b(e.target.files),jQuery(e.target).val(null))}},O("Upload New Video","presto-player")),Object(y.b)("div",{css:Object(y.a)(h())},O("Or drag a file here to upload.","presto-player"))),p&&Object(y.b)(x,{status:"error",isDismissible:!1},p)),Object(y.b)("div",{className:"presto-player__media-modal-content"},Object(y.b)(B,null,c?Object(y.b)(k,{className:"presto-player__media-loading"},Object(y.b)(P,{style:{textAlign:"center"}},m?Object(y.b)(React.Fragment,null,Object(y.b)("div",null,Object(y.b)("strong",null,i||O("Uploading","presto-player"))),Object(y.b)("div",null,O("Please don't navigate away from this page.","presto-player")),Object(y.b)("progress",{className:"presto-progress",max:"100",value:m,style:{width:"100px"}})):Object(y.b)(j,null))):(null==o?void 0:o.length)?Object(y.b)("div",{className:"presto-player__media-list"},Object(y.b)("h2",null,r),l&&Object(y.b)("div",{className:"presto-player__media-list-folders"},l.map((function(e){return Object(y.b)(f,{key:e.id,item:e})}))),Object(y.b)("div",{className:"presto-player__media-list-items"},o.map((function(e){return Object(y.b)(v,{item:e,key:e.id,onClick:function(){F(U===e?{}:e)},className:U===e?"is-selected":""})})))):Object(y.b)(k,{"align-items":"center",className:"presto-player__media-not-found"},Object(y.b)("div",null,Object(y.b)("h2",null,"Drop video files here to upload"),Object(y.b)("p",null,"or browse for a video"),Object(y.b)(T,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(b(e.target.files),jQuery(e.target).val(null))}},O("Upload New Video","presto-player")))),Object(y.b)(D,{label:"Drop files",onFilesDrop:b}))),Object(y.b)("div",{className:"presto-player__media-modal-sidebar"},X()?Object(y.b)("div",{className:"presto-player__media-modal-sidebar-content"},Object(y.b)(_,null,Object(y.b)(N,{key:U.id},(null==U?void 0:U.thumbnail)?Object(y.b)("img",{src:null==U?void 0:U.thumbnail,style:{maxWidth:"100%"}}):Object(y.b)("video",{preload:"metadata"},Object(y.b)("source",{src:U.previewUrl})))),Object(y.b)(_,null,Object(y.b)(_.VisualLabel,null,O("Name","presto-player")),Object(y.b)("h3",{style:{marginTop:"5px"}},U.title)),!!(null==U?void 0:U.visibility)&&Object(y.b)(_,null,Object(y.b)(_.VisualLabel,null,O("Visibility","presto-player")),Object(y.b)("h3",{style:{marginTop:"5px"}},U.visibility)),Object(y.b)(_,null,Object(y.b)(_.VisualLabel,null,O("Size","presto-player")),Object(y.b)("h3",{style:{marginTop:"5px"}},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}((null==U?void 0:U.size)||0))),Object(y.b)(_,null,Object(y.b)(_.VisualLabel,null,O("Created","presto-player")),Object(y.b)("h3",{style:{marginTop:"5px"}},(G=null==U?void 0:U.created_at,q=(G=new Date(G)).getHours(),Z=G.getMinutes(),K=q>=12?"pm":"am",q=(q%=12)||12,Z=Z<10?"0"+Z:Z,G.getDate()+"-"+(G.getMonth()+1)+"-"+G.getFullYear()+" at "+q+":"+Z+K))),Object(y.b)(_,null,H?Object(y.b)(C,null,Object(y.b)(S,null,Object(y.b)("p",null,Object(y.b)("strong",null,"Are you sure?")),Object(y.b)("p",null,"Are you sure you want to delete this video?"),Object(y.b)(R,{isDestructive:!0,onClick:Q},"Yes"),Object(y.b)(R,{onClick:function(){return W(!1)}},"Cancel"))):Object(y.b)(R,{isDestructive:!0,onClick:function(){W(!H)}},O("Delete video","presto-player")))):Object(y.b)(React.Fragment,null)),Object(y.b)("div",{className:"presto-player__media-modal-footer"},Object(y.b)(R,{isPrimary:!0,disabled:!X(),onClick:function(){U&&(u(U),t())},ref:Y},O("Choose","presto-player")))))},F=wp.i18n.__,M=wp.element,z=M.useState,H=M.useEffect,W=function(e){var t=e.closePopup,r=e.noticeOperations,n=e.onSelect,a=e.isPrivate,o=z([]),l=Object(s.a)(o,2),u=l[0],p=l[1],d=z(!1),m=Object(s.a)(d,2),v=m[0],f=m[1],y=z(0),h=Object(s.a)(y,2),g=h[0],O=h[1],w=z(""),E=Object(s.a)(w,2),j=E[0],R=E[1],_=z(""),k=Object(s.a)(_,2),P=k[0],x=k[1],C=a?"private-videos":"public-videos";H((function(){O(0),x("")}),[]);var S=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(""),f(!0),R(F("Uploading","presto-player")),b({file:t[0],path:"presto-player/v1/bunny/upload",onProgress:function(e){O(e-10)},onComplete:N,onError:function(e){x(e.message),O(0),f(!1)}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(c.a.mark((function e(t){var r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.name,R(F("Storing","presto-player")),e.prev=2,e.next=5,wp.apiFetch({path:"presto-player/v1/bunny/".concat(C),method:"POST",data:{path:r,name:n}});case 5:a=e.sent,p(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),x(e.t0.message),console.error(e.t0);case 13:return e.prev=13,O(0),f(!1),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[2,9,13,17]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p((u||[]).filter((function(e){return e!==t}))),e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/".concat(C),method:"DELETE",data:{name:null==t?void 0:t.title}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/".concat(C)});case 4:t=e.sent,p(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x(e.t0.message);case 11:return e.prev=11,f(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return React.createElement(U,{onClose:t,progressMessage:j,fetching:v,error:P,onUpload:S,onLoad:T,items:u,progress:g,onDelete:D,onSelect:n,onError:function(e){r.removeAllNotices(),r.createErrorNotice(e)},header:F(a?"Bunny.net Private Video Storage":"Bunny.net Public Video Storage","presto-player"),title:F(a?"Private Video Library":"Public Video Library","presto-player")})},Y=r(6);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z=(0,wp.data.combineReducers)({videosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEOS":return t.value;case"ADD_VIDEOS":return[].concat(Object(Y.a)(e),Object(Y.a)(t.value));case"ADD_VIDEO":return[].concat(Object(Y.a)(e),[t.value]);case"UPDATE_VIDEO":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:q(q({},e),t.value)}));case"REMOVE_VIDEO":return e.filter((function(e){return e.guid!==t.value.guid}))}return e},collectionsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLLECTIONS":return t.value;case"ADD_COLLECTION":return[].concat(Object(Y.a)(e),[t.value]);case"UPDATE_COLLECTION":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:q(q({},e),t.value)}));case"REMOVE_COLLECTION":return e.filter((function(e){return e!==t.value}))}return e},uploadsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UPLOADS":return t.value;case"ADD_UPLOADS":return[].concat(Object(Y.a)(e),Object(Y.a)(t.value));case"ADD_UPLOAD":return[].concat(Object(Y.a)(e),[t.value]);case"UPDATE_UPLOAD":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:q(q({},e),t.value)}));case"REMOVE_UPLOAD":return e.filter((function(e){return e!==t.value}))}return e},requestReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{private:!1,collection:"",search:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRIVATE_REQUEST":return q(q({},e),{},{private:t.value});case"SET_SEARCH_REQUEST":return q(q({},e),{},{search:t.value});case"SET_COLLECTION_REQUEST":return q(q({},e),{},{collection:t.value})}return e},UIReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,videosFetched:!1,createCollection:!1,selectedId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return q(q({},e),{},{loading:t.value});case"SET_VIDEOS_FETCHED":return q(q({},e),{},{videosFetched:t.value});case"SET_UI_ITEM":return q(q({},e),{},Object(o.a)({},t.item,t.value))}return e},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return[].concat(Object(Y.a)(e),[t.value]);case"REMOVE_ERROR":return e.filter((function(e){return e!==t.value}))}return e}});function K(e){return(null==e?void 0:e.videosReducer)||[]}function Q(e){return(null==e?void 0:e.collectionsReducer)||[]}function X(e){return(null==e?void 0:e.uploadsReducer)||[]}function J(e){var t;return!!(null==e||null===(t=e.requestReducer)||void 0===t?void 0:t.private)}function $(e){var t;return(null==e||null===(t=e.UIReducer)||void 0===t?void 0:t.loading)||!1}function ee(e){return(null==e?void 0:e.errorReducer)||[]}function te(e){var t;return(null==e||null===(t=e.UIReducer)||void 0===t?void 0:t.videosFetched)||!1}function re(e){var t;return null==e||null===(t=e.requestReducer)||void 0===t?void 0:t.collection}function ne(e,t){var r;return null==e||null===(r=e.UIReducer)||void 0===r?void 0:r[t]}function ae(e){var t;return(null==e||null===(t=e.requestReducer)||void 0===t?void 0:t.private)?"private":"public"}function oe(e){return{type:"SET_VIDEOS",value:e}}function le(e){return{type:"ADD_VIDEOS",value:e}}function ce(e){return{type:"REMOVE_VIDEO",value:e}}function ie(e){return{type:"SET_COLLECTIONS",value:e}}function se(e){return{type:"ADD_COLLECTION",value:e}}function ue(e){return{type:"SET_PRIVATE_REQUEST",value:e}}function pe(e){return{type:"SET_SEARCH",value:e}}function de(e){return{type:"SET_COLLECTION_REQUEST",value:e}}function be(e){return{type:"SET_UPLOADS",value:e}}function me(e){return{type:"ADD_UPLOADS",value:e}}function ve(e){return{type:"REMOVE_UPLOAD",value:e}}function fe(e){return{type:"SET_VIDEOS_FETCHED",value:e}}function ye(e){return{type:"SET_LOADING",value:e}}function he(e,t){return{type:"SET_UI_ITEM",item:e,value:t}}function ge(e){return{type:"ADD_ERROR",value:e}}function Oe(e){return{type:"REMOVE_ERROR",value:e}}(0,wp.data.registerStore)("presto-player/bunny-popup",{reducer:Z,selectors:n,actions:a});var we=function(e){return 3==(null==e?void 0:e.status)&&(null==e?void 0:e.availableResolutions.length)},Ee=function(e){return we(e)||4===(null==e?void 0:e.status)},je=function(e){return 0==(null==e?void 0:e.status)?"Processing":1==(null==e?void 0:e.status)?"Uploaded":2==(null==e?void 0:e.status)?"Processing":we(e)?"Playable":3==(null==e?void 0:e.status)?"Encoding":4==(null==e?void 0:e.status)?"Live":5==(null==e?void 0:e.status)?"Error":6==(null==e?void 0:e.status)?"Upload Failed":void 0},Re=function(e){return null==e||null==e?"":new Date(1e3*e).toISOString().substr(11,8)},_e=function(e){if(null==e||0==e)return"Unknown";if(0==e)return"0 b";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return(e/Math.pow(1024,t)).toFixed(2)+" "+["b","KB","MB","GB","TB"][t]};function ke(){var e=Object(m.a)(["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "]);return ke=function(){return e},e}function Pe(){var e=Object(m.a)(["\n            position: relative;\n          "]);return Pe=function(){return e},e}function xe(){var e=Object(m.a)(["\n    margin-top: 5px;\n  "]);return xe=function(){return e},e}var Ce=wp.i18n.__,Se=wp.components,Ne=Se.Button,De=Se.BaseControl,Te=Se.Disabled,Be=Se.Card,Le=Se.CardBody,Ae=wp.element,Ie=Ae.useState,Ve=(Ae.useContext,Ae.useEffect),Ue=wp.data,Fe=Ue.dispatch,Me=Ue.useSelect,ze=function(){var e=Ie(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Ie(!1),o=Object(s.a)(a,2),l=o[0],u=o[1],p=Ie(null),d=Object(s.a)(p,2),b=d[0],m=d[1],v=Me((function(e){return e("presto-player/bunny-popup").isPrivate()})),f=Me((function(e){return e("presto-player/bunny-popup").ui("selectedId")})),h=Me((function(e){return e("presto-player/bunny-popup").videos()}));Ve((function(){m(f?h.find((function(e){return e.guid===f})):null)}),[h,f]);var g=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.apiFetch({path:"presto-player/v1/bunny/stream/videos/".concat(b.id),method:"DELETE",data:{type:v?"private":"public"}});case 2:Fe("presto-player/bunny-popup").removeVideo(b),Fe("presto-player/bunny-popup").setUI("selectedId",null),u(!1),n(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=Object(y.a)(xe());if(!b)return"";var w,E,j,R,_=function(e){return v?null==e?void 0:e.webPURLSigned:null==e?void 0:e.webPURL};return b&&Object(y.b)("div",{className:"presto-player__media-modal-sidebar-content"},Object(y.b)(De,{css:Object(y.a)(Pe())},Object(y.b)(Te,{key:b.id},Ee(b)&&_(b)&&Object(y.b)("img",{src:_(b),css:{maxWidth:"100%"}})),Object(y.b)(Ne,{isSmall:!0,isPrimary:!0,isBusy:!Ee(b),css:Object(y.a)(ke(),Ee(b)?"position: absolute;":"")},je(b))),Object(y.b)(De,null,Object(y.b)(De.VisualLabel,null,Ce("Name","presto-player")),Object(y.b)("h3",{css:O},b.title)),!!(null==b?void 0:b.visibility)&&Object(y.b)(De,null,Object(y.b)(De.VisualLabel,null,Ce("Visibility","presto-player")),Object(y.b)("h3",{css:O},b.visibility)),Object(y.b)(De,null,Object(y.b)(De.VisualLabel,null,Ce("Size","presto-player")),Object(y.b)("h3",{css:O},_e((null==b?void 0:b.size)||0))),Object(y.b)(De,null,Object(y.b)(De.VisualLabel,null,Ce("Length","presto-player")),Object(y.b)("h3",{css:O},Re(null==b?void 0:b.length))),Object(y.b)(De,null,Object(y.b)(De.VisualLabel,null,Ce("Created","presto-player")),Object(y.b)("h3",{css:O},(w=null==b?void 0:b.created_at,E=(w=new Date(w)).getHours(),j=w.getMinutes(),R=E>=12?"pm":"am",E=(E%=12)||12,j=j<10?"0"+j:j,w.getDate()+"-"+(w.getMonth()+1)+"-"+w.getFullYear()+" at "+E+":"+j+R))),Object(y.b)(De,null,r?Object(y.b)(Be,null,Object(y.b)(Le,null,Object(y.b)("p",null,Object(y.b)("strong",null,Ce("Are you sure?","presto-player"))),Object(y.b)("p",null,Ce("Are you sure you want to delete this video?","presto-player")),Object(y.b)(Ne,{isDestructive:!0,disabled:l,isBusy:l,onClick:function(e){e.preventDefault(),g(),u(!0)}},Ce("Yes","presto-player")),Object(y.b)(Ne,{onClick:function(){return n(!1)}},Ce("Cancel","presto-player")))):Object(y.b)(Ne,{isDestructive:!0,onClick:function(){n(!r)}},Ce("Delete video","presto-player"))))};function He(){var e=Object(m.a)(["\n          height: 100%;\n          background-color: var(--wp-admin-theme-color, #007cba);\n        "]);return He=function(){return e},e}var We=function(e){var t=e.className,r=e.progress;return Object(y.b)("div",{className:t},Object(y.b)("div",{css:Object(y.a)(He()),style:{width:"".concat(r,"%")}}))};function Ye(){var e=Object(m.a)(["\n          width: 100%;\n          border-radius: 0px;\n          margin: 0 15px;\n          background-color: #e3e3e3;\n          height: 3px;\n        "]);return Ye=function(){return e},e}function Ge(){var e=Object(m.a)(["\n        max-width: 100%;\n        object-fit: cover;\n        width: 100%;\n        height: 140px;\n        background-color: #222;\n        color: white;\n        text-decoration: none;\n        text-align: center;\n        box-sizing: border-box;\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      "]);return Ge=function(){return e},e}var qe=function(e){var t=e.progress;return Object(y.b)("div",{css:Object(y.a)(Ge())},Object(y.b)(We,{progress:t,css:Object(y.a)(Ye())}))};function Ze(){var e=Object(m.a)(["\n              font-size: 12px;\n              opacity: 0.75;\n              margin-bottom: 7px;\n            "]);return Ze=function(){return e},e}function Ke(){var e=Object(m.a)(["\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              overflow: hidden;\n              width: 100%;\n              max-width: 100%;\n              display: inline-block;\n              margin-bottom: 7px;\n              font-size: 13px;\n            "]);return Ke=function(){return e},e}function Qe(){var e=Object(m.a)(["\n              position: absolute;\n              top: 8px;\n              right: 8px;\n            "]);return Qe=function(){return e},e}function Xe(){var e=Object(m.a)(["\n          margin: 14px;\n        "]);return Xe=function(){return e},e}function Je(){var e=Object(m.a)(["\n        cursor: pointer;\n        user-select: none;\n        display: inline-block;\n        position: relative;\n        margin-right: 20px;\n        font-weight: bold;\n        margin-bottom: 20px;\n        width: 220px;\n        flex: 0 0 220px;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        overflow: hidden;\n      "]);return Je=function(){return e},e}var $e=function(e){var t=e.thumbnail,r=e.title,n=e.footer,a=e.badge,o=e.before,l=e.after;return Object(y.b)("div",Object.assign({className:"presto-player__video-thumb",css:Object(y.a)(Je())},e),!!o&&o,!!t&&t,Object(y.b)("div",{css:Object(y.a)(Xe())},!!a&&Object(y.b)("div",{css:Object(y.a)(Qe())},a),!!r&&Object(y.b)("span",{css:Object(y.a)(Ke())},r),!!n&&Object(y.b)("div",{css:Object(y.a)(Ze())},n)),!!l&&l)};function et(){var e=Object(m.a)(["\n              width: 100%;\n              border-radius: 0px;\n              margin: 0;\n              background-color: #e3e3e3;\n              height: 3px;\n            "]);return et=function(){return e},e}function tt(){var e=Object(m.a)(["\n        ","\n        border: 1px solid\n          ",";\n      "]);return tt=function(){return e},e}function rt(){var e=Object(m.a)(["\n            opacity: 0.5;\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n          "]);return rt=function(){return e},e}function nt(){var e=Object(m.a)(["\n          display: flex;\n          align-items: center;\n        "]);return nt=function(){return e},e}function at(){var e=Object(m.a)(["\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n            opacity: 0.5;\n          "]);return at=function(){return e},e}function ot(){var e=Object(m.a)(["\n          margin-right: 10px;\n          display: flex;\n          align-items: center;\n        "]);return ot=function(){return e},e}function lt(){var e=Object(m.a)(["\n        display: flex;\n        align-items: center;\n      "]);return lt=function(){return e},e}function ct(){var e=Object(m.a)(["\n            max-width: 100%;\n            object-fit: cover;\n            width: 100%;\n            height: 140px;\n            display: block;\n          "]);return ct=function(){return e},e}function it(){var e=Object(m.a)(["\n        font-size: 11px;\n        color: #ffffff;\n        padding: 2px 10px;\n        border-radius: 9999px;\n      "]);return it=function(){return e},e}var st=wp.components,ut=st.Icon,pt=st.Button,dt=wp.element,bt=dt.useEffect,mt=dt.useState,vt=wp.data,ft=vt.useSelect,yt=vt.dispatch,ht=function(e){var t=e.video,r=mt(),n=Object(s.a)(r,2),a=n[0],o=n[1],l=ft((function(e){return e("presto-player/bunny-popup").isPrivate()})),c=ft((function(e){return e("presto-player/bunny-popup").ui("selectedId")}));bt((function(){o(c?c===t.guid:null)}),[c]);return Object(y.b)($e,{onClick:function(){yt("presto-player/bunny-popup").setUI("selectedId",null==t?void 0:t.guid)},css:Object(y.a)(tt(),a&&"box-shadow: 0 0 0 0px #fff, 0 0 0 3px var(--wp-admin-theme-color, #007cba);",a?"var(--wp-admin-theme-color, #007cba)":"#e0e0e0"),thumbnail:function(){if(t.status<3)return Object(y.b)(qe,{progress:t.encodeProgress});var e=l?null==t?void 0:t.thumbnailURLSigned:null==t?void 0:t.thumbnailURL;return e?Object(y.b)("img",{css:Object(y.a)(ct()),src:e}):void 0}(),badge:Object(y.b)(pt,{isSmall:!0,isPrimary:!0,isBusy:!Ee(t),css:Object(y.a)(it())},je(t)),title:t.title,footer:Object(y.b)("div",{css:Object(y.a)(lt())},Object(y.b)("span",{css:Object(y.a)(ot())},Object(y.b)(ut,{css:Object(y.a)(at()),icon:"clock",size:14}),Object(y.b)("span",null,Re(t.length))),Object(y.b)("span",{css:Object(y.a)(nt())},Object(y.b)(ut,{css:Object(y.a)(rt()),icon:"database",size:14}),Object(y.b)("span",null,_e(t.storageSize)))),after:3===t.status?Object(y.b)(We,{css:Object(y.a)(et()),progress:t.encodeProgress}):""})},gt=wp.components,Ot=gt.Flex,wt=gt.FlexBlock,Et=gt.Spinner,jt=function(e){var t=e.className;return Object(y.b)(Ot,{className:t},Object(y.b)(wt,{css:{textAlign:"center"}},Object(y.b)(Et,null)))};function Rt(){var e=Object(m.a)(["\n          height: 100%;\n          text-align: center;\n        "]);return Rt=function(){return e},e}function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pt=wp.i18n.__,xt=wp.element,Ct=xt.useState,St=xt.useEffect,Nt=xt.Fragment,Dt=wp.components,Tt=Dt.Flex,Bt=Dt.FormFileUpload,Lt=Dt.Notice,At=wp.data,It=At.dispatch,Vt=At.useSelect,Ut=function(){var e=Ct(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Ct(""),o=Object(s.a)(a,2),l=o[0],u=o[1],p=Vt((function(e){return e("presto-player/bunny-popup").videosFetched()})),d=Vt((function(e){return e("presto-player/bunny-popup").videos()})),b=Vt((function(e){return e("presto-player/bunny-popup").requestType()})),m=Vt((function(e){return e("presto-player/bunny-popup").currentCollection()}));St((function(){p||v()}),[p]),St((function(){var e=setInterval((function(){v({sync:!0})}),3e3);return function(){return clearInterval(e)}}),[p]);var v=function(){var e=Object(i.a)(c.a.mark((function e(){var t,r,n,a,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{sync:!1},r=t.sync,e.prev=1,e.next=4,wp.apiFetch({path:wp.url.addQueryArgs("presto-player/v1/bunny/stream/videos",kt(kt({type:b},(null==m?void 0:m.guid)?{collection:null==m?void 0:m.guid}:{}),{},{items_per_page:500}))});case 4:n=e.sent,It("presto-player/bunny-popup").setVideos(null==n?void 0:n.items),u(""),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(1),401!==(null===e.t0||void 0===e.t0||null===(a=e.t0.data)||void 0===a?void 0:a.status)){e.next=14;break}return u(Pt("Please wait. Pullzone cache is clearing. This may take a minute or two...")),e.abrupt("return");case 14:r||It("presto-player/bunny-popup").addError(e.t0.message);case 15:return e.prev=15,It("presto-player/bunny-popup").setVideosFetched(!0),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,9,15,18]])})));return function(){return e.apply(this,arguments)}}();return l?Object(y.b)(Lt,{status:"warning",isDismissible:!1},Object(y.b)("div",{css:{display:"flex",alignItems:"center"}},Object(y.b)(jt,{css:{flex:1}}),l)):p?Object(y.b)(Nt,null,d&&d.length?Object(y.b)("div",null,!(null==m?void 0:m.guid)&&Object(y.b)("h2",null,Pt("Videos","presto-player")),d.map((function(e){if((null==e?void 0:e.collectionId)===((null==m?void 0:m.guid)||""))return Object(y.b)(ht,{key:e.id,video:e,onClick:function(){n(r.guid===e.guid?{}:e)},selected:r.guid===e.guid})}))):Object(y.b)(Tt,{align:"center",justify:"center",css:Object(y.a)(Rt())},Object(y.b)("div",null,Object(y.b)("h2",null,Pt("Drop video files here to upload","presto-player")),Object(y.b)("p",null,Pt("or browse for a video","presto-player")),Object(y.b)(Bt,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(It("presto-player/bunny-popup").addUploads(e.target.files),jQuery(e.target).val(null))}},Pt("Upload New Video","presto-player"))))):Object(y.b)(jt,{css:{flex:1}})};function Ft(){var e=Object(m.a)(["\n              color: var(--wp-admin-theme-color);\n              margin-right: 10px;\n            "]);return Ft=function(){return e},e}var Mt=wp.components.Icon,zt=wp.data.dispatch,Ht=function(e){var t=e.collection;return Object(y.b)($e,{onClick:function(e){e.preventDefault(),zt("presto-player/bunny-popup").setCollectionRequest(t),zt("presto-player/bunny-popup").setVideosFetched(!1)},title:Object(y.b)("div",null,Object(y.b)(Mt,{icon:"open-folder",css:Object(y.a)(Ft())}),t.name),footer:Object(y.b)("div",null,t.videoCount," Videos")})};function Wt(){var e=Object(m.a)(["\n            display: flex;\n            align-items: stretch;\n            overflow: auto;\n          "]);return Wt=function(){return e},e}var Yt=wp.i18n.__,Gt=wp.element.useEffect,qt=wp.data,Zt=qt.useSelect,Kt=qt.dispatch,Qt=function(){var e=Zt((function(e){return e("presto-player/bunny-popup").collections()})),t=Zt((function(e){return e("presto-player/bunny-popup").requestType()})),r=function(){var e=Object(i.a)(c.a.mark((function e(){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("presto-player/v1/bunny/stream/collections",{type:t})});case 3:r=e.sent,Kt("presto-player/bunny-popup").setCollections(null==r?void 0:r.items),e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==(null===e.t0||void 0===e.t0||null===(n=e.t0.data)||void 0===n?void 0:n.status)){e.next=11;break}return e.abrupt("return");case 11:Kt("presto-player/bunny-popup").addError(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Gt((function(){r()}),[]),!!e.length&&Object(y.b)("div",null,Object(y.b)("h2",null,Yt("Collections","presto-player")),Object(y.b)("div",{css:Object(y.a)(Wt())},e.map((function(e){return Object(y.b)(Ht,{collection:e,key:e.guid})}))))};function Xt(){var e=Object(m.a)(["\n              margin-bottom: 15px;\n            "]);return Xt=function(){return e},e}var Jt=wp.i18n.__,$t=wp.components,er=$t.Button,tr=$t.TextControl,rr=$t.Modal,nr=$t.BaseControl,ar=wp.element,or=ar.useState,lr=ar.Fragment,cr=wp.data,ir=cr.dispatch,sr=cr.useSelect,ur=function(){var e=or(""),t=Object(s.a)(e,2),r=t[0],n=t[1],a=or(!1),o=Object(s.a)(a,2),l=o[0],u=o[1],p=sr((function(e){return e("presto-player/bunny-popup").requestType()})),d=sr((function(e){return e("presto-player/bunny-popup").ui("createCollection")})),b=function(e){ir("presto-player/bunny-popup").setUI("createCollection",e)},m=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/stream/collections",method:"POST",data:{type:p,name:r}});case 4:t=e.sent,ir("presto-player/bunny-popup").addCollection(t),ir("presto-player/bunny-popup").setCollectionRequest(t),ir("presto-player/bunny-popup").setVideosFetched(!1),n(""),b(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.prev=15,u(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return Object(y.b)(lr,null,Object(y.b)(er,{isSecondary:!0,onClick:function(){return b(!0)}},Jt("Create Collection","presto-player")),d&&Object(y.b)(rr,{overlayClassName:"presto-modal",title:"Create New Collection",shouldCloseOnClickOutside:!1,isDismissible:!1},Object(y.b)(tr,{css:Object(y.a)(Xt()),tabIndex:"0",placeholder:Jt("Enter a collection name","presto-player"),value:r,onChange:function(e){return n(e)}}),Object(y.b)(nr,null,Object(y.b)(er,{isBusy:l,disabled:l,isPrimary:!0,onClick:function(){m()}},Jt("Create","presto-player"))," ",Object(y.b)(er,{onClick:function(){return b(!1)}},Jt("Cancel","presto-player")))))},pr=wp.i18n.__,dr=wp.components,br=dr.Flex,mr=dr.FlexBlock,vr=dr.FlexItem,fr=(dr.Button,dr.FormFileUpload),yr=wp.data.dispatch,hr=function(e){var t=e.afterUpload;return Object(y.b)(br,null,Object(y.b)(mr,null,Object(y.b)(br,{justify:"flex-start"},Object(y.b)(fr,{multiple:!0,isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(yr("presto-player/bunny-popup").addUploads(e.target.files),jQuery(e.target).val(null))}},pr("Upload Videos","presto-player"))," ",Object(y.b)(ur,null),!!t&&t)),Object(y.b)(vr,null))},gr=wp.i18n.__,Or=wp.components.Button,wr=wp.element,Er=wr.useState,jr=wr.useEffect,Rr=wp.data.useSelect,_r=function(e){var t=e.onChoose,r=Er(null),n=Object(s.a)(r,2),a=n[0],o=n[1],l=Er(!1),c=Object(s.a)(l,2),i=c[0],u=c[1],p=Rr((function(e){return e("presto-player/bunny-popup").ui("selectedId")})),d=Rr((function(e){return e("presto-player/bunny-popup").videos()}));return jr((function(){o(p?d.find((function(e){return e.guid===p})):null)}),[d,p]),jr((function(){3==(null==a?void 0:a.status)&&(null==a?void 0:a.availableResolutions.length)?u(!0):u((null==a?void 0:a.status)>3&&(null==a?void 0:a.status)<5)}),[null==a?void 0:a.availableResolutions]),React.createElement(Or,{isPrimary:!0,disabled:!i,onClick:function(){return t(a)}},(null==a?void 0:a.id)&&!i?gr("Please wait, video is encoding...","presto-player"):gr("Choose","presto-player"))};function kr(){var e=Object(m.a)(["\n          width: 14px;\n          height: 14px;\n          font-size: 14px;\n          margin-right: 5px;\n        "]);return kr=function(){return e},e}function Pr(){var e=Object(m.a)(["\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n        color: var(--wp-admin-theme-color, #007cba);\n        padding: 6px 0;\n      "]);return Pr=function(){return e},e}var xr=wp.components.Icon,Cr=function(e){var t=e.children,r=e.onClick;return Object(y.b)("span",{onClick:r,css:Object(y.a)(Pr())},Object(y.b)(xr,{css:Object(y.a)(kr()),icon:"arrow-left-alt",size:14}),Object(y.b)("span",null,t))};function Sr(){var e=Object(m.a)(["\n        margin-bottom: 2em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      "]);return Sr=function(){return e},e}var Nr=wp.i18n.__,Dr=wp.element.useState,Tr=wp.data,Br=Tr.dispatch,Lr=Tr.useSelect,Ar=wp.components,Ir=Ar.Button,Vr=Ar.Modal,Ur=Ar.BaseControl,Fr=function(){var e=Dr(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Dr(!1),o=Object(s.a)(a,2),l=o[0],u=o[1],p=Dr(""),d=Object(s.a)(p,2),b=(d[0],d[1],Lr((function(e){return e("presto-player/bunny-popup").currentCollection()}))),m=Lr((function(e){return e("presto-player/bunny-popup").requestType()})),v=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/stream/collections/".concat(null==b?void 0:b.guid),method:"DELETE",data:{type:m}});case 4:n(!1),Br("presto-player/bunny-popup").setCollectionRequest(""),Br("presto-player/bunny-popup").setVideosFetched(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(!1),Br("presto-player/bunny-popup").addError(e.t0.message);case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(y.b)("div",{css:Object(y.a)(Sr())},Object(y.b)("div",null,Object(y.b)(Cr,{onClick:function(){Br("presto-player/bunny-popup").setCollectionRequest(""),Br("presto-player/bunny-popup").setVideosFetched(!1)}},Nr("Back To Main Folder","presto-player")),Object(y.b)("h2",null,b.name)),Object(y.b)(Ir,{isDestructive:!0,onClick:function(){return n(!0)}},Nr("Delete Collection","presto-player")),r&&Object(y.b)(Vr,{shouldCloseOnClickOutside:!1,overlayClassName:"presto-modal",title:"Delete Collection",onRequestClose:function(){return n(!1)}},Object(y.b)("h2",null,Nr("Are you sure you want to delete the collection? ","presto-player")),Object(y.b)("p",null,Nr("This will also delete all videos inside of the collection.","presto-player")),Object(y.b)(Ur,null,Object(y.b)(Ir,{isDestructive:!0,disabled:l,isBusy:l,onClick:v},Nr("Delete","presto-player"))," ",Object(y.b)(Ir,{onClick:function(){return n(!1)}},Nr("Cancel","presto-player")))))};function Mr(){var e=Object(m.a)(["\n            width: 50px;\n            height: 3px;\n            margin: 0 5px;\n            background: #e3e3e3;\n            border-radius: 9999px;\n            overflow: hidden;\n          "]);return Mr=function(){return e},e}function zr(){var e=Object(m.a)(["\n          display: flex;\n          align-items: center;\n        "]);return zr=function(){return e},e}function Hr(){var e=Object(m.a)(["\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          max-width: 150px;\n          text-overflow: ellipsis;\n          font-weight: bold;\n        "]);return Hr=function(){return e},e}function Wr(){var e=Object(m.a)(["\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        animation: components-button__busy-animation 2500ms infinite linear;\n        opacity: 1;\n        padding: 6px 12px;\n        border-radius: 99999px;\n        border: 1px solid #dddddd;\n        background-size: 100px 100%;\n        background-image: linear-gradient(\n          -45deg,\n          #ffffff 33%,\n          #f3f3f3 33%,\n          #f3f3f3 70%,\n          #ffffff 70%\n        );\n      "]);return Wr=function(){return e},e}function Yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}wp.components.Icon;var qr=wp.element,Zr=qr.useState,Kr=qr.useEffect,Qr=(qr.useContext,wp.data),Xr=Qr.useSelect,Jr=(Qr.dispatch,wp.i18n.__),$r=function(e){var t,r=e.file,n=e.name,a=e.onComplete,o=Zr(0),l=Object(s.a)(o,2),u=l[0],p=l[1],d=Zr(Jr("Uploading","presto-player")),m=Object(s.a)(d,2),v=(m[0],m[1]),f=Zr(""),h=Object(s.a)(f,2),g=h[0],O=h[1],w=Zr(!1),E=Object(s.a)(w,2),j=E[0],R=E[1],_=Xr((function(e){return e("presto-player/bunny-popup").requestType()})),k=Xr((function(e){return e("presto-player/bunny-popup").currentCollection()})),P=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(Jr("Uploading","presto-player")),t=b({file:(null==r?void 0:r[0])?null==r?void 0:r[0]:r,path:"presto-player/v1/bunny/stream/upload",onProgress:function(e){p(e)},onComplete:x,onError:function(e){O(e.message),v(Jr("Error","presto-player")),p(0)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(c.a.mark((function e(t){var r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.name,v(Jr("Creating","presto-player")),e.prev=2,e.next=5,wp.apiFetch({path:"presto-player/v1/bunny/stream/videos",method:"POST",data:Gr({type:_,name:n},(null==k?void 0:k.guid)?{collection:k.guid}:{})});case 5:a=e.sent,R(!0),C({path:r,video:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),O(e.t0.message);case 13:return e.prev=13,p(0),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.video,e.next=3,wp.apiFetch({path:"presto-player/v1/bunny/stream/store",method:"POST",data:{type:_,path:r,guid:n.guid}});case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Kr((function(){return P(),function(){t&&t.cancel()}}),[]),j?"":Object(y.b)("div",{css:Object(y.a)(Wr())},Object(y.b)("div",{css:Object(y.a)(Hr())},!!g&&g,!!n&&n," ",r.name,"..."),Object(y.b)("div",{css:Object(y.a)(zr())},Object(y.b)(We,{css:Object(y.a)(Mr()),progress:u})))};function en(){var e=Object(m.a)(["\n                margin-right: 0px;\n              "]);return en=function(){return e},e}function tn(){var e=Object(m.a)(["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "]);return tn=function(){return e},e}var rn=wp.data.useSelect,nn=function(e){var t=e.removeUpload,r=(e.isPrivate,rn((function(e){return e("presto-player/bunny-popup").uploads()})));return r.length?Object(y.b)("div",{css:Object(y.a)(tn())},r.length&&r.map((function(e){return Object(y.b)($r,{css:Object(y.a)(en()),file:e,onComplete:function(){return t(e)}})}))):""};function an(){var e=Object(m.a)(["\n            grid-area: footer;\n            border-top: 1px solid #ddd;\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 8px;\n          "]);return an=function(){return e},e}function on(){var e=Object(m.a)(["\n            display: none;\n            grid-area: sidebar;\n            padding: 0 16px;\n            z-index: 75;\n            background: #f3f3f3;\n            border-left: 1px solid #ddd;\n            overflow: auto;\n\n            @media screen and (min-width: 780px) {\n              display: block;\n            }\n\n            .sidebar-content {\n              padding: 16px 0;\n            }\n          "]);return on=function(){return e},e}function ln(){var e=Object(m.a)(["\n            grid-area: main;\n            display: grid;\n            overflow: hidden;\n\n            .components-drop-zone__provider {\n              overflow: hidden;\n              display: grid;\n            }\n\n            .components-drop-zone {\n              z-index: 99;\n            }\n          "]);return ln=function(){return e},e}function cn(){var e=Object(m.a)(["\n              display: flex;\n              align-items: center;\n\n              > * {\n                margin-right: 10px;\n              }\n            "]);return cn=function(){return e},e}function sn(){var e=Object(m.a)(["\n            grid-area: header;\n            padding: 24px 24px 12px 24px;\n          "]);return sn=function(){return e},e}function un(){var e=Object(m.a)(['\n          @media screen and (min-width: 780px) {\n            margin: -24px;\n            display: grid;\n            flex: 1;\n            max-height: calc(100vh - 68px);\n            grid-template-columns: 1fr 1fr minmax(0px, 267px);\n            grid-template-rows: minmax(50px, auto) 1fr 60px;\n            grid-template-areas:\n              "header header sidebar"\n              "main main sidebar"\n              "footer footer footer";\n            overflow: hidden;\n          }\n        ']);return un=function(){return e},e}function pn(){var e=Object(m.a)(["\n        width: 100%;\n        height: 100%;\n        max-width: calc(100% - 32px);\n        max-height: calc(100% - 32px);\n\n        .components-modal__content {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n      "]);return pn=function(){return e},e}var dn=wp.i18n.__,bn=wp.components.Modal,mn=function(e){var t=e.onClose,r=e.title,n=e.header,a=e.error,o=e.mainContent,l=e.sidebar,c=e.footer;return Object(y.b)(bn,{title:r||dn("Add Media","presto-player"),onRequestClose:t,css:Object(y.a)(pn()),overlayClassName:"presto-player__modal-overlay"},Object(y.b)("div",{css:Object(y.a)(un()),"data-cy":"media-modal"},Object(y.b)("div",{css:Object(y.a)(sn())},Object(y.b)("div",{css:Object(y.a)(cn())},n),a),Object(y.b)("div",{css:Object(y.a)(ln())},o),Object(y.b)("div",{css:Object(y.a)(on())},l),Object(y.b)("div",{css:Object(y.a)(an())},c)))};function vn(){var e=Object(m.a)(["\n              display: flex;\n              align-items: stretch;\n            "]);return vn=function(){return e},e}function fn(){var e=Object(m.a)(["\n                    margin: 0 0 20px 0;\n                  "]);return fn=function(){return e},e}function yn(){var e=Object(m.a)(["\n            padding: 12px 24px;\n            overflow: auto;\n            display: flex;\n            flex-direction: column;\n          "]);return yn=function(){return e},e}function hn(){var e=Object(m.a)(["\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n        "]);return hn=function(){return e},e}var gn=wp.i18n.__,On=wp.components,wn=(On.Button,On.DropZone),En=On.DropZoneProvider,jn=On.Notice,Rn=wp.element,_n=(Rn.useState,Rn.useEffect),kn=(Rn.Fragment,wp.data),Pn=kn.dispatch,xn=kn.useSelect,Cn=function(e){var t=e.onClose,r=e.onChoose,n=xn((function(e){return e("presto-player/bunny-popup").isPrivate()})),a=xn((function(e){return e("presto-player/bunny-popup").uploads()})),o=xn((function(e){return e("presto-player/bunny-popup").currentCollection()})),l=xn((function(e){return e("presto-player/bunny-popup").errors()}));_n((function(){Pn("presto-player/bunny-popup").setVideosFetched(!1),Pn("presto-player/bunny-popup").setCollections([]),Pn("presto-player/bunny-popup").setVideos([])}),[]);var c=function(e){Pn("presto-player/bunny-popup").addUploads(e)},i=gn(n?"Private Stream Library":"Public Stream Library","presto-player"),s=Object(y.b)(hr,{afterUpload:Object(y.b)(nn,{uploads:a,removeUpload:function(e){Pn("presto-player/bunny-popup").removeUpload(e)},isPrivate:n})}),u=Object(y.b)(ze,null),p=Object(y.b)(_r,{onChoose:r});return Object(y.b)(mn,{title:i,header:s,mainContent:Object(y.b)(En,{css:Object(y.a)(hn())},Object(y.b)("div",{css:Object(y.a)(yn())},!!l.length&&l.map((function(e){return Object(y.b)(jn,{css:Object(y.a)(fn()),status:"error",onRemove:function(){return Pn("presto-player/bunny-popup").removeError(e)}},e)})),o?Object(y.b)(Fr,null):Object(y.b)(Qt,null),Object(y.b)("div",{css:Object(y.a)(vn())},Object(y.b)(Ut,null)),Object(y.b)(wn,{label:"Drop files",onFilesDrop:c}))),onClose:function(){a.length?confirm("Discard your uploads?")&&(t(),Pn("presto-player/bunny-popup").setUploads([])):t()},footer:p,sidebar:u})},Sn=wp.i18n.__,Nn=wp.element.useEffect,Dn=wp.data.dispatch,Tn=function(e){var t=e.closePopup,r=e.onSelect,n=e.isPrivate;return Nn((function(){Dn("presto-player/bunny-popup").setIsPrivate(n)}),[n]),React.createElement(Cn,{onClose:t,onChoose:function(e){e.url=e.playlistURL,e.thumbnail=e.thumbnailURL,e.preview=e.webPURL,r(e)},header:Sn(n?"Private Stream Library":"Public Stream Library","presto-player"),title:Sn(n?"Private Video Stream":"Public Video Stream","presto-player")})},Bn=wp.i18n.__,Ln=wp.element.useState,An="".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"bunny/"),In=wp.i18n.__,Vn=wp.element.useState,Un="".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"bunny/stream/"),Fn=wp.i18n.__,Mn=wp.components,zn=Mn.Button,Hn=Mn.TextControl,Wn=Mn.Placeholder,Yn=Mn.Flex,Gn=Mn.FlexBlock,qn=Mn.ExternalLink,Zn=Mn.Spinner,Kn=Mn.FlexItem,Qn=Mn.Notice,Xn=wp.element.useEffect,Jn=function(e){var t=e.onRefetch,r=e.type,n=e.autoSubmit,a="stream"===r?function(e){var t=Vn(""),r=Object(s.a)(t,2),n=r[0],a=r[1],o=Vn(""),l=Object(s.a)(o,2),u=l[0],p=l[1],d=Vn(!1),b=Object(s.a)(d,2),m=b[0],v=b[1],f=Vn(0),y=Object(s.a)(f,2),h=y[0],g=y[1],O=Vn(""),w=Object(s.a)(O,2),E=w[0],j=w[1],R=function(e){return e.includes("Authorization has been denied")?"Your API key is incorrect. Please double-check to make sure you've copied it correctly.":e.includes("localhost")?"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.":e};return{saveKey:function(){var t=Object(i.a)(c.a.mark((function t(){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(""),t.prev=1,v(!0),g(0),p(In("Validating API Key...","presto-player")),t.next=7,wp.apiFetch({url:"".concat(Un,"api-key"),method:"POST",data:{api_key:n}});case 7:if(r=t.sent,r.success){t.next=11;break}throw{message:"Could not save the API key. Please double check it to make sure it's correct."};case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),g(0),j((null===t.t0||void 0===t.t0?void 0:t.t0.message)?R(t.t0.message):"Something went wrong. Please try again"),t.abrupt("return");case 18:return t.prev=18,g(1),v(!1),p(""),t.finish(18);case 23:return t.prev=23,v(!0),p(In("Setting up public video library. This make take a few moments...","presto-player")),t.next=28,wp.apiFetch({url:"".concat(Un,"library"),method:"POST",data:{type:"public"}});case 28:a=t.sent,a.id,t.next=37;break;case 32:return t.prev=32,t.t1=t.catch(23),g(0),j((null===t.t1||void 0===t.t1?void 0:t.t1.message)?R(t.t1.message):"Something went wrong. Please try again"),t.abrupt("return");case 37:return t.prev=37,g(2),v(!1),p(""),t.finish(37);case 42:return t.prev=42,v(!0),p(In("Setting up private video library. This make take a few moments...","presto-player")),t.next=47,wp.apiFetch({url:"".concat(Un,"library"),method:"POST",data:{type:"private"}});case 47:t.next=54;break;case 49:return t.prev=49,t.t2=t.catch(42),g(0),j((null===t.t2||void 0===t.t2?void 0:t.t2.message)?R(t.t2.message):"Something went wrong. Please try again"),t.abrupt("return");case 54:return t.prev=54,g(2),v(!1),p(""),t.finish(54);case 59:e();case 60:case"end":return t.stop()}}),t,null,[[1,13,18,23],[23,32,37,42],[42,49,54,59]])})));return function(){return t.apply(this,arguments)}}(),setApikey:a,step:h,saveMessage:u,saving:m,error:E,totalSteps:3}}(t):function(e){var t=Ln(""),r=Object(s.a)(t,2),n=r[0],a=r[1],o=Ln(""),l=Object(s.a)(o,2),u=l[0],p=l[1],d=Ln(!1),b=Object(s.a)(d,2),m=b[0],v=b[1],f=Ln(0),y=Object(s.a)(f,2),h=y[0],g=y[1],O=Ln(""),w=Object(s.a)(O,2),E=w[0],j=w[1],R=function(e){return e.includes("Authorization has been denied")?"Your API key is incorrect. Please double-check to make sure you've copied it correctly.":e.includes("localhost")?"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.":e};return{saveKey:function(){var t=Object(i.a)(c.a.mark((function t(){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(""),t.prev=1,v(!0),g(0),p(Bn("Validating API Key...","presto-player")),t.next=7,wp.apiFetch({url:"".concat(An,"api-key"),method:"POST",data:{api_key:n}});case 7:if(r=t.sent,r.success){t.next=11;break}throw{message:"Could not save the API key. Please double check it to make sure it's correct."};case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),g(0),j((null===t.t0||void 0===t.t0?void 0:t.t0.message)?R(t.t0.message):"Something went wrong. Please try again"),t.abrupt("return");case 18:return t.prev=18,g(1),v(!1),p(""),t.finish(18);case 23:return t.prev=23,v(!0),p(Bn("Setting up storage zones. This make take a few minutes...","presto-player")),t.next=28,wp.apiFetch({url:"".concat(An,"storage-zones"),method:"POST"});case 28:a=t.sent,a.id,t.next=37;break;case 32:return t.prev=32,t.t1=t.catch(23),g(0),j((null===t.t1||void 0===t.t1?void 0:t.t1.message)?R(t.t1.message):"Something went wrong. Please try again"),t.abrupt("return");case 37:return t.prev=37,g(2),v(!1),p(""),t.finish(37);case 42:return t.prev=42,v(!0),p(Bn("Setting up pull zones. This make take a few minutes...","presto-player")),t.next=47,wp.apiFetch({url:"".concat(An,"pull-zones"),method:"POST"});case 47:o=t.sent,o.id,t.next=56;break;case 51:return t.prev=51,t.t2=t.catch(42),g(0),j((null===t.t2||void 0===t.t2?void 0:t.t2.message)?R(t.t2.message):"Something went wrong. Please try again"),t.abrupt("return");case 56:return t.prev=56,g(3),v(!1),p(""),t.finish(56);case 61:e();case 62:case"end":return t.stop()}}),t,null,[[1,13,18,23],[23,32,37,42],[42,51,56,61]])})));return function(){return t.apply(this,arguments)}}(),setApikey:a,step:h,saveMessage:u,saving:m,error:E,totalSteps:3}}(t),o=a.saveKey,l=a.apikey,u=a.setApikey,p=a.saveMessage,d=a.saving,b=a.totalSteps,m=a.step,v=a.error;return Xn((function(){n&&o()}),[n]),React.createElement(Wn,{label:Fn("Bunny.net Video","presto-player"),instructions:React.createElement(React.Fragment,null,Fn("Enter your Bunny.net API key, which can be found on your Bunny CDN Account page.","presto-player")," ",React.createElement(qn,{href:"https://bunnycdn.com/dashboard/account"},Fn("Get My API Key","presto-player")))},d?React.createElement(Yn,null,React.createElement(Kn,null,React.createElement(Zn,null)),React.createElement(Gn,null,p,React.createElement("progress",{className:"presto-progress",max:b,value:m,style:{width:"100%"}}))):React.createElement("form",{onSubmit:function(e){e.preventDefault(),o()}},v&&React.createElement(Yn,{style:{width:"100%"}},React.createElement(Gn,null,React.createElement(Qn,{status:"error",isDismissible:!1},v))),React.createElement(Yn,{style:{width:"100%",maxWidth:"400px"}},React.createElement(Gn,null,React.createElement(Hn,{value:l,onChange:function(e){return u(e)},className:"presto-link-placeholder-input",type:"password",autoComplete:"off",placeholder:Fn("Your Bunny.net API Key","presto-player"),required:!0})),React.createElement(Kn,null,React.createElement(zn,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},Fn("Next","presto-player")," →")))))},$n=r(15),ea=r(12);function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var na=wp.components,aa=na.Button,oa=na.Disabled,la=na.DropdownMenu,ca=na.Spinner,ia=na.Toolbar,sa=na.withNotices,ua=na.BaseControl,pa=na.Placeholder,da=na.ToggleControl,ba=wp.editor,ma=ba.BlockControls,va=ba.InspectorControls,fa=wp.i18n.__,ya=wp.compose.compose,ha=wp.element,ga=ha.useEffect,Oa=ha.useState,wa=ha.Fragment,Ea=wp.data.dispatch,ja=ya([Object(p.a)(),Object(u.a)()])(sa((function(e){var t,r,n=e.attributes,a=e.setAttributes,o=e.noticeOperations,l=e.branding,u=e.presetData,p=e.createVideo,b=e.lockSave,m=e.unlockSave,v=e.onRemoveSrc,f=e.renderKey,y=e.defaultPreset,h=n.poster,g=n.src,O=n.id,w=n.tracks,E=n.visibility,j=n.previewSrc,R=n.thumbnail,_=Oa(""),k=Object(s.a)(_,2),P=k[0],x=k[1],C=Oa(!1),S=Object(s.a)(C,2),N=S[0],D=S[1],T=Oa(""),B=Object(s.a)(T,2),L=B[0],A=B[1],I=Oa({stream:!1,storage:!1}),V=Object(s.a)(I,2),U=V[0],F=V[1],M=Oa(!1),z=Object(s.a)(M,2),H=z[0],Y=z[1],G=Oa(!1),q=Object(s.a)(G,2),Z=q[0],K=q[1],Q=Oa(!1),X=Object(s.a)(Q,2),J=(X[0],X[1]),$=Oa(!1),ee=Object(s.a)($,2),te=ee[0],re=ee[1],ne=wp.data.useSelect((function(e){return e("core").canUser("read","settings")})),ae="private"===E,oe=null===(t=prestoPlayerAdmin)||void 0===t||null===(r=t.bunny)||void 0===r?void 0:r.disable_legacy_storage;function le(e){e.url?(a(ra(ra({src:e.url,preset:null==y?void 0:y.id},(null==e?void 0:e.thumbnail)?{thumbnail:e.thumbnail}:{}),(null==e?void 0:e.preview)?{preview:e.preview}:{})),console.log({media:e}),D(!0),b(),p(ra({src:e.url,type:"bunny",title:e.title},(null==e?void 0:e.guid)?{external_id:e.guid}:{})).catch((function(e){a({src:""}),console.error(e)})).finally((function(){m(),D(!1)}))):a({src:void 0,id:void 0})}ga((function(){Ea("presto-player/bunny-popup").setIsPrivate("private"===E)}),[E]),ga((function(){var e,t,r,n,a,o;F({storage:null===(e=prestoPlayerAdmin)||void 0===e||null===(t=e.isSetup)||void 0===t||null===(r=t.bunny)||void 0===r?void 0:r.storage,stream:null===(n=prestoPlayerAdmin)||void 0===n||null===(a=n.isSetup)||void 0===a||null===(o=a.bunny)||void 0===o?void 0:o.stream})}),[]);var ce=function(){var e=Object(i.a)(c.a.mark((function e(){var t,r,n,a,o,l,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:"wp/v2/settings"});case 3:t=e.sent,r=t.presto_player_bunny_pull_zones,n=t.presto_player_bunny_storage_zones,a=t.presto_player_bunny_stream_private,o=t.presto_player_bunny_stream_public,K(!0),a||Y(!0),i=(l=function(e){return!(!(null==e?void 0:e.private_id)||!(null==e?void 0:e.public_id))})(r)||l(n),s=(null==a?void 0:a.pull_zone_url)&&(null==o?void 0:o.pull_zone_url),F({storage:i,stream:s}),A(i||s?"":"stream");case 15:return e.prev=15,J(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,,15,18]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(i.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/sign",method:"POST",data:{url:t,id:0}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();ga((function(){ne?ce():K(!0)}),[ne]);var se=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ae){e.next=7;break}return e.next=3,ie(g);case 3:t=e.sent,a({previewSrc:t}),e.next=8;break;case 7:a({previewSrc:g});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ga((function(){se()}),[g]);var ue=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ae){e.next=7;break}return e.next=3,ie(R);case 3:(t=e.sent)&&(console.log({previewThumbnail:t}),a({previewThumbnail:t})),e.next=8;break;case 7:a({previewThumbnail:R});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ga((function(){ue()}),[R]);var pe=function(){var e=[];return!H&&e.push({title:U.stream?fa("Reconnect Stream","presto-player"):fa("Connect Stream","presto-player"),onClick:function(){A("stream"),re(!1)}}),!oe&&e.push({title:U.storage?fa("Reconnect Storage (Classic)","presto-player"):fa("Connect Storage (Classic)","presto-player"),onClick:function(){return A("storage")}}),React.createElement(la,{icon:"ellipsis",label:fa("Connection Options","presto-player"),controls:e})};return N||!Z?React.createElement(pa,{className:"presto-player__placeholder is-loading"},React.createElement(ca,null)):"stream"===L?React.createElement(Jn,{type:"stream",autoSubmit:te,onRefetch:function(){K(!1),ce()}}):"storage"===L?React.createElement(Jn,{type:"storage",onRefetch:function(){K(!1),ce()}}):O?React.createElement(React.Fragment,null,React.createElement(ma,null,React.createElement(d.a,{tracks:w,onChange:function(e){a({tracks:e})}}),React.createElement(ia,null,React.createElement(aa,{onClick:function(){return v()}},fa("Replace","presto-player")))),React.createElement(va,null,React.createElement($n.a,{setAttributes:a,attributes:n})),React.createElement("figure",{className:"wp-block-video"},React.createElement(oa,null,React.createElement(ea.a,{poster:h,src:j,id:O,type:"bunny",attributes:n,setAttributes:a,preset:u,branding:l,key:f})))):React.createElement("div",null,React.createElement(pa,{label:fa(ae?"Bunny.net Private Video":"Bunny.net Video","presto-player"),icon:ae?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})):React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polyline",{points:"8 17 12 21 16 17"}),React.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),React.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})),instructions:React.createElement(React.Fragment,null,fa("Add or select a Bunny.net video","presto-player"))},React.createElement(ua,{className:"presto-player__placeholder-control"},React.createElement(da,{label:"Private Video",help:ae?"Video is only accessible to those who are logged in.":"Video is accessible to everyone.",checked:ae,onChange:function(e){a({visibility:e?"private":"public"})}})),React.createElement(wa,null,U.stream&&React.createElement(aa,{isPrimary:!0,onClick:function(){return x("stream")}},fa(ae?"Add/Select Private Video Stream":"Add/Select Video Stream","presto-player")),!oe&&U.storage&&React.createElement(aa,{isSecondary:U.stream,isPrimary:!U.stream,onClick:function(){return x("storage")}},fa(ae?"Add/Select Private Video (Classic)":"Add/Select Video (Classic)","presto-player")),!U.stream&&!H&&U.storage&&React.createElement(aa,{isSecondary:!0,onClick:function(){re(!0),A("stream")}},fa("Enable Bunny.net Stream!","presto-player")),!!ne&&pe())),"storage"===P&&React.createElement(W,{isPrivate:ae,closePopup:function(){return x("")},noticeOperations:o,onSelect:le}),"stream"===P&&React.createElement(Tn,{isPrivate:ae,closePopup:function(){return x("")},noticeOperations:o,onSelect:le}))}))),Ra=r(10);function _a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pa=wp.i18n.__,xa="presto-player/bunny",Ca=ka(ka({},Ra.a),{},{attributes:ka(ka({},Ra.a.attributes),{thumbnail:{type:String,default:""},preview:{type:String,default:""}}),premium:!0,title:Pa("Presto Bunny.net Video","presto-player"),description:Pa("Serve video through Bunny.net CDN.","presto-player"),variations:[{name:"public",isDefault:!0,title:Pa("Presto Bunny.net Video","presto-player"),description:Pa("Serve public video through Bunny.net CDN.","presto-player"),attributes:{visibility:"public"}},{name:"private",title:Pa("Presto Bunny.net Private Video","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})),description:Pa("Serve private, secure video through Bunny.net CDN.","presto-player"),attributes:{visibility:"private"}}],icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polyline",{points:"8 17 12 21 16 17"}),React.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),React.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})),edit:ja})},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"getPresets",(function(){return f})),r.d(n,"getReusableVideos",(function(){return y})),r.d(n,"getReusableVideo",(function(){return h})),r.d(n,"getDefaultPreset",(function(){return g})),r.d(n,"presetsLoading",(function(){return O})),r.d(n,"branding",(function(){return w})),r.d(n,"youtube",(function(){return E})),r.d(n,"proModal",(function(){return j}));var a={};r.r(a),r.d(a,"setPresetLoading",(function(){return _})),r.d(a,"setVideosLoading",(function(){return k})),r.d(a,"setProModal",(function(){return P})),r.d(a,"setVideos",(function(){return x})),r.d(a,"updateVideos",(function(){return C})),r.d(a,"appendVideos",(function(){return S})),r.d(a,"addVideo",(function(){return N})),r.d(a,"setPresets",(function(){return D})),r.d(a,"addPreset",(function(){return T})),r.d(a,"updatePreset",(function(){return B})),r.d(a,"removePreset",(function(){return L})),r.d(a,"setBranding",(function(){return A})),r.d(a,"updateBranding",(function(){return I})),r.d(a,"saveOptions",(function(){return V})),r.d(a,"fetchOptions",(function(){return U})),r.d(a,"fetchFromAPI",(function(){return F})),r.d(a,"fetchFromWPAPI",(function(){return M})),r.d(a,"setYoutube",(function(){return z})),r.d(a,"updateYoutube",(function(){return H}));var o=r(3),l=r(6);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=wp.data,u=s.combineReducers,p=s.dispatch,d=wp.apiFetch,b=lodash.pick,m=function(e,t){return e.find((function(e){return e.id===t.id}))?e:[].concat(Object(l.a)(e),[t])},v=u({presetReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRESET":return t.value;case"ADD_PRESET":return[].concat(Object(l.a)(e),[t.value]);case"UPDATE_PRESET":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:i(i({},e),t.value)}));case"REMOVE_PRESET":return e.filter((function(e){return e!==t.value}))}return e},presetLoadingReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRESET_LOADING":return e.value}},videosLoadingReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_VIDEOS_LOADING":return e.value}},videosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0,total_pages:0,videos:[],hasResolved:!1,isError:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEOS":return t.value;case"UPDATE_VIDEOS":return i(i({},e),t.value);case"APPEND_VIDEOS":var r=e;return(t.value||[]).forEach((function(e){r.videos=m(r.videos,e)})),r;case"ADD_VIDEO":return i(i({},e),{},{videos:m(e.videos,t.value)});case"UPDATE_VIDEO":return i(i({},e),{},{videos:e.videos.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:i(i({},e),t.value)}))});case"REMOVE_VIDEO":return i(i({},e),{},{videos:e.videos.filter((function(e){return e!==t.value}))})}return e},proModalReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRO_MODAL":return e.value}},brandingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BRANDING":return t.value;case"UPDATE_BRANDING":return i(i({},e),{},Object(o.a)({},t.name,t.value))}return e},youtubeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_YOUTUBE":return t.value;case"UPDATE_YOUTUBE":return i(i({},e),{},Object(o.a)({},t.name,t.value))}return e},optionsApi:function(e,t){switch(t.type){case"FETCH_OPTIONS":return d({path:"/presto-player/v1/settings/"}).then((function(e){p("presto-player/player").setBranding(e.presto_player_branding),p("presto-player/player").setYoutube(e.presto_player_youtube)}));case"SAVE_OPTIONS":var r={presto_player_branding:b(null==t?void 0:t.branding,["logo","color","logo_width"])};return Object.keys(r).forEach((function(e){return(null==r[e]||!Object.keys((null==r?void 0:r[e])||{}).length)&&delete r[e]})),d({path:"/presto-player/v1/settings",method:"POST",data:r}),r}}});function f(e){return(null==e?void 0:e.presetReducer)||[]}function y(e){return(null==e?void 0:e.videosReducer)||[]}function h(e,t){var r,n;return(null==e||null===(r=e.videosReducer)||void 0===r||null===(n=r.videos)||void 0===n?void 0:n.find((function(e){return(null==e?void 0:e.id)===t})))||[]}function g(e){var t=((null==e?void 0:e.presetReducer)||[]).find((function(e){var t;return e.id&&e.id===(null===(t=prestoPlayer)||void 0===t?void 0:t.defaultPreset)}));return t||(t=((null==e?void 0:e.presetReducer)||[]).find((function(e){return"default"==e.slug}))),t||(t=((null==e?void 0:e.presetReducer)||[])[0]),t}function O(e){return!!(null==e?void 0:e.presetLoadingReducer)}function w(e){return null==e?void 0:e.brandingReducer}function E(e){return null==e?void 0:e.youtubeReducer}function j(e){return null==e?void 0:e.proModalReducer}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){return{type:"SET_PRESET_LOADING",value:e}}function k(e){return{type:"SET_VIDEOS_LOADING",value:e}}function P(e){return{type:"SET_PRO_MODAL",value:e}}function x(e){return{type:"SET_VIDEOS",value:e}}function C(e){return{type:"UPDATE_VIDEOS",value:e}}function S(e){return{type:"APPEND_VIDEOS",value:e}}function N(e){return{type:"ADD_VIDEO",value:e}}function D(e){return{type:"SET_PRESET",value:e}}function T(e){return{type:"ADD_PRESET",value:e}}function B(e){return{type:"UPDATE_PRESET",value:e}}function L(e){return{type:"REMOVE_PRESET",value:e}}function A(e){return{type:"SET_BRANDING",value:e}}function I(e,t){return{type:"UPDATE_BRANDING",name:e,value:t}}function V(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:"SAVE_OPTIONS"},e)}function U(){return{type:"FETCH_OPTIONS"}}function F(e){return{type:"FETCH_FROM_API",path:e}}function M(e,t){return{type:"FETCH_FROM_WP_API",path:e,args:t}}function z(e){return{type:"SET_YOUTUBE",value:e}}function H(e,t){return{type:"UPDATE_YOUTUBE",name:e,value:t}}var W=r(2),Y=r.n(W),G=r(5);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K=wp.apiFetch,Q={FETCH_FROM_API:function(e){return K({url:prestoPlayer.root+prestoPlayer.prestoVersionString+e.path})},FETCH_FROM_WP_API:function(e){return Object(G.a)(Y.a.mark((function t(){var r,n,a,o,l,c,i;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.args,n=e.path,a=void 0===n?"":n,t.next=3,K(Z(Z(Z({path:wp.url.addQueryArgs("wp/v2/".concat(a),null==r?void 0:r.query)},(null==r?void 0:r.data)?{data:r.data}:{}),null==r?void 0:r.options),{},{parse:!1}));case 3:return o=t.sent,t.next=6,o.json();case 6:return l=t.sent,c=o.headers&&o.headers.get("X-WP-Total"),i=o.headers&&o.headers.get("X-WP-TotalPages"),t.abrupt("return",new Promise((function(e,t){e({data:l,total:c,total_pages:i})})));case 10:case"end":return t.stop()}}),t)})))()}},X={getPresets:Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,F("preset");case 3:return t=e.sent,_(!1),e.abrupt("return",D(t));case 6:case"end":return e.stop()}}),e)})),getReusableVideo:Y.a.mark((function e(t){var r,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="presto-videos/".concat(t),e.next=3,M(r,{});case 3:return n=e.sent,e.abrupt("return",N((null==n?void 0:n.data)||{}));case 5:case"end":return e.stop()}}),e)}))},J=(0,wp.data.registerStore)("presto-player/player",{reducer:v,selectors:n,actions:a,controls:Q,resolvers:X}),$=(r(39),r(8)),ee=wp.components,te=ee.Modal,re=ee.Button,ne=wp.data,ae=ne.dispatch,oe=ne.useSelect,le=function(){return oe((function(e){return e("presto-player/player").proModal()}))?React.createElement(te,{title:"Pro Feature",onRequestClose:function(){ae("presto-player/player").setProModal(!1)}},React.createElement("h2",null,"Unlock Presto Player ",React.createElement($.a,null)),React.createElement("p",null,"Get this feature and more with the Pro version of Presto Player!"),React.createElement(re,{href:"https://prestoplayer.com",target:"_blank",isPrimary:!0},"Learn More")):""},ce=wp.blocks,ie=ce.registerBlockType,se=ce.unregisterBlockType,ue=wp.plugins,pe=ue.registerPlugin,de=ue.unregisterPlugin,be=wp.data,me=be.select,ve=be.dispatch,fe=wp.element.render,ye=function(){return null},he=function(e){var t=e.getContext,r=e.register,n=e.unregister,a=e.before,o=void 0===a?ye:a,l=e.after,c=void 0===l?ye:l,i={};!function(){o();var e=t(),a=[];e.keys().forEach((function(t){var o=e(t);o!==i[t]&&(i[t]&&n(i[t]),r(o),a.push(o.name),i[t]=o)})),c(a)}()},ge=null;he({getContext:function(){return r(40)},register:function(e){var t,r=e.name,n=e.options;(null===(t=prestoPlayer)||void 0===t?void 0:t.isPremium)?ie(r,n):n.premium||ie(r,n)},unregister:function(e){var t=e.name;return se(t)},before:function(){ge=me("core/editor").getSelectedBlockClientId(),ve("core/editor").clearSelectedBlock()},after:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];me("core/editor").getBlocks().forEach((function(t){var r=t.name,n=t.clientId;e.includes(r)&&ve("core/editor").selectBlock(n)})),ge?ve("core/editor").selectBlock(ge):ve("core/editor").clearSelectedBlock(),ge=null}}),he({getContext:function(){return r(49)},register:function(e){var t=e.name,r=e.options;return pe(t,r)},unregister:function(e){var t=e.name;return de(t)}}),jQuery("body").append('<div id="presto-plugin-app"></div>'),fe(React.createElement(le,null),document.getElementById("presto-plugin-app")),ve("presto-player/player").fetchOptions();var Oe=!1;wp.data.subscribe((function(){var e=wp.data.select("core/editor").isSavingPost(),t=wp.data.select("core/editor").isAutosavingPost();if(e&&!t){if(Oe)return;Oe=!0;var r=J.getState().brandingReducer;ve("presto-player/player").saveOptions({branding:r}).then((function(){Oe=!1}))}}))},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return ve})),r.d(t,"options",(function(){return fe}));var n=r(6),a=r(3),o=r(1),l=r(11),c=r(16),i=r(14),s=r(17),u=r.n(s);var p={setUrlPrivate:function(){var e=-1===window.location.href.indexOf("?")?"?":"&",t=window.location.href+e+"presto_video_type=private";window.history.pushState({path:t},"",t)},setUrlPublic:function(){var e=-1===window.location.href.indexOf("?")?"?":"&",t=window.location.href+e+"presto_video_type=public";window.history.pushState({path:t},"",t)},unsetUrlParams:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=new URL(e);return t.forEach((function(e){r.searchParams.delete(e)})),r.href}(window.location.href,["presto_video_type"]);window.history.pushState({path:e},"",e)}},d=(lodash.noop,window.location.href),b=wp.components,m=b.Button,v=(b.Notice,b.Placeholder),f=(b.DropZone,b.withFilters),y=(b.BaseControl,b.ToggleControl,b.FormFileUpload,wp.i18n.__),h=wp.element,g=h.useState,O=h.useEffect,w=wp.data.useSelect,E=(wp.deprecated,wp.editor),j=E.MediaUpload,R=E.MediaUploadCheck,_=E.URLPopover,k=function(e){var t=e.src,r=e.onChange,n=e.onSubmit,a=e.onClose;return React.createElement(_,{onClose:a},React.createElement("form",{className:"block-editor-media-placeholder__url-input-form",onSubmit:n},React.createElement("input",{"data-cy":"url-input",className:"block-editor-media-placeholder__url-input-field",type:"url","aria-label":y("URL","presto-player"),placeholder:y("Paste or type a Youtube, Vimeo or .mp4 video URL","presto-player"),onChange:r,value:t}),React.createElement(m,{"data-cy":"url-submit",className:"block-editor-media-placeholder__url-input-submit-button",icon:"editor-break",label:y("Apply","presto-player"),type:"submit"})))};var P,x=f("editor.MediaPlaceholder")((function(e){var t=e.value,r=void 0===t?{}:t,n=e.allowedTypes,a=void 0===n?[]:n,l=e.className,c=e.icon,i=e.url,s=void 0===i||i,b=e.labels,f=void 0===b?{}:b,h=e.mediaPreview,E=e.notices,_=e.isAppender,P=e.isPrivate,x=e.addToGallery,C=e.onSelect,S=e.onCancel,N=e.onSelectURL,D=e.onDoubleClick,T=e.children,B=e.allowURLs,L=w((function(e){return(0,e("core/block-editor").getSettings)().mediaUpload}),[]),A=g(""),I=Object(o.a)(A,2),V=I[0],U=I[1],F=g(!1),M=Object(o.a)(F,2),z=M[0],H=M[1];O((function(){var e;U(null!==(e=null==r?void 0:r.src)&&void 0!==e?e:"")}),[r]);var W=function(e){U(e.target.value)},Y=function(){H(!0)},G=function(){H(!1)},q=function(e){e.preventDefault(),V&&N&&(N(V),G())},Z=function(e,t){var r=f.instructions,n=f.title;L||N||(r=y("To edit this block, you need permission to upload media.","presto-player"));var a=u()("block-editor-media-placeholder",l,{"is-appender":_});return React.createElement(v,{icon:c,label:n,instructions:r,className:a,notices:E,onClick:t,onDoubleClick:D,preview:h},T,e)},K=function(){return N&&React.createElement("div",{className:"block-editor-media-placeholder__url-input-container"},s&&React.createElement(m,{"data-cy":"video-url",className:"block-editor-media-placeholder__button",onClick:Y,isPressed:z,isTertiary:!0},y("Video URL","presto-player")),z&&React.createElement(k,{src:V,onChange:W,onSubmit:q,onClose:G}))};return React.createElement(R,{fallback:Z(K())},function(){var e=React.createElement(j,{title:y(P?"Select or Upload Private Video":"Select or Upload Video","presto-player"),addToGallery:x,gallery:!1,multiple:!1,onSelect:function(e){p.unsetUrlParams(),C(e)},onClose:function(){p.unsetUrlParams()},allowedTypes:a,value:Array.isArray(r)?r.map((function(e){return e.id})):r.id,render:function(e){var t=e.open;return React.createElement(m,{"data-cy":"add-video",isPrimary:!0,onClick:function(e){e.stopPropagation(),p.unsetUrlParams(),P?p.setUrlPrivate(d):p.setUrlPublic(d),t()}},y(P?"Add/Select Private Video":"Add/Select Video","presto-player"))}});if(L){var t=React.createElement(React.Fragment,null,e,!!B&&K(),S&&React.createElement(m,{className:"block-editor-media-placeholder__cancel-button",title:y("Cancel","presto-player"),isLink:!0,onClick:S},y("Cancel","presto-player")));return Z(t)}return Z(e)}())})),C=r(8),S=wp.i18n.__,N=wp.components,D=N.withNotices,T=N.BaseControl,B=N.ToggleControl,L=N.Notice,A=wp.data.dispatch,I=["video"],V=D((function(e){var t,r=e.noticeUI,n=e.onSelect,a=e.children,o=e.onSelectURL,l=e.onUploadError,c=e.setAttributes,i=e.attributes,s="private"===i.visibility;return React.createElement("div",null,React.createElement(x,{icon:s?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})):React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),labels:{title:S(s?"Presto Private Video":"Presto Video","presto-player"),instructions:S(s?"Upload a video file, or pick one from your media library.":"Upload a video file, pick one from your media library, or add one with a URL.","presto-player")},onSelect:n,onSelectURL:o,switcher:!0,isPrivate:s,allowURLs:!s,accept:"video/*",setAttributes:c,allowedTypes:I,value:i,notices:r,onError:l},React.createElement("div",{style:{width:"100%"}},React.createElement(T,{className:"presto-player__placeholder-control"},React.createElement(B,{label:React.createElement("div",null,S("Make Private","presto-player")," ",!(null===(t=prestoPlayer)||void 0===t?void 0:t.isPremium)&&React.createElement(C.a,null)),help:S(s?"This video is only accessible to those who are logged in.":"This video is currently accessible to everyone.","presto-player"),checked:s,onChange:function(e){var t;(null===(t=prestoPlayer)||void 0===t?void 0:t.isPremium)?c({visibility:e?"private":"public"}):A("presto-player/player").setProModal(!0)}})),!!a&&React.createElement("div",{style:{width:"100%"}},a),!!s&&React.createElement(L,{status:"warning",isDismissible:!1},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,S("Note","presto-player"))),S("Private videos use php to stream your video. Keep in mind this will use up disk space and bandwidth so it may not be an appropriate choice for some hosts.","presto-player"))))))})),U=r(23),F=r(15),M=r(12),z=wp.i18n.__,H=wp.blob,W=H.getBlobByURL,Y=H.isBlobURL,G=wp.components,q=G.Button,Z=G.Disabled,K=G.Toolbar,Q=G.Notice,X=G.withNotices,J=G.Placeholder,$=G.Spinner,ee=wp.editor,te=ee.BlockControls,re=ee.InspectorControls,ne=wp.compose.compose,ae=wp.element,oe=ae.useEffect,le=ae.useState,ce=wp.data.dispatch,ie=wp.blocks.createBlock,se=["video"],ue=ne([Object(i.a)(),Object(c.a)()])(X((function(e){e.noticeUI;var t=e.attributes,r=e.setAttributes,n=e.noticeOperations,a=e.branding,c=e.loading,i=e.presetData,s=e.createVideo,u=e.onRemoveSrc,p=e.renderKey,d=e.lockSave,b=e.unlockSave,m=e.clientId,v=e.defaultPreset,f=t.poster,y=t.src,h=t.id,g=t.tracks,O=le(""),w=Object(o.a)(O,2),E=w[0],j=w[1],R=function(e){n.removeAllNotices(),n.createErrorNotice(null==e?void 0:e.message)};return oe((function(){if(!h&&Y(y)){var e=W(y);e&&mediaUpload({filesList:[e],onFileChange:function(e){var t=Object(o.a)(e,1)[0].url;r({src:t})},onError:function(e){n.createErrorNotice(e)},allowedTypes:se})}}),[]),y?c||!h?React.createElement(J,{className:"presto-player__placeholder is-loading"},React.createElement($,null)):React.createElement("div",null,React.createElement(te,null,React.createElement(U.a,{tracks:g,onChange:function(e){r({tracks:e})}}),React.createElement(K,null,React.createElement(q,{onClick:function(){return u()}},z("Replace","presto-player")))),React.createElement(re,null,React.createElement(F.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(Z,null,React.createElement(M.a,{poster:f,src:y,id:h,type:"hosted",attributes:t,setAttributes:r,preset:i,branding:a,key:p})))):React.createElement("div",null,React.createElement(V,{onSelect:function(e){e&&e.url?(r({src:e.url,preset:null==v?void 0:v.id,attachment_id:e.id}),d(),s({src:e.url,type:"attachment",attachment_id:e.id}).catch((function(e){r({src:""}),R(e)})).finally(b)):r({src:void 0,id:void 0})},onSelectURL:function(e){var t;if(r({attachment_id:null}),e&&Object(l.d)(e)&&!(null===(t=prestoPlayer)||void 0===t?void 0:t.isPremium))return void j(React.createElement(Q,{status:"info",onRemove:function(){return j("")}},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,z("Get HLS Streaming and more with Presto Player Pro!","presto-player"))),z("Stream HLS links and more with Presto Player Pro.","presto-player"),React.createElement("div",{style:{marginTop:"1em"}},React.createElement(q,{isPrimary:!0},z("Upgrade","presto-player"))))));if(e!==y){var n=Object(l.a)(e).type;if("youtube"===n){var a=ie("presto-player/youtube",{src:e});return void ce("core/editor").replaceBlock(m,a)}if("vimeo"===n){var o=ie("presto-player/vimeo",{src:e});return void ce("core/editor").replaceBlock(m,o)}r({src:e,attachmend_id:null}),r({preset:null==v?void 0:v.id}),d(),s({src:e,type:"link"}).catch((function(e){r({src:""}),R(e)})).finally(b)}},setAttributes:r,attributes:t,onError:function(e){n.removeAllNotices(),n.createErrorNotice(e)}},E))}))),pe=r(10);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=wp.i18n.__,ve="presto-player/self-hosted",fe=be(be({},pe.a),{},{title:me("Presto Video","presto-player"),description:me("Presto Self-hosted video block.","presto-player"),variations:[{name:"public",isDefault:!0,title:me("Presto Video","presto-player"),description:me("Presto Self-hosted video block.","presto-player"),attributes:{visibility:"public"}}].concat(Object(n.a)((null===(P=prestoPlayer)||void 0===P?void 0:P.isPremium)?[{name:"private",title:me("Private Private Video","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})),description:me("Private video self-hosted block.","presto-player"),attributes:{visibility:"private"}}]:[])),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),edit:ue})},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return V})),r.d(t,"options",(function(){return U}));var n=r(2),a=r.n(n),o=r(5),l=r(1),c=(r(17),wp.compose.useInstanceId),i=wp.i18n.__,s=wp.components,u=s.VisuallyHidden,p=s.Button,d=s.Icon,b=wp.element.useRef;var m=function e(t){t.className;var r=t.onChange,n=t.value,a=t.placeholder,o=c(e),l=b();return React.createElement("div",{className:"block-editor-inserter__search",style:{padding:0}},React.createElement(u,{as:"label",htmlFor:"block-editor-inserter__search-".concat(o)},a),React.createElement("input",{ref:l,className:"block-editor-inserter__search-input",id:"block-editor-inserter__search-".concat(o),type:"search",placeholder:a,onChange:function(e){return r(e.target.value)},autoComplete:"off",value:n||""}),React.createElement("div",{className:"block-editor-inserter__search-icon"},!!n&&React.createElement(p,{icon:"close-small",label:i("Reset search","presto-player"),onClick:function(){r(""),l.current.focus()}}),!n&&React.createElement(d,{icon:"search"})))},v=function(e){var t=e.icon,r=e.title,n=e.id,a=e.selectBlock,o=e.i;return React.createElement("button",{type:"button",id:"video-".concat(n),tabIndex:o,onClick:a,role:"option",className:"components-button block-editor-block-types-list__item editor-block-list-item-kadence-spacer"},React.createElement("span",{className:"block-editor-block-types-list__item-icon"},React.createElement("span",{className:"block-editor-block-icon has-colors"},t)),React.createElement("span",{className:"block-editor-block-types-list__item-title"},r))},f=wp.i18n.__,y=wp.components,h=(y.Panel,y.PanelBody),g=y.Button,O=y.Spinner,w=wp.editPost,E=w.PluginSidebar,j=w.PluginSidebarMoreMenuItem,R=wp.element,k=R.Fragment,P=R.useEffect,x=R.useState,C=R.useCallback,S=wp.data,N=S.dispatch,D=S.useSelect,T=wp.blocks,B=T.createBlock,L=T.getBlockType,A=wp.apiFetch,I=wp.blockSerializationDefaultParser.parse;var V="presto-player",U={render:function(){var e,t,r,n=(e=x(0),(t=Object(l.a)(e,2))[0],r=t[1],function(){return r((function(e){return e+1}))}),c=React.createElement("svg",{viewBox:"0 0 35 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{"clip-path":"url(#clip0)"},React.createElement("path",{d:"M23.3722 16.9766L33.2059 11.2991L33.2059 22.6541L23.3722 16.9766Z",fillOpacity:"0.7"}),React.createElement("path",{d:"M23.3745 5.6227L33.2082 11.3002L23.3745 16.9776L23.3745 5.6227Z",fillOpacity:"0.75"}),React.createElement("path",{d:"M23.3745 5.62242L23.3745 16.9773L13.5409 11.2999L23.3745 5.62242Z",fillOpacity:"0.8"}),React.createElement("path",{d:"M23.399 5.613L13.5654 11.2905L13.5654 -0.0644536L23.399 5.613Z",fillOpacity:"0.85"}),React.createElement("path",{d:"M13.5699 11.3038L13.5699 22.6587L3.73623 16.9813L13.5699 11.3038Z",fillOpacity:"0.8"}),React.createElement("path",{d:"M13.5699 -0.0245525L13.5699 11.3304L3.73623 5.6529L13.5699 -0.0245525Z",fillOpacity:"0.9"}),React.createElement("path",{d:"M13.5699 22.6451L13.5699 34L3.73623 28.3226L13.5699 22.6451Z",fillOpacity:"0.7"}),React.createElement("path",{d:"M23.3745 16.9774L33.2082 22.6549L23.3745 28.3323L23.3745 16.9774Z",fillOpacity:"0.65"}),React.createElement("path",{d:"M3.73774 16.9774L13.5714 22.6549L3.73774 28.3323L3.73774 16.9774Z",fillOpacity:"0.75"}),React.createElement("path",{d:"M3.73774 5.63149L13.5714 11.3089L3.73774 16.9864L3.73774 5.63149Z",fillOpacity:"0.85"}),React.createElement("path",{d:"M23.3745 16.9772L23.3745 28.3321L13.5409 22.6546L23.3745 16.9772Z",fillOpacity:"0.6"})),React.createElement("defs",null,React.createElement("clipPath",{id:"clip0"},React.createElement("rect",{width:"35",height:"34",fill:"white"})))),i=x(!1),s=Object(l.a)(i,2),u=s[0],p=s[1],d=x(1),b=Object(l.a)(d,2),y=b[0],w=b[1],R=x(!1),S=Object(l.a)(R,2),T=S[0],V=S[1],U=x(""),F=Object(l.a)(U,2),M=F[0],z=F[1],H=C(_.debounce((function(e){Z({replace:!0,term:e})}),250),[]);P((function(){H(M)}),[M]),P((function(){V(!0),Z({replace:!1})}),[y]);var W=D((function(e){return e("presto-player/player").getReusableVideos()}),[M,y]),Y=W.videos,G=W.total_pages,q=W.hasResolved,Z=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,o,l,c,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.replace,o=t.term,e.next=3,A({path:wp.url.addQueryArgs("wp/v2/presto-videos",{search:o,page:y,per_page:10}),parse:!1});case 3:return l=e.sent,e.next=6,l.json();case 6:c=e.sent,i=l.headers&&parseInt(l.headers.get("X-WP-Total")),s=l.headers&&parseInt(l.headers.get("X-WP-TotalPages")),r?N("presto-player/player").updateVideos({videos:c,hasResolved:!0,total:i,total_pages:s}):(N("presto-player/player").appendVideos(c),N("presto-player/player").updateVideos({hasResolved:!0,total:i,total_pages:s})),n(),V(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();P((function(){p(y<G)}),[y,G]);var K=function(){var e=y+1;w(e=e>G?G:e)},Q=function(e){var t,r,n,a,o=I(null==e||null===(t=e.content)||void 0===t?void 0:t.raw);if(null==o||null===(r=o[0])||void 0===r||null===(n=r.innerBlocks)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.blockName){var l,c,i,s,u=L(null==o||null===(l=o[0])||void 0===l||null===(c=l.innerBlocks)||void 0===c||null===(i=c[0])||void 0===i?void 0:i.blockName);return(null==u||null===(s=u.icon)||void 0===s?void 0:s.src)?u.icon.src:""}return""};return React.createElement(k,null,React.createElement(j,{target:"presto-player-sidebar",icon:c},f("Presto Player","presto-player")),React.createElement(E,{name:"presto-player-sidebar",title:f("Presto Player","presto-player"),icon:c},React.createElement(h,null,React.createElement("h2",{style:{marginTop:0}},f("Media Hub","presto-player")),React.createElement(m,{placeholder:"Search media...",value:M,onChange:function(e){return t=e,w(1),void z(t);var t}}),React.createElement("div",{className:"block-editor-inserter__panel-content"},q?React.createElement("div",{role:"listbox",className:"block-editor-block-types-list presto-player__panel-grid-list","aria-label":f("Media Hub","presto-player")},Y.length?Y.map((function(e,t){var r;return React.createElement(v,{selectBlock:function(t){N("core/editor").insertBlock(B("presto-player/reusable-display",{id:null==e?void 0:e.id}))},icon:Q(e),title:(null==e||null===(r=e.title)||void 0===r?void 0:r.raw)||"Untitled",id:null==e?void 0:e.id,i:t,key:null==e?void 0:e.id})})):function(){if(!Y.length)return M?React.createElement("p",null,f("No videos found.","presto-player")):React.createElement(g,{href:"post-new.php?post_type=pp_video_block",isSecondary:!0},f("Create A Reusable Video","presto-player"))}(),!M&&u&&Y.length?React.createElement("div",{style:{"margin-top":"20px","text-align":"center",display:"flex","justify-content":"center",width:"100%"}},React.createElement(g,{isSecondary:!0,isSmall:!0,onClick:K,isBusy:T},"Load More")):""):React.createElement(O,null)))))}}},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return R})),r.d(t,"options",(function(){return _}));var n=r(1),a=wp.i18n.__,o=wp.blockEditor,l=o.InnerBlocks,c=o.useBlockProps,i=wp.editor,s=(i.BlockControls,i.InspectorControls),u=wp.components,p=u.Disabled,d=(u.Toolbar,u.Button),b=u.PanelBody,m=(u.Panel,u.Placeholder),v=u.Spinner,f=wp.data,y=f.useSelect,h=f.dispatch,g=wp.element,O=g.useState,w=g.useEffect,E=wp.blockSerializationDefaultParser.parse,j=wp.blockEditor,R=(j.InnerBlocks,j.useBlockProps,"presto-player/reusable-display"),_={title:"Reusable Block Display",category:"presto",attributes:{id:Number},supports:{align:!0,inserter:!1,reusable:!1,html:!1},icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),React.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),edit:function(e){var t,r=e.attributes,o=e.isSelected,i=e.clientId,u=r.id,f=c(),g=O(!1),j=Object(n.a)(g,2),R=j[0],_=j[1],k=O([]),P=Object(n.a)(k,2),x=P[0],C=P[1],S=O(""),N=Object(n.a)(S,2),D=N[0],T=N[1],B=y((function(e){if(u)return e("presto-player/player").getReusableVideo(u)}));w((function(){wp.data.dispatch("core/block-editor").selectBlock(i)}),[R]);var L=y((function(e){return e("core/editor").getBlocksByClientId(i)[0].innerBlocks}));return L&&(null==B?void 0:B.id)&&L.forEach((function(e){h("core/editor").updateBlockAttributes(e.clientId,{selectionOverrideClientId:i})})),w((function(){if(B.id){var e,t,r;_(!0);var n=E(null==B||null===(e=B.content)||void 0===e?void 0:e.raw);C([null==n||null===(t=n[0])||void 0===t?void 0:t.innerBlocks[0].blockName,null==n||null===(r=n[0])||void 0===r?void 0:r.innerBlocks[0].attrs]),T("post.php?post=".concat(B.id,"&action=edit"))}}),[B]),R?x?React.createElement(React.Fragment,null,React.createElement(s,null,React.createElement(b,null,React.createElement("p",null,"This is a reusable video that you can edit once and place anywhere."),React.createElement(d,{isSecondary:!0,href:"edit.php?post_type=pp_video_block"},a("Manage Media Hub","presto-player")))),React.createElement("div",{className:"block-library-block__reusable-block-container"},React.createElement("div",f,o&&React.createElement("div",{className:"reusable-block-edit-panel"},React.createElement("b",{className:"reusable-block-edit-panel__info"},null==B||null===(t=B.title)||void 0===t?void 0:t.raw),React.createElement(d,{isSecondary:!0,href:D,className:"reusable-block-edit-panel__button"},a("Edit Reusable Video","presto-player"))),React.createElement(p,null,React.createElement(l,{template:[x],templateLock:"all",renderAppender:!1}))))):void 0:React.createElement("div",f,React.createElement(m,null,React.createElement(v,null)))},save:function(){return null}}},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return x})),r.d(t,"options",(function(){return C}));var n=r(3),a=r(16),o=r(14),l=r(15),c=r(12),i=r(27),s=r(11),u=r(13),p=wp.components,d=p.Button,b=p.Disabled,m=p.Toolbar,v=p.Placeholder,f=p.Spinner,y=p.withNotices,h=wp.editor,g=h.BlockControls,O=h.InspectorControls,w=wp.element.useEffect,E=wp.i18n.__,j=(0,wp.compose.compose)([Object(o.a)(),Object(a.a)()])(y((function(e){var t=e.attributes,r=e.setAttributes,n=e.branding,a=e.noticeOperations,o=e.loading,p=e.createVideo,y=e.lockSave,h=e.unlockSave,j=e.presetData,R=e.onRemoveSrc,_=e.renderKey,k=t.poster,P=t.src,x=t.id,C=Object(u.b)(P);return w((function(){C&&r({id:0});var e=Object(s.b)(P);r({video_id:e}),y(),p({src:P,external_id:e,type:"vimeo"}).catch((function(e){r({src:""}),function(e){a.removeAllNotices(),a.createErrorNotice(null==e?void 0:e.message)}(e)})).finally(h)}),[P]),P?o||!x?React.createElement(v,{className:"presto-player__placeholder is-loading"},React.createElement(f,null)):React.createElement(React.Fragment,null,React.createElement(g,null,React.createElement(m,null,React.createElement(d,{onClick:function(){return R()}},E("Replace","presto-player")))),React.createElement(O,null,React.createElement(l.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(b,null,React.createElement(c.a,{poster:k,src:P,type:"vimeo",id:x,attributes:t,setAttributes:r,preset:j,branding:n,key:_})))):React.createElement("div",null,React.createElement(i.a,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z"})),label:E("Presto Vimeo Video","presto-player"),instructions:E("Enter Vimeo Video URL","presto-player"),placeholder:E("Vimeo URL","presto-player"),attributes:t,setAttributes:r,onSelectURL:function(e){e!==P&&r({src:e})}}))}))),R=r(10);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=wp.i18n.__,x="presto-player/vimeo",C=k(k({},R.a),{},{attributes:k(k({},R.a.attributes),{},{video_id:{type:String}}),title:P("Presto Vimeo Video","presto-player"),description:P("A vimeo video wrapped in an awesome player.","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z"})),edit:j})},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return x})),r.d(t,"options",(function(){return C}));var n=r(3),a=r(16),o=r(14),l=r(15),c=r(12),i=r(27),s=r(11),u=r(13),p=wp.components,d=p.Button,b=p.Disabled,m=p.Toolbar,v=p.Placeholder,f=p.Spinner,y=p.withNotices,h=wp.editor,g=h.BlockControls,O=h.InspectorControls,w=wp.element.useEffect,E=wp.i18n.__,j=(0,wp.compose.compose)([Object(o.a)(),Object(a.a)()])(y((function(e){var t=e.attributes,r=e.setAttributes,n=e.noticeOperations,a=e.branding,o=e.createVideo,p=e.loading,y=e.presetData,h=e.onRemoveSrc,j=e.lockSave,R=e.unlockSave,_=e.renderKey,k=t.poster,P=t.src,x=t.id,C=Object(u.b)(P);return w((function(){C&&r({id:0});var e=Object(s.c)(P);r({video_id:e}),j(),o({src:P,external_id:e,type:"youtube"}).catch((function(e){r({src:""}),function(e){n.removeAllNotices(),n.createErrorNotice(null==e?void 0:e.message)}(e)})).finally(R)}),[P]),P?p||!x?React.createElement(v,{className:"presto-player__placeholder is-loading"},React.createElement(f,null)):React.createElement(React.Fragment,null,React.createElement(g,null,React.createElement(m,null,React.createElement(d,{onClick:function(){return h()}},E("Replace","presto-player")))),React.createElement(O,null,React.createElement(l.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(b,null,React.createElement(c.a,{poster:k,src:P,type:"youtube",id:x,attributes:t,setAttributes:r,preset:y,branding:a,key:_})))):React.createElement("div",null,React.createElement(i.a,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),React.createElement("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})),label:E("Presto Youtube Video","presto-player"),instructions:E("Enter Youtube Video URL","presto-player"),placeholder:E("Youtube URL","presto-player"),attributes:t,setAttributes:r,onSelectURL:function(e){e!==P&&r({src:e})}}))}))),R=r(10);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=wp.i18n.__,x="presto-player/youtube",C=k(k({},R.a),{},{attributes:k(k({},R.a.attributes),{},{video_id:{type:String}}),title:P("Presto Youtube Video","presto-player"),description:P("A youtube video wrapped in an awesome player.","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),React.createElement("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})),edit:j})}],[[35,1,2]]]);
//# sourceMappingURL=admin-39aabba4.js.map