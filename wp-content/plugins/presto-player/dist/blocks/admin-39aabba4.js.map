{"version":3,"sources":["webpack:///./src/admin/blocks/shared/components/ProBadge.js","webpack:///./src/admin/blocks/blocks/attributes.js","webpack:///./src/admin/blocks/blocks/block-options.js","webpack:///./src/shared/util.js","webpack:///./src/admin/blocks/shared/Player.js","webpack:///./src/admin/blocks/util.js","webpack:///./src/admin/blocks/blocks/with-player-data.js","webpack:///./src/admin/blocks/shared/settings/MutedPreviewOptions.js","webpack:///./src/admin/blocks/shared/settings/index.js","webpack:///./src/admin/blocks/shared/branding/index.js","webpack:///./src/admin/blocks/shared/chapters/components/Chapter.js","webpack:///./src/admin/blocks/shared/chapters/index.js","webpack:///./src/admin/blocks/shared/presets/Controls.js","webpack:///./src/admin/blocks/shared/presets/Behavior.js","webpack:///./src/admin/blocks/shared/presets/Style.js","webpack:///./src/admin/blocks/shared/components/LoadSelect.js","webpack:///./src/admin/blocks/shared/presets/parts/MailchimpConfig.js","webpack:///./src/admin/blocks/shared/presets/parts/MailerLiteConfig.js","webpack:///./src/admin/blocks/shared/presets/parts/ActiveCampaignConfig.js","webpack:///./src/admin/blocks/shared/presets/parts/FluentCRMConfig.js","webpack:///./src/admin/blocks/shared/presets/parts/ChooseProvider.js","webpack:///./src/admin/blocks/shared/presets/Email.js","webpack:///./src/admin/blocks/shared/components/ColorPopup.js","webpack:///./src/admin/blocks/shared/components/UrlSelect.js","webpack:///./src/admin/blocks/shared/presets/parts/YoutubeChannelId.js","webpack:///./src/admin/blocks/shared/presets/ActionBar.js","webpack:///./src/admin/ui/Menu.js","webpack:///./src/admin/blocks/shared/presets/Preview.js","webpack:///./src/admin/blocks/shared/presets/Edit.js","webpack:///./src/admin/blocks/shared/presets/Preset.js","webpack:///./src/admin/blocks/shared/presets/index.js","webpack:///./src/admin/blocks/shared/BlockInspectorControls.js","webpack:///./src/shared/services/fetch.js","webpack:///./src/admin/blocks/blocks/with-player-edit.js","webpack:///./src/admin/blocks/shared/tracks/TracksEditor.js","webpack:///./src/admin/blocks/shared/LinkPlaceholder.js","webpack:///./src/component-library/react/src/react-component-lib/utils/case.ts","webpack:///./src/component-library/react/src/react-component-lib/utils/attachProps.ts","webpack:///./src/component-library/react/src/react-component-lib/utils/index.tsx","webpack:///./src/component-library/react/src/react-component-lib/createComponent.tsx","webpack:///./src/component-library/react/src/react-component-lib/createOverlayComponent.tsx","webpack:///./src/component-library/react/src/components.ts","webpack:///./src/admin/blocks/blocks sync index\\.js$","webpack:///./src/admin/blocks/blocks/reusable-edit/index.js","webpack:///./src/admin/blocks/plugins sync index\\.js$","webpack:///./src/admin/blocks/shared/media/chunk-upload.js","webpack:///./src/admin/blocks/shared/media/MediaItem.js","webpack:///./src/admin/blocks/shared/media/MediaFolder.js","webpack:///./src/admin/blocks/shared/media/MediaPopup.js","webpack:///./src/admin/blocks/blocks/bunny/StorageMedia.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/store/reducer.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/store/selectors.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/store/actions.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/store/store.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/utils.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/Sidebar.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/ProgressBar.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/ProgressOverlay.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/ThumbTemplate.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/video/Video.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/Loading.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/video/Videos.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/collections/Collection.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/collections/Collections.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/collections/CreateCollection.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/Header.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/Footer.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/BackButton.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/CollectionHeader.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/upload/Upload.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/upload/Uploads.js","webpack:///./src/admin/blocks/shared/media/MediaPopupTemplate.js","webpack:///./src/admin/blocks/blocks/bunny/popup/stream/Popup.js","webpack:///./src/admin/blocks/blocks/bunny/StreamMedia.js","webpack:///./src/admin/blocks/blocks/bunny/useStorageConnection.js","webpack:///./src/admin/blocks/blocks/bunny/useStreamConnection.js","webpack:///./src/admin/blocks/blocks/bunny/APIPlaceholder.js","webpack:///./src/admin/blocks/blocks/bunny/edit.js","webpack:///./src/admin/blocks/blocks/bunny/index.js","webpack:///./src/admin/blocks/store/player/reducer.js","webpack:///./src/admin/blocks/store/player/selectors.js","webpack:///./src/admin/blocks/store/player/actions.js","webpack:///./src/admin/blocks/store/player/controls.js","webpack:///./src/admin/blocks/store/player/resolvers.js","webpack:///./src/admin/blocks/store/player/index.js","webpack:///./src/admin/blocks/shared/ProUpgradeModal.js","webpack:///./src/admin/blocks/blocks.js","webpack:///./src/admin/blocks/shared/helpers.js","webpack:///./src/admin/blocks/shared/placeholder.js","webpack:///./src/admin/blocks/blocks/hosted/HostedPlaceholder.js","webpack:///./src/admin/blocks/blocks/hosted/edit.js","webpack:///./src/admin/blocks/blocks/hosted/index.js","webpack:///./src/admin/blocks/plugins/reusable-videos/SearchForm.js","webpack:///./src/admin/blocks/plugins/reusable-videos/Video.js","webpack:///./src/admin/blocks/plugins/reusable-videos/render.js","webpack:///./src/admin/blocks/plugins/reusable-videos/index.js","webpack:///./src/admin/blocks/blocks/reusable-display/edit.js","webpack:///./src/admin/blocks/blocks/reusable-display/index.js","webpack:///./src/admin/blocks/blocks/vimeo/edit.js","webpack:///./src/admin/blocks/blocks/vimeo/index.js","webpack:///./src/admin/blocks/blocks/youtube/edit.js","webpack:///./src/admin/blocks/blocks/youtube/index.js"],"names":["__","wp","i18n","className","visibility","type","String","default","color","blockAlignment","mutedPreview","Object","enabled","captions","mutedOverlay","src","width","focalPoint","x","y","mutedPreviewCaptions","Boolean","mutedOverlayType","mutedOverlayText","mutedOverlaySrc","mutedOverlayImageWidth","Number","mutedOverlayFocalPoint","text","Array","items","attributes","category","supports","align","save","getYoutubeId","url","match","length","getVimeoId","parseUrl","exec","determineVideoUrlType","youtube_id","video_id","vimeo_id","$video_id","$type","isHLS","includes","useSelect","data","preset","branding","adminPreview","chapters","youtube","select","style","border_radius","caption_background","email_collection","logo_width","isAdmin","preload","bunny","thumbnail","previewThumbnail","preview","channelId","channel_id","blockAttributes","poster","provider","slot","position","left","top","transform","element","useRef","useEffect","usePrevious","value","ref","current","snackbarNotice","status","message","dispatch","createNotice","withSelect","props","loading","presetsLoading","presets","getPresets","defaultPreset","getDefaultPreset","components","BaseControl","PanelRow","TextControl","SelectControl","Button","FocalPointPicker","RangeControl","blockEditor","MediaUpload","MediaUploadCheck","VIDEO_OVERLAY_ALLOWED_MEDIA_TYPES","useState","setAttributes","instanceId","videoOverlayDescription","VisualLabel","title","onSelect","image","allowedTypes","render","open","isPrimary","onClick","id","hidden","sprintf","isTertiary","dimensions","height","onChange","label","min","max","ToggleControl","Icon","Flex","VIDEO_POSTER_ALLOWED_MEDIA_TYPES","VideoSettings","autoplay","playsInline","videoPosterDescription","toggleAttribute","attribute","newValue","prestoPlayer","isPremium","ProBadge","setProModal","checked","help","MutedPreviewOptions","data-cy","href","target","textDecoration","icon","options","aria-describedby","ColorPicker","withNotices","useInstanceId","compose","VIDEO_LOGO_ALLOWED_MEDIA_TYPES","PlayerSettings","pickerRender","setPickerRender","saveOptions","a","isDismissible","updateBranding","isSecondary","logo","onChangeComplete","hex","key","disableAlpha","defaults","FlexItem","FlexBlock","Chapter","update","add","remove","time","disabled","showNotice","draftTime","setDraftTime","placeholder","onBlur","draft","replace","substr","indexOf","index","substring","sanitizeTime","autoComplete","marginBottom","setDraft","sort","b","parseInt","split","map","chapter","i","itemIndex","updated","item","updateChapter","filter","_","removeChapter","state","updateState","play","rewind","progress","volume","mute","speed","pip","fullscreen","HorizontalRule","auto_hide","save_player_position","sticky_scroll","hide_youtube","lazy_load_youtube","hide_logo","labelPosition","caption_style","Notice","updateEmailState","fetching","setFetching","lists","setLists","error","setError","fetchLists","apiFetch","path","fetched","listOptions","forEach","list","name","LoadSelect","provider_list","provider_tag","groups","setGroups","fetchGroups","fetchingLists","setFetchingLists","fetchingTags","setFetchingTags","tags","setTags","fetchTags","tagOptions","tag","slug","settings","setSettings","optionsMap","presto_player_activecampaign","presto_player_mailchimp","presto_player_mailerlite","presto_player_fluentcrm","fetchSettings","settingsToSet","keys","connected","found","find","setting","MailchimpConfig","MailerLiteConfig","ActiveCampaignConfig","FluentCRMConfig","emailProviderOptions","isSmall","e","preventDefault","TextareaControl","percentage","marks","shiftStep","allow_skip","headline","bottom_text","button_text","ChooseProvider","ColorIndicator","Popover","setColor","setOpen","original","setOriginal","css","borderRadius","colorValue","display","alignItems","justifyContent","padding","margin","LinkControl","__experimentalLinkControl","prependHTTP","visible","setVisible","nextLinkValue","setNextLinkValue","linkValue","opensInNewTab","onChangeLink","nextValue","didToggleSettingForNewLink","undefined","newUrl","onClose","confirm","ExternalLink","setValue","saving","setSaving","userCanReadSettings","canUser","handleSubmit","updateYoutube","method","presto_player_youtube","response","setYoutube","onSubmit","isBusy","action_bar","editYoutube","setEditYoutube","updateActionBar","button_type","percentage_start","ColorPopup","background_color","button_count","YoutubeChannelId","renderYoutubeChannelForm","UrlSelect","val","button_link","button_radius","button_color","lodash","partial","noop","NavigableMenu","Animate","children","orientation","activeClass","selected","setSelected","setOrigin","handleClick","itemKey","onNavigate","childIndex","child","click","selectedTab","selectedId","origin","aria-labelledby","role","classnames","class","xmlns","viewBox","aria-hidden","focusable","d","itemId","aria-controls","ariaHidden","Disabled","menu","renderKey","setRenderKey","skin","previews","email","defaultHeadline","bottomText","allowSkip","skipText","buttonText","Player","TabPanel","Panel","PanelBody","Modal","EditPlayerPreset","closeModal","addPreset","onSave","updatePreset","reset_on_end","setLoading","setMenu","thisName","setThisName","setState","genericError","putPreset","addQueryArgs","root","prestoVersionString","_method","saved","createPreset","tabs","component","Controls","Behavior","Style","Email","ActionBar","onRequestClose","overlayClassName","hideLabelFromVision","autoFocus","Menu","Preview","textAlign","Spinner","ButtonGroup","isActive","setPreset","onEdit","confirmOpen","setConfirmOpen","closeConfirm","trashPreset","console","tabIndex","aria-label","border","opacity","fontSize","charAt","toUpperCase","fontWeight","textTransform","is_locked","maxWidth","isDestructive","boxShadow","modal","setModal","presetData","setPresetData","setName","removePreset","Preset","Edit","initialOpen","use","createNonceMiddleware","nonce","createRootURLMiddleware","createHigherOrderComponent","WrappedComponent","isSelected","count","setCount","openGeneralSidebar","selectionOverrideClientId","selectBlock","thisPreset","onUpdate","prevChapters","times","prevTimes","difference","createVideo","external_id","attachment_id","post_id","getCurrentPostId","lockSave","lockPostSaving","unlockSave","unlockPostSaving","onRemoveSrc","previewSrc","MenuItem","FormFileUpload","MenuGroup","ToolbarGroup","ToolbarButton","Dropdown","SVG","Rect","Path","ALLOWED_TYPES","captionIcon","fill","fillRule","clipRule","TrackList","content","tracks","onEditPress","track","SingleTrackEditor","onRemove","srcLang","fileName","kind","startsWith","lastIndexOf","newLabel","newSrcLang","changes","hasChanges","isLink","TracksEditor","mediaUpload","getSettings","trackBeingEdited","setTrackBeingEdited","contentClassName","renderToggle","isOpen","onToggle","showTooltip","aria-expanded","aria-haspopup","renderContent","newTrack","newTracks","_track","trackIndex","event","files","filesList","onFileChange","accept","openFileDialog","Placeholder","onSelectURL","instructions","camelToDashCase","str","m","toLowerCase","attachProps","node","newProps","oldProps","Element","getClassName","classList","eventName","eventNameLc","document","isCoveredByReact","syncEvent","setAttribute","newClassProp","oldClassProp","currentClasses","arrayToMap","incomingPropClasses","oldPropClasses","finalClassNames","currentClass","has","push","delete","s","join","eventNameSuffix","doc","isSupported","createElement","newEventHandler","eventStore","__events","oldEventHandler","removeEventListener","addEventListener","call","this","arr","Map","set","mergeRefs","refs","createReactComponent","tagName","ReactComponentContext","manipulatePropsFunction","displayName","segment","slice","ReactComponent","componentEl","componentDidUpdate","prevProps","forwardedRef","cProps","propsToPass","reduce","acc","setComponentElRef","React","Component","contextType","forwardRef","createForwardRef","PrestoEmailOverlayUi","PrestoPlayer","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","module","exports","InnerBlocks","useBlockProps","plugins","unregisterPlugin","getPlugins","inserter","reusable","html","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","x1","y1","x2","y2","edit","blockProps","clientId","innerBlocks","getBlock","setTemplateValidity","insertBlockType","block","blocks","createBlock","insertBlock","templateLock","renderAppender","ButtonBlockAppender","points","rx","ry","Content","file","onProgress","onComplete","onError","chunk","cancelled","max_request_size","Math","prestoPlayerAdmin","wp_max_upload_size","slice_size","upload_file","start","next_slice","blob","chunks","ceil","size","body","FormData","append","file_url","log","percent_done","FileReader","cancel","date","isEncoding","encodeProgress","bytes","floor","round","pow","bytesToSize","updated_at","Date","toLocaleString","Card","CardBody","DropZone","DropZoneProvider","header","onLoad","folders","progressMessage","onDelete","onUpload","deleteConfirm","setDeleteConfirm","buttonRef","hours","minutes","ampm","deleteSelected","jQuery","folder","MediaFolder","MediaItem","align-items","onFilesDrop","previewUrl","marginTop","created_at","getHours","getMinutes","getDate","getMonth","getFullYear","closePopup","noticeOperations","isPrivate","videos","setVideos","setProgress","setProgressMessage","endpoint","uploadFile","chunkUpload","percent","storeFile","deleteVideo","video","loadVideos","MediaPopup","removeAllNotices","createErrorNotice","combineReducers","videosReducer","action","guid","collectionsReducer","uploadsReducer","requestReducer","private","collection","search","UIReducer","videosFetched","createCollection","errorReducer","collections","uploads","isLoading","errors","currentCollection","ui","arg","requestType","addVideos","removeVideo","setCollections","addCollection","setIsPrivate","setSearch","setCollectionRequest","setUploads","addUploads","removeUpload","setVideosFetched","setUI","addError","removeError","registerStore","reducer","selectors","actions","isPlayable","availableResolutions","isSelectable","getStatusText","getLengthToTime","toISOString","toString","toFixed","useContext","deleting","setDeleting","setVideo","controlCSS","getThumbnail","webPURLSigned","webPURL","ProgressBar","footer","badge","before","after","ProgressOverlay","thumbnailURLSigned","thumbnailURL","renderThumbnail","storageSize","Fragment","notice","setNotice","fetch","interval","setInterval","sync","clearInterval","items_per_page","Loading","flex","collectionId","Video","justify","videoCount","fetchCollections","Collection","busy","setBusy","onCreate","shouldCloseOnClickOutside","afterUpload","multiple","CreateCollection","onChoose","canSelect","setCanSelect","deleteCollection","BackButton","uploader","setMessage","created","setCreated","upload","storeVideo","Upload","mainContent","sidebar","addUpload","Header","Uploads","Sidebar","Footer","MediaPopupTemplate","CollectionHeader","Collections","Videos","playlistURL","baseUrl","onRefetch","autoSubmit","apikey","setApikey","saveMessage","setSaveMessage","step","setStep","getError","errorString","saveKey","api_key","success","totalSteps","useStreamConnection","useStorageConnection","required","DropdownMenu","Toolbar","editor","BlockControls","InspectorControls","withPlayerData","withPlayerEdit","mediaPopup","setMediaPopup","setup","setSetup","stream","storage","isSetup","setIsSetup","disableStream","setDisableStream","isAPILoaded","setIsAPILoaded","setFetchingSettings","autoSubmitStream","setAutoSubmitStream","disableLegacyStorage","disable_legacy_storage","selectVideo","media","catch","finally","presto_player_bunny_pull_zones","presto_player_bunny_storage_zones","presto_player_bunny_stream_private","presto_player_bunny_stream_public","storageSetup","option","private_id","public_id","streamSetup","pull_zone_url","signURL","setPreview","setThumbnail","moreButtons","controls","APIPlaceholder","BlockInspectorControls","StorageMedia","StreamMedia","blockOptions","premium","description","variations","isDefault","pick","addVideo","presetReducer","presetLoadingReducer","videosLoadingReducer","total","total_pages","hasResolved","isError","proModalReducer","brandingReducer","youtubeReducer","optionsApi","then","setBranding","presto_player_branding","getReusableVideos","getReusableVideo","proModal","setPresetLoading","setVideosLoading","updateVideos","appendVideos","setPresets","args","fetchOptions","fetchFromAPI","fetchFromWPAPI","FETCH_FROM_API","FETCH_FROM_WP_API","query","parse","res","json","headers","get","Promise","reject","resolvers","registerBlockType","unregisterBlockType","registerPlugin","autoload","getContext","register","unregister","cache","context","changedNames","loadModules","selectedBlockId","require","getSelectedBlockClientId","clearSelectedBlock","getBlocks","ProUpgradeModal","getElementById","subscribe","isSavingPost","isAutosavingPost","store","getState","helpers","setUrlPrivate","separator","window","location","newurl","history","pushState","setUrlPublic","unsetUrlParams","removed","parameters","parsedUrl","URL","param","searchParams","removeURLParameters","baseCurrentUrl","withFilters","deprecated","URLPopover","InsertFromURLPopover","labels","mediaPreview","notices","isAppender","addToGallery","onCancel","onDoubleClick","allowURLs","setSrc","isURLInputVisible","setIsURLInputVisible","onChangeSrc","openURLInput","closeURLInput","onSubmitSrc","renderPlaceholder","placeholderClassName","renderUrlSelectionUI","isPressed","fallback","mediaLibraryButton","gallery","isArray","stopPropagation","renderMediaUploadChecked","ALLOWED_MEDIA_TYPES","noticeUI","onUploadError","switcher","getBlobByURL","isBlobURL","upgradeNotice","setUpgradeNotice","HostedPlaceholder","newSrc","youtubeBlock","replaceBlock","vimeoBlock","attachmend_id","VisuallyHidden","InserterSearchForm","searchInput","as","htmlFor","focus","editPost","PluginSidebar","PluginSidebarMoreMenuItem","useCallback","getBlockType","blockSerializationDefaultParser","forceUpdate","clip-path","fillOpacity","hasMore","setHasMore","page","setPage","setIsLoading","debounceOnSearch","debounce","term","doFetch","per_page","nextPage","newPage","getIcon","raw","blockName","SearchForm","emptyPlaceholder","setHasResolved","setBlock","link","setLink","getBlocksByClientId","updateBlockAttributes","attrs","template","prevSrc","LinkPlaceholder"],"mappings":"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","file":"blocks/admin-39aabba4.js","sourcesContent":["const { __ } = wp.i18n;\n\nexport default function () {\n  return (\n    <div className=\"presto-player__pro-badge\">{__(\"Pro\", \"presto-player\")}</div>\n  );\n}\n","export default {\n  visibility: {\n    type: String,\n    default: \"public\",\n  },\n  color: {\n    type: String,\n    default: \"#00b3ff\",\n  },\n  blockAlignment: {\n    type: String,\n  },\n  mutedPreview: {\n    type: Object,\n    default: {\n      enabled: false,\n      captions: false,\n    },\n  },\n  mutedOverlay: {\n    type: Object,\n    default: {\n      enabled: false,\n      src: \"\",\n      width: 200,\n      focalPoint: {\n        x: 0.5,\n        y: 0.5,\n      },\n    },\n  },\n  mutedPreviewCaptions: {\n    type: Boolean,\n  },\n  mutedOverlayType: {\n    type: String,\n    default: \"text\",\n  },\n  mutedOverlayText: {\n    type: String,\n    default: \"Click to play\",\n  },\n  mutedOverlaySrc: {\n    type: String,\n  },\n  mutedOverlayImageWidth: {\n    type: Number,\n    default: 200,\n  },\n  mutedOverlayFocalPoint: {\n    type: Object,\n  },\n  mutedOverlay: {\n    type: Object,\n    default: {\n      enabled: false,\n      type: \"text\",\n      text: \"\",\n      src: \"\",\n      width: 200,\n      focalPoint: {\n        x: 0.5,\n        y: 0.5,\n      },\n    },\n  },\n  autoplay: {\n    type: Boolean,\n  },\n  preload: {\n    type: String,\n  },\n  playsInline: {\n    type: Boolean,\n  },\n  id: {\n    type: Number,\n  },\n  attachment_id: {\n    type: Number,\n  },\n  src: {\n    type: String,\n  },\n  imageID: {\n    type: Number,\n  },\n  poster: {\n    type: String,\n  },\n  content: {\n    type: Boolean,\n  },\n  preset: {\n    type: Number,\n  },\n  chapters: {\n    type: Array,\n    default: [],\n  },\n  tracks: {\n    type: \"array\",\n    items: {\n      type: \"object\",\n    },\n    default: [],\n  },\n};\n","import attributes from \"./attributes\";\n\nexport default {\n  attributes,\n\n  category: \"presto\",\n\n  supports: {\n    align: true,\n  },\n\n  // dynamic save function\n  save: function () {\n    return null;\n  },\n};\n","export function getYoutubeId(url) {\n  const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n  const match = (url || \"\").match(regExp);\n  return match && match?.[2]?.length === 11 ? match[2] : null;\n}\n\nexport function getVimeoId(url) {\n  const regExp =\n    /^.*(vimeo\\.com\\/)((channels\\/[A-z]+\\/)|(groups\\/[A-z]+\\/videos\\/))?([0-9]+)/;\n  const parseUrl = regExp.exec(url || \"\");\n  return parseUrl?.[5] || \"\";\n}\n\nexport function saveAttachment({ video_id, src, type }) {\n  return new Promise((resolve, reject) => {\n    jQuery.post(\n      prestoPlayer.ajaxurl,\n      {\n        action: \"presto_save_external_attachment\",\n        _wpnonce: prestoPlayer.nonce,\n        post_id: wp.data.select(\"core/editor\").getCurrentPostId(),\n        video_id,\n        src,\n        type,\n      },\n      function ({ data }) {\n        resolve(data);\n      }\n    );\n  });\n}\n\nexport function determineVideoUrlType(url) {\n  const youtube_id = getVimeoId(url);\n  if (youtube_id) {\n    return {\n      video_id: youtube_id,\n      type: \"vimeo\",\n    };\n  }\n\n  const vimeo_id = getYoutubeId(url);\n  if (vimeo_id) {\n    return {\n      video_id: vimeo_id,\n      type: \"youtube\",\n    };\n  }\n\n  return {\n    $video_id: 0,\n    $type: \"none\",\n  };\n}\n\nexport function convertChapter(chapter) {\n  let draft = time;\n  // remove any letters\n  draft = draft.replace(/[^\\d\\d:\\d\\d.-]/g, \"\");\n  // make sure we have :\n  if (!draft.includes(\":\")) {\n    return `${draft}:00`;\n  }\n\n  // must have something before :00\n  if (draft.substr(0, draft.indexOf(\":\")).length === 0) {\n    draft = `0${draft}`;\n  }\n\n  // only allow 2 characters after :\n  let index = draft.indexOf(\":\");\n  draft = draft.substring(0, index + 3);\n  return draft;\n}\n\n// get file extension\nexport function getFileExtension(url) {\n  return url.split(/[#?]/)[0].split(\".\").pop().trim();\n}\n\n// is the source hls?\nexport function isHLS(url) {\n  return url.includes(\".m3u8\");\n}\n","import { PrestoPlayer } from \"@/component-library/react/src/components\";\n\nconst { useSelect } = wp.data;\n\nexport default ({ src, preset, branding, attributes, adminPreview, type }) => {\n  const { chapters, mutedOverlay, mutedPreview } = attributes;\n\n  const youtube = useSelect((select) => {\n    return select(\"presto-player/player\")?.youtube();\n  });\n\n  const mutedOverlayContent = () => {\n    return (\n      <div\n        className=\"presto-player__overlay is-image\"\n        style={{\n          position: \"absolute\",\n          width: `${mutedOverlay?.width || 100}%`,\n          left: `${(mutedOverlay?.focalPoint?.x || 0.5) * 100}%`,\n          top: `${(mutedOverlay?.focalPoint?.y || 0.5) * 100}%`,\n        }}\n      >\n        <img\n          src={mutedOverlay?.src}\n          style={{\n            transform: \"translateX(-50%) translateY(-50%)\",\n          }}\n        />\n      </div>\n    );\n  };\n\n  return (\n    <div\n      className=\"wp-block-video presto-block-video\"\n      style={{\n        \"--presto-player-border-radius\": `${preset?.border_radius}px`,\n        ...(preset?.caption_background\n          ? { \"--plyr-captions-background\": preset.caption_background }\n          : {}),\n        ...(branding?.color ? { \"--plyr-color-main\": branding.color } : {}),\n        \"--presto-player-email-border-radius\": `${\n          preset?.email_collection?.border_radius || 0\n        }px`,\n        \"--presto-player-logo-width\": `${branding?.logo_width || 75}px`,\n      }}\n    >\n      <PrestoPlayer\n        src={src}\n        isAdmin={true}\n        preload=\"metadata\"\n        preset={preset}\n        bunny={{\n          thumbnail: attributes?.previewThumbnail,\n          preview: attributes?.preview,\n        }}\n        youtube={{\n          channelId: youtube?.channel_id,\n        }}\n        branding={branding}\n        chapters={chapters}\n        blockAttributes={attributes}\n        poster={attributes.poster}\n        provider={type}\n      >\n        <div slot=\"player-end\">\n          {mutedPreview?.enabled &&\n            mutedOverlay?.enabled &&\n            mutedOverlayContent()}\n          {adminPreview}\n        </div>\n      </PrestoPlayer>\n    </div>\n  );\n};\n","const { useRef, useEffect } = wp.element;\nexport function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport function snackbarNotice({ status = \"success\", message }) {\n  wp.data.dispatch(\"core/notices\").createNotice(\n    status, // Can be one of: success, info, warning, error.\n    message, // Text string to display.\n    { type: \"snackbar\" }\n  );\n}\n\nexport const bytesToSize = (bytes) => {\n  var sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n  if (bytes == 0) return \"0 Byte\";\n  var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n  return Math.round(bytes / Math.pow(1024, i), 2) + \" \" + sizes[i];\n};\n\nexport const toDate = (d) => {\n  d = new Date(d);\n  var hours = d.getHours();\n  var minutes = d.getMinutes();\n  var ampm = hours >= 12 ? \"pm\" : \"am\";\n  hours = hours % 12;\n  hours = hours ? hours : 12;\n  minutes = minutes < 10 ? \"0\" + minutes : minutes;\n\n  return (\n    d.getDate() +\n    \"-\" +\n    (d.getMonth() + 1) +\n    \"-\" +\n    d.getFullYear() +\n    \" at \" +\n    hours +\n    \":\" +\n    minutes +\n    ampm\n  );\n};\n","const { withSelect } = wp.data;\n\nexport default function (props) {\n  return withSelect((select) => {\n    return {\n      branding: select(\"presto-player/player\").branding(),\n      loading: select(\"presto-player/player\").presetsLoading(),\n      presets: select(\"presto-player/player\").getPresets(),\n      defaultPreset: select(\"presto-player/player\").getDefaultPreset(),\n    };\n  });\n}\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst {\n  PanelRow,\n  TextControl,\n  SelectControl,\n  BaseControl,\n  Button,\n  FocalPointPicker,\n  RangeControl,\n} = wp.components;\nconst { MediaUpload, MediaUploadCheck } = wp.blockEditor;\nconst { useState } = wp.element;\n\nconst VIDEO_OVERLAY_ALLOWED_MEDIA_TYPES = [\"image\"];\n\n// import font for text\nimport \"./settings-styles.css\";\n\nexport default ({ attributes, setAttributes, instanceId }) => {\n  const { mutedOverlay } = attributes;\n\n  const videoOverlayDescription = `video-block__overlay-image-description-${instanceId}`;\n\n  // handle poster select\n  function onSelectOverlay(image) {\n    setAttributes({\n      mutedOverlay: {\n        ...mutedOverlay,\n        ...{ src: image.url },\n      },\n    });\n  }\n\n  function onRemoveOverlay() {\n    setAttributes({\n      mutedOverlay: {\n        ...mutedOverlay,\n        ...{ src: \"\" },\n      },\n    });\n  }\n\n  return (\n    <>\n      <MediaUploadCheck>\n        <BaseControl className=\"editor-video-overlay-control\">\n          <BaseControl.VisualLabel>\n            <p>{__(\"Overlay Image\", \"presto-player\")}</p>\n          </BaseControl.VisualLabel>\n          <MediaUpload\n            title={__(\"Select overlay image\", \"presto-player\")}\n            onSelect={onSelectOverlay}\n            allowedTypes={VIDEO_OVERLAY_ALLOWED_MEDIA_TYPES}\n            render={({ open }) => (\n              <Button\n                className=\"presto-setting__poster\"\n                isPrimary\n                onClick={open}\n              >\n                {!mutedOverlay?.src\n                  ? __(\"Select\", \"presto-player\")\n                  : __(\"Replace\", \"presto-player\")}\n              </Button>\n            )}\n          />\n          <p id={videoOverlayDescription} hidden>\n            {mutedOverlay?.src\n              ? sprintf(\n                  __(\"The current overlay image url is %s\", \"presto-player\"),\n                  mutedOverlay?.src\n                )\n              : __(\n                  \"There is no overlay image currently selected\",\n                  \"presto-player\"\n                )}\n          </p>\n          {!!mutedOverlay?.src && (\n            <Button\n              onClick={onRemoveOverlay}\n              className=\"presto-setting__remove-poster\"\n              isTertiary\n            >\n              {__(\"Remove\", \"presto-player\")}\n            </Button>\n          )}\n        </BaseControl>\n      </MediaUploadCheck>\n      {!!mutedOverlay?.src && (\n        <FocalPointPicker\n          url={\"\"}\n          dimensions={{ width: 160, height: 90 }}\n          value={mutedOverlay?.focalPoint}\n          onChange={(focalPoint) =>\n            setAttributes({\n              mutedOverlay: {\n                ...mutedOverlay,\n                ...{ focalPoint },\n              },\n            })\n          }\n        />\n      )}\n      {!!mutedOverlay?.src && (\n        <RangeControl\n          label={__(\"Max Width (%)\", \"presto-player\")}\n          value={mutedOverlay?.width}\n          onChange={(width) =>\n            setAttributes({\n              mutedOverlay: {\n                ...mutedOverlay,\n                ...{ width },\n              },\n            })\n          }\n          min={1}\n          max={100}\n        />\n      )}\n    </>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst {\n  ToggleControl,\n  SelectControl,\n  BaseControl,\n  Button,\n  PanelRow,\n  Icon,\n  Flex,\n} = wp.components;\nconst { dispatch } = wp.data;\nimport { isHLS } from \"@/shared/util\";\n\nconst { MediaUpload, MediaUploadCheck } = wp.blockEditor;\nimport ProBadge from \"@/admin/blocks/shared/components/ProBadge\";\nimport MutedPreviewOptions from \"./MutedPreviewOptions\";\n\nconst VIDEO_POSTER_ALLOWED_MEDIA_TYPES = [\"image\"];\n\nconst VideoSettings = ({ setAttributes, attributes, instanceId }) => {\n  const {\n    mutedPreview,\n    autoplay,\n    playsInline,\n    preload,\n    poster,\n    mutedOverlay,\n  } = attributes;\n\n  const videoPosterDescription = `video-block__poster-image-description-${instanceId}`;\n\n  const getAutoplayHelp = (checked) => {\n    return checked\n      ? __(\n          \"Note: Autoplaying videos may cause usability issues for some visitors.\",\n          \"presto-player\"\n        )\n      : null;\n  };\n\n  const posterRecommended = () => {\n    // if is hls and we've selected metadata or none, recommend a poster\n    if (\n      attributes?.src &&\n      isHLS(attributes?.src) &&\n      [\"metadata\", \"none\"].includes(preload)\n    ) {\n      return true;\n    }\n\n    return preload === \"none\" && !poster;\n  };\n\n  const toggleAttribute = (attribute) => {\n    return (newValue) => {\n      setAttributes({ [attribute]: newValue });\n    };\n  };\n\n  // handle poster select\n  function onSelectPoster(image) {\n    setAttributes({ poster: image.url });\n  }\n\n  function onRemovePoster() {\n    setAttributes({ poster: \"\" });\n  }\n\n  const mutedPreviewControls = () => {\n    return (\n      <>\n        <ToggleControl\n          label={\n            <>\n              {__(\"Muted Autoplay Preview\", \"presto-player\")}{\" \"}\n              {!prestoPlayer?.isPremium && <ProBadge />}\n            </>\n          }\n          onChange={(value) => {\n            if (!prestoPlayer?.isPremium) {\n              dispatch(\"presto-player/player\").setProModal(true);\n              return;\n            }\n            setAttributes({\n              mutedPreview: {\n                ...mutedPreview,\n                ...{ enabled: value },\n              },\n            });\n          }}\n          checked={mutedPreview?.enabled}\n          className=\"presto-setting__mutedPreview\"\n          help={__(\"Shows a muted preview of the video.\", \"presto-player\")}\n        />\n        {!!mutedPreview?.enabled && !attributes?.video_id && (\n          <PanelRow>\n            <ToggleControl\n              label={__(\"Muted Preview Captions\", \"presto-player\")}\n              onChange={(value) => {\n                setAttributes({\n                  mutedPreview: {\n                    ...mutedPreview,\n                    ...{ captions: value },\n                  },\n                });\n              }}\n              checked={mutedPreview?.captions}\n              className=\"presto-setting__mutedPreviewCaptions\"\n              help={__(\"Play captions during muted autoplay\", \"presto-player\")}\n            />\n          </PanelRow>\n        )}\n\n        {!!mutedPreview.enabled && (\n          <PanelRow>\n            <ToggleControl\n              label={\n                <>\n                  {__(\"Muted Preview Overlay\", \"presto-player\")}{\" \"}\n                  {!prestoPlayer?.isPremium && <ProBadge />}\n                </>\n              }\n              onChange={(value) => {\n                if (!prestoPlayer?.isPremium) {\n                  dispatch(\"presto-player/player\").setProModal(true);\n                  return;\n                }\n                setAttributes({\n                  mutedOverlay: {\n                    ...mutedOverlay,\n                    ...{ enabled: value },\n                  },\n                });\n              }}\n              checked={mutedOverlay?.enabled}\n              className=\"presto-setting__mutedOverlay\"\n              help={__(\n                \"Show an image over the top of the video either before or after the video.\",\n                \"presto-player\"\n              )}\n            />\n          </PanelRow>\n        )}\n        {mutedOverlay?.enabled && mutedPreview?.enabled && (\n          <MutedPreviewOptions\n            attributes={attributes}\n            setAttributes={setAttributes}\n          />\n        )}\n      </>\n    );\n  };\n\n  return (\n    <>\n      {!autoplay && mutedPreviewControls()}\n\n      {!mutedPreview?.enabled && (\n        <ToggleControl\n          label={__(\"Autoplay\", \"presto-player\")}\n          className=\"presto-setting__autoplay\"\n          onChange={toggleAttribute(\"autoplay\")}\n          checked={autoplay}\n          help={getAutoplayHelp}\n        />\n      )}\n      <PanelRow>\n        <ToggleControl\n          label={__(\"Play inline\", \"presto-player\")}\n          className=\"presto-setting__playsInline\"\n          data-cy={\"playsInline\"}\n          onChange={toggleAttribute(\"playsInline\")}\n          checked={playsInline}\n          help={__(\n            \"On mobile browsers, play the video on the page instead of opening it up fullscreen.\",\n            \"presto-player\"\n          )}\n        />\n      </PanelRow>\n      {!attributes?.video_id && (\n        <PanelRow>\n          <SelectControl\n            label={\n              <Flex>\n                <div>{__(\"Performance Preference\", \"presto-player\")}</div>\n                <a\n                  href=\"https://prestoplayer.com/docs/performance-preferences-explained\"\n                  target=\"_blank\"\n                  style={{ textDecoration: \"none\" }}\n                >\n                  <Icon icon=\"editor-help\" />\n                </a>\n              </Flex>\n            }\n            className=\"presto-setting__preload\"\n            value={preload}\n            onChange={(value) => setAttributes({ preload: value })}\n            help={\n              posterRecommended() &&\n              __(\n                \"A poster image is recommended for this setting.\",\n                \"presto-player\"\n              )\n            }\n            options={[\n              {\n                value: \"auto\",\n                label: __(\"Video Playback Speed\", \"presto-player\"),\n              },\n              {\n                value: \"metadata\",\n                label: __(\"Page Load Speed\", \"presto-player\"),\n              },\n              {\n                value: \"none\",\n                label: __(\"Page Load Speed (Extreme)\", \"presto-player\"),\n              },\n            ]}\n          />\n        </PanelRow>\n      )}\n      <MediaUploadCheck>\n        <BaseControl className=\"editor-video-poster-control\">\n          <BaseControl.VisualLabel>\n            <p>{__(\"Poster image\", \"presto-player\")}</p>\n          </BaseControl.VisualLabel>\n          <MediaUpload\n            title={__(\"Select poster image\", \"presto-player\")}\n            onSelect={onSelectPoster}\n            allowedTypes={VIDEO_POSTER_ALLOWED_MEDIA_TYPES}\n            render={({ open }) => (\n              <Button\n                className=\"presto-setting__poster\"\n                isPrimary\n                onClick={open}\n                aria-describedby={videoPosterDescription}\n              >\n                {!poster\n                  ? __(\"Select\", \"presto-player\")\n                  : __(\"Replace\", \"presto-player\")}\n              </Button>\n            )}\n          />\n          <p id={videoPosterDescription} hidden>\n            {poster\n              ? sprintf(\n                  __(\"The current poster image url is %s\", \"presto-player\"),\n                  poster\n                )\n              : __(\n                  \"There is no poster image currently selected\",\n                  \"presto-player\"\n                )}\n          </p>\n          {!!poster && (\n            <Button\n              onClick={onRemovePoster}\n              className=\"presto-setting__remove-poster\"\n              isTertiary\n            >\n              {__(\"Remove\", \"presto-player\")}\n            </Button>\n          )}\n        </BaseControl>\n      </MediaUploadCheck>\n    </>\n  );\n};\n\nexport default VideoSettings;\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst {\n  ColorPicker,\n  Button,\n  withNotices,\n  BaseControl,\n  RangeControl,\n} = wp.components;\nconst { MediaUpload, MediaUploadCheck } = wp.blockEditor;\nconst { useInstanceId } = wp.compose;\nconst { useState } = wp.element;\nconst { dispatch, useSelect } = wp.data;\nimport ProBadge from \"@/admin/blocks/shared/components/ProBadge\";\n\nconst VIDEO_LOGO_ALLOWED_MEDIA_TYPES = [\"image\"];\n\nfunction PlayerSettings({ setAttributes, attributes, type }) {\n  const instanceId = useInstanceId(PlayerSettings);\n  const [pickerRender, setPickerRender] = useState(1);\n\n  // get branding options\n  const branding = useSelect((select) => {\n    return select(\"presto-player/player\").branding();\n  });\n  // save options\n  const saveOptions = async () => {\n    await dispatch(\"presto-player/player\").saveOptions({\n      branding,\n    });\n    wp.data.dispatch(\"core/notices\").createNotice(\n      \"success\", // Can be one of: success, info, warning, error.\n      \"Player branding saved.\", // Text string to display.\n      {\n        type: \"snackbar\",\n        isDismissible: true, // Whether the user can dismiss the notice.\n        // Any actions the user can perform.\n      }\n    );\n  };\n\n  function onSelectLogo(image) {\n    dispatch(\"presto-player/player\").updateBranding(\"logo\", image.url);\n  }\n\n  function onRemoveLogo() {\n    dispatch(\"presto-player/player\").updateBranding(\"logo\", \"\");\n  }\n\n  return (\n    <div className=\"presto-player__panel--branding\">\n      <p>\n        {__(\n          \"Here you can select the global player branding This will apply to all players on the site.\",\n          \"presto-player\"\n        )}\n      </p>\n\n      <MediaUploadCheck>\n        <BaseControl className=\"editor-video-poster-control\">\n          <BaseControl.VisualLabel>\n            <p>\n              {__(\"Logo Overlay\", \"presto-player\")}{\" \"}\n              {!prestoPlayer?.isPremium && <ProBadge />}\n            </p>\n          </BaseControl.VisualLabel>\n          <MediaUpload\n            title={__(\"Select logo overlay image\", \"presto-player\")}\n            onSelect={onSelectLogo}\n            allowedTypes={VIDEO_LOGO_ALLOWED_MEDIA_TYPES}\n            render={({ open }) => (\n              <Button\n                className=\"presto-setting__logo\"\n                isSecondary\n                onClick={() => {\n                  if (!prestoPlayer?.isPremium) {\n                    dispatch(\"presto-player/player\").setProModal(true);\n                    return;\n                  }\n                  open();\n                }}\n                aria-describedby={`video-block__logo-image-description-${instanceId}`}\n              >\n                {!branding?.logo\n                  ? __(\"Select\", \"presto-player\")\n                  : __(\"Replace\", \"presto-player\")}\n              </Button>\n            )}\n          />\n          <p id={`video-block__logo-image-description-${instanceId}`} hidden>\n            {branding?.logo\n              ? sprintf(\n                  /* translators: %s: poster image URL. */\n                  __(\"The current logo image url is %s\", \"presto-player\"),\n                  branding?.logo\n                )\n              : __(\n                  \"There is no logo image currently selected\",\n                  \"presto-player\"\n                )}\n          </p>\n          {!!branding?.logo && (\n            <Button onClick={onRemoveLogo} isTertiary>\n              {__(\"Remove\", \"presto-player\")}\n            </Button>\n          )}\n        </BaseControl>\n      </MediaUploadCheck>\n\n      {!!branding?.logo && (\n        <RangeControl\n          label={__(\"Logo Max Width\", \"presto-player\")}\n          value={branding?.logo_width || 150}\n          onChange={(width) =>\n            dispatch(\"presto-player/player\").updateBranding(\"logo_width\", width)\n          }\n          min={1}\n          max={400}\n        />\n      )}\n\n      <ColorPicker\n        color={branding?.color}\n        onChangeComplete={(value) => {\n          dispatch(\"presto-player/player\").updateBranding(\"color\", value.hex);\n        }}\n        key={pickerRender}\n        disableAlpha\n      />\n\n      {branding?.color && (\n        <BaseControl>\n          <Button\n            isSecondary\n            onClick={() => {\n              dispatch(\"presto-player/player\").updateBranding(\n                \"color\",\n                prestoPlayer?.defaults?.color || \"#00b3ff\"\n              );\n              setPickerRender(pickerRender + 1);\n            }}\n          >\n            {__(\"Reset Color\", \"presto-player\")}\n          </Button>\n        </BaseControl>\n      )}\n\n      <Button isPrimary onClick={saveOptions}>\n        {__(\"Save Branding\", \"presto-player\")}\n      </Button>\n    </div>\n  );\n}\n\nexport default withNotices(PlayerSettings);\n","const { __ } = wp.i18n;\nconst { Flex, FlexItem, FlexBlock, TextControl, Button } = wp.components;\nconst { useState } = wp.element;\n\nconst Chapter = ({\n  update,\n  add,\n  remove,\n  className,\n  time,\n  title,\n  disabled,\n  showNotice,\n}) => {\n  const [draftTime, setDraftTime] = useState(time);\n\n  const sanitizeTime = (time) => {\n    let draft = time;\n    // remove any letters\n    draft = draft.replace(/[^\\d\\d:\\d\\d.-]/g, \"\");\n    // make sure we have :\n    if (!draft.includes(\":\")) {\n      return `${draft}:00`;\n    }\n\n    // must have something before :00\n    if (draft.substr(0, draft.indexOf(\":\")).length === 0) {\n      draft = `0${draft}`;\n    }\n\n    // only allow 2 characters after :\n    let index = draft.indexOf(\":\");\n    draft = draft.substring(0, index + 3);\n    return draft;\n  };\n\n  return (\n    <Flex align=\"center\" className={className}>\n      <FlexItem>\n        <TextControl\n          className={\"presto-player__caption--time\"}\n          style={{ width: \"60px\" }}\n          placeholder={\"0:00\"}\n          value={draftTime}\n          onChange={(time) => setDraftTime(time)}\n          onBlur={() => {\n            let time = sanitizeTime(draftTime);\n            update({ time });\n            setDraftTime(time);\n          }}\n          autoComplete=\"off\"\n          placeholder=\"0:00\"\n        />\n      </FlexItem>\n\n      <FlexBlock>\n        <TextControl\n          className={\"presto-player__caption--title\"}\n          placeholder={__(\"Title\", \"presto-player\")}\n          value={title || \"\"}\n          onChange={(title) => update({ title })}\n          autoComplete=\"off\"\n        />\n      </FlexBlock>\n\n      <FlexItem>\n        {remove && (\n          <Button\n            icon=\"minus\"\n            className=\"ph-chapter__remove\"\n            style={{ marginBottom: \"8px\" }}\n            label={__(\"Remove Chapter\", \"presto-player\")}\n            onClick={remove}\n          />\n        )}\n        {add && (\n          <Button\n            icon=\"plus-alt\"\n            className=\"ph-chapter__add\"\n            label={__(\"Add Chapter\", \"presto-player\")}\n            style={{ marginBottom: \"8px\" }}\n            onClick={() => {\n              add();\n              setDraftTime(\"\");\n            }}\n          />\n        )}\n      </FlexItem>\n    </Flex>\n  );\n};\n\nexport default Chapter;\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { useState } = wp.element;\nconst { dispatch } = wp.data;\nimport Chapter from \"./components/Chapter\";\n\nconst VideoSettings = ({ setAttributes, attributes }) => {\n  const showNotice = () => {\n    dispatch(\"presto-player/player\").setProModal(true);\n  };\n  if (!prestoPlayer?.isPremium) {\n    return (\n      <Chapter\n        disabled={true}\n        className=\"ph-chapter is-new\"\n        time={\"\"}\n        title={\"\"}\n        update={() => {}}\n        showNotice={showNotice}\n        add={showNotice}\n      />\n    );\n  }\n\n  const { chapters } = attributes;\n\n  let [draft, setDraft] = useState({\n    title: \"\",\n    time: \"\",\n  });\n\n  const updateChapter = (chapter, data = {}) => {\n    let itemIndex = chapters.indexOf(chapter);\n    let updated = chapters.map((item, index) => {\n      // This isn't the item we care about - keep it as-is\n      if (index !== itemIndex) {\n        return item;\n      }\n      // Otherwise, this is the one we want - return an updated value\n      return {\n        ...item,\n        ...data,\n      };\n    });\n    setAttributes({ chapters: updated });\n  };\n\n  const removeChapter = (chapter) => {\n    let index = chapters.indexOf(chapter);\n    setAttributes({ chapters: chapters.filter((_, i) => i !== index) });\n  };\n\n  const addChapter = () => {\n    if (!draft.time || !draft.title) {\n      return;\n    }\n    setAttributes({\n      chapters: [\n        ...(chapters || []),\n        ...[{ time: draft.time, title: draft.title }],\n      ],\n    });\n    setDraft({\n      title: \"\",\n      time: \"\",\n    });\n  };\n\n  const sorted = () => {\n    return (chapters || []).sort(function (a, b) {\n      if (\n        parseInt(a.time.split(\":\")[0]) - parseInt(b.time.split(\":\")[0]) ===\n        0\n      ) {\n        return parseInt(a.time.split(\":\")[1]) - parseInt(b.time.split(\":\")[1]);\n      } else {\n        return parseInt(a.time.split(\":\")[0]) - parseInt(b.time.split(\":\")[0]);\n      }\n    });\n  };\n\n  return (\n    <>\n      {sorted().map((chapter, i) => {\n        return (\n          <Chapter\n            key={`${i}-${chapter.time}`}\n            className=\"ph-chapter\"\n            time={chapter.time}\n            title={chapter.title}\n            chapter={chapter}\n            update={(data) => {\n              updateChapter(chapter, data);\n            }}\n            remove={() => {\n              removeChapter(chapter);\n            }}\n          />\n        );\n      })}\n\n      <Chapter\n        className=\"ph-chapter is-new\"\n        time={draft.time}\n        title={draft.title}\n        update={(data) => {\n          setDraft({ ...draft, ...data });\n        }}\n        add={addChapter}\n      />\n    </>\n  );\n};\n\nexport default VideoSettings;\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { ToggleControl, BaseControl } = wp.components;\n\nexport default function ({ state, updateState, className }) {\n  return (\n    <div className={className}>\n      <BaseControl>\n        <h3>{__(\"Controls\", \"presto-player\")}</h3>\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--large-play\">\n        <ToggleControl\n          label={__(\"Large Play Button\", \"presto-player\")}\n          help={__(\n            \"Adds a large play button over the top of the player.\",\n            \"presto-player\"\n          )}\n          onChange={(play) => {\n            updateState({ \"play-large\": play });\n          }}\n          checked={state[\"play-large\"]}\n        />\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--rewind\">\n        <ToggleControl\n          label={__(\"Rewind\", \"presto-player\")}\n          help={__(\n            \"Adds a 10 second rewind button to the player.\",\n            \"presto-player\"\n          )}\n          onChange={(rewind) => {\n            updateState({ rewind });\n          }}\n          checked={state.rewind}\n        />\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--play\">\n        <ToggleControl\n          label={__(\"Small Play Button\", \"presto-player\")}\n          help={__(\n            \"Adds a small play button to the bottom of the player.\",\n            \"presto-player\"\n          )}\n          onChange={(play) => {\n            updateState({ play });\n          }}\n          checked={state.play}\n        />\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--fast-forward\">\n        <ToggleControl\n          label={__(\"Fast Forward\", \"presto-player\")}\n          help={__(\n            \"Adds a 10 second rewind button to the player.\",\n            \"presto-player\"\n          )}\n          onChange={(value) => {\n            updateState({ \"fast-forward\": value });\n          }}\n          checked={state[\"fast-forward\"]}\n        />\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--progress\">\n        <ToggleControl\n          label={__(\"Progress Bar\", \"presto-player\")}\n          help={__(\"Shows a seekable progress bar.\", \"presto-player\")}\n          onChange={(progress) => {\n            updateState({ progress });\n          }}\n          checked={state.progress}\n        />\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--current-time\">\n        <ToggleControl\n          label={__(\"Current Time\", \"presto-player\")}\n          help={__(\"Shows the video timestamp.\", \"presto-player\")}\n          onChange={(value) => {\n            updateState({ \"current-time\": value });\n          }}\n          checked={state[\"current-time\"]}\n        />\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--volume\">\n        <ToggleControl\n          label={__(\"Volume\", \"presto-player\")}\n          help={__(\"Shows a volume bar.\", \"presto-player\")}\n          onChange={(value) => {\n            updateState({ volume: value, mute: value });\n          }}\n          checked={state.volume}\n        />\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--speed\">\n        <ToggleControl\n          label={__(\"Speed\", \"presto-player\")}\n          help={__(\"Shows playback speed controls.\", \"presto-player\")}\n          onChange={(speed) => {\n            updateState({ speed });\n          }}\n          checked={state.speed}\n        />\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--pip\">\n        <ToggleControl\n          label={__(\"Picture In Picture (HTML5 only)\", \"presto-player\")}\n          help={__(\n            \"Allows users to dock the player on their screen and watch when using other app on their computer.\",\n            \"presto-player\"\n          )}\n          onChange={(pip) => {\n            updateState({ pip });\n          }}\n          checked={state.pip}\n        />\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--fullscreen\">\n        <ToggleControl\n          label={__(\"Fullscreen\", \"presto-player\")}\n          help={__(\n            \"Adds a button to allow the player to be fullscreen.\",\n            \"presto-player\"\n          )}\n          onChange={(fullscreen) => {\n            updateState({ fullscreen });\n          }}\n          checked={state.fullscreen}\n        />\n      </BaseControl>\n    </div>\n  );\n}\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst {\n  ToggleControl,\n  BaseControl,\n  HorizontalRule,\n  SelectControl,\n} = wp.components;\n\nexport default function ({ state, updateState, className }) {\n  return (\n    <div className={className}>\n      <BaseControl>\n        <h3>{__(\"Behavior\", \"presto-player\")}</h3>\n      </BaseControl>\n      <BaseControl>\n        <ToggleControl\n          label={__(\"Auto-Hide Controls\", \"presto-player\")}\n          help={__(\n            \"Hide video controls automatically after 2 seconds of no mouse movement.\",\n            \"presto-player\"\n          )}\n          onChange={(auto_hide) => {\n            updateState({ auto_hide });\n          }}\n          checked={state.auto_hide}\n        />\n      </BaseControl>\n      {/* <BaseControl>\n        <ToggleControl\n          label={__(\"Reset On End\", \"presto-player\")}\n          help={__(\n            \"Reset the video to the beginning when it completes.\",\n            \"presto-player\"\n          )}\n          onChange={(reset_on_end) => {\n            updateState({ reset_on_end });\n          }}\n          checked={state.reset_on_end}\n        />\n      </BaseControl> */}\n\n      <BaseControl>\n        <ToggleControl\n          label={__(\"Save Play Position\", \"presto-player\")}\n          help={__(\n            \"Saves the user's play position so when they come back to the page they can continue the video from where they left off.\",\n            \"presto-player\"\n          )}\n          onChange={(save_player_position) => {\n            updateState({ save_player_position });\n          }}\n          checked={state.save_player_position}\n        />\n      </BaseControl>\n      <BaseControl>\n        <ToggleControl\n          label={__(\"Sticky On Scroll\", \"presto-player\")}\n          help={__(\n            \"Stick videos to the side of the screen when the page is scrolled and the video is playing.\",\n            \"presto-player\"\n          )}\n          onChange={(sticky_scroll) => {\n            updateState({ sticky_scroll });\n          }}\n          checked={state.sticky_scroll}\n        />\n      </BaseControl>\n      <HorizontalRule />\n      <BaseControl />\n      <BaseControl>\n        <h3>{__(\"Youtube\", \"presto-player\")}</h3>\n      </BaseControl>\n      <BaseControl>\n        <ToggleControl\n          label={__(\"Hide Youtube UI (Experimental)\", \"presto-player\")}\n          help={__(\n            \"Hides the Youtube logo and related videos.\",\n            \"presto-player\"\n          )}\n          onChange={(hide_youtube) => {\n            updateState({ hide_youtube });\n          }}\n          checked={state.hide_youtube}\n        />\n      </BaseControl>\n      <BaseControl>\n        <ToggleControl\n          label={__(\"Lazy Load Videos\", \"presto-player\")}\n          help={__(\n            \"Improves page loading performance by only loading the video when clicked.\",\n            \"presto-player\"\n          )}\n          onChange={(lazy_load_youtube) => {\n            updateState({ lazy_load_youtube });\n          }}\n          checked={state.lazy_load_youtube}\n        />\n      </BaseControl>\n    </div>\n  );\n}\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst {\n  ToggleControl,\n  BaseControl,\n  RangeControl,\n  SelectControl,\n  ColorPicker,\n} = wp.components;\n\nexport default function ({ state, updateState, className }) {\n  return (\n    <div className={className}>\n      <BaseControl>\n        <h3>{__(\"Style\", \"presto-player\")}</h3>\n      </BaseControl>\n      <BaseControl>\n        <ToggleControl\n          label={__(\"Hide Logo\", \"presto-player\")}\n          help={__(\"Hides the logo on this video.\", \"presto-player\")}\n          onChange={(hide_logo) => {\n            updateState({ hide_logo });\n          }}\n          checked={state.hide_logo}\n        />\n      </BaseControl>\n      <BaseControl>\n        <RangeControl\n          label={__(\"Round Corners\", \"presto-player\")}\n          help={__(\"Player border radius size.\", \"presto-player\")}\n          value={state?.border_radius || 0}\n          onChange={(border_radius) => updateState({ border_radius })}\n          min={0}\n          max={25}\n        />\n      </BaseControl>\n\n      <BaseControl>\n        <SelectControl\n          label={__(\"Caption Style\", \"presto-player\")}\n          labelPosition=\"top\"\n          value={state?.caption_style}\n          options={[\n            { label: __(\"Default\", \"presto-player\"), value: \"default\" },\n            { label: __(\"Full\", \"presto-player\"), value: \"full\" },\n          ]}\n          onChange={(caption_style) => {\n            updateState({ caption_style });\n          }}\n        />\n      </BaseControl>\n      <BaseControl>\n        <BaseControl.VisualLabel>\n          <p>{__(\"Caption Background\", \"presto-player\")}</p>\n        </BaseControl.VisualLabel>\n\n        <ColorPicker\n          color={state?.caption_background || \"#000000\"}\n          onChangeComplete={(value) => {\n            updateState({ caption_background: value.hex });\n          }}\n          disableAlpha\n        />\n      </BaseControl>\n    </div>\n  );\n}\n","export default () => {\n  return (\n    <div>\n      <presto-player-skeleton\n        style={{ width: \"30%\", marginBottom: \"10px\" }}\n      ></presto-player-skeleton>\n      <presto-player-skeleton\n        style={{ height: \"2rem\", marginBottom: \"20px\" }}\n      ></presto-player-skeleton>\n    </div>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { SelectControl, TextControl, Notice } = wp.components;\nconst { useEffect, useState } = wp.element;\nimport LoadSelect from \"../../components/LoadSelect\";\n\nexport default ({ options, updateEmailState }) => {\n  const [fetching, setFetching] = useState(false);\n  const [lists, setLists] = useState([\n    { value: null, label: __(\"Choose an audience\", \"presto-player\") },\n  ]);\n  const [error, setError] = useState(\"\");\n\n  const fetchLists = async () => {\n    setFetching(true);\n    try {\n      const fetched = await wp.apiFetch({\n        path: \"presto-player/v1/mailchimp/lists\",\n      });\n\n      let listOptions = lists;\n      (fetched || []).forEach((list) => {\n        listOptions = [\n          ...listOptions,\n          ...[\n            {\n              value: list.id,\n              label: list.name,\n            },\n          ],\n        ];\n      });\n      setLists(listOptions);\n    } catch (e) {\n      if (e?.message) {\n        setError(e.message);\n      }\n    } finally {\n      setFetching(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchLists();\n  }, []);\n\n  if (fetching) {\n    return (\n      <div>\n        <LoadSelect />\n        <LoadSelect />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <Notice className=\"presto-notice\" status=\"error\" isDismissible={false}>\n        {error}\n      </Notice>\n    );\n  }\n\n  return (\n    <div>\n      <SelectControl\n        label={__(\"Choose an audience\", \"presto-player\")}\n        value={options?.provider_list}\n        options={lists}\n        onChange={(provider_list) => updateEmailState({ provider_list })}\n      />\n      <TextControl\n        label={__(\"Tag\", \"presto-player\")}\n        help={\n          <p>\n            {__(\n              \"Give this contact an optional tag when they are added to the list.\",\n              \"presto-player\"\n            )}\n          </p>\n        }\n        value={options?.provider_tag}\n        onChange={(provider_tag) => updateEmailState({ provider_tag })}\n      />\n    </div>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { SelectControl, Notice } = wp.components;\nconst { useEffect, useState } = wp.element;\nimport LoadSelect from \"../../components/LoadSelect\";\n\nexport default ({ options, updateEmailState }) => {\n  const [fetching, setFetching] = useState(false);\n  const [groups, setGroups] = useState([\n    { value: null, label: __(\"Choose a group\", \"presto-player\") },\n  ]);\n  const [error, setError] = useState(\"\");\n\n  const fetchGroups = async () => {\n    setFetching(true);\n    try {\n      const fetched = await wp.apiFetch({\n        path: \"presto-player/v1/mailerlite/groups\",\n      });\n\n      let listOptions = groups;\n      (fetched || []).forEach((list) => {\n        listOptions = [\n          ...listOptions,\n          ...[\n            {\n              value: list.id,\n              label: list.name,\n            },\n          ],\n        ];\n      });\n      setGroups(listOptions);\n    } catch (e) {\n      if (e?.message) {\n        setError(e.message);\n      }\n    } finally {\n      setFetching(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchGroups();\n  }, []);\n\n  if (fetching) {\n    return <LoadSelect />;\n  }\n\n  if (error) {\n    return (\n      <Notice className=\"presto-notice\" status=\"error\" isDismissible={false}>\n        {error}\n      </Notice>\n    );\n  }\n\n  return (\n    <div>\n      <SelectControl\n        label={__(\"Choose a group\", \"presto-player\")}\n        value={options?.provider_list}\n        options={groups}\n        onChange={(provider_list) => updateEmailState({ provider_list })}\n      />\n    </div>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { SelectControl, Notice } = wp.components;\nconst { useEffect, useState } = wp.element;\nimport LoadSelect from \"../../components/LoadSelect\";\n\nexport default ({ options, updateEmailState }) => {\n  const [fetchingLists, setFetchingLists] = useState(false);\n  const [fetchingTags, setFetchingTags] = useState(false);\n\n  const [lists, setLists] = useState([\n    { value: null, label: __(\"Choose a list\", \"presto-player\") },\n  ]);\n  const [tags, setTags] = useState([\n    { value: null, label: __(\"Choose a tag\", \"presto-player\") },\n  ]);\n  const [error, setError] = useState(\"\");\n\n  const fetchLists = async () => {\n    setFetchingLists(true);\n    try {\n      const fetched = await wp.apiFetch({\n        path: \"presto-player/v1/activecampaign/lists\",\n      });\n\n      let listOptions = lists;\n      (fetched || []).forEach((list) => {\n        listOptions = [\n          ...listOptions,\n          ...[\n            {\n              value: list.id,\n              label: list.name || __(\"Default list\", \"presto-player\"),\n            },\n          ],\n        ];\n      });\n      setLists(listOptions);\n    } catch (e) {\n      if (e?.message) {\n        setError(e.message);\n      }\n    } finally {\n      setFetchingLists(false);\n    }\n  };\n\n  const fetchTags = async () => {\n    setFetchingTags(true);\n    try {\n      const fetched = await wp.apiFetch({\n        path: \"presto-player/v1/activecampaign/tags\",\n      });\n\n      let tagOptions = tags;\n      (fetched || []).forEach((tag) => {\n        tagOptions = [\n          ...tagOptions,\n          ...[\n            {\n              value: tag.id,\n              label: tag.tag,\n            },\n          ],\n        ];\n      });\n      setTags(tagOptions);\n    } catch (e) {\n      if (e?.message) {\n        setError(e.message);\n      }\n    } finally {\n      setFetchingTags(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchLists();\n    fetchTags();\n  }, []);\n\n  if (error) {\n    return (\n      <Notice className=\"presto-notice\" status=\"error\" isDismissible={false}>\n        {error}\n      </Notice>\n    );\n  }\n\n  return (\n    <div>\n      {fetchingLists ? (\n        <LoadSelect />\n      ) : (\n        lists.length > 1 && (\n          <SelectControl\n            label={__(\"Choose a list\", \"presto-player\")}\n            value={options?.provider_list}\n            options={lists}\n            onChange={(provider_list) => updateEmailState({ provider_list })}\n          />\n        )\n      )}\n\n      {fetchingTags ? (\n        <LoadSelect />\n      ) : (\n        tags.length > 1 && (\n          <SelectControl\n            label={__(\"Choose a tag\", \"presto-player\")}\n            value={options?.provider_tag}\n            options={tags}\n            onChange={(provider_tag) => updateEmailState({ provider_tag })}\n          />\n        )\n      )}\n    </div>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { SelectControl, Notice } = wp.components;\nconst { useEffect, useState } = wp.element;\nimport LoadSelect from \"../../components/LoadSelect\";\n\nexport default ({ options, updateEmailState }) => {\n  const [fetchingLists, setFetchingLists] = useState(false);\n  const [fetchingTags, setFetchingTags] = useState(false);\n\n  const [lists, setLists] = useState([\n    { value: null, label: __(\"Choose a list\", \"presto-player\") },\n  ]);\n  const [tags, setTags] = useState([\n    { value: null, label: __(\"Choose a tag\", \"presto-player\") },\n  ]);\n  const [error, setError] = useState(\"\");\n\n  const fetchLists = async () => {\n    setFetchingLists(true);\n    try {\n      const fetched = await wp.apiFetch({\n        path: \"presto-player/v1/fluentcrm/lists\",\n      });\n\n      let listOptions = lists;\n      (fetched || []).forEach((list) => {\n        listOptions = [\n          ...listOptions,\n          ...[\n            {\n              value: list.id,\n              label: list.title || list.slug,\n            },\n          ],\n        ];\n      });\n      setLists(listOptions);\n    } catch (e) {\n      if (e?.message) {\n        setError(e.message);\n      }\n    } finally {\n      setFetchingLists(false);\n    }\n  };\n\n  const fetchTags = async () => {\n    setFetchingTags(true);\n    try {\n      const fetched = await wp.apiFetch({\n        path: \"presto-player/v1/fluentcrm/tags\",\n      });\n\n      let tagOptions = tags;\n      (fetched || []).forEach((tag) => {\n        tagOptions = [\n          ...tagOptions,\n          ...[\n            {\n              value: tag.id,\n              label: tag.title || tag.slug,\n            },\n          ],\n        ];\n      });\n      setTags(tagOptions);\n    } catch (e) {\n      if (e?.message) {\n        setError(e.message);\n      }\n    } finally {\n      setFetchingTags(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchLists();\n    fetchTags();\n  }, []);\n\n  if (error) {\n    return (\n      <Notice className=\"presto-notice\" status=\"error\" isDismissible={false}>\n        {error}\n      </Notice>\n    );\n  }\n\n  return (\n    <div>\n      {fetchingLists ? (\n        <LoadSelect />\n      ) : (\n        lists.length > 1 && (\n          <SelectControl\n            label={__(\"Choose a list\", \"presto-player\")}\n            value={options?.provider_list}\n            options={lists}\n            onChange={(provider_list) => updateEmailState({ provider_list })}\n          />\n        )\n      )}\n\n      {fetchingTags ? (\n        <LoadSelect />\n      ) : (\n        tags.length > 1 && (\n          <SelectControl\n            label={__(\"Choose a tag\", \"presto-player\")}\n            value={options?.provider_tag}\n            options={tags}\n            onChange={(provider_tag) => updateEmailState({ provider_tag })}\n          />\n        )\n      )}\n    </div>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { SelectControl, Button, Flex, Icon } = wp.components;\nconst { useEffect, useState } = wp.element;\nimport LoadSelect from \"../../components/LoadSelect\";\n\nimport MailchimpConfig from \"./MailchimpConfig\";\nimport MailerLiteConfig from \"./MailerLiteConfig\";\nimport ActiveCampaignConfig from \"./ActiveCampaignConfig\";\nimport FluentCRMConfig from \"./FluentCRMConfig\";\n\nexport default ({ options, updateEmailState }) => {\n  const [fetching, setFetching] = useState(false);\n  const [settings, setSettings] = useState([\n    { value: \"none\", label: __(\"None\", \"presto-player\") },\n  ]);\n  const [error, setError] = useState(\"\");\n\n  const optionsMap = {\n    presto_player_activecampaign: {\n      label: \"ActiveCampaign\",\n      value: \"activecampaign\",\n    },\n    presto_player_mailchimp: {\n      label: \"MailChimp\",\n      value: \"mailchimp\",\n    },\n    presto_player_mailerlite: {\n      label: \"MailerLite\",\n      value: \"mailerlite\",\n    },\n    presto_player_fluentcrm: {\n      label: \"FluentCRM\",\n      value: \"fluentcrm\",\n    },\n  };\n\n  const fetchSettings = async () => {\n    setFetching(true);\n    setError(\"\");\n    try {\n      const fetched = await wp.apiFetch({\n        path: \"wp/v2/settings\",\n      });\n      let settingsToSet = settings;\n      Object.keys(fetched).forEach((key) => {\n        if (optionsMap?.[key] && fetched[key]?.connected) {\n          settingsToSet = [...settingsToSet, ...[optionsMap[key]]];\n        }\n      });\n      setSettings(settingsToSet);\n    } catch (e) {\n      if (e?.message) {\n        setError(e.message);\n      }\n    } finally {\n      setFetching(false);\n    }\n  };\n\n  const addProvider = () => {\n    return (\n      <Flex>\n        <Button\n          target=\"_blank\"\n          href=\"/wp-admin/edit.php?post_type=pp_video_block&page=presto-player-settings#/integrations\"\n          isSecondary\n          isSmall\n        >\n          {__(\"Connect a provider\", \"presto-player\")}\n        </Button>\n        <Button\n          isSmall\n          onClick={(e) => {\n            e.preventDefault();\n            fetchSettings();\n          }}\n        >\n          <Icon icon=\"update\" />\n        </Button>\n      </Flex>\n    );\n  };\n\n  useEffect(() => {\n    fetchSettings();\n  }, []);\n\n  const emailProviderOptions = () => {\n    const found = settings.find(\n      (setting) => setting.value === options?.provider\n    );\n    if (!Object.keys(found || {}).length) {\n      return;\n    }\n\n    switch (options?.provider) {\n      case \"mailchimp\":\n        return (\n          <MailchimpConfig\n            options={options}\n            updateEmailState={updateEmailState}\n          />\n        );\n      case \"mailerlite\":\n        return (\n          <MailerLiteConfig\n            options={options}\n            updateEmailState={updateEmailState}\n          />\n        );\n      case \"activecampaign\":\n        return (\n          <ActiveCampaignConfig\n            options={options}\n            updateEmailState={updateEmailState}\n          />\n        );\n      case \"fluentcrm\":\n        return (\n          <FluentCRMConfig\n            options={options}\n            updateEmailState={updateEmailState}\n          />\n        );\n    }\n  };\n\n  if (fetching) {\n    return <LoadSelect />;\n  }\n\n  return (\n    <div>\n      {error}\n      {settings.length > 1 ? (\n        <div>\n          <SelectControl\n            label={__(\"Choose an email provider\", \"presto-player\")}\n            value={options?.provider}\n            options={settings}\n            onChange={(provider) => updateEmailState({ provider })}\n          />\n          {emailProviderOptions()}\n        </div>\n      ) : (\n        addProvider()\n      )}\n    </div>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst {\n  ToggleControl,\n  BaseControl,\n  RangeControl,\n  TextControl,\n  TextareaControl,\n} = wp.components;\n\nimport ChooseProvider from \"./parts/ChooseProvider\";\n\nexport default function ({ state, updateState, className }) {\n  const { email_collection } = state;\n\n  const updateEmailState = (updated) => {\n    updateState({\n      ...state,\n      email_collection: {\n        ...email_collection,\n        ...updated,\n      },\n    });\n  };\n\n  return (\n    <div className={className}>\n      <BaseControl>\n        <h3>{__(\"Email Capture\", \"presto-player\")}</h3>\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--large-play\">\n        <ToggleControl\n          label={__(\"Enable\", \"presto-player\")}\n          help={__(\n            \"Show an email collection form and message over your video.\",\n            \"presto-player\"\n          )}\n          onChange={(enabled) => {\n            updateEmailState({\n              enabled,\n            });\n          }}\n          checked={email_collection?.enabled}\n        />\n      </BaseControl>\n      {!!email_collection?.enabled && (\n        <>\n          <BaseControl className=\"presto-player__control--percentage-watched\">\n            <RangeControl\n              label={__(\"Display At (Percentage)\", \"presto-player\")}\n              labelPosition=\"top\"\n              onChange={(percentage) => {\n                updateEmailState({\n                  percentage,\n                });\n              }}\n              marks={[\n                {\n                  value: 0,\n                  label: \"Start\",\n                },\n                {\n                  value: 50,\n                  label: \"50% Watched\",\n                },\n                {\n                  value: 100,\n                  label: \"End\",\n                },\n              ]}\n              shiftStep={5}\n              value={email_collection?.percentage || 0}\n            />\n          </BaseControl>\n\n          <BaseControl className=\"presto-player__control--large-play\">\n            <ToggleControl\n              label={__(\"Allow Skipping\", \"presto-player\")}\n              help={__(\"Let the viewer skip\", \"presto-player\")}\n              onChange={(allow_skip) => {\n                updateEmailState({\n                  allow_skip,\n                });\n              }}\n              checked={email_collection?.allow_skip}\n            />\n          </BaseControl>\n\n          <BaseControl className=\"presto-player__control--large-play\">\n            <TextareaControl\n              label={__(\"Headline\", \"presto-player\")}\n              help={__(\"The headline for your form.\", \"presto-player\")}\n              value={email_collection?.headline}\n              onChange={(headline) => {\n                updateEmailState({\n                  headline,\n                });\n              }}\n            />\n          </BaseControl>\n\n          <BaseControl className=\"presto-player__control--large-play\">\n            <TextareaControl\n              label={__(\"Bottom Text\", \"presto-player\")}\n              help={__(\n                \"Text displayed below the form. HTML allowed.\",\n                \"presto-player\"\n              )}\n              value={email_collection?.bottom_text}\n              onChange={(bottom_text) => {\n                updateEmailState({\n                  bottom_text,\n                });\n              }}\n            />\n          </BaseControl>\n\n          <BaseControl className=\"presto-player__control--large-play\">\n            <TextControl\n              label={__(\"Play Button Text\", \"presto-player\")}\n              help={<p>{__(\"Submit button text\", \"presto-player\")}</p>}\n              value={email_collection?.button_text}\n              onChange={(button_text) => updateEmailState({ button_text })}\n            />\n          </BaseControl>\n\n          <h3>{__(\"Integrate\", \"presto-player\")}</h3>\n          <BaseControl>\n            <ChooseProvider\n              updateEmailState={updateEmailState}\n              options={email_collection}\n            />\n          </BaseControl>\n\n          <h3>{__(\"Style\", \"presto-player\")}</h3>\n\n          <BaseControl>\n            <RangeControl\n              label={__(\"Round Corners\", \"presto-player\")}\n              help={__(\"Border radius of form elements.\", \"presto-player\")}\n              value={email_collection?.border_radius || 0}\n              onChange={(border_radius) => updateEmailState({ border_radius })}\n              min={0}\n              max={25}\n            />\n          </BaseControl>\n        </>\n      )}\n    </div>\n  );\n}\n","/** @jsx jsx */\nconst { ColorPicker, ColorIndicator, Popover, Button, Flex } = wp.components;\nconst { useState, useEffect } = wp.element;\nimport { css, jsx } from \"@emotion/core\";\n\nexport default ({ color, setColor }) => {\n  const [open, setOpen] = useState(false);\n  const [original, setOriginal] = useState(color);\n\n  useEffect(() => {\n    if (open && color) {\n      setOriginal(color);\n    }\n  }, [open]);\n\n  return (\n    <span>\n      <ColorIndicator\n        css={{ width: \"25px\", height: \"25px\", borderRadius: \"9999px\" }}\n        colorValue={color}\n        onClick={() => setOpen(!open)}\n      />\n      {!!open && (\n        <Popover position=\"bottom left\">\n          <ColorPicker\n            color={color || \"\"}\n            onChangeComplete={(value) => value?.hex && setColor(value)}\n            disableAlpha\n          />\n          <div\n            css={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n              padding: \"10px\",\n            }}\n          >\n            <Button\n              css={{ margin: \"0 5px\" }}\n              isTertiary\n              onClick={() => {\n                setColor({ hex: null });\n                setOpen(false);\n              }}\n            >\n              Reset\n            </Button>\n            <div\n              css={{\n                display: \"flex\",\n                justifyContent: \"flex-end\",\n                padding: \"10px\",\n              }}\n            >\n              <Button\n                css={{ margin: \"0 5px\" }}\n                isTertiary\n                onClick={() => {\n                  setColor({ hex: original });\n                  setOpen(false);\n                }}\n              >\n                Cancel\n              </Button>\n              <Button isPrimary onClick={() => setOpen(false)}>\n                Apply\n              </Button>\n            </div>\n          </div>\n        </Popover>\n      )}\n    </span>\n  );\n};\n","/** @jsx jsx */\nconst { __ } = wp.i18n;\nconst { Button, Popover, Icon } = wp.components;\n\nconst { __experimentalLinkControl: LinkControl } = wp.blockEditor;\nconst { useState } = wp.element;\nconst { prependHTTP } = wp.url;\n\nimport { css, jsx } from \"@emotion/core\";\n\nexport default ({ setSettings, settings }) => {\n  const [visible, setVisible] = useState(false);\n  const { url } = settings;\n\n  /**\n   * Pending settings to be applied to the next link. When inserting a new\n   * link, toggle values cannot be applied immediately, because there is not\n   * yet a link for them to apply to. Thus, they are maintained in a state\n   * value until the time that the link can be inserted or edited.\n   *\n   * @type {[Object|undefined,Function]}\n   */\n  const [nextLinkValue, setNextLinkValue] = useState();\n\n  const linkValue = {\n    url: settings?.url,\n    type: settings?.type,\n    id: settings?.id,\n    opensInNewTab: settings?.target === \"_blank\",\n    ...nextLinkValue,\n  };\n\n  const onChangeLink = (nextValue) => {\n    // Merge with values from state, both for the purpose of assigning the\n    // next state value, and for use in constructing the new link format if\n    // the link is ready to be applied.\n    nextValue = {\n      ...nextLinkValue,\n      ...nextValue,\n    };\n\n    // LinkControl calls `onChange` immediately upon the toggling a setting.\n    const didToggleSetting =\n      linkValue.opensInNewTab !== nextValue.opensInNewTab &&\n      linkValue.url === nextValue.url;\n\n    // If change handler was called as a result of a settings change during\n    // link insertion, it must be held in state until the link is ready to\n    // be applied.\n    const didToggleSettingForNewLink =\n      didToggleSetting && nextValue.url === undefined;\n\n    // If link will be assigned, the state value can be considered flushed.\n    // Otherwise, persist the pending changes.\n    setNextLinkValue(didToggleSettingForNewLink ? nextValue : undefined);\n\n    if (didToggleSettingForNewLink) {\n      return;\n    }\n\n    const newUrl = prependHTTP(nextValue.url);\n    setSettings({\n      url: newUrl,\n      type: nextValue.type,\n      id:\n        nextValue.id !== undefined && nextValue.id !== null\n          ? String(nextValue.id)\n          : undefined,\n      opensInNewTab: nextValue.opensInNewTab,\n    });\n  };\n\n  const confirmTrash = () => {\n    const r = confirm(\n      __(\"Are you sure you wish to remove this link?\", \"presto-player\")\n    );\n    if (r) {\n      setSettings({});\n    }\n  };\n\n  return (\n    <span>\n      {url ? (\n        <div\n          css={css`\n            display: flex;\n            justify-content: space-between;\n          `}\n        >\n          <div\n            css={css`\n              max-width: 85%;\n              overflow: hidden;\n              display: flex;\n              align-items: center;\n            `}\n          >\n            <a\n              href=\"#\"\n              css={css`\n                padding: 10px;\n                background: #f3f3f3;\n                border-radius: 4px;\n                width: 100%;\n                display: inline-flex;\n                align-items: center;\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                text-decoration: none;\n              `}\n              onClick={() => setVisible(!visible)}\n            >\n              <Icon\n                icon=\"edit\"\n                css={css`\n                  cursor: pointer;\n                  opacity: 0.75;\n                  margin: 0 2px;\n                  font-size: 16px;\n                  width: 16px;\n                  height: 16px;\n                  text-decoration: none;\n                `}\n              />\n              {url}\n            </a>\n            {visible && (\n              <Popover\n                position=\"bottom center\"\n                onClose={() => setVisible(false)}\n              >\n                <LinkControl value={settings} onChange={onChangeLink} />\n              </Popover>\n            )}\n          </div>\n          <div\n            css={css`\n              display: flex;\n              align-items: center;\n            `}\n          >\n            <Icon\n              onClick={confirmTrash}\n              icon=\"trash\"\n              className=\"presto-icon\"\n              css={css`\n                cursor: pointer;\n                opacity: 0.75;\n                margin: 0 2px;\n                fontsize: 18px;\n                width: 18px;\n                height: 18px;\n\n                &:hover {\n                  color: #cc1818;\n                }\n              `}\n            />\n          </div>\n        </div>\n      ) : (\n        <span>\n          <Button isPrimary isSmall onClick={() => setVisible(!visible)}>\n            {__(\"Add Link\", \"presto-player\")}\n          </Button>\n          {visible && (\n            <Popover position=\"bottom center\" onClose={() => setVisible(false)}>\n              <LinkControl value={settings} onChange={onChangeLink} />\n            </Popover>\n          )}\n        </span>\n      )}\n    </span>\n  );\n};\n","/** @jsx jsx */\n/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { TextControl, ExternalLink, Button, Flex } = wp.components;\nconst { useState, useEffect } = wp.element;\nconst { useSelect, dispatch } = wp.data;\n\nimport { css, jsx } from \"@emotion/core\";\n\nexport default ({ onClose }) => {\n  const [value, setValue] = useState(\"\");\n  const [saving, setSaving] = useState(false);\n\n  const userCanReadSettings = wp.data.useSelect((select) =>\n    select(\"core\").canUser(\"read\", \"settings\")\n  );\n\n  const youtube = useSelect((select) => {\n    return select(\"presto-player/player\").youtube();\n  });\n\n  useEffect(() => {\n    setValue(youtube.channel_id);\n  }, [youtube?.channel_id]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSaving(true);\n    dispatch(\"presto-player/player\").updateYoutube({ channel_id: value });\n\n    const data = {\n      ...youtube,\n      ...{ channel_id: value },\n    };\n\n    try {\n      let response = await wp.apiFetch({\n        path: \"wp/v2/settings\",\n        method: \"POST\",\n        data: {\n          presto_player_youtube: data,\n        },\n      });\n      if (response?.presto_player_youtube) {\n        dispatch(\"presto-player/player\").setYoutube(\n          response?.presto_player_youtube\n        );\n        onClose();\n      }\n    } catch (e) {\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // use must be able to read settings\n  if (!userCanReadSettings) {\n    return \"\";\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <TextControl\n        css={css`\n          margin-bottom: 0 !important;\n        `}\n        label={__(\"Youtube Channel ID\", \"presto-player\")}\n        help={\n          <p>\n            <ExternalLink href=\"https://support.google.com/youtube/answer/3250431?hl=en\">\n              {__(\"Find my channel id\", \"presto-player\")}\n            </ExternalLink>\n          </p>\n        }\n        value={value}\n        onChange={(channel_id) => setValue(channel_id)}\n        // required\n      />\n\n      <Button\n        disabled={saving}\n        isBusy={saving}\n        css={css`\n          margin-bottom: 1em;\n        `}\n        isPrimary\n        type=\"submot\"\n      >\n        {__(\"Save\", \"presto-player\")}\n      </Button>\n      <Button\n        onClick={onClose}\n        css={css`\n          margin-bottom: 1em;\n        `}\n        isTertiary\n      >\n        {__(\"Cancel\", \"presto-player\")}\n      </Button>\n    </form>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst {\n  ToggleControl,\n  Flex,\n  Button,\n  BaseControl,\n  RangeControl,\n  TextControl,\n  SelectControl,\n  TextareaControl,\n} = wp.components;\n\nconst { useEffect, useState } = wp.element;\nconst { useSelect } = wp.data;\n\nimport ColorPopup from \"../components/ColorPopup\";\nimport UrlSelect from \"../components/UrlSelect\";\nimport YoutubeChannelId from \"./parts/YoutubeChannelId\";\n\nexport default function ({ state, updateState, className }) {\n  const { action_bar } = state;\n  const [editYoutube, setEditYoutube] = useState(false);\n\n  const branding = useSelect((select) => {\n    return select(\"presto-player/player\").branding();\n  });\n  const youtube = useSelect((select) => {\n    return select(\"presto-player/player\").youtube();\n  });\n\n  const updateActionBar = (updated) => {\n    updateState({\n      ...state,\n      action_bar: {\n        ...action_bar,\n        ...updated,\n      },\n    });\n  };\n\n  useEffect(() => {\n    if (!action_bar?.text) {\n      updateActionBar({\n        text: \"Like this video?\",\n      });\n    }\n    if (!action_bar?.button_type) {\n      updateActionBar({\n        button_type: \"custom\",\n      });\n    }\n\n    if (!action_bar?.button_text) {\n      updateActionBar({\n        button_text: \"Click Here\",\n      });\n    }\n  }, [state]);\n\n  const renderYoutubeChannelForm = () => {\n    if (action_bar?.button_type !== \"youtube\") {\n      return;\n    }\n\n    return editYoutube ? (\n      <YoutubeChannelId onClose={() => setEditYoutube(false)} />\n    ) : (\n      <div>\n        <Button\n          isSecondary\n          onClick={(e) => {\n            e.preventDefault();\n            setEditYoutube(true);\n          }}\n        >\n          {youtube?.channel_id\n            ? __(\"Update Youtube Channel Id\", \"presto-player\")\n            : __(\"Add Youtube Channel Id\", \"presto-player\")}\n        </Button>\n        <br />\n        <br />\n        <br />\n      </div>\n    );\n  };\n\n  return (\n    <div className={className}>\n      <BaseControl>\n        <h3>{__(\"Action Bar\", \"presto-player\")}</h3>\n      </BaseControl>\n      <BaseControl className=\"presto-player__control--large-play\">\n        <ToggleControl\n          label={__(\"Enable\", \"presto-player\")}\n          help={__(\n            \"Show an action bar below your video while it's playing.\",\n            \"presto-player\"\n          )}\n          onChange={(enabled) => {\n            updateActionBar({\n              enabled,\n            });\n          }}\n          checked={action_bar?.enabled}\n        />\n      </BaseControl>\n      {!!action_bar?.enabled && (\n        <>\n          <BaseControl className=\"presto-player__control--percentage-watched\">\n            <RangeControl\n              label={__(\"Display At (Percentage)\", \"presto-player\")}\n              labelPosition=\"top\"\n              onChange={(percentage_start) => {\n                updateActionBar({\n                  percentage_start,\n                });\n              }}\n              marks={[\n                {\n                  value: 0,\n                  label: \"Start\",\n                },\n                {\n                  value: 50,\n                  label: \"50% Watched\",\n                },\n                {\n                  value: 100,\n                  label: \"End\",\n                },\n              ]}\n              shiftStep={5}\n              value={action_bar?.percentage_start || 0}\n            />\n          </BaseControl>\n\n          <BaseControl className=\"presto-player__control--large-play\">\n            <TextareaControl\n              label={__(\"Text\", \"presto-player\")}\n              help={__(\"Action bar text.\", \"presto-player\")}\n              value={action_bar?.text}\n              onChange={(text) =>\n                updateActionBar({\n                  text,\n                })\n              }\n            />\n          </BaseControl>\n\n          <BaseControl className=\"presto-player__control--large-play\">\n            <Flex>\n              <BaseControl.VisualLabel>\n                {__(\"Action Bar Background\", \"presto-player\")}\n              </BaseControl.VisualLabel>\n              <ColorPopup\n                color={action_bar?.background_color || \"#1d1d1d\"}\n                setColor={(value) =>\n                  updateActionBar({\n                    background_color: value && value.hex,\n                  })\n                }\n              />\n            </Flex>\n          </BaseControl>\n\n          <BaseControl>\n            <h3>{__(\"Button\", \"presto-player\")}</h3>\n          </BaseControl>\n\n          <BaseControl className=\"presto-player__control--button-type\">\n            <SelectControl\n              label={__(\"Button Type\", \"presto-player\")}\n              value={action_bar?.button_type}\n              options={[\n                {\n                  value: \"custom\",\n                  label: __(\"Custom\", \"presto-player\"),\n                },\n                {\n                  value: \"youtube\",\n                  label: __(\"YouTube Subscribe\", \"presto-player\"),\n                },\n                {\n                  value: \"none\",\n                  label: __(\"None\", \"presto-player\"),\n                },\n              ]}\n              onChange={(button_type) =>\n                updateActionBar({\n                  button_type,\n                })\n              }\n            />\n          </BaseControl>\n\n          {action_bar?.button_type === \"youtube\" && youtube?.channel_id && (\n            <ToggleControl\n              label={__(\"Show Count\", \"presto-player\")}\n              help={__(\"Show your follower count.\", \"presto-player\")}\n              onChange={(button_count) => {\n                updateActionBar({\n                  button_count,\n                });\n              }}\n              checked={action_bar?.button_count}\n            />\n          )}\n\n          {renderYoutubeChannelForm()}\n\n          {action_bar?.button_type === \"custom\" && (\n            <div>\n              <BaseControl className=\"presto-player__control--button-text\">\n                <TextControl\n                  label={__(\"Button Text\", \"presto-player\")}\n                  help={<p>{__(\"Submit button text\", \"presto-player\")}</p>}\n                  value={action_bar?.button_text}\n                  onChange={(button_text) => updateActionBar({ button_text })}\n                />\n              </BaseControl>\n              <BaseControl className=\"presto-player__control--button-text\">\n                <BaseControl.VisualLabel>\n                  <p> {__(\"Button Link\", \"presto-player\")}</p>\n                </BaseControl.VisualLabel>\n                <UrlSelect\n                  setSettings={(val) => {\n                    updateActionBar({\n                      button_link: val,\n                    });\n                  }}\n                  settings={action_bar?.button_link || {}}\n                />\n              </BaseControl>\n              <BaseControl className=\"presto-player__control--button-radius\">\n                <RangeControl\n                  label={__(\"Round Corners\", \"presto-player\")}\n                  help={__(\"Border radius of the button\", \"presto-player\")}\n                  value={action_bar?.button_radius || 0}\n                  onChange={(button_radius) =>\n                    updateActionBar({ button_radius })\n                  }\n                  min={0}\n                  max={25}\n                />\n              </BaseControl>\n              <BaseControl className=\"presto-player__control--button-color\">\n                <Flex>\n                  <BaseControl.VisualLabel>\n                    {__(\"Button Color\", \"presto-player\")}\n                  </BaseControl.VisualLabel>\n                  <ColorPopup\n                    color={action_bar?.button_color || branding?.color}\n                    setColor={(value) =>\n                      updateActionBar({\n                        button_color: value && value.hex,\n                      })\n                    }\n                  />\n                </Flex>\n              </BaseControl>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * External dependencies\n */\nimport classnames from \"classnames\";\n\n/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { useState, useEffect } = wp.element;\n\nconst { partial, noop, find } = lodash;\n\n/**\n * WordPress components\n */\nconst { NavigableMenu, Animate } = wp.components;\n\nexport default ({\n  className,\n  children,\n  items,\n  title,\n  orientation = \"horizontal\",\n  activeClass = \"is-active\",\n  onSelect = noop,\n}) => {\n  const [selected, setSelected] = useState(null);\n  const [origin, setOrigin] = useState(\"left\");\n\n  const handleClick = (itemKey) => {\n    setSelected(itemKey);\n    onSelect && onSelect(itemKey);\n  };\n\n  const onNavigate = (childIndex, child) => {\n    child.click();\n  };\n\n  const selectedTab = find(items, { name: selected });\n  const selectedId = `${selectedTab?.name ?? \"none\"}`;\n\n  useEffect(() => {\n    setOrigin(selected ? \"right\" : \"left\");\n  }, [selected]);\n\n  return (\n    <div className={className}>\n      <Animate type=\"slide-in\" origin={!!selectedTab ? \"right\" : \"left\"}>\n        {({ className }) =>\n          !selectedTab ? (\n            <div className={classnames(className, \"is-from-right\")}>\n              {!!title && <h2>{title}</h2>}\n              <NavigableMenu\n                role=\"itemlist\"\n                orientation={orientation}\n                onNavigate={onNavigate}\n                className={classnames(\"presto-player__menu-items\")}\n              >\n                {items.map((item) => (\n                  <div\n                    className={classnames(\n                      \"presto-player__menu-item\",\n                      item.className,\n                      {\n                        [activeClass]: item.name === selected,\n                      }\n                    )}\n                    itemId={`${item.name}`}\n                    aria-controls={`${item.name}-view`}\n                    selected={item.name === selected}\n                    key={item.name}\n                    onClick={partial(handleClick, item.name)}\n                  >\n                    {!!item.icon && (\n                      <div class=\"presto-player__menu-icon\">{item.icon}</div>\n                    )}\n                    {item.title}\n                    <svg\n                      className=\"submenu-icon\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      viewBox=\"0 0 24 24\"\n                      width=\"24\"\n                      height=\"24\"\n                      role=\"img\"\n                      ariaHidden=\"true\"\n                      focusable=\"false\"\n                    >\n                      <path d=\"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z\"></path>\n                    </svg>\n                  </div>\n                ))}\n              </NavigableMenu>\n            </div>\n          ) : (\n            <div\n              key={selectedId}\n              aria-labelledby={selectedId}\n              role=\"itempanel\"\n              id={`${selectedId}-view`}\n              className={classnames(className, \"presto-player__menu-content\")}\n            >\n              <div className=\"presto-player__menu-items\">\n                <div\n                  className=\"presto-player__menu-item is-back-button\"\n                  onClick={() => handleClick(\"\")}\n                >\n                  <svg\n                    class=\"back-icon\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 24 24\"\n                    width=\"24\"\n                    height=\"24\"\n                    role=\"img\"\n                    aria-hidden=\"true\"\n                    focusable=\"false\"\n                  >\n                    <path d=\"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z\"></path>\n                  </svg>\n                  {__(\"Back\", \"presto-player\")}\n                </div>\n              </div>\n              {children(selectedTab)}\n            </div>\n          )\n        }\n      </Animate>\n    </div>\n  );\n};\n","const { __ } = wp.i18n;\nconst { Disabled } = wp.components;\nimport Player from \"../Player\";\nconst { useState, useEffect } = wp.element;\nconst { useSelect } = wp.data;\nimport { PrestoEmailOverlayUi } from \"@/component-library/react/src/components.ts\";\n\nexport default ({ state, branding, menu }) => {\n  const [renderKey, setRenderKey] = useState(1);\n  const { email_collection } = state;\n\n  useEffect(() => {\n    setRenderKey(renderKey + 1);\n  }, [\n    state.skin,\n    state[\"play-large\"],\n    state.rewind,\n    state.play,\n    state[\"fast-forward\"],\n    state.progress,\n    state[\"current-time\"],\n    state.mute,\n    state.volume,\n    state.speed,\n    state.pip,\n    state.fullscreen,\n    state.hide_logo,\n  ]);\n\n  const previews = {\n    email: !!email_collection?.enabled && (\n      <PrestoEmailOverlayUi\n        className=\"email-overlay\"\n        slot=\"player-end\"\n        headline={email_collection?.headline}\n        defaultHeadline={__(\n          \"Enter your email to watch this video.\",\n          \"presto-player\"\n        )}\n        bottomText={email_collection?.bottom_text}\n        allowSkip={email_collection?.allow_skip}\n        skipText={__(\"Skip\", \"presto-player\")}\n        buttonText={email_collection?.button_text}\n        placeholder={__(\"Email address\", \"presto-player\")}\n      />\n    ),\n  };\n\n  return (\n    <Disabled>\n      <div className=\"presto-player__wrapper\">\n        <Player\n          preset={state}\n          branding={branding}\n          attributes={{\n            chapters: [],\n            poster: \"https://source.unsplash.com/daily\",\n          }}\n          setAttributes={() => {}}\n          key={renderKey}\n          adminPreview={previews[menu]}\n        />\n      </div>\n    </Disabled>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst {\n  TextControl,\n  BaseControl,\n  TabPanel,\n  Icon,\n  Animate,\n  Notice,\n  Button,\n  Flex,\n  Panel,\n  PanelBody,\n  FlexItem,\n  SelectControl,\n  FlexBlock,\n  Disabled,\n  Modal,\n} = wp.components;\nconst { useState, useEffect } = wp.element;\nconst { useSelect } = wp.data;\n\nimport { snackbarNotice } from \"@/admin/blocks/util\";\nimport Controls from \"./Controls\";\nimport Behavior from \"./Behavior\";\nimport Style from \"./Style\";\nimport Email from \"./Email\";\nimport ActionBar from \"./ActionBar\";\nimport Menu from \"@/admin/ui/Menu\";\nimport Preview from \"./Preview\";\n\nfunction EditPlayerPreset({\n  type = \"new\",\n  closeModal,\n  addPreset,\n  onSave,\n  updatePreset,\n  name = \"\",\n  preset = {\n    \"play-large\": true,\n    rewind: true,\n    play: true,\n    \"fast-forward\": true,\n    progress: true,\n    \"current-time\": true,\n    mute: true,\n    volume: true,\n    speed: false,\n    pip: false,\n    fullscreen: true,\n    // behavior\n    save_player_position: false,\n    reset_on_end: false,\n    auto_hide: true,\n    sticky_scroll: false,\n    // style\n    hide_logo: false,\n    border_radius: 0,\n    skin: \"default\",\n    caption_style: \"default\",\n    caption_background: \"#000000\",\n    // youtube\n    hide_youtube: false,\n    lazy_load_youtube: false,\n\n    email_collection: {},\n    action_bar: {},\n  },\n}) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [menu, setMenu] = useState(\"\");\n  const [thisName, setThisName] = useState(name);\n  const [state, setState] = useState(preset);\n  const branding = useSelect((select) => {\n    return select(\"presto-player/player\").branding();\n  });\n\n  const genericError = {\n    message: __(\n      \"The preset could not be saved. Please reload the page and try again.\",\n      \"presto-player\"\n    ),\n  };\n\n  // update state\n  const updateState = (updated = {}) => {\n    setState({ ...state, ...updated });\n  };\n\n  const putPreset = async () => {\n    setLoading(true);\n    try {\n      const data = {\n        ...state,\n        ...{ name: thisName },\n      };\n      let saved = await wp.apiFetch({\n        method: \"POST\",\n        url: wp.url.addQueryArgs(\n          `${prestoPlayer.root}${prestoPlayer.prestoVersionString}preset/${preset.id}`,\n          { _method: \"PUT\" }\n        ),\n        data,\n      });\n\n      if (!saved) {\n        throw genericError;\n      }\n\n      // update or create here\n      updatePreset(saved);\n      closeModal();\n      !!onSave && onSave(saved);\n      snackbarNotice({ message: __(\"Preset updated!\", \"presto-player\") });\n    } catch (e) {\n      setError(e?.message ? e.message : genericError);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createPreset = async () => {\n    setLoading(true);\n    try {\n      let saved = await wp.apiFetch({\n        method: \"POST\",\n        url: prestoPlayer.root + prestoPlayer.prestoVersionString + \"preset\",\n        data: {\n          ...{ name: thisName },\n          ...state,\n        },\n      });\n      if (!saved) {\n        throw genericError;\n      }\n\n      // update or create here\n      addPreset(saved);\n      closeModal();\n      !!onSave && onSave(saved);\n      snackbarNotice({ message: __(\"Preset created!\", \"presto-player\") });\n    } catch (e) {\n      setError(e?.message ? e.message : genericError);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // validate and save\n  const save = () => {\n    if (!thisName) {\n      setError(__(\"You must enter a name for the preset.\", \"presto-player\"));\n      return;\n    }\n    return type === \"edit\" ? putPreset() : createPreset();\n  };\n\n  const tabs = [\n    {\n      name: \"controls\",\n      title: __(\"Controls\", \"presto-player\"),\n      icon: <Icon icon=\"admin-settings\" />,\n      component: <Controls updateState={updateState} state={state} />,\n    },\n    {\n      name: \"behavior\",\n      title: __(\"Behavior\", \"presto-player\"),\n      icon: <Icon icon=\"admin-generic\" />,\n      component: <Behavior updateState={updateState} state={state} />,\n    },\n    {\n      name: \"style\",\n      title: __(\"Style\", \"presto-player\"),\n      icon: <Icon icon=\"admin-customizer\" />,\n      component: <Style updateState={updateState} state={state} />,\n    },\n    {\n      name: \"email\",\n      title: __(\"Email Capture\", \"presto-player\"),\n      icon: <Icon icon=\"email\" />,\n      component: <Email updateState={updateState} state={state} />,\n    },\n    {\n      name: \"action_bar\",\n      title: __(\"Action Bar\", \"presto-player\"),\n      icon: <Icon icon=\"cover-image\" />,\n      component: <ActionBar updateState={updateState} state={state} />,\n    },\n    // {\n    //   name: \"cta\",\n    //   title: __(\"Call to Action\", \"presto-player\"),\n    //   icon: <Icon icon=\"megaphone\" />,\n    // },\n  ];\n\n  return (\n    <Modal\n      title={\n        type == \"edit\"\n          ? __(\"Edit A Video Preset\", \"presto-player\")\n          : __(\"Create A New Video Preset\", \"presto-player\")\n      }\n      onRequestClose={closeModal}\n      className=\"presto-player__modal-presets\"\n      overlayClassName=\"presto-player__modal-presets-overlay\"\n    >\n      <div className=\"presto-player__preset-options\" data-cy=\"preset-modal\">\n        <TextControl\n          value={thisName}\n          hideLabelFromVision={true}\n          label={__(\"Preset Name\", \"presto-player\")}\n          onChange={(name) => setThisName(name)}\n          placeholder={__(\"Enter a preset name...\", \"presto-player\")}\n          className=\"presto-player__modal--style-name\"\n          autoFocus\n        />\n\n        <Flex align=\"stretch\" className=\"presto-player__style-preview-area\">\n          <FlexItem className=\"presto-player__style-sidebar\">\n            <div>\n              <Menu\n                items={tabs}\n                title={__(\"Customize\", \"presto-player\")}\n                onSelect={setMenu}\n              >\n                {(item) => item.component}\n              </Menu>\n            </div>\n          </FlexItem>\n          <FlexBlock className=\"presto-player__style-preview-panel\">\n            <div\n              style={{ position: \"absolute\", top: 0, left: 0, padding: \"20px\" }}\n            >\n              <SelectControl\n                label={__(\"Skin\", \"presto-player\")}\n                labelPosition=\"side\"\n                value={state?.skin}\n                hideLabelFromVision={true}\n                options={[\n                  { label: __(\"Basic\", \"presto-player\"), value: \"default\" },\n                  { label: __(\"Stacked\", \"presto-player\"), value: \"stacked\" },\n                ]}\n                onChange={(skin) => {\n                  updateState({ skin });\n                }}\n              />\n            </div>\n            {/*\n        Disable the video tag so the user clicking on it won't play the\n        video when the controls are enabled.\n\t\t\t\t*/}\n\n            <Preview state={state} branding={branding} menu={menu} />\n          </FlexBlock>\n        </Flex>\n\n        <br />\n\n        {error && (\n          <BaseControl>\n            <Notice\n              className=\"presto-player__modal--error-notice\"\n              status=\"error\"\n              isDismissible={false}\n              style={{ margin: 0 }}\n            >\n              {error.replace(/(<([^>]+)>)/gi, \"\")}\n            </Notice>\n          </BaseControl>\n        )}\n        <div style={{ textAlign: \"right\" }}>\n          <Button isTertiary onClick={closeModal} style={{ margin: \"0 6px\" }}>\n            {__(\"Cancel\", \"presto-player\")}\n          </Button>\n          <Button\n            isPrimary\n            isBusy={loading}\n            disabled={loading}\n            onClick={save}\n            data-cy=\"submit-preset\"\n          >\n            {type == \"edit\"\n              ? __(\"Update Preset\", \"presto-player\")\n              : __(\"Create Preset\", \"presto-player\")}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\nexport default EditPlayerPreset;\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { Icon, Spinner, Modal, Button, ButtonGroup } = wp.components;\nconst { useState } = wp.element;\n\nexport default function ({\n  preset,\n  index,\n  isActive,\n  remove,\n  setPreset,\n  onEdit,\n}) {\n  const [loading, setLoading] = useState(false);\n  const [confirmOpen, setConfirmOpen] = useState(false);\n\n  const openConfirm = () => setConfirmOpen(true);\n  const closeConfirm = () => setConfirmOpen(false);\n\n  const untrashPreset = async () => {};\n\n  const trashPreset = async () => {\n    // remove unsaved\n    if (!preset.id) {\n      remove(preset);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      let deleted = await wp.apiFetch({\n        method: \"POST\",\n        url: wp.url.addQueryArgs(\n          `${prestoPlayer.root}${prestoPlayer.prestoVersionString}preset/${preset.id}`,\n          { _method: \"DELETE\" }\n        ),\n      });\n      if (deleted) {\n        remove(preset);\n        wp.data.dispatch(\"core/notices\").createNotice(\n          \"success\", // Can be one of: success, info, warning, error.\n          __(\"Preset trashed.\", \"presto-player\"),\n          {\n            type: \"snackbar\",\n            isDismissible: true,\n            // actions: [\n            //   {\n            //     label: __(\"Undo\", \"presto-player\"),\n            //     onClick: () => {\n            //       console.log(\"untrash\");\n            //     },\n            //   },\n            // ],\n          }\n        );\n      }\n    } catch (e) {\n      console.error(e);\n      if (e?.message) {\n        wp.data.dispatch(\"core/notices\").createNotice(\n          \"error\", // Can be one of: success, info, warning, error.\n          e.message,\n          {\n            type: \"snackbar\",\n            isDismissible: true, // Whether the user can dismiss the notice.\n          }\n        );\n      }\n    } finally {\n      setConfirmOpen(false);\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div\n        className=\"block-editor-block-styles__item\"\n        role=\"button\"\n        tabIndex={index}\n        aria-label=\"Fill\"\n        style={{ color: isActive ? \"var(--wp-admin-theme-color)\" : \"inherit\" }}\n      >\n        <div\n          className=\"block-editor-block-styles__item-preview\"\n          style={{\n            border: isActive\n              ? \"2px solid var(--wp-admin-theme-color)\"\n              : \"2px solid #e3e3e3\",\n            margin: 0,\n            display: \"flex\",\n            \"align-items\": \"center\",\n            \"justify-content\": \"center\",\n          }}\n        >\n          <Spinner />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={`block-editor-block-styles__item presto-preset-${preset.slug}`}\n      onClick={() => {\n        setPreset(preset);\n      }}\n      role=\"button\"\n      tabIndex={index}\n      aria-label=\"Fill\"\n      style={{ color: isActive ? \"var(--wp-admin-theme-color)\" : \"inherit\" }}\n    >\n      <div\n        className=\"block-editor-block-styles__item-preview\"\n        style={{\n          border: isActive\n            ? \"2px solid var(--wp-admin-theme-color)\"\n            : \"2px solid #e3e3e3\",\n          margin: 0,\n        }}\n      >\n        <div\n          style={{\n            textAlign: \"center\",\n            width: \"100%\",\n            color: isActive ? \"var(--wp-admin-theme-color)\" : \"inherit\",\n            opacity: isActive ? 1 : 0.75,\n          }}\n        >\n          {preset?.icon ? (\n            <Icon\n              icon={preset?.icon}\n              style={{\n                fontSize: \"30px\",\n                width: \"30px\",\n                height: \"30px\",\n              }}\n            />\n          ) : (\n            <h1 style={{ opacity: 0.75 }}>\n              {preset?.name?.charAt(0)?.toUpperCase() || \"Untitled\"}\n            </h1>\n          )}\n        </div>\n      </div>\n      <div\n        className=\"block-editor-block-styles__item-label\"\n        style={{ fontWeight: \"bold\", textTransform: \"capitalize\" }}\n      >\n        {preset?.name || \"Untitled\"}\n      </div>\n\n      {!preset?.is_locked && (\n        <div className=\"block-editor-block-styles__item-edit\">\n          <div\n            className=\"block-editor-block-styles__item-edit-icon\"\n            onClick={onEdit}\n          >\n            <Icon icon=\"edit\" />\n          </div>\n          <div\n            className=\"block-editor-block-styles__item-edit-icon\"\n            onClick={openConfirm}\n          >\n            <Icon icon=\"trash\" />\n          </div>\n        </div>\n      )}\n\n      {confirmOpen && (\n        <Modal\n          title={__(\"Trash Preset?\", \"presto-player\")}\n          onRequestClose={closeConfirm}\n          style={{ maxWidth: \"250px\" }}\n        >\n          <p>\n            <strong>{__(\"Warning!\", \"presto-player\")} </strong>\n            {__(\n              \"Any videos assigned to this preset will automatically use the default preset.\",\n              \"presto-player\"\n            )}\n          </p>\n\n          <ButtonGroup>\n            <Button\n              isDestructive\n              onClick={trashPreset}\n              style={{ margin: \"0 4px\" }}\n            >\n              {__(\"Trash\", \"presto-player\")}\n            </Button>\n            <Button\n              isTertiary\n              onClick={closeConfirm}\n              style={{ margin: \"0 4px\", boxShadow: \"none\" }}\n            >\n              {__(\"Cancel\", \"presto-player\")}\n            </Button>\n          </ButtonGroup>\n        </Modal>\n      )}\n    </div>\n  );\n}\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { withNotices, BaseControl, Spinner, Button } = wp.components;\nconst { useState, useEffect } = wp.element;\nconst { useSelect, dispatch } = wp.data;\n\nimport ProBadge from \"@/admin/blocks/shared/components/ProBadge\";\nimport EditPreset from \"./Edit\";\nimport Preset from \"./Preset\";\n\nfunction PlayerPresets({ attributes, setAttributes }) {\n  // modal\n  const [modal, setModal] = useState(false);\n  const openModal = (type) => setModal(type);\n  const closeModal = () => setModal(false);\n  const [presetData, setPresetData] = useState(null);\n  const [name, setName] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // preset data\n  const presets = useSelect((select) => {\n    return select(\"presto-player/player\").getPresets();\n  });\n\n  // preset actions\n  const addPreset = (preset) => {\n    dispatch(\"presto-player/player\").addPreset(preset);\n  };\n  const updatePreset = (preset) => {\n    dispatch(\"presto-player/player\").updatePreset(preset);\n  };\n  const removePreset = (preset) => {\n    dispatch(\"presto-player/player\").removePreset(preset);\n  };\n\n  useEffect(() => {\n    setLoading(!presets.length);\n  }, [presets]);\n\n  // set this preset id\n  const setPreset = (preset) => {\n    setAttributes({ preset: preset.id });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"presto-settings__loading\">\n        <Spinner />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {presets.length ? (\n        <p>\n          {__(\n            \"Select a video configuration preset, or add your own.\",\n            \"presto-player\"\n          )}\n        </p>\n      ) : (\n        \"\"\n      )}\n\n      <BaseControl>\n        <div className=\"block-editor-block-styles\">\n          {(presets || []).length\n            ? presets.map((preset, i) => {\n                return (\n                  <Preset\n                    setPreset={setPreset}\n                    index={i}\n                    isActive={attributes?.preset === preset.id}\n                    preset={preset}\n                    key={preset.id}\n                    onEdit={() => {\n                      setName(preset.name);\n                      setPresetData(preset);\n                      setModal(\"edit\");\n                    }}\n                    remove={removePreset}\n                  />\n                );\n              })\n            : __(\n                \"No style presets. You can create a new style by clicking 'Add New Style'.\",\n                \"presto-plugin\"\n              )}\n        </div>\n      </BaseControl>\n      <BaseControl>\n        <Button\n          isPrimary\n          data-cy=\"add-new-preset\"\n          onClick={() => {\n            if (!prestoPlayer?.isPremium) {\n              dispatch(\"presto-player/player\").setProModal(true);\n              return;\n            }\n            openModal(\"new\");\n          }}\n        >\n          {__(\"Add New Preset\", \"presto-player\")}\n        </Button>\n        {!prestoPlayer?.isPremium && <ProBadge />}\n      </BaseControl>\n      {modal == \"new\" && (\n        <EditPreset\n          closeModal={closeModal}\n          addPreset={addPreset}\n          type=\"new\"\n          onSave={setPreset}\n        />\n      )}\n      {modal == \"edit\" && (\n        <EditPreset\n          closeModal={closeModal}\n          addPreset={addPreset}\n          updatePreset={updatePreset}\n          type=\"edit\"\n          preset={presetData}\n          name={name}\n        />\n      )}\n    </>\n  );\n}\n\nexport default withNotices(PlayerPresets);\n","const { PanelBody } = wp.components;\nconst { __ } = wp.i18n;\nimport ProBadge from \"@/admin/blocks/shared/components/ProBadge\";\nimport VideoSettings from \"@/admin/blocks/shared/settings\";\nimport VideoBranding from \"@/admin/blocks/shared/branding\";\nimport VideoChapters from \"@/admin/blocks/shared/chapters\";\nimport VideoPresets from \"@/admin/blocks/shared/presets\";\n\nexport default function ({ attributes, setAttributes }) {\n  return (\n    <>\n      <PanelBody\n        title={\n          <>\n            {__(\"Chapters\", \"presto-player\")}{\" \"}\n            {!prestoPlayer?.isPremium && <ProBadge />}\n          </>\n        }\n        initialOpen={prestoPlayer?.isPremium}\n      >\n        <VideoChapters setAttributes={setAttributes} attributes={attributes} />\n      </PanelBody>\n\n      <PanelBody title={__(\"Video settings\", \"presto-player\")}>\n        <VideoSettings setAttributes={setAttributes} attributes={attributes} />\n      </PanelBody>\n\n      <PanelBody title={__(\"Video Preset\", \"presto-player\")}>\n        <VideoPresets setAttributes={setAttributes} attributes={attributes} />\n      </PanelBody>\n\n      <PanelBody\n        title={__(\"Global Player Branding\", \"presto-player\")}\n        initialOpen={false}\n      >\n        <VideoBranding setAttributes={setAttributes} attributes={attributes} />\n      </PanelBody>\n    </>\n  );\n}\n","// import apiFetch from \"@wordpress/api-fetch\";\nconst { apiFetch } = wp;\n\n// nonce and root\napiFetch.use(apiFetch.createNonceMiddleware(prestoPlayer.nonce));\napiFetch.use(\n  apiFetch.createRootURLMiddleware(\n    prestoPlayer.root + prestoPlayer.prestoVersionString\n  )\n);\n\nexport default apiFetch;\n","/**\n * WordPress dependencies\n */\nconst { createHigherOrderComponent } = wp.compose;\nconst { useEffect, useState } = wp.element;\nimport { usePrevious } from \"@/admin/blocks/util\";\nimport apiFetch from \"@/shared/services/fetch\";\n\n/**\n * Higher order component factory for injecting the editor colors as the\n * `colors` prop in the `withColors` HOC.\n *\n * @return {Function} The higher order component.\n */\nexport default () =>\n  createHigherOrderComponent(\n    (WrappedComponent) => (props) => {\n      const {\n        presets,\n        attributes,\n        setAttributes,\n        defaultPreset,\n        isSelected,\n        branding,\n      } = props;\n      const [presetData, setPresetData] = useState({});\n      const [count, setCount] = useState(1);\n      let { poster, chapters } = attributes;\n\n      useEffect(() => {\n        if (isSelected && attributes?.id) {\n          wp.data\n            .dispatch(\"core/edit-post\")\n            .openGeneralSidebar(\"edit-post/block\");\n        }\n      }, [isSelected]);\n\n      // don't allow selection if there is an override\n      useEffect(() => {\n        if (isSelected && attributes?.selectionOverrideClientId) {\n          wp.data\n            .dispatch(\"core/block-editor\")\n            .selectBlock(attributes?.selectionOverrideClientId);\n        }\n      }, [isSelected]);\n\n      // set preset data when presets are loaded\n      useEffect(() => {\n        if (presets && presets.length) {\n          const thisPreset = presets.find((preset) => {\n            return preset.id === attributes?.preset;\n          });\n          if (thisPreset) {\n            setPresetData(thisPreset);\n          } else {\n            setPresetData(defaultPreset);\n            setAttributes({ preset: defaultPreset?.id });\n          }\n        }\n      }, [presets, attributes?.preset]);\n\n      // re-render the player if presetdata, poster or chapters change\n      useEffect(() => {\n        onUpdate();\n      }, [poster, presetData, chapters, branding.logo]);\n\n      // increment update key\n      const onUpdate = () => {\n        setCount(count + 1);\n      };\n\n      // re-render only if times change\n      const prevChapters = usePrevious(chapters);\n      useEffect(() => {\n        let times = chapters?.map((item) => item.time);\n        let prevTimes = prevChapters?.map((item) => item.time);\n        if (_.difference(times, prevTimes).length) {\n          onUpdate();\n        }\n      }, [chapters]);\n\n      const createVideo = async ({\n        src,\n        external_id,\n        attachment_id,\n        type,\n        title,\n      }) => {\n        if (!src && !external_id && !attachment_id) {\n          return;\n        }\n        const { id } = await apiFetch({\n          method: \"POST\",\n          path: \"/presto-player/v1/videos\",\n          data: {\n            attachment_id,\n            post_id: wp.data.select(\"core/editor\").getCurrentPostId(),\n            external_id,\n            ...(title ? { title } : {}),\n            src,\n            type,\n          },\n        });\n        setAttributes({ id });\n      };\n\n      const lock = () => {\n        return wp.data.dispatch(\"core/editor\").lockPostSaving(\"presto-player\");\n      };\n\n      const unlock = () => {\n        return wp.data\n          .dispatch(\"core/editor\")\n          .unlockPostSaving(\"presto-player\");\n      };\n\n      function onRemoveSrc() {\n        let r = confirm(\"Remove this video?\");\n        if (r) {\n          setAttributes({\n            src: \"\",\n            id: undefined,\n            ...(attributes?.thumbnail ? { thumbnail: null } : {}),\n            ...(attributes?.preview ? { preview: null } : {}),\n            ...(attributes?.previewSrc ? { previewSrc: null } : {}),\n            ...(attributes?.previewThumbnail ? { previewThumbnail: null } : {}),\n          });\n        }\n      }\n\n      // make sure it's the default\n      if (!attributes?.preset) {\n        setAttributes({ preset: defaultPreset?.id });\n      }\n\n      return (\n        <WrappedComponent\n          {...props}\n          lockSave={lock}\n          unlockSave={unlock}\n          createVideo={createVideo}\n          onUpdate={onUpdate}\n          onRemoveSrc={onRemoveSrc}\n          presetData={presetData}\n          setPresetData={setPresetData}\n          renderKey={count}\n        />\n      );\n    },\n    \"withPlayerEdit\"\n  );\n","/**\n * WordPress dependencies\n */\n// import { __, sprintf } from '@wordpress/i18n';\nconst { __, sprintf } = wp.i18n;\nconst {\n  NavigableMenu,\n  MenuItem,\n  FormFileUpload,\n  MenuGroup,\n  ToolbarGroup,\n  ToolbarButton,\n  Dropdown,\n  SVG,\n  Rect,\n  Path,\n  Button,\n  TextControl,\n  SelectControl,\n} = wp.components;\nconst { MediaUpload, MediaUploadCheck } = wp.blockEditor;\nconst { useSelect } = wp.data;\nconst { useState } = wp.element;\n\nconst ALLOWED_TYPES = [\"text/vtt\"];\n\nconst DEFAULT_KIND = \"subtitles\";\n\n// const KIND_OPTIONS = [\n//   { label: __(\"Subtitles\"), value: \"subtitles\" },\n//   { label: __(\"Captions\"), value: \"captions\" },\n//   { label: __(\"Descriptions\"), value: \"descriptions\" },\n//   { label: __(\"Chapters\"), value: \"chapters\" },\n//   { label: __(\"Metadata\"), value: \"metadata\" },\n// ];\n\nconst captionIcon = (\n  <svg viewBox=\"0 0 29 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M17.5014 20.2854H28.6316V0.764648H0.110825V20.2854H11.241L14.3712 24.2854L17.5014 20.2854ZM14.3712 21.0401L16.5269 18.2854H26.6316V2.76465H2.11082V18.2854H12.2155L14.3712 21.0401Z\"\n    />\n    <path d=\"M10.4503 14.9446C9.56226 14.9446 8.76226 14.7606 8.05026 14.3926C7.33826 14.0166 6.77826 13.4966 6.37026 12.8326C5.97026 12.1606 5.77026 11.4006 5.77026 10.5526C5.77026 9.70464 5.97026 8.94864 6.37026 8.28464C6.77826 7.61264 7.33826 7.09264 8.05026 6.72464C8.76226 6.34864 9.56226 6.16064 10.4503 6.16064C11.2663 6.16064 11.9943 6.30464 12.6343 6.59264C13.2743 6.88064 13.8023 7.29664 14.2183 7.84064L12.4303 9.43664C11.9103 8.78064 11.2983 8.45264 10.5943 8.45264C10.0023 8.45264 9.52626 8.64464 9.16626 9.02864C8.80626 9.40464 8.62626 9.91264 8.62626 10.5526C8.62626 11.1926 8.80626 11.7046 9.16626 12.0886C9.52626 12.4646 10.0023 12.6526 10.5943 12.6526C11.2983 12.6526 11.9103 12.3246 12.4303 11.6686L14.2183 13.2646C13.8023 13.8086 13.2743 14.2246 12.6343 14.5126C11.9943 14.8006 11.2663 14.9446 10.4503 14.9446Z\" />\n    <path d=\"M19.2042 14.9446C18.3162 14.9446 17.5162 14.7606 16.8042 14.3926C16.0922 14.0166 15.5322 13.4966 15.1242 12.8326C14.7242 12.1606 14.5242 11.4006 14.5242 10.5526C14.5242 9.70464 14.7242 8.94864 15.1242 8.28464C15.5322 7.61264 16.0922 7.09264 16.8042 6.72464C17.5162 6.34864 18.3162 6.16064 19.2042 6.16064C20.0202 6.16064 20.7482 6.30464 21.3882 6.59264C22.0282 6.88064 22.5562 7.29664 22.9722 7.84064L21.1842 9.43664C20.6642 8.78064 20.0522 8.45264 19.3482 8.45264C18.7562 8.45264 18.2802 8.64464 17.9202 9.02864C17.5602 9.40464 17.3802 9.91264 17.3802 10.5526C17.3802 11.1926 17.5602 11.7046 17.9202 12.0886C18.2802 12.4646 18.7562 12.6526 19.3482 12.6526C20.0522 12.6526 20.6642 12.3246 21.1842 11.6686L22.9722 13.2646C22.5562 13.8086 22.0282 14.2246 21.3882 14.5126C20.7482 14.8006 20.0202 14.9446 19.2042 14.9446Z\" />\n  </svg>\n);\n\nfunction TrackList({ tracks, onEditPress }) {\n  let content;\n  if (tracks.length === 0) {\n    content = (\n      <p className=\"block-library-video-tracks-editor__tracks-informative-message\">\n        {__(\n          \"Captions are .vtt files that help make your content more accesible to a wider range of users.\",\n          \"presto-player\"\n        )}\n      </p>\n    );\n  } else {\n    content = tracks.map((track, index) => {\n      return (\n        <div\n          key={index}\n          className=\"block-library-video-tracks-editor__track-list-track\"\n        >\n          <span>{track.label} </span>\n          <Button\n            isTertiary\n            onClick={() => onEditPress(index)}\n            aria-label={sprintf(\n              /* translators: %s: Label of the video text track e.g: \"French subtitles\" */\n              __(\"Edit %s\", \"presto-player\"),\n              track.label\n            )}\n          >\n            {__(\"Edit\", \"presto-player\")}\n          </Button>\n        </div>\n      );\n    });\n  }\n  return (\n    <MenuGroup\n      label={__(\"Captions\", \"presto-player\")}\n      className=\"block-library-video-tracks-editor__track-list\"\n    >\n      {content}\n    </MenuGroup>\n  );\n}\n\nfunction SingleTrackEditor({ track, onChange, onClose, onRemove }) {\n  const { src = \"\", label = \"\", srcLang = \"\", kind = DEFAULT_KIND } = track;\n  const fileName = src.startsWith(\"blob:\")\n    ? \"\"\n    : src.substring(src.lastIndexOf(\"/\") + 1);\n  return (\n    <NavigableMenu>\n      <div className=\"block-library-video-tracks-editor__single-track-editor\">\n        <span className=\"block-library-video-tracks-editor__single-track-editor-edit-track-label\">\n          {__(\"Edit caption track\", \"presto-player\")}\n        </span>\n        <span>\n          {__(\"File\", \"presto-player\")}: <b>{fileName}</b>\n        </span>\n        <div className=\"block-library-video-tracks-editor__single-track-editor-label-language\">\n          <TextControl\n            /* eslint-disable jsx-a11y/no-autofocus */\n            autoFocus\n            /* eslint-enable jsx-a11y/no-autofocus */\n            onChange={(newLabel) =>\n              onChange({\n                ...track,\n                label: newLabel,\n              })\n            }\n            label={__(\"Label\", \"presto-player\")}\n            value={label}\n            help={__(\"Title of track\", \"presto-player\")}\n          />\n          <TextControl\n            onChange={(newSrcLang) =>\n              onChange({\n                ...track,\n                srcLang: newSrcLang,\n              })\n            }\n            label={__(\"Source language\", \"presto-player\")}\n            value={srcLang}\n            help={__(\"Language tag (en, fr, etc.)\", \"presto-player\")}\n          />\n        </div>\n        {/* <SelectControl\n          className=\"block-library-video-tracks-editor__single-track-editor-kind-select\"\n          options={KIND_OPTIONS}\n          value={kind}\n          label={__(\"Kind\")}\n          onChange={(newKind) => {\n            if (newKind === DEFAULT_KIND) {\n              newKind = undefined;\n            }\n            onChange({\n              ...track,\n              kind: newKind,\n            });\n          }}\n        /> */}\n        <div className=\"block-library-video-tracks-editor__single-track-editor-buttons-container\">\n          <Button\n            isSecondary\n            onClick={() => {\n              const changes = {};\n              let hasChanges = false;\n              if (label === \"\") {\n                changes.label = __(\"English\", \"presto-player\");\n                hasChanges = true;\n              }\n              if (srcLang === \"\") {\n                changes.srcLang = \"en\";\n                hasChanges = true;\n              }\n              if (hasChanges) {\n                onChange({\n                  ...track,\n                  ...changes,\n                });\n              }\n              onClose();\n            }}\n          >\n            {__(\"Close\", \"presto-player\")}\n          </Button>\n          <Button isDestructive isLink onClick={onRemove}>\n            {__(\"Remove track\", \"presto-player\")}\n          </Button>\n        </div>\n      </div>\n    </NavigableMenu>\n  );\n}\n\nexport default function TracksEditor({ tracks = [], onChange }) {\n  const mediaUpload = useSelect((select) => {\n    return select(\"core/block-editor\").getSettings().mediaUpload;\n  }, []);\n  const [trackBeingEdited, setTrackBeingEdited] = useState(null);\n\n  if (!mediaUpload) {\n    return null;\n  }\n  return (\n    <Dropdown\n      contentClassName=\"block-library-video-tracks-editor\"\n      renderToggle={({ isOpen, onToggle }) => (\n        <ToolbarGroup>\n          <ToolbarButton\n            label={__(\"Captions\", \"presto-player\")}\n            showTooltip\n            aria-expanded={isOpen}\n            aria-haspopup=\"true\"\n            onClick={onToggle}\n            icon={captionIcon}\n          />\n        </ToolbarGroup>\n      )}\n      renderContent={({}) => {\n        if (trackBeingEdited !== null) {\n          return (\n            <SingleTrackEditor\n              track={tracks[trackBeingEdited]}\n              onChange={(newTrack) => {\n                const newTracks = [...tracks];\n                newTracks[trackBeingEdited] = newTrack;\n                onChange(newTracks);\n              }}\n              onClose={() => setTrackBeingEdited(null)}\n              onRemove={() => {\n                onChange(\n                  tracks.filter((_track, index) => index !== trackBeingEdited)\n                );\n                setTrackBeingEdited(null);\n              }}\n            />\n          );\n        }\n        return (\n          <>\n            <NavigableMenu>\n              <TrackList tracks={tracks} onEditPress={setTrackBeingEdited} />\n              <MenuGroup\n                className=\"block-library-video-tracks-editor__add-tracks-container\"\n                label={__(\"Add caption languages\", \"presto-player\")}\n              >\n                <MediaUpload\n                  onSelect={({ url }) => {\n                    const trackIndex = tracks.length;\n                    onChange([...tracks, { src: url }]);\n                    setTrackBeingEdited(trackIndex);\n                  }}\n                  allowedTypes={ALLOWED_TYPES}\n                  render={({ open }) => (\n                    <MenuItem icon={\"media\"} onClick={open}>\n                      {__(\"Open Media Library\", \"presto-player\")}\n                    </MenuItem>\n                  )}\n                />\n                <MediaUploadCheck>\n                  <FormFileUpload\n                    onChange={(event) => {\n                      const files = event.target.files;\n                      const trackIndex = tracks.length;\n                      mediaUpload({\n                        allowedTypes: ALLOWED_TYPES,\n                        filesList: files,\n                        onFileChange: ([{ url }]) => {\n                          const newTracks = [...tracks];\n                          if (!newTracks[trackIndex]) {\n                            newTracks[trackIndex] = {};\n                          }\n                          newTracks[trackIndex] = {\n                            ...tracks[trackIndex],\n                            src: url,\n                          };\n                          onChange(newTracks);\n                          setTrackBeingEdited(trackIndex);\n                        },\n                      });\n                    }}\n                    accept=\".vtt,text/vtt\"\n                    render={({ openFileDialog }) => {\n                      return (\n                        <MenuItem\n                          icon={\"upload\"}\n                          onClick={() => {\n                            openFileDialog();\n                          }}\n                        >\n                          {__(\"Upload\", \"presto-player\")}\n                        </MenuItem>\n                      );\n                    }}\n                  />\n                </MediaUploadCheck>\n              </MenuGroup>\n            </NavigableMenu>\n          </>\n        );\n      }}\n    />\n  );\n}\n","const {\n  Button,\n  Placeholder,\n  TextControl,\n  Flex,\n  FlexItem,\n  FlexBlock,\n} = wp.components;\nconst { useState } = wp.element;\nconst { __ } = wp.i18n;\n\nexport default function ({\n  attributes,\n  setAttributes,\n  icon,\n  onSelectURL,\n  label,\n  instructions,\n  placeholder,\n}) {\n  const { src } = attributes;\n  const [state, setState] = useState({ src });\n  return (\n    <Placeholder\n      icon={icon}\n      label={label || __(\"Presto Embedded Video\", \"presto-player\")}\n      instructions={instructions || __(\"Enter video URL\", \"presto-player\")}\n    >\n      <form\n        onSubmit={(e) => {\n          e.preventDefault();\n          onSelectURL(state.url);\n        }}\n      >\n        <Flex style={{ width: \"100%\", maxWidth: \"400px\" }}>\n          <FlexBlock>\n            <TextControl\n              type=\"url\"\n              className={\"presto-link-placeholder-input\"}\n              placeholder={placeholder || __(\"Youtube URL\", \"presto-player\")}\n              value={state.url}\n              onChange={(url) => setState({ url })}\n            />\n          </FlexBlock>\n          <FlexItem>\n            <Button isPrimary style={{ marginBottom: \"8px\" }} type=\"submit\">\n              {__(\"Add Video\", \"presto-player\")}\n            </Button>\n          </FlexItem>\n        </Flex>\n      </form>\n    </Placeholder>\n  );\n}\n","export const dashToPascalCase = (str: string) =>\n  str\n    .toLowerCase()\n    .split('-')\n    .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))\n    .join('');\nexport const camelToDashCase = (str: string) =>\n  str.replace(/([A-Z])/g, (m: string) => `-${m[0].toLowerCase()}`);\n","import { camelToDashCase } from './case';\n\nexport const attachProps = (node: HTMLElement, newProps: any, oldProps: any = {}) => {\n  // some test frameworks don't render DOM elements, so we test here to make sure we are dealing with DOM first\n  if (node instanceof Element) {\n    // add any classes in className to the class list\n    const className = getClassName(node.classList, newProps, oldProps);\n    if (className !== '') {\n      node.className = className;\n    }\n\n    Object.keys(newProps).forEach((name) => {\n      if (\n        name === 'children' ||\n        name === 'style' ||\n        name === 'ref' ||\n        name === 'class' ||\n        name === 'className' ||\n        name === 'forwardedRef'\n      ) {\n        return;\n      }\n      if (name.indexOf('on') === 0 && name[2] === name[2].toUpperCase()) {\n        const eventName = name.substring(2);\n        const eventNameLc = eventName[0].toLowerCase() + eventName.substring(1);\n\n        if (typeof document !== 'undefined' && !isCoveredByReact(eventNameLc, document)) {\n          syncEvent(node, eventNameLc, newProps[name]);\n        }\n      } else {\n        (node as any)[name] = newProps[name];\n        const propType = typeof newProps[name];\n        if (propType === 'string') {\n          node.setAttribute(camelToDashCase(name), newProps[name]);\n        } else {\n          (node as any)[name] = newProps[name];\n        }\n      }\n    });\n  }\n};\n\nexport const getClassName = (classList: DOMTokenList, newProps: any, oldProps: any) => {\n  const newClassProp: string = newProps.className || newProps.class;\n  const oldClassProp: string = oldProps.className || oldProps.class;\n  // map the classes to Maps for performance\n  const currentClasses = arrayToMap(classList);\n  const incomingPropClasses = arrayToMap(newClassProp ? newClassProp.split(' ') : []);\n  const oldPropClasses = arrayToMap(oldClassProp ? oldClassProp.split(' ') : []);\n  const finalClassNames: string[] = [];\n  // loop through each of the current classes on the component\n  // to see if it should be a part of the classNames added\n  currentClasses.forEach((currentClass) => {\n    if (incomingPropClasses.has(currentClass)) {\n      // add it as its already included in classnames coming in from newProps\n      finalClassNames.push(currentClass);\n      incomingPropClasses.delete(currentClass);\n    } else if (!oldPropClasses.has(currentClass)) {\n      // add it as it has NOT been removed by user\n      finalClassNames.push(currentClass);\n    }\n  });\n  incomingPropClasses.forEach((s) => finalClassNames.push(s));\n  return finalClassNames.join(' ');\n};\n\n/**\n * Checks if an event is supported in the current execution environment.\n * @license Modernizr 3.0.0pre (Custom Build) | MIT\n */\nexport const isCoveredByReact = (eventNameSuffix: string, doc: Document) => {\n  const eventName = 'on' + eventNameSuffix;\n  let isSupported = eventName in doc;\n\n  if (!isSupported) {\n    const element = doc.createElement('div');\n    element.setAttribute(eventName, 'return;');\n    isSupported = typeof (element as any)[eventName] === 'function';\n  }\n\n  return isSupported;\n};\n\nexport const syncEvent = (\n  node: Element & { __events?: { [key: string]: ((e: Event) => any) | undefined } },\n  eventName: string,\n  newEventHandler?: (e: Event) => any,\n) => {\n  const eventStore = node.__events || (node.__events = {});\n  const oldEventHandler = eventStore[eventName];\n\n  // Remove old listener so they don't double up.\n  if (oldEventHandler) {\n    node.removeEventListener(eventName, oldEventHandler);\n  }\n\n  // Bind new listener.\n  node.addEventListener(\n    eventName,\n    (eventStore[eventName] = function handler(e: Event) {\n      if (newEventHandler) {\n        newEventHandler.call(this, e);\n      }\n    }),\n  );\n};\n\nconst arrayToMap = (arr: string[] | DOMTokenList) => {\n  const map = new Map<string, string>();\n  (arr as string[]).forEach((s: string) => map.set(s, s));\n  return map;\n};\n","import React from 'react';\n\nimport type { StyleReactProps } from '../interfaces';\n\ntype Mutable<T> = { -readonly [P in keyof T]-?: T[P] }; // Remove readonly and ?\n\nexport type StencilReactExternalProps<PropType, ElementType> = PropType &\n  Omit<React.HTMLAttributes<ElementType>, 'style'> &\n  StyleReactProps;\n\n// The comma in the type is to trick typescript because it things a single generic in a tsx file is jsx\nexport const mergeRefs = <ElementType,>(...refs: React.Ref<ElementType>[]) => (\n  value: ElementType,\n) =>\n  refs.forEach((ref) => {\n    if (typeof ref === 'function') {\n      ref(value);\n    } else if (ref != null) {\n      // This is typed as readonly so we need to allow for override\n      (ref as Mutable<React.RefObject<ElementType>>).current = value;\n    }\n  });\n\nexport const createForwardRef = <PropType, ElementType>(\n  ReactComponent: any,\n  displayName: string,\n) => {\n  const forwardRef = (\n    props: StencilReactExternalProps<PropType, ElementType>,\n    ref: React.Ref<ElementType>,\n  ) => {\n    return <ReactComponent {...props} forwardedRef={ref} />;\n  };\n  forwardRef.displayName = displayName;\n\n  return React.forwardRef(forwardRef);\n};\n\nexport * from './attachProps';\nexport * from './case';\n","import React from 'react';\n\nimport {\n  attachProps,\n  createForwardRef,\n  dashToPascalCase,\n  isCoveredByReact,\n  mergeRefs,\n} from './utils';\n\nexport interface HTMLStencilElement extends HTMLElement {\n  componentOnReady(): Promise<this>;\n}\n\ninterface StencilReactInternalProps<ElementType> extends React.HTMLAttributes<ElementType> {\n  forwardedRef: React.RefObject<ElementType>;\n  ref?: React.Ref<any>;\n}\n\nexport const createReactComponent = <\n  PropType,\n  ElementType extends HTMLStencilElement,\n  ContextStateType = {},\n  ExpandedPropsTypes = {}\n>(\n  tagName: string,\n  ReactComponentContext?: React.Context<ContextStateType>,\n  manipulatePropsFunction?: (\n    originalProps: StencilReactInternalProps<ElementType>,\n    propsToPass: any,\n  ) => ExpandedPropsTypes,\n) => {\n  const displayName = dashToPascalCase(tagName);\n\n  const ReactComponent = class extends React.Component<StencilReactInternalProps<ElementType>> {\n    componentEl!: ElementType;\n\n    setComponentElRef = (element: ElementType) => {\n      this.componentEl = element;\n    };\n\n    constructor(props: StencilReactInternalProps<ElementType>) {\n      super(props);\n    }\n\n    componentDidMount() {\n      this.componentDidUpdate(this.props);\n    }\n\n    componentDidUpdate(prevProps: StencilReactInternalProps<ElementType>) {\n      attachProps(this.componentEl, this.props, prevProps);\n    }\n\n    render() {\n      const { children, forwardedRef, style, className, ref, ...cProps } = this.props;\n\n      let propsToPass = Object.keys(cProps).reduce((acc, name) => {\n        if (name.indexOf('on') === 0 && name[2] === name[2].toUpperCase()) {\n          const eventName = name.substring(2).toLowerCase();\n          if (typeof document !== 'undefined' && isCoveredByReact(eventName, document)) {\n            (acc as any)[name] = (cProps as any)[name];\n          }\n        } else {\n          (acc as any)[name] = (cProps as any)[name];\n        }\n        return acc;\n      }, {});\n\n      if (manipulatePropsFunction) {\n        propsToPass = manipulatePropsFunction(this.props, propsToPass);\n      }\n\n      let newProps: Omit<StencilReactInternalProps<ElementType>, 'forwardedRef'> = {\n        ...propsToPass,\n        ref: mergeRefs(forwardedRef, this.setComponentElRef),\n        style,\n      };\n\n      return React.createElement(tagName, newProps, children);\n    }\n\n    static get displayName() {\n      return displayName;\n    }\n  };\n\n  // If context was passed to createReactComponent then conditionally add it to the Component Class\n  if (ReactComponentContext) {\n    ReactComponent.contextType = ReactComponentContext;\n  }\n\n  return createForwardRef<PropType, ElementType>(ReactComponent, displayName);\n};\n","import { OverlayEventDetail } from './interfaces';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { attachProps } from './utils';\n\ninterface OverlayElement extends HTMLElement {\n  present: () => Promise<void>;\n  dismiss: (data?: any, role?: string | undefined) => Promise<boolean>;\n}\n\nexport interface ReactOverlayProps {\n  children?: React.ReactNode;\n  isOpen: boolean;\n  onDidDismiss?: (event: CustomEvent<OverlayEventDetail>) => void;\n  onDidPresent?: (event: CustomEvent<OverlayEventDetail>) => void;\n  onWillDismiss?: (event: CustomEvent<OverlayEventDetail>) => void;\n  onWillPresent?: (event: CustomEvent<OverlayEventDetail>) => void;\n}\n\nexport const createOverlayComponent = <\n  OverlayComponent extends object,\n  OverlayType extends OverlayElement\n>(\n  displayName: string,\n  controller: { create: (options: any) => Promise<OverlayType> },\n) => {\n  const didDismissEventName = `on${displayName}DidDismiss`;\n  const didPresentEventName = `on${displayName}DidPresent`;\n  const willDismissEventName = `on${displayName}WillDismiss`;\n  const willPresentEventName = `on${displayName}WillPresent`;\n\n  type Props = OverlayComponent &\n    ReactOverlayProps & {\n      forwardedRef?: React.RefObject<OverlayType>;\n    };\n\n  class Overlay extends React.Component<Props> {\n    overlay?: OverlayType;\n    el: HTMLDivElement;\n\n    constructor(props: Props) {\n      super(props);\n      this.el = document.createElement('div');\n      this.handleDismiss = this.handleDismiss.bind(this);\n    }\n\n    static get displayName() {\n      return displayName;\n    }\n\n    componentDidMount() {\n      if (this.props.isOpen) {\n        this.present();\n      }\n    }\n\n    componentWillUnmount() {\n      if (this.overlay) {\n        this.overlay.dismiss();\n      }\n    }\n\n    handleDismiss(event: CustomEvent<OverlayEventDetail<any>>) {\n      if (this.props.onDidDismiss) {\n        this.props.onDidDismiss(event);\n      }\n      if (this.props.forwardedRef) {\n        (this.props.forwardedRef as any).current = undefined;\n      }\n    }\n\n    async componentDidUpdate(prevProps: Props) {\n      if (this.overlay) {\n        attachProps(this.overlay, this.props, prevProps);\n      }\n\n      if (prevProps.isOpen !== this.props.isOpen && this.props.isOpen === true) {\n        this.present(prevProps);\n      }\n      if (this.overlay && prevProps.isOpen !== this.props.isOpen && this.props.isOpen === false) {\n        await this.overlay.dismiss();\n      }\n    }\n\n    async present(prevProps?: Props) {\n      const {\n        children,\n        isOpen,\n        onDidDismiss,\n        onDidPresent,\n        onWillDismiss,\n        onWillPresent,\n        ...cProps\n      } = this.props;\n      const elementProps = {\n        ...cProps,\n        ref: this.props.forwardedRef,\n        [didDismissEventName]: this.handleDismiss,\n        [didPresentEventName]: (e: CustomEvent) =>\n          this.props.onDidPresent && this.props.onDidPresent(e),\n        [willDismissEventName]: (e: CustomEvent) =>\n          this.props.onWillDismiss && this.props.onWillDismiss(e),\n        [willPresentEventName]: (e: CustomEvent) =>\n          this.props.onWillPresent && this.props.onWillPresent(e),\n      };\n\n      this.overlay = await controller.create({\n        ...elementProps,\n        component: this.el,\n        componentProps: {},\n      });\n\n      if (this.props.forwardedRef) {\n        (this.props.forwardedRef as any).current = this.overlay;\n      }\n\n      attachProps(this.overlay, elementProps, prevProps);\n\n      await this.overlay.present();\n    }\n\n    render() {\n      return ReactDOM.createPortal(this.props.isOpen ? this.props.children : null, this.el);\n    }\n  }\n\n  return React.forwardRef<OverlayType, Props>((props, ref) => {\n    return <Overlay {...props} forwardedRef={ref} />;\n  });\n};\n","/* eslint-disable */\n/* tslint:disable */\n/* auto-generated react proxies */\nimport { createReactComponent } from './react-component-lib';\n\nimport type { JSX } from 'component-library';\n\n\n\nexport const PrestoActionBar = /*@__PURE__*/createReactComponent<JSX.PrestoActionBar, HTMLPrestoActionBarElement>('presto-action-bar');\nexport const PrestoActionBarUi = /*@__PURE__*/createReactComponent<JSX.PrestoActionBarUi, HTMLPrestoActionBarUiElement>('presto-action-bar-ui');\nexport const PrestoBunny = /*@__PURE__*/createReactComponent<JSX.PrestoBunny, HTMLPrestoBunnyElement>('presto-bunny');\nexport const PrestoEmailOverlay = /*@__PURE__*/createReactComponent<JSX.PrestoEmailOverlay, HTMLPrestoEmailOverlayElement>('presto-email-overlay');\nexport const PrestoEmailOverlayUi = /*@__PURE__*/createReactComponent<JSX.PrestoEmailOverlayUi, HTMLPrestoEmailOverlayUiElement>('presto-email-overlay-ui');\nexport const PrestoMutedOverlay = /*@__PURE__*/createReactComponent<JSX.PrestoMutedOverlay, HTMLPrestoMutedOverlayElement>('presto-muted-overlay');\nexport const PrestoPlayer = /*@__PURE__*/createReactComponent<JSX.PrestoPlayer, HTMLPrestoPlayerElement>('presto-player');\nexport const PrestoPlayerButton = /*@__PURE__*/createReactComponent<JSX.PrestoPlayerButton, HTMLPrestoPlayerButtonElement>('presto-player-button');\nexport const PrestoPlayerSkeleton = /*@__PURE__*/createReactComponent<JSX.PrestoPlayerSkeleton, HTMLPrestoPlayerSkeletonElement>('presto-player-skeleton');\nexport const PrestoPlayerSpinner = /*@__PURE__*/createReactComponent<JSX.PrestoPlayerSpinner, HTMLPrestoPlayerSpinnerElement>('presto-player-spinner');\nexport const PrestoVideo = /*@__PURE__*/createReactComponent<JSX.PrestoVideo, HTMLPrestoVideoElement>('presto-video');\nexport const PrestoVimeo = /*@__PURE__*/createReactComponent<JSX.PrestoVimeo, HTMLPrestoVimeoElement>('presto-vimeo');\nexport const PrestoYoutube = /*@__PURE__*/createReactComponent<JSX.PrestoYoutube, HTMLPrestoYoutubeElement>('presto-youtube');\nexport const PrestoYoutubeSubscribeButton = /*@__PURE__*/createReactComponent<JSX.PrestoYoutubeSubscribeButton, HTMLPrestoYoutubeSubscribeButtonElement>('presto-youtube-subscribe-button');\n","var map = {\n\t\"./bunny/index.js\": 50,\n\t\"./hosted/index.js\": 52,\n\t\"./reusable-display/index.js\": 54,\n\t\"./reusable-edit/index.js\": 48,\n\t\"./vimeo/index.js\": 55,\n\t\"./youtube/index.js\": 56\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 40;","// In your application's entrypoint\nconst { __ } = wp.i18n;\nconst { InnerBlocks, useBlockProps } = wp.blockEditor;\nconst { useSelect, dispatch } = wp.data;\nconst { Button, Placeholder } = wp.components;\nconst { getPlugins, unregisterPlugin } = wp.plugins;\nconst { useEffect } = wp.element;\n\n/**\n * Block Name\n */\nexport const name = \"presto-player/reusable-edit\";\n\n/**\n * Block Options\n */\nexport const options = {\n  title: \"Reusable Block Container\",\n\n  category: \"presto\",\n\n  supports: {\n    inserter: false,\n    reusable: false,\n    html: false,\n  },\n\n  icon: (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className=\"presto-block-icon\"\n    >\n      <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n      <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\"></line>\n      <path d=\"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z\"></path>\n    </svg>\n  ),\n\n  edit: (props) => {\n    const blockProps = useBlockProps();\n    const { clientId, isSelected } = props;\n    const innerBlocks = useSelect(\n      (select) => select(\"core/block-editor\").getBlock(clientId).innerBlocks\n    );\n\n    useEffect(() => {\n      if (isSelected) {\n        wp.data\n          .dispatch(\"core/edit-post\")\n          .openGeneralSidebar(\"edit-post/block\");\n      }\n    }, [isSelected]);\n\n    // make sure we don't check template validity because is's buggy as fuck\n    dispatch(\"core/block-editor\").setTemplateValidity(true);\n\n    // don't add reusable videos to a reusable video\n    useEffect(() => {\n      unregisterPlugin(\"presto-player\");\n    }, []);\n\n    const insertBlockType = (type) => {\n      const block = wp.blocks.createBlock(`presto-player/${type}`);\n      return dispatch(\"core/block-editor\").insertBlock(block, 0, clientId);\n    };\n\n    const appenderToUse = () => {\n      if (innerBlocks.length === 0) {\n        return <InnerBlocks.ButtonBlockAppender />;\n      } else {\n        return false;\n      }\n    };\n\n    if (!innerBlocks?.length) {\n      return (\n        <div>\n          <div {...blockProps}>\n            <Placeholder\n              icon={\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"24\"\n                  height=\"24\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  className=\"presto-block-icon\"\n                >\n                  <polygon points=\"23 7 16 12 23 17 23 7\"></polygon>\n                  <rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\n                </svg>\n              }\n              instructions={__(\n                \"Choose a video type to get started.\",\n                \"presto-player\"\n              )}\n              label={__(\"Choose a Video Type\", \"presto-player\")}\n            >\n              <Button\n                isPrimary\n                onClick={() => {\n                  insertBlockType(\"self-hosted\");\n                }}\n              >\n                {__(\"Video\", \"presto-player\")}\n              </Button>\n              <Button\n                isPrimary\n                onClick={() => {\n                  insertBlockType(\"youtube\");\n                }}\n              >\n                {__(\"Youtube\", \"presto-player\")}\n              </Button>\n              <Button\n                isPrimary\n                onClick={() => {\n                  insertBlockType(\"vimeo\");\n                }}\n              >\n                {__(\"Vimeo\", \"presto-player\")}\n              </Button>\n              {prestoPlayer?.isPremium ? (\n                <Button\n                  isPrimary\n                  onClick={() => {\n                    insertBlockType(\"bunny\");\n                  }}\n                >\n                  {__(\"Bunny.net\", \"presto-player\")}\n                </Button>\n              ) : (\n                \"\"\n              )}\n            </Placeholder>\n            <InnerBlocks templateLock={false} renderAppender={() => false} />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <div {...blockProps}>\n          <InnerBlocks\n            templateLock={false}\n            renderAppender={() => appenderToUse()}\n          />\n        </div>\n      </div>\n    );\n  },\n\n  save: () => {\n    const blockProps = useBlockProps.save();\n\n    return (\n      <div {...blockProps}>\n        <InnerBlocks.Content />\n      </div>\n    );\n  },\n};\n","var map = {\n\t\"./reusable-videos/index.js\": 53\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 49;","/**\n * Upload files in chunks\n * Based on: https://github.com/deliciousbrains/wp-dbi-file-uploader\n */\nexport default function ({ file, path, onProgress, onComplete, onError }) {\n  let reader = {};\n  let chunk = 0;\n  let cancelled = false;\n\n  // get max upload size, max out at 16mb chunks\n  const max_request_size = Math.min(\n    prestoPlayerAdmin.wp_max_upload_size - 1000000,\n    15900000\n  );\n  let slice_size = Math.max(max_request_size, 1900000); // ~2MB fallback as minimum\n  slice_size = Math.min(slice_size, 104857600); // make the max size 100MB\n\n  // export percent done\n  let percent_done;\n\n  // chunk upload\n  const chunkUpload = function () {\n    chunk = 0;\n\n    reader = new FileReader();\n    upload_file(0);\n    return this;\n  };\n\n  // upload file\n  const upload_file = async (start) => {\n    const next_slice = start + slice_size + 1;\n    const blob = file.slice(start, next_slice);\n    const chunks = Math.ceil(file.size / (slice_size + 1));\n    chunk++;\n    onProgress((chunk / chunks) * 100);\n\n    const body = new FormData();\n    body.append(\"file\", blob);\n    body.append(\"name\", file.name);\n    body.append(\"chunk\", chunk);\n    body.append(\"chunks\", chunks);\n\n    try {\n      const file_url = await wp.apiFetch({\n        path,\n        method: \"POST\",\n        body,\n      });\n\n      if (cancelled) {\n        console.log(\"cancelled\");\n        return;\n      }\n\n      if (next_slice < file.size) {\n        onProgress(percent_done);\n        upload_file(next_slice);\n      } else {\n        onComplete(file_url);\n      }\n    } catch (e) {\n      onError(e);\n      console.error(e);\n    }\n  };\n\n  chunkUpload();\n\n  return {\n    cancel: () => {\n      cancelled = true;\n    },\n  };\n}\n","export default ({ item, onClick, className }) => {\n  function bytesToSize(bytes) {\n    var sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n    if (bytes == 0) return \"0 Byte\";\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n    return Math.round(bytes / Math.pow(1024, i), 2) + \" \" + sizes[i];\n  }\n\n  function formatDate(date) {\n    return new Date(date).toLocaleString();\n  }\n\n  const isEncoding = () => {\n    return !!item?.encodeProgress && item.encodeProgress !== 100;\n  };\n\n  return (\n    <div\n      className={`presto-player__media-list-item ${className}`}\n      onClick={onClick}\n    >\n      <div className=\"presto-player__media-list-item-icon\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinecap=\"round\"\n        >\n          <polygon points=\"23 7 16 12 23 17 23 7\"></polygon>\n          <rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\n        </svg>\n      </div>\n      <div className=\"presto-player__media-list-item-title\">{item?.title}</div>\n      {isEncoding() && (\n        <div className=\"presto-player__media-list-item-size\">Encoding...</div>\n      )}\n      {!isEncoding() && (\n        <div className=\"presto-player__media-list-item-size\">\n          {bytesToSize(item?.size)}\n        </div>\n      )}\n      {!isEncoding() && (\n        <div className=\"presto-player__media-list-item-modified\">\n          {formatDate(item.updated_at)}\n        </div>\n      )}\n    </div>\n  );\n};\n","export default ({ item, onClick, className }) => {\n  function bytesToSize(bytes) {\n    var sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n    if (bytes == 0) return \"0 Byte\";\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n    return Math.round(bytes / Math.pow(1024, i), 2) + \" \" + sizes[i];\n  }\n\n  function formatDate(date) {\n    return new Date(date).toLocaleString();\n  }\n\n  return (\n    <div\n      className={`presto-player__media-list-item ${className}`}\n      onClick={onClick}\n    >\n      <div className=\"presto-player__media-list-item-icon\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinecap=\"round\"\n        >\n          <polygon points=\"23 7 16 12 23 17 23 7\"></polygon>\n          <rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\n        </svg>\n      </div>\n      <div className=\"presto-player__media-list-item-title\">{item?.title}</div>\n      <div className=\"presto-player__media-list-item-size\">\n        {bytesToSize(item?.size)}\n      </div>\n      <div className=\"presto-player__media-list-item-modified\">\n        {formatDate(item.updated_at)}\n      </div>\n    </div>\n  );\n};\n","/** @jsx jsx */\n/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst {\n  Modal,\n  Spinner,\n  Button,\n  BaseControl,\n  Flex,\n  FlexBlock,\n  Notice,\n  Card,\n  CardBody,\n  Disabled,\n  DropZone,\n  FormFileUpload,\n  DropZoneProvider,\n} = wp.components;\nconst { useEffect, useState, useRef } = wp.element;\nimport MediaItem from \"./MediaItem\";\nimport MediaFolder from \"./MediaFolder\";\n\nimport { css, jsx } from \"@emotion/core\";\n\nexport default ({\n  onClose,\n  title,\n  header,\n  onLoad,\n  items,\n  folders,\n  fetching,\n  progressMessage,\n  onSelect,\n  error,\n  onDelete,\n  onUpload,\n  progress,\n}) => {\n  const [selected, setSelected] = useState({});\n  const [deleteConfirm, setDeleteConfirm] = useState(false);\n  const buttonRef = useRef();\n\n  useEffect(() => {\n    onLoad && onLoad();\n  }, []);\n\n  const bytesToSize = (bytes) => {\n    var sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n    if (bytes == 0) return \"0 Byte\";\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n    return Math.round(bytes / Math.pow(1024, i), 2) + \" \" + sizes[i];\n  };\n\n  const toDate = (d) => {\n    d = new Date(d);\n    var hours = d.getHours();\n    var minutes = d.getMinutes();\n    var ampm = hours >= 12 ? \"pm\" : \"am\";\n    hours = hours % 12;\n    hours = hours ? hours : 12;\n    minutes = minutes < 10 ? \"0\" + minutes : minutes;\n\n    return (\n      d.getDate() +\n      \"-\" +\n      (d.getMonth() + 1) +\n      \"-\" +\n      d.getFullYear() +\n      \" at \" +\n      hours +\n      \":\" +\n      minutes +\n      ampm\n    );\n  };\n\n  const deleteSelected = () => {\n    onDelete(selected);\n    setDeleteConfirm(false);\n  };\n\n  const isSelected = () => {\n    return Object.keys(selected || {}).length;\n  };\n\n  const sidebarContent = () => {\n    if (!isSelected()) {\n      return <></>;\n    }\n    return (\n      <div className=\"presto-player__media-modal-sidebar-content\">\n        <BaseControl>\n          <Disabled key={selected.id}>\n            {selected?.thumbnail ? (\n              <img src={selected?.thumbnail} style={{ maxWidth: \"100%\" }} />\n            ) : (\n              <video preload=\"metadata\">\n                <source src={selected.previewUrl} />\n              </video>\n            )}\n          </Disabled>\n        </BaseControl>\n        <BaseControl>\n          <BaseControl.VisualLabel>\n            {__(\"Name\", \"presto-player\")}\n          </BaseControl.VisualLabel>\n          <h3 style={{ marginTop: \"5px\" }}>{selected.title}</h3>\n        </BaseControl>\n\n        {!!selected?.visibility && (\n          <BaseControl>\n            <BaseControl.VisualLabel>\n              {__(\"Visibility\", \"presto-player\")}\n            </BaseControl.VisualLabel>\n            <h3 style={{ marginTop: \"5px\" }}>{selected.visibility}</h3>\n          </BaseControl>\n        )}\n\n        <BaseControl>\n          <BaseControl.VisualLabel>\n            {__(\"Size\", \"presto-player\")}\n          </BaseControl.VisualLabel>\n          <h3 style={{ marginTop: \"5px\" }}>\n            {bytesToSize(selected?.size || 0)}\n          </h3>\n        </BaseControl>\n\n        <BaseControl>\n          <BaseControl.VisualLabel>\n            {__(\"Created\", \"presto-player\")}\n          </BaseControl.VisualLabel>\n          <h3 style={{ marginTop: \"5px\" }}>{toDate(selected?.created_at)}</h3>\n        </BaseControl>\n\n        <BaseControl>\n          {deleteConfirm ? (\n            <Card>\n              <CardBody>\n                <p>\n                  <strong>Are you sure?</strong>\n                </p>\n                <p>Are you sure you want to delete this video?</p>\n                <Button isDestructive onClick={deleteSelected}>\n                  Yes\n                </Button>\n                <Button onClick={() => setDeleteConfirm(false)}>Cancel</Button>\n              </CardBody>\n            </Card>\n          ) : (\n            <Button\n              isDestructive\n              onClick={() => {\n                setDeleteConfirm(!deleteConfirm);\n              }}\n            >\n              {__(\"Delete video\", \"presto-player\")}\n            </Button>\n          )}\n        </BaseControl>\n      </div>\n    );\n  };\n\n  const selectVideo = () => {\n    if (selected) {\n      onSelect(selected);\n      onClose();\n    }\n  };\n\n  const itemsContent = () => {\n    if (fetching) {\n      return (\n        <Flex className=\"presto-player__media-loading\">\n          <FlexBlock style={{ textAlign: \"center\" }}>\n            {progress ? (\n              <>\n                <div>\n                  <strong>\n                    {progressMessage || __(\"Uploading\", \"presto-player\")}\n                  </strong>\n                </div>\n                <div>\n                  {__(\n                    \"Please don't navigate away from this page.\",\n                    \"presto-player\"\n                  )}\n                </div>\n                <progress\n                  className=\"presto-progress\"\n                  max=\"100\"\n                  value={progress}\n                  style={{ width: \"100px\" }}\n                ></progress>\n              </>\n            ) : (\n              <Spinner />\n            )}\n          </FlexBlock>\n        </Flex>\n      );\n    }\n\n    if (!items?.length) {\n      return (\n        <Flex align-items=\"center\" className=\"presto-player__media-not-found\">\n          <div>\n            <h2>Drop video files here to upload</h2>\n            <p>or browse for a video</p>\n            <FormFileUpload\n              isSecondary\n              accept=\"video/mp4,video/x-m4v,video/*\"\n              onChange={(e) => {\n                if (!e.target.files) {\n                  return;\n                }\n                onUpload(e.target.files);\n                jQuery(e.target).val(null);\n              }}\n            >\n              {__(\"Upload New Video\", \"presto-player\")}\n            </FormFileUpload>\n          </div>\n        </Flex>\n      );\n    }\n\n    return (\n      <div className=\"presto-player__media-list\">\n        <h2>{title}</h2>\n\n        {folders && (\n          <div className=\"presto-player__media-list-folders\">\n            {folders.map((folder) => {\n              return <MediaFolder key={folder.id} item={folder} />;\n            })}\n          </div>\n        )}\n\n        <div className=\"presto-player__media-list-items\">\n          {items.map((item) => {\n            return (\n              <MediaItem\n                item={item}\n                key={item.id}\n                onClick={() => {\n                  if (selected === item) {\n                    setSelected({});\n                  } else {\n                    setSelected(item);\n                  }\n                }}\n                className={selected === item ? \"is-selected\" : \"\"}\n              />\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <Modal\n      title={header ? header : __(\"Add Media\", \"presto-player\")}\n      onRequestClose={onClose}\n      className=\"presto-player__media-modal presto-player__full-modal\"\n      overlayClassName=\"presto-player__modal-overlay\"\n    >\n      <div className=\"presto-player__media-modal-layout\" data-cy=\"media-modal\">\n        <div className=\"presto-player__media-modal-header\">\n          <div\n            className=\"presto-player__media-modal-upload\"\n            css={css`\n              display: flex;\n              align-items: center;\n            `}\n          >\n            <FormFileUpload\n              isPrimary\n              accept=\"video/mp4,video/x-m4v,video/*\"\n              onChange={(e) => {\n                if (!e.target.files) {\n                  return;\n                }\n                onUpload(e.target.files);\n                jQuery(e.target).val(null);\n              }}\n            >\n              {__(\"Upload New Video\", \"presto-player\")}\n            </FormFileUpload>\n            <div\n              css={css`\n                margin-left: 10px;\n              `}\n            >\n              {__(\"Or drag a file here to upload.\", \"presto-player\")}\n            </div>\n          </div>\n          {error && (\n            <Notice status=\"error\" isDismissible={false}>\n              {error}\n            </Notice>\n          )}\n        </div>\n        <div className=\"presto-player__media-modal-content\">\n          <DropZoneProvider>\n            {itemsContent()}\n            <DropZone label={\"Drop files\"} onFilesDrop={onUpload} />\n          </DropZoneProvider>\n        </div>\n        <div className=\"presto-player__media-modal-sidebar\">\n          {sidebarContent()}\n        </div>\n        <div className=\"presto-player__media-modal-footer\">\n          <Button\n            isPrimary\n            disabled={!isSelected()}\n            onClick={selectVideo}\n            ref={buttonRef}\n          >\n            {__(\"Choose\", \"presto-player\")}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","const { __ } = wp.i18n;\nimport chunkUpload from \"@/admin/blocks/shared/media/chunk-upload\";\nimport MediaPopup from \"@/admin/blocks/shared/media/MediaPopup\";\nconst { useState, useEffect } = wp.element;\n\nexport default ({ closePopup, noticeOperations, onSelect, isPrivate }) => {\n  const [videos, setVideos] = useState([]);\n  const [fetching, setFetching] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [progressMessage, setProgressMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const endpoint = isPrivate ? \"private-videos\" : \"public-videos\";\n\n  // reset progress and error on open\n  useEffect(() => {\n    setProgress(0);\n    setError(\"\");\n  }, []);\n\n  // handle error\n  const onError = (message) => {\n    noticeOperations.removeAllNotices();\n    noticeOperations.createErrorNotice(message);\n  };\n\n  const uploadFile = async (files) => {\n    setError(\"\");\n    setFetching(true);\n    setProgressMessage(__(\"Uploading\", \"presto-player\"));\n    chunkUpload({\n      file: files[0],\n      path: `presto-player/v1/bunny/upload`,\n      onProgress: (percent) => {\n        setProgress(percent - 10); // leave 10% for storing\n      },\n      onComplete: storeFile,\n      onError: (e) => {\n        setError(e.message);\n        setProgress(0);\n        setFetching(false);\n      },\n    });\n  };\n\n  const storeFile = async ({ path, name }) => {\n    setProgressMessage(__(\"Storing\", \"presto-player\"));\n    try {\n      const videos = await wp.apiFetch({\n        path: `presto-player/v1/bunny/${endpoint}`,\n        method: \"POST\",\n        data: {\n          path,\n          name,\n        },\n      });\n      setVideos(videos);\n    } catch (e) {\n      setError(e.message);\n      console.error(e);\n    } finally {\n      setProgress(0);\n      setFetching(false);\n    }\n  };\n\n  const deleteVideo = async (video) => {\n    try {\n      setVideos((videos || []).filter((item) => item !== video));\n      await wp.apiFetch({\n        path: `presto-player/v1/bunny/${endpoint}`,\n        method: \"DELETE\",\n        data: {\n          name: video?.title,\n        },\n      });\n    } catch (e) {\n      setError(e.message);\n    }\n  };\n\n  // loads videos for media popup\n  const loadVideos = async () => {\n    try {\n      setFetching(true);\n      const videos = await wp.apiFetch({\n        path: `presto-player/v1/bunny/${endpoint}`,\n      });\n      setVideos(videos);\n    } catch (e) {\n      setError(e.message);\n    } finally {\n      setFetching(false);\n    }\n  };\n\n  return (\n    <MediaPopup\n      onClose={closePopup}\n      progressMessage={progressMessage}\n      fetching={fetching}\n      error={error}\n      onUpload={uploadFile}\n      onLoad={loadVideos}\n      items={videos}\n      progress={progress}\n      onDelete={deleteVideo}\n      onSelect={onSelect}\n      onError={onError}\n      header={\n        isPrivate\n          ? __(\"Bunny.net Private Video Storage\", \"presto-player\")\n          : __(\"Bunny.net Public Video Storage\", \"presto-player\")\n      }\n      title={\n        isPrivate\n          ? __(\"Private Video Library\", \"presto-player\")\n          : __(\"Public Video Library\", \"presto-player\")\n      }\n    />\n  );\n};\n","const { combineReducers } = wp.data;\n\n/**\n * Videos\n *\n * @param {array} state\n * @param {object} action\n */\nconst videosReducer = (state = [], action) => {\n  switch (action.type) {\n    case \"SET_VIDEOS\":\n      return action.value;\n    case \"ADD_VIDEOS\":\n      return [...state, ...action.value];\n    case \"ADD_VIDEO\":\n      return [...state, ...[action.value]];\n    case \"UPDATE_VIDEO\":\n      return state.map((item, index) => {\n        if (item.id !== action.value?.id) {\n          return item;\n        }\n        return {\n          ...item,\n          ...action.value,\n        };\n      });\n    case \"REMOVE_VIDEO\":\n      return state.filter((item) => item.guid !== action.value.guid);\n  }\n  return state;\n};\n\n/**\n * Videos\n *\n * @param {array} state\n * @param {object} action\n */\nconst uploadsReducer = (state = [], action) => {\n  switch (action.type) {\n    case \"SET_UPLOADS\":\n      return action.value;\n    case \"ADD_UPLOADS\":\n      return [...state, ...action.value];\n    case \"ADD_UPLOAD\":\n      return [...state, ...[action.value]];\n    case \"UPDATE_UPLOAD\":\n      return state.map((item, index) => {\n        if (item.id !== action.value?.id) {\n          return item;\n        }\n        return {\n          ...item,\n          ...action.value,\n        };\n      });\n    case \"REMOVE_UPLOAD\":\n      return state.filter((item) => item !== action.value);\n  }\n  return state;\n};\n\n/**\n * Videos\n *\n * @param {array} state\n * @param {object} action\n */\nconst collectionsReducer = (state = [], action) => {\n  switch (action.type) {\n    case \"SET_COLLECTIONS\":\n      return action.value;\n    case \"ADD_COLLECTION\":\n      return [...state, ...[action.value]];\n    case \"UPDATE_COLLECTION\":\n      return state.map((item, index) => {\n        if (item.id !== action.value?.id) {\n          return item;\n        }\n        return {\n          ...item,\n          ...action.value,\n        };\n      });\n    case \"REMOVE_COLLECTION\":\n      return state.filter((item) => item !== action.value);\n  }\n  return state;\n};\n\n/**\n * Request\n * @param {} state\n * @param {*} action\n * @returns\n */\nconst requestReducer = (\n  state = {\n    private: false,\n    collection: \"\",\n    search: \"\",\n  },\n  action\n) => {\n  switch (action.type) {\n    case \"SET_PRIVATE_REQUEST\":\n      return {\n        ...state,\n        private: action.value,\n      };\n    case \"SET_SEARCH_REQUEST\":\n      return {\n        ...state,\n        search: action.value,\n      };\n    case \"SET_COLLECTION_REQUEST\":\n      return {\n        ...state,\n        collection: action.value,\n      };\n  }\n\n  return state;\n};\n\n/**\n * Request\n * @param {} state\n * @param {*} action\n * @returns\n */\nconst UIReducer = (\n  state = {\n    loading: false,\n    videosFetched: false,\n    createCollection: false,\n    selectedId: null,\n  },\n  action\n) => {\n  switch (action.type) {\n    case \"SET_LOADING\":\n      return {\n        ...state,\n        loading: action.value,\n      };\n    case \"SET_VIDEOS_FETCHED\":\n      return {\n        ...state,\n        videosFetched: action.value,\n      };\n    case \"SET_UI_ITEM\":\n      return {\n        ...state,\n        [action.item]: action.value,\n      };\n  }\n\n  return state;\n};\n\nconst errorReducer = (state = [], action) => {\n  switch (action.type) {\n    case \"ADD_ERROR\":\n      return [...state, ...[action.value]];\n    case \"REMOVE_ERROR\":\n      return state.filter((element) => element !== action.value);\n  }\n  return state;\n};\n\nexport default combineReducers({\n  videosReducer,\n  collectionsReducer,\n  uploadsReducer,\n  requestReducer,\n  UIReducer,\n  errorReducer,\n});\n","export function videos(state) {\n  return state?.videosReducer || [];\n}\nexport function collections(state) {\n  return state?.collectionsReducer || [];\n}\nexport function uploads(state) {\n  return state?.uploadsReducer || [];\n}\nexport function isPrivate(state) {\n  return !!state?.requestReducer?.private;\n}\nexport function isLoading(state) {\n  return state?.UIReducer?.loading || false;\n}\nexport function errors(state) {\n  return state?.errorReducer || [];\n}\nexport function videosFetched(state) {\n  return state?.UIReducer?.videosFetched || false;\n}\nexport function currentCollection(state) {\n  return state?.requestReducer?.collection;\n}\nexport function ui(state, arg) {\n  return state?.UIReducer?.[arg];\n}\nexport function requestType(state) {\n  return state?.requestReducer?.private ? \"private\" : \"public\";\n}\n","export function setVideos(value) {\n  return {\n    type: \"SET_VIDEOS\",\n    value,\n  };\n}\nexport function addVideos(value) {\n  return {\n    type: \"ADD_VIDEOS\",\n    value,\n  };\n}\n\nexport function removeVideo(value) {\n  return {\n    type: \"REMOVE_VIDEO\",\n    value,\n  };\n}\n\nexport function setCollections(value) {\n  return {\n    type: \"SET_COLLECTIONS\",\n    value,\n  };\n}\n\nexport function addCollection(value) {\n  return {\n    type: \"ADD_COLLECTION\",\n    value,\n  };\n}\n\nexport function setIsPrivate(value) {\n  return {\n    type: \"SET_PRIVATE_REQUEST\",\n    value,\n  };\n}\n\nexport function setSearch(value) {\n  return {\n    type: \"SET_SEARCH\",\n    value,\n  };\n}\n\nexport function setCollectionRequest(value) {\n  return {\n    type: \"SET_COLLECTION_REQUEST\",\n    value,\n  };\n}\n\nexport function setUploads(value) {\n  return {\n    type: \"SET_UPLOADS\",\n    value,\n  };\n}\n\nexport function addUploads(value) {\n  return {\n    type: \"ADD_UPLOADS\",\n    value,\n  };\n}\n\nexport function removeUpload(value) {\n  return {\n    type: \"REMOVE_UPLOAD\",\n    value,\n  };\n}\n\nexport function setVideosFetched(value) {\n  return {\n    type: \"SET_VIDEOS_FETCHED\",\n    value,\n  };\n}\n\nexport function setLoading(value) {\n  return {\n    type: \"SET_LOADING\",\n    value,\n  };\n}\n\nexport function setUI(item, value) {\n  return {\n    type: \"SET_UI_ITEM\",\n    item,\n    value,\n  };\n}\n\nexport function addError(value) {\n  return {\n    type: \"ADD_ERROR\",\n    value,\n  };\n}\nexport function removeError(value) {\n  return {\n    type: \"REMOVE_ERROR\",\n    value,\n  };\n}\n","/**\n * WordPress dependencies\n */\nconst { registerStore } = wp.data;\n\n/**\n * Internal dependencies\n */\nimport reducer from \"./reducer\";\nimport * as selectors from \"./selectors\";\nimport * as actions from \"./actions\";\n\nexport default registerStore(\"presto-player/bunny-popup\", {\n  reducer,\n  selectors,\n  actions,\n});\n","/**\n * Is the video playable\n */\nexport const isPlayable = (video) =>\n  video?.status == 3 && video?.availableResolutions.length;\n\n/**\n * It's selectable if it's playable or live;\n */\nexport const isSelectable = (video) => isPlayable(video) || video?.status === 4;\n\n/**\n * Get the status text\n * @returns string\n */\nexport const getStatusText = (video) => {\n  if (video?.status == 0) return \"Processing\";\n  if (video?.status == 1) return \"Uploaded\";\n  if (video?.status == 2) return \"Processing\";\n  if (isPlayable(video)) return \"Playable\";\n  if (video?.status == 3) return \"Encoding\";\n  if (video?.status == 4) return \"Live\";\n  if (video?.status == 5) return \"Error\";\n  if (video?.status == 6) return \"Upload Failed\";\n};\n\nexport const getLengthToTime = (length) => {\n  if (length == undefined || length == null) return \"\";\n  return new Date(length * 1000).toISOString().substr(11, 8);\n};\n\nexport const bytesToSize = (bytes) => {\n  if (bytes == undefined || bytes == 0) return \"Unknown\";\n  var sizes = [\"b\", \"KB\", \"MB\", \"GB\", \"TB\"];\n  if (bytes == 0) return \"0 b\";\n  var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)).toString());\n  return (bytes / Math.pow(1024, i)).toFixed(2) + \" \" + sizes[i];\n};\n\nexport const stampToDate = (d) => {\n  d = new Date(d);\n  var hours = d.getHours();\n  var minutes = d.getMinutes();\n  var ampm = hours >= 12 ? \"pm\" : \"am\";\n  hours = hours % 12;\n  hours = hours ? hours : 12;\n  minutes = minutes < 10 ? \"0\" + minutes : minutes;\n\n  return (\n    d.getDate() +\n    \"-\" +\n    (d.getMonth() + 1) +\n    \"-\" +\n    d.getFullYear() +\n    \" at \" +\n    hours +\n    \":\" +\n    minutes +\n    ampm\n  );\n};\n","/** @jsx jsx */\n\nconst { __ } = wp.i18n;\nconst { Button, BaseControl, Disabled, Card, CardBody } = wp.components;\nconst { useState, useContext, useEffect } = wp.element;\nconst { dispatch, useSelect } = wp.data;\n\nimport {\n  isSelectable,\n  getStatusText,\n  getLengthToTime,\n  stampToDate,\n  bytesToSize,\n} from \"./utils\";\n\nimport { jsx, css } from \"@emotion/core\";\n\nexport default () => {\n  const [deleteConfirm, setDeleteConfirm] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const [video, setVideo] = useState(null);\n\n  const isPrivate = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").isPrivate()\n  );\n  const selectedId = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").ui(\"selectedId\")\n  );\n  const videos = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").videos()\n  );\n\n  useEffect(() => {\n    setVideo(\n      selectedId ? videos.find((video) => video.guid === selectedId) : null\n    );\n  }, [videos, selectedId]);\n\n  const onDelete = async () => {\n    await wp.apiFetch({\n      path: `presto-player/v1/bunny/stream/videos/${video.id}`,\n      method: \"DELETE\",\n      data: {\n        type: isPrivate ? \"private\" : \"public\",\n      },\n    });\n    dispatch(\"presto-player/bunny-popup\").removeVideo(video);\n    dispatch(\"presto-player/bunny-popup\").setUI(\"selectedId\", null);\n    setDeleting(false);\n    setDeleteConfirm(false);\n  };\n\n  const controlCSS = css`\n    margin-top: 5px;\n  `;\n\n  if (!video) {\n    return \"\";\n  }\n\n  const getThumbnail = (video) => {\n    return isPrivate ? video?.webPURLSigned : video?.webPURL;\n  };\n\n  return (\n    video && (\n      <div className=\"presto-player__media-modal-sidebar-content\">\n        <BaseControl\n          css={css`\n            position: relative;\n          `}\n        >\n          <Disabled key={video.id}>\n            {isSelectable(video) && getThumbnail(video) && (\n              <img src={getThumbnail(video)} css={{ maxWidth: \"100%\" }} />\n            )}\n          </Disabled>\n          <Button\n            isSmall\n            isPrimary\n            isBusy={!isSelectable(video)}\n            css={css`\n              ${isSelectable(video) ? \"position: absolute;\" : \"\"}\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            `}\n          >\n            {getStatusText(video)}\n          </Button>\n        </BaseControl>\n        <BaseControl>\n          <BaseControl.VisualLabel>\n            {__(\"Name\", \"presto-player\")}\n          </BaseControl.VisualLabel>\n          <h3 css={controlCSS}>{video.title}</h3>\n        </BaseControl>\n\n        {!!video?.visibility && (\n          <BaseControl>\n            <BaseControl.VisualLabel>\n              {__(\"Visibility\", \"presto-player\")}\n            </BaseControl.VisualLabel>\n            <h3 css={controlCSS}>{video.visibility}</h3>\n          </BaseControl>\n        )}\n\n        <BaseControl>\n          <BaseControl.VisualLabel>\n            {__(\"Size\", \"presto-player\")}\n          </BaseControl.VisualLabel>\n          <h3 css={controlCSS}>{bytesToSize(video?.size || 0)}</h3>\n        </BaseControl>\n\n        <BaseControl>\n          <BaseControl.VisualLabel>\n            {__(\"Length\", \"presto-player\")}\n          </BaseControl.VisualLabel>\n          <h3 css={controlCSS}>{getLengthToTime(video?.length)}</h3>\n        </BaseControl>\n\n        <BaseControl>\n          <BaseControl.VisualLabel>\n            {__(\"Created\", \"presto-player\")}\n          </BaseControl.VisualLabel>\n          <h3 css={controlCSS}>{stampToDate(video?.created_at)}</h3>\n        </BaseControl>\n\n        <BaseControl>\n          {deleteConfirm ? (\n            <Card>\n              <CardBody>\n                <p>\n                  <strong>{__(\"Are you sure?\", \"presto-player\")}</strong>\n                </p>\n                <p>\n                  {__(\n                    \"Are you sure you want to delete this video?\",\n                    \"presto-player\"\n                  )}\n                </p>\n                <Button\n                  isDestructive\n                  disabled={deleting}\n                  isBusy={deleting}\n                  onClick={(e) => {\n                    e.preventDefault();\n                    onDelete();\n                    setDeleting(true);\n                  }}\n                >\n                  {__(\"Yes\", \"presto-player\")}\n                </Button>\n                <Button onClick={() => setDeleteConfirm(false)}>\n                  {__(\"Cancel\", \"presto-player\")}\n                </Button>\n              </CardBody>\n            </Card>\n          ) : (\n            <Button\n              isDestructive\n              onClick={() => {\n                setDeleteConfirm(!deleteConfirm);\n              }}\n            >\n              {__(\"Delete video\", \"presto-player\")}\n            </Button>\n          )}\n        </BaseControl>\n      </div>\n    )\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\n\nexport default ({ className, progress }) => {\n  return (\n    <div className={className}>\n      <div\n        css={css`\n          height: 100%;\n          background-color: var(--wp-admin-theme-color, #007cba);\n        `}\n        style={{ width: `${progress}%` }}\n      ></div>\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport ProgressBar from \"./ProgressBar\";\n\nexport default ({ progress }) => {\n  return (\n    <div\n      css={css`\n        max-width: 100%;\n        object-fit: cover;\n        width: 100%;\n        height: 140px;\n        background-color: #222;\n        color: white;\n        text-decoration: none;\n        text-align: center;\n        box-sizing: border-box;\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      `}\n    >\n      <ProgressBar\n        progress={progress}\n        css={css`\n          width: 100%;\n          border-radius: 0px;\n          margin: 0 15px;\n          background-color: #e3e3e3;\n          height: 3px;\n        `}\n      />\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\n\nexport default (props) => {\n  const { thumbnail, title, footer, badge, before, after } = props;\n  return (\n    <div\n      className=\"presto-player__video-thumb\"\n      css={css`\n        cursor: pointer;\n        user-select: none;\n        display: inline-block;\n        position: relative;\n        margin-right: 20px;\n        font-weight: bold;\n        margin-bottom: 20px;\n        width: 220px;\n        flex: 0 0 220px;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        overflow: hidden;\n      `}\n      {...props}\n    >\n      {!!before && before}\n\n      {!!thumbnail && thumbnail}\n\n      <div\n        css={css`\n          margin: 14px;\n        `}\n      >\n        {!!badge && (\n          <div\n            css={css`\n              position: absolute;\n              top: 8px;\n              right: 8px;\n            `}\n          >\n            {badge}\n          </div>\n        )}\n\n        {!!title && (\n          <span\n            css={css`\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              overflow: hidden;\n              width: 100%;\n              max-width: 100%;\n              display: inline-block;\n              margin-bottom: 7px;\n              font-size: 13px;\n            `}\n          >\n            {title}\n          </span>\n        )}\n\n        {!!footer && (\n          <div\n            css={css`\n              font-size: 12px;\n              opacity: 0.75;\n              margin-bottom: 7px;\n            `}\n          >\n            {footer}\n          </div>\n        )}\n      </div>\n\n      {!!after && after}\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nconst { Icon, Button } = wp.components;\nconst { useEffect, useState } = wp.element;\nconst { useSelect, dispatch } = wp.data;\nimport ProgressOverlay from \"../ProgressOverlay\";\nimport ProgressBar from \"../ProgressBar\";\nimport Thumbnail from \"../ThumbTemplate\";\n\nimport {\n  isSelectable,\n  getStatusText,\n  getLengthToTime,\n  bytesToSize,\n} from \"../utils\";\n\nexport default ({ video }) => {\n  const [selected, setSelected] = useState();\n  const isPrivate = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").isPrivate()\n  );\n  const selectedId = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").ui(\"selectedId\")\n  );\n\n  useEffect(() => {\n    setSelected(selectedId ? selectedId === video.guid : null);\n  }, [selectedId]);\n\n  /**\n   * Status badge\n   * @returns JSX\n   */\n  const renderStatusBadge = () => (\n    <Button\n      isSmall\n      isPrimary\n      isBusy={!isSelectable(video)}\n      css={css`\n        font-size: 11px;\n        color: #ffffff;\n        padding: 2px 10px;\n        border-radius: 9999px;\n      `}\n    >\n      {getStatusText(video)}\n    </Button>\n  );\n\n  /**\n   * Render thumbnail\n   * @returns\n   */\n  const renderThumbnail = () => {\n    if (video.status < 3) {\n      return <ProgressOverlay progress={video.encodeProgress} />;\n    }\n\n    const url = isPrivate ? video?.thumbnailURLSigned : video?.thumbnailURL;\n\n    if (url) {\n      return (\n        <img\n          css={css`\n            max-width: 100%;\n            object-fit: cover;\n            width: 100%;\n            height: 140px;\n            display: block;\n          `}\n          src={url}\n        />\n      );\n    }\n  };\n\n  const renderLength = () => (\n    <div\n      css={css`\n        display: flex;\n        align-items: center;\n      `}\n    >\n      <span\n        css={css`\n          margin-right: 10px;\n          display: flex;\n          align-items: center;\n        `}\n      >\n        <Icon\n          css={css`\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n            opacity: 0.5;\n          `}\n          icon=\"clock\"\n          size={14}\n        />\n        <span>{getLengthToTime(video.length)}</span>\n      </span>\n      <span\n        css={css`\n          display: flex;\n          align-items: center;\n        `}\n      >\n        <Icon\n          css={css`\n            opacity: 0.5;\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n          `}\n          icon=\"database\"\n          size={14}\n        />\n        <span>{bytesToSize(video.storageSize)}</span>\n      </span>\n    </div>\n  );\n\n  return (\n    <Thumbnail\n      onClick={() => {\n        dispatch(\"presto-player/bunny-popup\").setUI(\"selectedId\", video?.guid);\n      }}\n      css={css`\n        ${selected &&\n        \"box-shadow: 0 0 0 0px #fff, 0 0 0 3px var(--wp-admin-theme-color, #007cba);\"}\n        border: 1px solid\n          ${selected ? \"var(--wp-admin-theme-color, #007cba)\" : \"#e0e0e0\"};\n      `}\n      thumbnail={renderThumbnail()}\n      badge={renderStatusBadge()}\n      title={video.title}\n      footer={renderLength()}\n      after={\n        video.status === 3 ? (\n          <ProgressBar\n            css={css`\n              width: 100%;\n              border-radius: 0px;\n              margin: 0;\n              background-color: #e3e3e3;\n              height: 3px;\n            `}\n            progress={video.encodeProgress}\n          />\n        ) : (\n          \"\"\n        )\n      }\n    />\n  );\n};\n","/** @jsx jsx */\nconst { Flex, FlexBlock, Spinner } = wp.components;\n\nimport { jsx } from \"@emotion/core\";\n\nexport default ({ className }) => {\n  return (\n    <Flex className={className}>\n      <FlexBlock css={{ textAlign: \"center\" }}>\n        <Spinner />\n      </FlexBlock>\n    </Flex>\n  );\n};\n","/** @jsx jsx */\nconst { __ } = wp.i18n;\nconst { useState, useEffect, Fragment } = wp.element;\nconst { Flex, FormFileUpload, Notice } = wp.components;\nconst { dispatch, useSelect } = wp.data;\nimport { css, jsx } from \"@emotion/core\";\nimport Video from \"./Video\";\n\nimport Loading from \"../Loading\";\n\nexport default () => {\n  const [selected, setSelected] = useState(false);\n  const [notice, setNotice] = useState(\"\");\n  const fetched = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").videosFetched()\n  );\n  const videos = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").videos()\n  );\n  const type = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").requestType()\n  );\n  const collection = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").currentCollection()\n  );\n\n  // fetch videos\n  useEffect(() => {\n    if (!fetched) {\n      fetch();\n    }\n  }, [fetched]);\n\n  // sync every 5 seconds\n  useEffect(() => {\n    const interval = setInterval(() => {\n      fetch({ sync: true });\n    }, 3000);\n    return () => clearInterval(interval);\n  }, [fetched]);\n\n  // fetch videos\n  const fetch = async ({ sync } = { sync: false }) => {\n    try {\n      const videos = await wp.apiFetch({\n        path: wp.url.addQueryArgs(`presto-player/v1/bunny/stream/videos`, {\n          type,\n          ...(collection?.guid ? { collection: collection?.guid } : {}),\n          items_per_page: 500,\n        }),\n      });\n      dispatch(\"presto-player/bunny-popup\").setVideos(videos?.items);\n      setNotice(\"\");\n    } catch (e) {\n      if (e?.data?.status === 401) {\n        setNotice(\n          __(\n            \"Please wait. Pullzone cache is clearing. This may take a minute or two...\"\n          )\n        );\n        return;\n      }\n\n      if (!sync) {\n        dispatch(\"presto-player/bunny-popup\").addError(e.message);\n      }\n    } finally {\n      dispatch(\"presto-player/bunny-popup\").setVideosFetched(true);\n    }\n  };\n\n  // default no video content\n  const renderDefaultContent = () => {\n    return (\n      <Flex\n        align=\"center\"\n        justify=\"center\"\n        css={css`\n          height: 100%;\n          text-align: center;\n        `}\n      >\n        <div>\n          <h2>{__(\"Drop video files here to upload\", \"presto-player\")}</h2>\n          <p>{__(\"or browse for a video\", \"presto-player\")}</p>\n          <FormFileUpload\n            isSecondary\n            accept=\"video/mp4,video/x-m4v,video/*\"\n            onChange={(e) => {\n              if (!e.target.files) {\n                return;\n              }\n              dispatch(\"presto-player/bunny-popup\").addUploads(e.target.files);\n              jQuery(e.target).val(null);\n            }}\n          >\n            {__(\"Upload New Video\", \"presto-player\")}\n          </FormFileUpload>\n        </div>\n      </Flex>\n    );\n  };\n\n  if (notice) {\n    return (\n      <Notice status=\"warning\" isDismissible={false}>\n        <div css={{ display: \"flex\", alignItems: \"center\" }}>\n          <Loading css={{ flex: 1 }} />\n          {notice}\n        </div>\n      </Notice>\n    );\n  }\n\n  // still loading\n  if (!fetched) {\n    return <Loading css={{ flex: 1 }} />;\n  }\n\n  // render\n  return (\n    <Fragment>\n      {videos && !!videos.length ? (\n        <div>\n          {!collection?.guid && <h2>{__(\"Videos\", \"presto-player\")}</h2>}\n          {videos.map((video) => {\n            if (video?.collectionId !== (collection?.guid || \"\")) {\n              return;\n            }\n            return (\n              <Video\n                key={video.id}\n                video={video}\n                onClick={() => {\n                  setSelected(selected.guid === video.guid ? {} : video);\n                }}\n                selected={selected.guid === video.guid}\n              />\n            );\n          })}\n        </div>\n      ) : (\n        renderDefaultContent()\n      )}\n    </Fragment>\n  );\n};\n","/** @jsx jsx */\n\nconst { Icon } = wp.components;\nconst { dispatch } = wp.data;\n\nimport Thumb from \"../ThumbTemplate\";\n\nimport { jsx, css } from \"@emotion/core\";\n\nexport default ({ collection }) => {\n  // handle click\n  const handleClick = (e) => {\n    e.preventDefault();\n    dispatch(\"presto-player/bunny-popup\").setCollectionRequest(collection);\n    dispatch(\"presto-player/bunny-popup\").setVideosFetched(false);\n  };\n\n  return (\n    <Thumb\n      onClick={handleClick}\n      title={\n        <div>\n          <Icon\n            icon=\"open-folder\"\n            css={css`\n              color: var(--wp-admin-theme-color);\n              margin-right: 10px;\n            `}\n          />\n          {collection.name}\n        </div>\n      }\n      footer={<div>{collection.videoCount} Videos</div>}\n    />\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\n\nconst { __ } = wp.i18n;\nconst { useEffect } = wp.element;\nconst { useSelect, dispatch } = wp.data;\n\nimport Collection from \"./Collection\";\n\nexport default () => {\n  const collections = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").collections()\n  );\n  const type = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").requestType()\n  );\n\n  const fetchCollections = async () => {\n    try {\n      const response = await wp.apiFetch({\n        path: wp.url.addQueryArgs(`presto-player/v1/bunny/stream/collections`, {\n          type,\n        }),\n      });\n      dispatch(\"presto-player/bunny-popup\").setCollections(response?.items);\n    } catch (e) {\n      if (e?.data?.status === 401) {\n        return;\n      }\n      dispatch(\"presto-player/bunny-popup\").addError(e.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchCollections();\n  }, []);\n\n  return (\n    !!collections.length && (\n      <div>\n        <h2>{__(\"Collections\", \"presto-player\")}</h2>\n        <div\n          css={css`\n            display: flex;\n            align-items: stretch;\n            overflow: auto;\n          `}\n        >\n          {collections.map((collection) => (\n            <Collection collection={collection} key={collection.guid} />\n          ))}\n        </div>\n      </div>\n    )\n  );\n};\n","/** @jsx jsx */\nconst { __ } = wp.i18n;\nconst { Button, TextControl, Modal, BaseControl } = wp.components;\nconst { useState, Fragment } = wp.element;\nconst { dispatch, useSelect } = wp.data;\n\nimport { jsx, css } from \"@emotion/core\";\n\nexport default () => {\n  const [name, setName] = useState(\"\");\n  const [busy, setBusy] = useState(false);\n  const type = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").requestType()\n  );\n  const modal = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").ui(\"createCollection\")\n  );\n  const setModal = (value) => {\n    dispatch(\"presto-player/bunny-popup\").setUI(\"createCollection\", value);\n  };\n\n  const onCreate = async () => {\n    setBusy(true);\n    try {\n      let collection = await wp.apiFetch({\n        path: \"presto-player/v1/bunny/stream/collections\",\n        method: \"POST\",\n        data: {\n          type,\n          name,\n        },\n      });\n      dispatch(\"presto-player/bunny-popup\").addCollection(collection);\n      dispatch(\"presto-player/bunny-popup\").setCollectionRequest(collection);\n      dispatch(\"presto-player/bunny-popup\").setVideosFetched(false);\n      setName(\"\");\n      setModal(false);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  return (\n    <Fragment>\n      <Button isSecondary onClick={() => setModal(true)}>\n        {__(\"Create Collection\", \"presto-player\")}\n      </Button>\n      {modal && (\n        <Modal\n          overlayClassName=\"presto-modal\"\n          title={\"Create New Collection\"}\n          shouldCloseOnClickOutside={false}\n          isDismissible={false}\n        >\n          <TextControl\n            css={css`\n              margin-bottom: 15px;\n            `}\n            tabIndex=\"0\"\n            placeholder={__(\"Enter a collection name\", \"presto-player\")}\n            value={name}\n            onChange={(name) => setName(name)}\n          />\n\n          <BaseControl>\n            <Button\n              isBusy={busy}\n              disabled={busy}\n              isPrimary\n              onClick={() => {\n                onCreate();\n              }}\n            >\n              {__(\"Create\", \"presto-player\")}\n            </Button>{\" \"}\n            <Button onClick={() => setModal(false)}>\n              {__(\"Cancel\", \"presto-player\")}\n            </Button>\n          </BaseControl>\n        </Modal>\n      )}\n    </Fragment>\n  );\n};\n","/** @jsx jsx */\nconst { __ } = wp.i18n;\nconst { Flex, FlexBlock, FlexItem, Button, FormFileUpload } = wp.components;\nconst { dispatch } = wp.data;\nimport CreateCollection from \"./collections/CreateCollection\";\n\nimport { jsx } from \"@emotion/core\";\n\nexport default ({ afterUpload }) => {\n  return (\n    <Flex>\n      <FlexBlock>\n        <Flex justify=\"flex-start\">\n          <FormFileUpload\n            multiple\n            isPrimary\n            accept=\"video/mp4,video/x-m4v,video/*\"\n            onChange={(e) => {\n              if (!e.target.files) {\n                return;\n              }\n              dispatch(\"presto-player/bunny-popup\").addUploads(e.target.files);\n              jQuery(e.target).val(null);\n            }}\n          >\n            {__(\"Upload Videos\", \"presto-player\")}\n          </FormFileUpload>{\" \"}\n          <CreateCollection />\n          {!!afterUpload && afterUpload}\n        </Flex>\n      </FlexBlock>\n      <FlexItem>\n        {/* <Flex align={\"stretch\"}>\n          <input\n            class=\"components-text-control__input\"\n            type=\"text\"\n            placeholder={__(\"Search for a video...\", \"presto-player\")}\n            value={search}\n            onChange={(event) => {\n              setSearch(event.target.value);\n            }}\n          />\n          <Button\n            isPrimary\n            size=\"small\"\n            onClick={(e) => {\n              e.preventDefault();\n              onSearch && onSearch(search);\n            }}\n          >\n            {__(\"Search\", \"presto-player\")}\n          </Button>\n        </Flex> */}\n      </FlexItem>\n    </Flex>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { Button } = wp.components;\nconst { useState, useEffect } = wp.element;\nconst { useSelect } = wp.data;\n\nexport default ({ onChoose }) => {\n  const [video, setVideo] = useState(null);\n  const [canSelect, setCanSelect] = useState(false);\n\n  const selectedId = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").ui(\"selectedId\")\n  );\n  const videos = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").videos()\n  );\n\n  // update selected video when videos or selected id changes\n  useEffect(() => {\n    setVideo(\n      selectedId ? videos.find((video) => video.guid === selectedId) : null\n    );\n  }, [videos, selectedId]);\n\n  // set if we can select if video has available resolutions\n  useEffect(() => {\n    if (video?.status == 3 && video?.availableResolutions.length) {\n      setCanSelect(true);\n      return;\n    }\n    setCanSelect(video?.status > 3 && video?.status < 5);\n  }, [video?.availableResolutions]);\n\n  return (\n    <Button isPrimary disabled={!canSelect} onClick={() => onChoose(video)}>\n      {video?.id && !canSelect\n        ? __(\"Please wait, video is encoding...\", \"presto-player\")\n        : __(\"Choose\", \"presto-player\")}\n    </Button>\n  );\n};\n","/** @jsx jsx */\nconst { Icon } = wp.components;\nimport { css, jsx } from \"@emotion/core\";\n\nexport default ({ children, onClick }) => {\n  return (\n    <span\n      onClick={onClick}\n      css={css`\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n        color: var(--wp-admin-theme-color, #007cba);\n        padding: 6px 0;\n      `}\n    >\n      <Icon\n        css={css`\n          width: 14px;\n          height: 14px;\n          font-size: 14px;\n          margin-right: 5px;\n        `}\n        icon=\"arrow-left-alt\"\n        size={14}\n      />\n      <span>{children}</span>\n    </span>\n  );\n};\n","/** @jsx jsx */\n\n/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { useState } = wp.element;\nconst { dispatch, useSelect } = wp.data;\nconst { Button, Modal, BaseControl } = wp.components;\n\nimport { css, jsx } from \"@emotion/core\";\nimport BackButton from \"./BackButton\";\n\nexport default () => {\n  const [modal, setModal] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const [error, setError] = useState(\"\");\n  const collection = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").currentCollection()\n  );\n  const type = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").requestType()\n  );\n\n  const deleteCollection = async () => {\n    setDeleting(true);\n    try {\n      await wp.apiFetch({\n        path: `presto-player/v1/bunny/stream/collections/${collection?.guid}`,\n        method: \"DELETE\",\n        data: {\n          type,\n        },\n      });\n      setModal(false);\n      dispatch(\"presto-player/bunny-popup\").setCollectionRequest(\"\");\n      dispatch(\"presto-player/bunny-popup\").setVideosFetched(false);\n    } catch (e) {\n      setModal(false);\n      dispatch(\"presto-player/bunny-popup\").addError(e.message);\n    } finally {\n      setDeleting(false);\n    }\n  };\n\n  return (\n    <div\n      css={css`\n        margin-bottom: 2em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      `}\n    >\n      <div>\n        <BackButton\n          onClick={() => {\n            dispatch(\"presto-player/bunny-popup\").setCollectionRequest(\"\");\n            dispatch(\"presto-player/bunny-popup\").setVideosFetched(false);\n          }}\n        >\n          {__(\"Back To Main Folder\", \"presto-player\")}\n        </BackButton>\n        <h2>{collection.name}</h2>\n      </div>\n      <Button isDestructive onClick={() => setModal(true)}>\n        {__(\"Delete Collection\", \"presto-player\")}\n      </Button>\n      {modal && (\n        <Modal\n          shouldCloseOnClickOutside={false}\n          overlayClassName=\"presto-modal\"\n          title={\"Delete Collection\"}\n          onRequestClose={() => setModal(false)}\n        >\n          <h2>\n            {__(\n              \"Are you sure you want to delete the collection? \",\n              \"presto-player\"\n            )}\n          </h2>\n          <p>\n            {__(\n              \"This will also delete all videos inside of the collection.\",\n              \"presto-player\"\n            )}\n          </p>\n          <BaseControl>\n            <Button\n              isDestructive\n              disabled={deleting}\n              isBusy={deleting}\n              onClick={deleteCollection}\n            >\n              {__(\"Delete\", \"presto-player\")}\n            </Button>{\" \"}\n            <Button onClick={() => setModal(false)}>\n              {__(\"Cancel\", \"presto-player\")}\n            </Button>\n          </BaseControl>\n        </Modal>\n      )}\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\n\nconst { Icon } = wp.components;\nconst { useState, useEffect, useContext } = wp.element;\nconst { useSelect, dispatch } = wp.data;\nconst { __ } = wp.i18n;\n\nimport chunkUpload from \"@/admin/blocks/shared/media/chunk-upload\";\n\nimport ProgressBar from \"../ProgressBar\";\n\nexport default ({ file, name, onComplete }) => {\n  const [progress, setProgress] = useState(0);\n  const [message, setMessage] = useState(__(\"Uploading\", \"presto-player\"));\n  const [error, setError] = useState(\"\");\n  const [created, setCreated] = useState(false);\n  const type = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").requestType()\n  );\n  const collection = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").currentCollection()\n  );\n\n  let uploader;\n\n  const upload = async () => {\n    setMessage(__(\"Uploading\", \"presto-player\"));\n    uploader = chunkUpload({\n      file: file?.[0] ? file?.[0] : file,\n      path: `presto-player/v1/bunny/stream/upload`,\n      onProgress: (percent) => {\n        setProgress(percent); // leave 10% for storing\n      },\n      onComplete: createVideo,\n      onError: (e) => {\n        setError(e.message);\n        setMessage(__(\"Error\", \"presto-player\"));\n        setProgress(0);\n      },\n    });\n  };\n\n  const createVideo = async ({ path, name }) => {\n    setMessage(__(\"Creating\", \"presto-player\"));\n    try {\n      const video = await wp.apiFetch({\n        path: \"presto-player/v1/bunny/stream/videos\",\n        method: \"POST\",\n        data: {\n          type,\n          name,\n          ...(collection?.guid ? { collection: collection.guid } : {}),\n        },\n      });\n      setCreated(true);\n      storeVideo({ path, video });\n    } catch (e) {\n      setError(e.message);\n    } finally {\n      setProgress(0);\n    }\n  };\n\n  /**\n   * Store the video on Bunny.net\n   */\n  const storeVideo = async ({ path, video }) => {\n    await wp.apiFetch({\n      path: \"presto-player/v1/bunny/stream/store\",\n      method: \"POST\",\n      data: {\n        type,\n        path,\n        guid: video.guid,\n      },\n    });\n\n    onComplete();\n  };\n\n  const onCancel = () => {\n    uploader && uploader.cancel();\n    dispatch(\"presto-player/bunny-popup\").removeUpload(upload);\n  };\n\n  useEffect(() => {\n    upload();\n    return () => {\n      uploader && uploader.cancel();\n    };\n  }, []);\n\n  if (created) {\n    return \"\";\n  }\n\n  return (\n    <div\n      css={css`\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        animation: components-button__busy-animation 2500ms infinite linear;\n        opacity: 1;\n        padding: 6px 12px;\n        border-radius: 99999px;\n        border: 1px solid #dddddd;\n        background-size: 100px 100%;\n        background-image: linear-gradient(\n          -45deg,\n          #ffffff 33%,\n          #f3f3f3 33%,\n          #f3f3f3 70%,\n          #ffffff 70%\n        );\n      `}\n    >\n      <div\n        css={css`\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          max-width: 150px;\n          text-overflow: ellipsis;\n          font-weight: bold;\n        `}\n      >\n        {!!error && error}\n        {!!name && name} {file.name}...\n      </div>\n      <div\n        css={css`\n          display: flex;\n          align-items: center;\n        `}\n      >\n        <ProgressBar\n          css={css`\n            width: 50px;\n            height: 3px;\n            margin: 0 5px;\n            background: #e3e3e3;\n            border-radius: 9999px;\n            overflow: hidden;\n          `}\n          progress={progress}\n        />\n        {/* <Icon onClick={onCancel} icon=\"no-alt\" /> */}\n      </div>\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\n\nimport Upload from \"./Upload\";\nconst { useSelect } = wp.data;\n\nexport default ({ removeUpload, isPrivate }) => {\n  const uploads = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").uploads()\n  );\n\n  if (!uploads.length) {\n    return \"\";\n  }\n\n  return (\n    <div\n      css={css`\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      `}\n    >\n      {uploads.length &&\n        uploads.map((upload) => {\n          return (\n            <Upload\n              css={css`\n                margin-right: 0px;\n              `}\n              file={upload}\n              onComplete={() => removeUpload(upload)}\n            />\n          );\n        })}\n    </div>\n  );\n};\n","/**\n * WordPress dependencies\n */\n/** @jsx jsx */\nconst { __ } = wp.i18n;\nconst { Modal } = wp.components;\n\nimport { css, jsx } from \"@emotion/core\";\n\nexport default ({\n  onClose,\n  title,\n  header,\n  error,\n  mainContent,\n  sidebar,\n  footer,\n}) => {\n  return (\n    <Modal\n      title={title ? title : __(\"Add Media\", \"presto-player\")}\n      onRequestClose={onClose}\n      css={css`\n        width: 100%;\n        height: 100%;\n        max-width: calc(100% - 32px);\n        max-height: calc(100% - 32px);\n\n        .components-modal__content {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n      `}\n      overlayClassName=\"presto-player__modal-overlay\"\n    >\n      <div\n        css={css`\n          @media screen and (min-width: 780px) {\n            margin: -24px;\n            display: grid;\n            flex: 1;\n            max-height: calc(100vh - 68px);\n            grid-template-columns: 1fr 1fr minmax(0px, 267px);\n            grid-template-rows: minmax(50px, auto) 1fr 60px;\n            grid-template-areas:\n              \"header header sidebar\"\n              \"main main sidebar\"\n              \"footer footer footer\";\n            overflow: hidden;\n          }\n        `}\n        data-cy=\"media-modal\"\n      >\n        <div\n          css={css`\n            grid-area: header;\n            padding: 24px 24px 12px 24px;\n          `}\n        >\n          <div\n            css={css`\n              display: flex;\n              align-items: center;\n\n              > * {\n                margin-right: 10px;\n              }\n            `}\n          >\n            {header}\n          </div>\n          {error}\n        </div>\n        <div\n          css={css`\n            grid-area: main;\n            display: grid;\n            overflow: hidden;\n\n            .components-drop-zone__provider {\n              overflow: hidden;\n              display: grid;\n            }\n\n            .components-drop-zone {\n              z-index: 99;\n            }\n          `}\n        >\n          {mainContent}\n        </div>\n        <div\n          css={css`\n            display: none;\n            grid-area: sidebar;\n            padding: 0 16px;\n            z-index: 75;\n            background: #f3f3f3;\n            border-left: 1px solid #ddd;\n            overflow: auto;\n\n            @media screen and (min-width: 780px) {\n              display: block;\n            }\n\n            .sidebar-content {\n              padding: 16px 0;\n            }\n          `}\n        >\n          {sidebar}\n        </div>\n        <div\n          css={css`\n            grid-area: footer;\n            border-top: 1px solid #ddd;\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 8px;\n          `}\n        >\n          {footer}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n","/** @jsx jsx */\n\n/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { Button, DropZone, DropZoneProvider, Notice } = wp.components;\nconst { useState, useEffect, Fragment } = wp.element;\nconst { dispatch, useSelect } = wp.data;\n\nimport { css, jsx } from \"@emotion/core\";\n\nimport Sidebar from \"./Sidebar\";\nimport Videos from \"./video/Videos\";\nimport Collections from \"./collections/Collections\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport CollectionHeader from \"./CollectionHeader\";\nimport Uploads from \"./upload/Uploads\";\n\nimport MediaPopupTemplate from \"@/admin/blocks/shared/media/MediaPopupTemplate\";\n\nexport default ({ onClose, onChoose }) => {\n  const isPrivate = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").isPrivate()\n  );\n  const uploads = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").uploads()\n  );\n  const currentCollection = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").currentCollection()\n  );\n  const errors = useSelect((select) =>\n    select(\"presto-player/bunny-popup\").errors()\n  );\n\n  useEffect(() => {\n    dispatch(\"presto-player/bunny-popup\").setVideosFetched(false);\n    dispatch(\"presto-player/bunny-popup\").setCollections([]);\n    dispatch(\"presto-player/bunny-popup\").setVideos([]);\n  }, []);\n\n  const onCloseConfirm = () => {\n    if (uploads.length) {\n      const r = confirm(\"Discard your uploads?\");\n      if (r) {\n        onClose();\n        dispatch(\"presto-player/bunny-popup\").setUploads([]);\n      }\n      return;\n    }\n    onClose();\n  };\n\n  const addUpload = (files) => {\n    dispatch(\"presto-player/bunny-popup\").addUploads(files);\n  };\n  const removeUpload = (file) => {\n    dispatch(\"presto-player/bunny-popup\").removeUpload(file);\n  };\n\n  /**\n   * Modal Title\n   *\n   * @returns string\n   */\n  const title = isPrivate\n    ? __(\"Private Stream Library\", \"presto-player\")\n    : __(\"Public Stream Library\", \"presto-player\");\n\n  /**\n   * Main Content\n   *\n   * @returns JSX\n   */\n  const mainContent = () => {\n    return (\n      <DropZoneProvider\n        css={css`\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n        `}\n      >\n        <div\n          css={css`\n            padding: 12px 24px;\n            overflow: auto;\n            display: flex;\n            flex-direction: column;\n          `}\n        >\n          {!!errors.length &&\n            errors.map((error) => {\n              return (\n                <Notice\n                  css={css`\n                    margin: 0 0 20px 0;\n                  `}\n                  status=\"error\"\n                  onRemove={() =>\n                    dispatch(\"presto-player/bunny-popup\").removeError(error)\n                  }\n                >\n                  {error}\n                </Notice>\n              );\n            })}\n\n          {/* Show back button or collections */}\n          {!!currentCollection ? <CollectionHeader /> : <Collections />}\n\n          <div\n            css={css`\n              display: flex;\n              align-items: stretch;\n            `}\n          >\n            <Videos />\n          </div>\n\n          <DropZone label={\"Drop files\"} onFilesDrop={addUpload} />\n        </div>\n      </DropZoneProvider>\n    );\n  };\n\n  /**\n   * Modal Header\n   */\n  const header = (\n    <Header\n      afterUpload={\n        <Uploads\n          uploads={uploads}\n          removeUpload={removeUpload}\n          isPrivate={isPrivate}\n        />\n      }\n    />\n  );\n\n  const sidebar = <Sidebar />;\n\n  /**\n   * Modal Footer\n   */\n  const footer = <Footer onChoose={onChoose} />;\n\n  return (\n    <MediaPopupTemplate\n      title={title}\n      header={header}\n      mainContent={mainContent()}\n      onClose={onCloseConfirm}\n      footer={footer}\n      sidebar={sidebar}\n    />\n  );\n};\n","const { __ } = wp.i18n;\nconst { useEffect } = wp.element;\nconst { dispatch } = wp.data;\n\nimport \"./popup/stream/store/store\";\nimport StreamPopup from \"./popup/stream/Popup\";\n\nexport default ({ closePopup, onSelect, isPrivate }) => {\n  const onChoose = (video) => {\n    video.url = video.playlistURL;\n    video.thumbnail = video.thumbnailURL;\n    video.preview = video.webPURL;\n    onSelect(video);\n  };\n\n  // set privacy option in store\n  useEffect(() => {\n    dispatch(\"presto-player/bunny-popup\").setIsPrivate(isPrivate);\n  }, [isPrivate]);\n\n  // render template\n  return (\n    <StreamPopup\n      onClose={closePopup}\n      onChoose={onChoose}\n      header={\n        isPrivate\n          ? __(\"Private Stream Library\", \"presto-player\")\n          : __(\"Public Stream Library\", \"presto-player\")\n      }\n      title={\n        isPrivate\n          ? __(\"Private Video Stream\", \"presto-player\")\n          : __(\"Public Video Stream\", \"presto-player\")\n      }\n    />\n  );\n};\n","const { __ } = wp.i18n;\nconst { useState } = wp.element;\nconst baseUrl = `${prestoPlayer.root}${prestoPlayer.prestoVersionString}bunny/`;\n\nexport default (onRefetch) => {\n  const [apikey, setApikey] = useState(\"\");\n  const [saveMessage, setSaveMessage] = useState(\"\");\n  const [saving, setSaving] = useState(false);\n  const [step, setStep] = useState(0);\n  const [error, setError] = useState(\"\");\n\n  const getError = (errorString) => {\n    if (errorString.includes(\"Authorization has been denied\")) {\n      return \"Your API key is incorrect. Please double-check to make sure you've copied it correctly.\";\n    }\n    if (errorString.includes(\"localhost\")) {\n      return \"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.\";\n    }\n    return errorString;\n  };\n\n  const saveKey = async () => {\n    setError(\"\");\n\n    try {\n      setSaving(true);\n      setStep(0);\n      setSaveMessage(__(\"Validating API Key...\", \"presto-player\"));\n      const { success } = await wp.apiFetch({\n        url: `${baseUrl}api-key`,\n        method: \"POST\",\n        data: {\n          api_key: apikey,\n        },\n      });\n\n      if (!success) {\n        throw {\n          message:\n            \"Could not save the API key. Please double check it to make sure it's correct.\",\n        };\n      }\n    } catch (e) {\n      setStep(0);\n      setError(\n        e?.message\n          ? getError(e.message)\n          : \"Something went wrong. Please try again\"\n      );\n      return;\n    } finally {\n      setStep(1);\n      setSaving(false);\n      setSaveMessage(\"\");\n    }\n\n    // create storage zone\n    try {\n      setSaving(true);\n      setSaveMessage(\n        __(\n          \"Setting up storage zones. This make take a few minutes...\",\n          \"presto-player\"\n        )\n      );\n      const { id } = await wp.apiFetch({\n        url: `${baseUrl}storage-zones`,\n        method: \"POST\",\n      });\n    } catch (e) {\n      setStep(0);\n      setError(\n        e?.message\n          ? getError(e.message)\n          : \"Something went wrong. Please try again\"\n      );\n      return;\n    } finally {\n      setStep(2);\n      setSaving(false);\n      setSaveMessage(\"\");\n    }\n\n    // create storage zone\n    try {\n      setSaving(true);\n      setSaveMessage(\n        __(\n          \"Setting up pull zones. This make take a few minutes...\",\n          \"presto-player\"\n        )\n      );\n      const { id } = await wp.apiFetch({\n        url: `${baseUrl}pull-zones`,\n        method: \"POST\",\n      });\n    } catch (e) {\n      setStep(0);\n      setError(\n        e?.message\n          ? getError(e.message)\n          : \"Something went wrong. Please try again\"\n      );\n      return;\n    } finally {\n      setStep(3);\n      setSaving(false);\n      setSaveMessage(\"\");\n    }\n\n    onRefetch();\n  };\n\n  const totalSteps = 3;\n\n  return { saveKey, setApikey, step, saveMessage, saving, error, totalSteps };\n};\n","const { __ } = wp.i18n;\nconst { useState } = wp.element;\nconst baseUrl = `${prestoPlayer.root}${prestoPlayer.prestoVersionString}bunny/stream/`;\n\nexport default (onRefetch) => {\n  const [apikey, setApikey] = useState(\"\");\n  const [saveMessage, setSaveMessage] = useState(\"\");\n  const [saving, setSaving] = useState(false);\n  const [step, setStep] = useState(0);\n  const [error, setError] = useState(\"\");\n\n  const getError = (errorString) => {\n    if (errorString.includes(\"Authorization has been denied\")) {\n      return \"Your API key is incorrect. Please double-check to make sure you've copied it correctly.\";\n    }\n    if (errorString.includes(\"localhost\")) {\n      return \"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.\";\n    }\n    return errorString;\n  };\n\n  const saveKey = async () => {\n    setError(\"\");\n\n    try {\n      setSaving(true);\n      setStep(0);\n      setSaveMessage(__(\"Validating API Key...\", \"presto-player\"));\n      const { success } = await wp.apiFetch({\n        url: `${baseUrl}api-key`,\n        method: \"POST\",\n        data: {\n          api_key: apikey,\n        },\n      });\n\n      if (!success) {\n        throw {\n          message:\n            \"Could not save the API key. Please double check it to make sure it's correct.\",\n        };\n      }\n    } catch (e) {\n      setStep(0);\n      setError(\n        e?.message\n          ? getError(e.message)\n          : \"Something went wrong. Please try again\"\n      );\n      return;\n    } finally {\n      setStep(1);\n      setSaving(false);\n      setSaveMessage(\"\");\n    }\n\n    // public library\n    try {\n      setSaving(true);\n      setSaveMessage(\n        __(\n          \"Setting up public video library. This make take a few moments...\",\n          \"presto-player\"\n        )\n      );\n      const { id } = await wp.apiFetch({\n        url: `${baseUrl}library`,\n        method: \"POST\",\n        data: {\n          type: \"public\",\n        },\n      });\n    } catch (e) {\n      setStep(0);\n      setError(\n        e?.message\n          ? getError(e.message)\n          : \"Something went wrong. Please try again\"\n      );\n      return;\n    } finally {\n      setStep(2);\n      setSaving(false);\n      setSaveMessage(\"\");\n    }\n\n    // private library\n    try {\n      setSaving(true);\n      setSaveMessage(\n        __(\n          \"Setting up private video library. This make take a few moments...\",\n          \"presto-player\"\n        )\n      );\n      await wp.apiFetch({\n        url: `${baseUrl}library`,\n        method: \"POST\",\n        data: {\n          type: \"private\",\n        },\n      });\n    } catch (e) {\n      setStep(0);\n      setError(\n        e?.message\n          ? getError(e.message)\n          : \"Something went wrong. Please try again\"\n      );\n      return;\n    } finally {\n      setStep(2);\n      setSaving(false);\n      setSaveMessage(\"\");\n    }\n\n    onRefetch();\n  };\n\n  const totalSteps = 3;\n\n  return { saveKey, setApikey, step, saveMessage, saving, error, totalSteps };\n};\n","const { __ } = wp.i18n;\n\nconst {\n  Button,\n  TextControl,\n  Placeholder,\n  Flex,\n  FlexBlock,\n  ExternalLink,\n  Spinner,\n  FlexItem,\n  Notice,\n} = wp.components;\nconst { useEffect } = wp.element;\n\nimport useStorageConnection from \"./useStorageConnection\";\nimport useStreamConnection from \"./useStreamConnection\";\n\nexport default ({ onRefetch, type, autoSubmit }) => {\n  const {\n    saveKey,\n    apikey,\n    setApikey,\n    saveMessage,\n    saving,\n    totalSteps,\n    step,\n    error,\n  } =\n    type === \"stream\"\n      ? useStreamConnection(onRefetch)\n      : useStorageConnection(onRefetch);\n\n  useEffect(() => {\n    if (autoSubmit) {\n      saveKey();\n    }\n  }, [autoSubmit]);\n\n  return (\n    <Placeholder\n      label={__(\"Bunny.net Video\", \"presto-player\")}\n      instructions={\n        <>\n          {__(\n            \"Enter your Bunny.net API key, which can be found on your Bunny CDN Account page.\",\n            \"presto-player\"\n          )}\n          &nbsp;\n          <ExternalLink href=\"https://bunnycdn.com/dashboard/account\">\n            {__(\"Get My API Key\", \"presto-player\")}\n          </ExternalLink>\n        </>\n      }\n    >\n      {saving ? (\n        <Flex>\n          <FlexItem>\n            <Spinner />\n          </FlexItem>\n          <FlexBlock>\n            {saveMessage}\n            <progress\n              className=\"presto-progress\"\n              max={totalSteps}\n              value={step}\n              style={{ width: \"100%\" }}\n            ></progress>\n          </FlexBlock>\n        </Flex>\n      ) : (\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            saveKey();\n          }}\n        >\n          {error && (\n            <Flex style={{ width: \"100%\" }}>\n              <FlexBlock>\n                <Notice status=\"error\" isDismissible={false}>\n                  {error}\n                </Notice>\n              </FlexBlock>\n            </Flex>\n          )}\n          <Flex style={{ width: \"100%\", maxWidth: \"400px\" }}>\n            <FlexBlock>\n              <TextControl\n                value={apikey}\n                onChange={(apikey) => setApikey(apikey)}\n                className={\"presto-link-placeholder-input\"}\n                type=\"password\"\n                autoComplete=\"off\"\n                placeholder={__(\"Your Bunny.net API Key\", \"presto-player\")}\n                required\n              />\n            </FlexBlock>\n            <FlexItem>\n              <Button isPrimary style={{ marginBottom: \"8px\" }} type=\"submit\">\n                {__(\"Next\", \"presto-player\")} &rarr;\n              </Button>\n            </FlexItem>\n          </Flex>\n        </form>\n      )}\n    </Placeholder>\n  );\n};\n","/**\n * WordPress dependencies\n */\nconst {\n  Button,\n  Disabled,\n  DropdownMenu,\n  Spinner,\n  Toolbar,\n  withNotices,\n  BaseControl,\n  Placeholder,\n  ToggleControl,\n} = wp.components;\nconst { BlockControls, InspectorControls } = wp.editor;\nconst { __ } = wp.i18n;\nconst { compose } = wp.compose;\nconst { useEffect, useState, Fragment } = wp.element;\nconst { dispatch } = wp.data;\n\n// hocs\nimport withPlayerEdit from \"../with-player-edit\";\nimport withPlayerData from \"../with-player-data\";\n\n/**\n * Internal dependencies\n */\nimport TracksEditor from \"@/admin/blocks/shared/tracks/TracksEditor\";\nimport StorageMedia from \"./StorageMedia\";\nimport StreamMedia from \"./StreamMedia\";\nimport APIPlaceholder from \"./APIPlaceholder\";\nimport BlockInspectorControls from \"@/admin/blocks/shared/BlockInspectorControls\";\nimport Player from \"@/admin/blocks/shared/Player\";\n\nexport default compose([withPlayerData(), withPlayerEdit()])(\n  withNotices(\n    ({\n      attributes,\n      setAttributes,\n      noticeOperations,\n      branding,\n      presetData,\n      createVideo,\n      lockSave,\n      unlockSave,\n      onRemoveSrc,\n      renderKey,\n      defaultPreset,\n    }) => {\n      const { poster, src, id, tracks, visibility, previewSrc, thumbnail } =\n        attributes;\n      const [mediaPopup, setMediaPopup] = useState(\"\");\n      const [loading, setLoading] = useState(false);\n\n      // What setup screen should we show\n      const [setup, setSetup] = useState(\"\");\n      const [isSetup, setIsSetup] = useState({\n        stream: false,\n        storage: false,\n      });\n      const [disableStream, setDisableStream] = useState(false);\n\n      // setup and api\n      const [isAPILoaded, setIsAPILoaded] = useState(false);\n      const [fetchingSettings, setFetchingSettings] = useState(false);\n      const [autoSubmitStream, setAutoSubmitStream] = useState(false);\n\n      const userCanReadSettings = wp.data.useSelect((select) =>\n        select(\"core\").canUser(\"read\", \"settings\")\n      );\n\n      // is this private\n      const isPrivate = visibility === \"private\";\n\n      // is legacy storage disabled\n      const disableLegacyStorage =\n        prestoPlayerAdmin?.bunny?.disable_legacy_storage;\n\n      // set privacy option in store\n      useEffect(() => {\n        dispatch(\"presto-player/bunny-popup\").setIsPrivate(\n          visibility === \"private\"\n        );\n      }, [visibility]);\n\n      useEffect(() => {\n        setIsSetup({\n          storage: prestoPlayerAdmin?.isSetup?.bunny?.storage,\n          stream: prestoPlayerAdmin?.isSetup?.bunny?.stream,\n        });\n      }, []);\n\n      function selectVideo(media, ...args) {\n        if (!media.url) {\n          // in this case there was an error\n          // previous attributes should be removed\n          // because they may be temporary blob urls\n          setAttributes({ src: undefined, id: undefined });\n          return;\n        }\n\n        // set preset attributes\n        setAttributes({\n          src: media.url,\n          preset: defaultPreset?.id,\n          ...(media?.thumbnail ? { thumbnail: media.thumbnail } : {}),\n          ...(media?.preview ? { preview: media.preview } : {}),\n        });\n\n        console.log({ media });\n\n        // create video\n        setLoading(true);\n        lockSave();\n        createVideo({\n          src: media.url,\n          type: \"bunny\",\n          title: media.title,\n          ...(media?.guid ? { external_id: media.guid } : {}),\n        })\n          .catch((e) => {\n            setAttributes({ src: \"\" });\n            console.error(e);\n          })\n          .finally(() => {\n            unlockSave();\n            setLoading(false);\n          });\n      }\n\n      // fetch settings\n      const fetchSettings = async () => {\n        try {\n          const {\n            presto_player_bunny_pull_zones,\n            presto_player_bunny_storage_zones,\n            presto_player_bunny_stream_private,\n            presto_player_bunny_stream_public,\n          } = await wp.apiFetch({\n            path: `wp/v2/settings`,\n          });\n          setIsAPILoaded(true);\n\n          if (!presto_player_bunny_stream_private) {\n            setDisableStream(true);\n          }\n\n          // is this set up?\n          const isSetup = (option) => {\n            return !!(option?.private_id && option?.public_id);\n          };\n\n          const storageSetup =\n            isSetup(presto_player_bunny_pull_zones) ||\n            isSetup(presto_player_bunny_storage_zones);\n          const streamSetup =\n            presto_player_bunny_stream_private?.pull_zone_url &&\n            presto_player_bunny_stream_public?.pull_zone_url;\n\n          setIsSetup({\n            storage: storageSetup,\n            stream: streamSetup,\n          });\n\n          if (!storageSetup && !streamSetup) {\n            setSetup(\"stream\");\n          } else {\n            setSetup(\"\");\n          }\n        } finally {\n          setFetchingSettings(false);\n        }\n      };\n\n      // sign a private url\n      const signURL = async (src) => {\n        if (!src) {\n          return;\n        }\n\n        const preview = await wp.apiFetch({\n          path: \"presto-player/v1/bunny/sign\",\n          method: \"POST\",\n          data: {\n            url: src,\n            id: 0, // backwards compat\n          },\n        });\n\n        return preview;\n      };\n\n      // mounted\n      useEffect(() => {\n        if (userCanReadSettings) {\n          fetchSettings();\n        } else {\n          setIsAPILoaded(true);\n        }\n      }, [userCanReadSettings]);\n\n      const setPreview = async () => {\n        if (isPrivate) {\n          let previewSrc = await signURL(src);\n          setAttributes({ previewSrc });\n        } else {\n          setAttributes({ previewSrc: src });\n        }\n      };\n      useEffect(() => {\n        setPreview();\n      }, [src]);\n\n      const setThumbnail = async () => {\n        if (isPrivate) {\n          let previewThumbnail = await signURL(thumbnail);\n          if (previewThumbnail) {\n            console.log({ previewThumbnail });\n            setAttributes({ previewThumbnail });\n          }\n        } else {\n          setAttributes({ previewThumbnail: thumbnail });\n        }\n      };\n      useEffect(() => {\n        setThumbnail();\n      }, [thumbnail]);\n\n      const placeholderButtons = () => {\n        return (\n          <Fragment>\n            {isSetup.stream && (\n              <Button isPrimary onClick={() => setMediaPopup(\"stream\")}>\n                {isPrivate\n                  ? __(\"Add/Select Private Video Stream\", \"presto-player\")\n                  : __(\"Add/Select Video Stream\", \"presto-player\")}\n              </Button>\n            )}\n\n            {!disableLegacyStorage && isSetup.storage && (\n              <Button\n                isSecondary={isSetup.stream}\n                isPrimary={!isSetup.stream}\n                onClick={() => setMediaPopup(\"storage\")}\n              >\n                {isPrivate\n                  ? __(\"Add/Select Private Video (Classic)\", \"presto-player\")\n                  : __(\"Add/Select Video (Classic)\", \"presto-player\")}\n              </Button>\n            )}\n\n            {!isSetup.stream && !disableStream && isSetup.storage && (\n              <Button\n                isSecondary\n                onClick={() => {\n                  setAutoSubmitStream(true);\n                  setSetup(\"stream\");\n                }}\n              >\n                {__(\"Enable Bunny.net Stream!\", \"presto-player\")}\n              </Button>\n            )}\n\n            {!!userCanReadSettings && moreButtons()}\n          </Fragment>\n        );\n      };\n\n      const moreButtons = () => {\n        const controls = [];\n        !disableStream &&\n          controls.push({\n            title: isSetup.stream\n              ? __(\"Reconnect Stream\", \"presto-player\")\n              : __(\"Connect Stream\", \"presto-player\"),\n            onClick: () => {\n              setSetup(\"stream\");\n              setAutoSubmitStream(false);\n            },\n          });\n\n        !disableLegacyStorage &&\n          controls.push({\n            title: isSetup.storage\n              ? __(\"Reconnect Storage (Classic)\", \"presto-player\")\n              : __(\"Connect Storage (Classic)\", \"presto-player\"),\n            onClick: () => setSetup(\"storage\"),\n          });\n\n        return (\n          <DropdownMenu\n            icon=\"ellipsis\"\n            label={__(\"Connection Options\", \"presto-player\")}\n            controls={controls}\n          />\n        );\n      };\n\n      if (loading || !isAPILoaded) {\n        return (\n          <Placeholder className=\"presto-player__placeholder is-loading\">\n            <Spinner />\n          </Placeholder>\n        );\n      }\n\n      if (setup === \"stream\") {\n        return (\n          <APIPlaceholder\n            type=\"stream\"\n            autoSubmit={autoSubmitStream}\n            onRefetch={() => {\n              setIsAPILoaded(false);\n              fetchSettings();\n            }}\n          />\n        );\n      }\n\n      if (setup === \"storage\") {\n        return (\n          <APIPlaceholder\n            type=\"storage\"\n            onRefetch={() => {\n              setIsAPILoaded(false);\n              fetchSettings();\n            }}\n          />\n        );\n      }\n\n      if (!id) {\n        return (\n          <div>\n            <Placeholder\n              label={\n                isPrivate\n                  ? __(\"Bunny.net Private Video\", \"presto-player\")\n                  : __(\"Bunny.net Video\", \"presto-player\")\n              }\n              icon={\n                isPrivate ? (\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    className=\"presto-block-icon\"\n                  >\n                    <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"></path>\n                  </svg>\n                ) : (\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"24\"\n                    height=\"24\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    className=\"presto-block-icon\"\n                  >\n                    <polyline points=\"8 17 12 21 16 17\"></polyline>\n                    <line x1=\"12\" y1=\"12\" x2=\"12\" y2=\"21\"></line>\n                    <path d=\"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29\"></path>\n                  </svg>\n                )\n              }\n              instructions={\n                <>{__(\"Add or select a Bunny.net video\", \"presto-player\")}</>\n              }\n            >\n              <BaseControl className=\"presto-player__placeholder-control\">\n                <ToggleControl\n                  label=\"Private Video\"\n                  help={\n                    isPrivate\n                      ? \"Video is only accessible to those who are logged in.\"\n                      : \"Video is accessible to everyone.\"\n                  }\n                  checked={isPrivate}\n                  onChange={(isPrivate) => {\n                    setAttributes({\n                      visibility: isPrivate ? \"private\" : \"public\",\n                    });\n                  }}\n                />\n              </BaseControl>\n              {placeholderButtons()}\n            </Placeholder>\n\n            {mediaPopup === \"storage\" && (\n              <StorageMedia\n                isPrivate={isPrivate}\n                closePopup={() => setMediaPopup(\"\")}\n                noticeOperations={noticeOperations}\n                onSelect={selectVideo}\n              />\n            )}\n\n            {mediaPopup === \"stream\" && (\n              <StreamMedia\n                isPrivate={isPrivate}\n                closePopup={() => setMediaPopup(\"\")}\n                noticeOperations={noticeOperations}\n                onSelect={selectVideo}\n              />\n            )}\n          </div>\n        );\n      }\n\n      return (\n        <>\n          <BlockControls>\n            <TracksEditor\n              tracks={tracks}\n              onChange={(newTracks) => {\n                setAttributes({ tracks: newTracks });\n              }}\n            />\n            <Toolbar>\n              <Button onClick={() => onRemoveSrc()}>\n                {__(\"Replace\", \"presto-player\")}\n              </Button>\n            </Toolbar>\n          </BlockControls>\n\n          <InspectorControls>\n            <BlockInspectorControls\n              setAttributes={setAttributes}\n              attributes={attributes}\n            />\n          </InspectorControls>\n\n          <figure className=\"wp-block-video\">\n            {/*\n            Disable the video tag so the user clicking on it won't play the\n            video when the controls are enabled.\n            */}\n            <Disabled>\n              <Player\n                poster={poster}\n                src={previewSrc}\n                id={id}\n                type={\"bunny\"}\n                attributes={attributes}\n                setAttributes={setAttributes}\n                preset={presetData}\n                branding={branding}\n                key={renderKey}\n              />\n            </Disabled>\n          </figure>\n        </>\n      );\n    }\n  )\n);\n","const { __ } = wp.i18n;\nimport edit from \"./edit\";\nimport blockOptions from \"../block-options\";\n\n/**\n * Block Name\n */\nexport const name = \"presto-player/bunny\";\n\n/**\n * Block Options\n */\nexport const options = {\n  ...blockOptions,\n\n  attributes: {\n    ...blockOptions.attributes,\n    ...{\n      thumbnail: {\n        type: String,\n        default: \"\",\n      },\n      preview: {\n        type: String,\n        default: \"\",\n      },\n    },\n  },\n\n  premium: true,\n\n  title: __(\"Presto Bunny.net Video\", \"presto-player\"),\n\n  description: __(\"Serve video through Bunny.net CDN.\", \"presto-player\"),\n\n  variations: [\n    {\n      name: \"public\",\n      isDefault: true,\n      title: __(\"Presto Bunny.net Video\", \"presto-player\"),\n      description: __(\n        \"Serve public video through Bunny.net CDN.\",\n        \"presto-player\"\n      ),\n      attributes: { visibility: \"public\" },\n    },\n    {\n      name: \"private\",\n      title: __(\"Presto Bunny.net Private Video\", \"presto-player\"),\n      icon: (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          className=\"presto-block-icon\"\n        >\n          <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"></path>\n        </svg>\n      ),\n      description: __(\n        \"Serve private, secure video through Bunny.net CDN.\",\n        \"presto-player\"\n      ),\n      attributes: { visibility: \"private\" },\n    },\n  ],\n\n  icon: (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className=\"presto-block-icon\"\n    >\n      <polyline points=\"8 17 12 21 16 17\"></polyline>\n      <line x1=\"12\" y1=\"12\" x2=\"12\" y2=\"21\"></line>\n      <path d=\"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29\"></path>\n    </svg>\n  ),\n\n  edit,\n};\n","const { combineReducers, dispatch } = wp.data;\nconst { apiFetch } = wp;\nconst { pick } = lodash;\n\n/**\n * Presets reducer\n *\n * @param {array} state\n * @param {object} action\n */\nconst presetReducer = (state = [], action) => {\n  switch (action.type) {\n    case \"SET_PRESET\":\n      return action.value;\n    case \"ADD_PRESET\":\n      return [...state, ...[action.value]];\n    case \"UPDATE_PRESET\":\n      return state.map((item, index) => {\n        if (item.id !== action.value?.id) {\n          return item;\n        }\n        return {\n          ...item,\n          ...action.value,\n        };\n      });\n    case \"REMOVE_PRESET\":\n      return state.filter((item) => {\n        return item !== action.value;\n      });\n  }\n  return state;\n};\n\n/**\n * For preset loading\n *\n * @param {boolean} state\n * @param {object} action\n */\nconst presetLoadingReducer = (state = true, action) => {\n  switch (action.type) {\n    case \"SET_PRESET_LOADING\":\n      return action.value;\n  }\n};\n\n/**\n * For preset loading\n *\n * @param {boolean} state\n * @param {object} action\n */\nconst videosLoadingReducer = (state = true, action) => {\n  switch (action.type) {\n    case \"SET_VIDEOS_LOADING\":\n      return action.value;\n  }\n};\n\nconst proModalReducer = (state = false, action) => {\n  switch (action.type) {\n    case \"SET_PRO_MODAL\":\n      return action.value;\n  }\n};\n\nconst addVideo = (videos, video) => {\n  // check for existing item\n  const index = videos.find((e) => e.id === video.id);\n  if (index) {\n    return videos;\n  }\n  return [...videos, ...[video]];\n};\n\nconst videosReducer = (\n  state = {\n    total: 0,\n    total_pages: 0,\n    videos: [],\n    hasResolved: false,\n    isError: false,\n  },\n  action\n) => {\n  switch (action.type) {\n    case \"SET_VIDEOS\":\n      return action.value;\n    case \"UPDATE_VIDEOS\":\n      return { ...state, ...action.value };\n    case \"APPEND_VIDEOS\":\n      let draft = state;\n      (action.value || []).forEach((video) => {\n        draft.videos = addVideo(draft.videos, video);\n      });\n      return draft;\n    case \"ADD_VIDEO\":\n      return { ...state, videos: addVideo(state.videos, action.value) };\n    case \"UPDATE_VIDEO\":\n      return {\n        ...state,\n        videos: state.videos.map((item, index) => {\n          if (item.id !== action.value?.id) {\n            return item;\n          }\n          return {\n            ...item,\n            ...action.value,\n          };\n        }),\n      };\n    case \"REMOVE_VIDEO\":\n      return {\n        ...state,\n        videos: state.videos.filter((item) => {\n          return item !== action.value;\n        }),\n      };\n  }\n  return state;\n};\n\n/**\n * Branding options are global and stored in settings\n * @param {object} state\n * @param {object} action\n */\nconst brandingReducer = (state = {}, action) => {\n  switch (action.type) {\n    case \"SET_BRANDING\":\n      return action.value;\n    case \"UPDATE_BRANDING\":\n      return {\n        ...state,\n        [action.name]: action.value,\n      };\n  }\n  return state;\n};\n\n/**\n * Youtube are global and stored in settings\n * @param {object} state\n * @param {object} action\n */\nconst youtubeReducer = (state = {}, action) => {\n  switch (action.type) {\n    case \"SET_YOUTUBE\":\n      return action.value;\n    case \"UPDATE_YOUTUBE\":\n      return {\n        ...state,\n        [action.name]: action.value,\n      };\n  }\n  return state;\n};\n\n/**\n * For fetching the options\n *\n * @param {object} state\n * @param {object} action\n */\nconst optionsApi = (state, action) => {\n  switch (action.type) {\n    /**\n     * Fetch our options\n     */\n    case \"FETCH_OPTIONS\":\n      return apiFetch({\n        path: \"/presto-player/v1/settings/\",\n      }).then((settings) => {\n        dispatch(\"presto-player/player\").setBranding(\n          settings.presto_player_branding\n        );\n        dispatch(\"presto-player/player\").setYoutube(\n          settings.presto_player_youtube\n        );\n      });\n\n    /**\n     * Persist options to db\n     */\n    case \"SAVE_OPTIONS\":\n      const data = {\n        presto_player_branding: pick(action?.branding, [\n          \"logo\",\n          \"color\",\n          \"logo_width\",\n        ]),\n      };\n\n      // remove blanks\n      Object.keys(data).forEach(\n        (key) =>\n          (data[key] == null || !Object.keys(data?.[key] || {}).length) &&\n          delete data[key]\n      );\n\n      apiFetch({\n        path: \"/presto-player/v1/settings\",\n        method: \"POST\",\n        data,\n      });\n\n      return data;\n  }\n};\n\nexport default combineReducers({\n  presetReducer,\n  presetLoadingReducer,\n  videosLoadingReducer,\n  videosReducer,\n  proModalReducer,\n  brandingReducer,\n  youtubeReducer,\n  optionsApi,\n});\n","export function getPresets(state) {\n  return state?.presetReducer || [];\n}\nexport function getReusableVideos(state) {\n  return state?.videosReducer || [];\n}\nexport function getReusableVideo(state, id) {\n  return state?.videosReducer?.videos?.find((video) => video?.id === id) || [];\n}\nexport function getDefaultPreset(state) {\n  let preset = (state?.presetReducer || []).find((preset) => {\n    return preset.id && preset.id === prestoPlayer?.defaultPreset;\n  });\n  if (!preset) {\n    preset = (state?.presetReducer || []).find((preset) => {\n      return preset.slug == \"default\";\n    });\n  }\n  if (!preset) {\n    preset = (state?.presetReducer || [])[0];\n  }\n\n  return preset;\n}\nexport function presetsLoading(state) {\n  return !!state?.presetLoadingReducer;\n}\nexport function branding(state) {\n  return state?.brandingReducer;\n}\nexport function youtube(state) {\n  return state?.youtubeReducer;\n}\nexport function proModal(state) {\n  return state?.proModalReducer;\n}\n","export function setPresetLoading(value) {\n  return {\n    type: \"SET_PRESET_LOADING\",\n    value,\n  };\n}\n\nexport function setVideosLoading(value) {\n  return {\n    type: \"SET_VIDEOS_LOADING\",\n    value,\n  };\n}\n\nexport function setProModal(value) {\n  return {\n    type: \"SET_PRO_MODAL\",\n    value,\n  };\n}\n\n/**\n * Videos\n */\nexport function setVideos(value) {\n  return {\n    type: \"SET_VIDEOS\",\n    value,\n  };\n}\nexport function updateVideos(value) {\n  return {\n    type: \"UPDATE_VIDEOS\",\n    value,\n  };\n}\nexport function appendVideos(value) {\n  return {\n    type: \"APPEND_VIDEOS\",\n    value,\n  };\n}\nexport function addVideo(value) {\n  return {\n    type: \"ADD_VIDEO\",\n    value,\n  };\n}\n\n/**\n * Presets\n */\nexport function setPresets(value) {\n  return {\n    type: \"SET_PRESET\",\n    value,\n  };\n}\nexport function addPreset(value) {\n  return {\n    type: \"ADD_PRESET\",\n    value,\n  };\n}\nexport function updatePreset(value) {\n  return {\n    type: \"UPDATE_PRESET\",\n    value,\n  };\n}\nexport function removePreset(value) {\n  return {\n    type: \"REMOVE_PRESET\",\n    value,\n  };\n}\n\n/**\n * Branding\n */\nexport function setBranding(value) {\n  return {\n    type: \"SET_BRANDING\",\n    value,\n  };\n}\nexport function updateBranding(name, value) {\n  return {\n    type: \"UPDATE_BRANDING\",\n    name,\n    value,\n  };\n}\n\n/**\n * Save provided settings\n */\nexport function saveOptions(args) {\n  return {\n    type: \"SAVE_OPTIONS\",\n    ...args,\n  };\n}\n\n/**\n * FetchOptions\n */\nexport function fetchOptions() {\n  return {\n    type: \"FETCH_OPTIONS\",\n  };\n}\n\nexport function fetchFromAPI(path) {\n  return {\n    type: \"FETCH_FROM_API\",\n    path,\n  };\n}\n\nexport function fetchFromWPAPI(path, args) {\n  return {\n    type: \"FETCH_FROM_WP_API\",\n    path,\n    args,\n  };\n}\n\nexport function setYoutube(value) {\n  return {\n    type: \"SET_YOUTUBE\",\n    value,\n  };\n}\n\nexport function updateYoutube(name, value) {\n  return {\n    type: \"UPDATE_YOUTUBE\",\n    name,\n    value,\n  };\n}\n","const { apiFetch } = wp;\n\nexport default {\n  FETCH_FROM_API(action) {\n    return apiFetch({\n      url: prestoPlayer.root + prestoPlayer.prestoVersionString + action.path,\n    });\n  },\n  async FETCH_FROM_WP_API({ args, path = \"\" }) {\n    let res = await apiFetch({\n      path: wp.url.addQueryArgs(`wp/v2/${path}`, args?.query),\n      ...(args?.data ? { data: args.data } : {}),\n      ...args?.options,\n      parse: false,\n    });\n\n    const data = await res.json();\n    const total = res.headers && res.headers.get(\"X-WP-Total\");\n    const total_pages = res.headers && res.headers.get(\"X-WP-TotalPages\");\n\n    return new Promise((resolve, reject) => {\n      resolve({\n        data,\n        total,\n        total_pages,\n      });\n      return;\n    });\n  },\n};\n","import * as actions from \"./actions\";\n\nexport default {\n  *getPresets() {\n    actions.setPresetLoading(true);\n    const presets = yield actions.fetchFromAPI(\"preset\");\n    actions.setPresetLoading(false);\n    return actions.setPresets(presets);\n  },\n  *getReusableVideo(id) {\n    const path = `presto-videos/${id}`;\n    const preset = yield actions.fetchFromWPAPI(path, {});\n    return actions.addVideo(preset?.data || {});\n  },\n};\n","/**\n * WordPress dependencies\n */\nconst { registerStore } = wp.data;\n\n/**\n * Internal dependencies\n */\nimport reducer from \"./reducer\";\nimport * as selectors from \"./selectors\";\nimport * as actions from \"./actions\";\nimport controls from \"./controls\";\nimport resolvers from \"./resolvers\";\n\nexport default registerStore(\"presto-player/player\", {\n  reducer,\n  selectors,\n  actions,\n  controls,\n  resolvers,\n});\n","const { Modal, Button } = wp.components;\nconst { dispatch, useSelect } = wp.data;\nimport ProBadge from \"@/admin/blocks/shared/components/ProBadge\";\n\nexport default function () {\n  const closeModal = () => {\n    dispatch(\"presto-player/player\").setProModal(false);\n  };\n\n  const open = useSelect((select) => {\n    return select(\"presto-player/player\").proModal();\n  });\n\n  return open ? (\n    <Modal title={\"Pro Feature\"} onRequestClose={closeModal}>\n      <h2>\n        Unlock Presto Player <ProBadge />\n      </h2>\n      <p>Get this feature and more with the Pro version of Presto Player!</p>\n      <Button href=\"https://prestoplayer.com\" target=\"_blank\" isPrimary>\n        Learn More\n      </Button>\n    </Modal>\n  ) : (\n    \"\"\n  );\n}\n","/**\n * Dynamically locate, load & register all Editor Blocks & Plugins.\n */\nconst { registerBlockType, unregisterBlockType } = wp.blocks;\nconst { registerPlugin, unregisterPlugin } = wp.plugins;\nconst { select, dispatch } = wp.data;\nconst { render } = wp.element;\n\nimport store from \"./store/player\";\n\nimport \"@/admin/blocks/shared/styles/gutenberg/index.scss\";\nimport ProUpgradeModal from \"./shared/ProUpgradeModal\";\n\n/**\n * No-op function for use as a default argument value.\n *\n * @returns null\n */\nconst noop = () => null;\n\n/**\n * Require a set of modules and configure them for hot module replacement.\n *\n * The first argument should be a function returning a `require.context()`\n * call. All modules loaded from this context are cached, and on each rebuild\n * the incoming updated modules are checked against the cache. Updated modules\n * which already exist in the cache are unregistered with the provided function,\n * then any incoming (new or updated) modules will be registered.\n *\n * @param {Function} getContext Execute and return a `require.context()` call.\n * @param {Function} register   Function to register accepted modules.\n * @param {Function} unregister Function to unregister replaced modules.\n * @param {Function} [before]   Function to run before updating moules.\n * @param {Function} [after]    Function to run after updating moules.\n */\nconst autoload = ({\n  getContext,\n  register,\n  unregister,\n  before = noop,\n  after = noop,\n}) => {\n  const cache = {};\n  const loadModules = () => {\n    before();\n\n    const context = getContext();\n    const changedNames = [];\n    context.keys().forEach((key) => {\n      const module = context(key);\n      if (module === cache[key]) {\n        // Module unchanged: no further action needed.\n        return;\n      }\n      if (cache[key]) {\n        // Module changed, and prior copy detected: unregister old module.\n        unregister(cache[key]);\n      }\n      // Register new module and update cache.\n      register(module);\n      changedNames.push(module.name);\n      cache[key] = module;\n    });\n\n    after(changedNames);\n\n    // Return the context for HMR initialization.\n    return context;\n  };\n\n  const context = loadModules();\n\n  if (module.hot) {\n    module.hot.accept(context.id, loadModules);\n  }\n};\n\n// Maintain the selected block ID across HMR updates.\nlet selectedBlockId = null;\nconst storeSelectedBlock = () => {\n  selectedBlockId = select(\"core/editor\").getSelectedBlockClientId();\n  dispatch(\"core/editor\").clearSelectedBlock();\n};\nconst refreshAllBlocks = (changedNames = []) => {\n  // Refresh all blocks by iteratively selecting each one.\n  select(\"core/editor\")\n    .getBlocks()\n    .forEach(({ name, clientId }) => {\n      if (changedNames.includes(name)) {\n        dispatch(\"core/editor\").selectBlock(clientId);\n      }\n    });\n  // Reselect whatever was selected in the beginning.\n  if (selectedBlockId) {\n    dispatch(\"core/editor\").selectBlock(selectedBlockId);\n  } else {\n    dispatch(\"core/editor\").clearSelectedBlock();\n  }\n  selectedBlockId = null;\n};\n\n// Load all block index files.\nautoload({\n  getContext: () => require.context(\"./blocks\", true, /index\\.js$/),\n  register: ({ name, options }) => {\n    if (prestoPlayer?.isPremium) {\n      registerBlockType(name, options);\n    } else if (!options.premium) {\n      registerBlockType(name, options);\n    }\n  },\n  unregister: ({ name }) => unregisterBlockType(name),\n  before: storeSelectedBlock,\n  after: refreshAllBlocks,\n});\n\n// Load all plugin files.\nautoload({\n  getContext: () => require.context(\"./plugins\", true, /index\\.js$/),\n  register: ({ name, options }) => registerPlugin(name, options),\n  unregister: ({ name }) => unregisterPlugin(name),\n});\n\njQuery(\"body\").append('<div id=\"presto-plugin-app\"></div>');\nrender(<ProUpgradeModal />, document.getElementById(\"presto-plugin-app\"));\n\n// fetch settings\ndispatch(\"presto-player/player\").fetchOptions();\n\nlet saving = false;\n// save the settings on post save, just in case they miss the button\nwp.data.subscribe(function () {\n  var isSavingPost = wp.data.select(\"core/editor\").isSavingPost();\n  var isAutosavingPost = wp.data.select(\"core/editor\").isAutosavingPost();\n\n  if (isSavingPost && !isAutosavingPost) {\n    if (saving) {\n      return;\n    }\n    saving = true;\n    let { brandingReducer } = store.getState();\n    dispatch(\"presto-player/player\")\n      .saveOptions({\n        branding: brandingReducer,\n      })\n      .then(() => {\n        saving = false;\n      });\n  }\n});\n","const helpers = {\n  setUrlPrivate: () => {\n    const separator = window.location.href.indexOf(\"?\") === -1 ? \"?\" : \"&\";\n    const newurl =\n      window.location.href + separator + \"presto_video_type=private\";\n    window.history.pushState({ path: newurl }, \"\", newurl);\n  },\n  setUrlPublic: () => {\n    const separator = window.location.href.indexOf(\"?\") === -1 ? \"?\" : \"&\";\n    const newurl =\n      window.location.href + separator + \"presto_video_type=public\";\n    window.history.pushState({ path: newurl }, \"\", newurl);\n  },\n  unsetUrlParams: () => {\n    let removed = removeURLParameters(window.location.href, [\n      \"presto_video_type\",\n    ]);\n    window.history.pushState({ path: removed }, \"\", removed);\n  },\n};\n\nfunction removeURLParameters(url, parameters = []) {\n  const parsedUrl = new URL(url);\n  parameters.forEach((param) => {\n    parsedUrl.searchParams.delete(param);\n  });\n\n  return parsedUrl.href;\n}\n\nexport default helpers;\n","/**\n * External dependencies\n */\n\nconst { noop } = lodash;\nimport classnames from \"classnames\";\nconst baseCurrentUrl = window.location.href;\nimport helpers from \"./helpers\";\n\n/**\n * WordPress dependencies\n */\nconst {\n  Button,\n  Notice,\n  Placeholder,\n  DropZone,\n  withFilters,\n  BaseControl,\n  ToggleControl,\n  FormFileUpload,\n} = wp.components;\n\nconst { __ } = wp.i18n;\nconst { useState, useEffect } = wp.element;\nconst { useSelect } = wp.data;\nconst deprecated = wp.deprecated;\nconst { MediaUpload, MediaUploadCheck, URLPopover } = wp.editor;\n// const { URLPopover } = wp.blockEditor;\n\nconst InsertFromURLPopover = ({ src, onChange, onSubmit, onClose }) => (\n  <URLPopover onClose={onClose}>\n    <form\n      className=\"block-editor-media-placeholder__url-input-form\"\n      onSubmit={onSubmit}\n    >\n      <input\n        data-cy=\"url-input\"\n        className=\"block-editor-media-placeholder__url-input-field\"\n        type=\"url\"\n        aria-label={__(\"URL\", \"presto-player\")}\n        placeholder={__(\n          \"Paste or type a Youtube, Vimeo or .mp4 video URL\",\n          \"presto-player\"\n        )}\n        onChange={onChange}\n        value={src}\n      />\n      <Button\n        data-cy=\"url-submit\"\n        className=\"block-editor-media-placeholder__url-input-submit-button\"\n        icon={\"editor-break\"}\n        label={__(\"Apply\", \"presto-player\")}\n        type=\"submit\"\n      />\n    </form>\n  </URLPopover>\n);\n\nexport function MediaPlaceholder({\n  value = {},\n  allowedTypes = [],\n  className,\n  icon,\n  url = true,\n  labels = {},\n  mediaPreview,\n  notices,\n  isAppender,\n  isPrivate,\n  addToGallery,\n  onSelect,\n  onCancel,\n  onSelectURL,\n  onDoubleClick,\n  children,\n  allowURLs,\n}) {\n  const mediaUpload = useSelect((select) => {\n    const { getSettings } = select(\"core/block-editor\");\n    return getSettings().mediaUpload;\n  }, []);\n\n  const [src, setSrc] = useState(\"\");\n  const [isURLInputVisible, setIsURLInputVisible] = useState(false);\n\n  useEffect(() => {\n    setSrc(value?.src ?? \"\");\n  }, [value]);\n\n  const onChangeSrc = (event) => {\n    setSrc(event.target.value);\n  };\n\n  const openURLInput = () => {\n    setIsURLInputVisible(true);\n  };\n\n  const closeURLInput = () => {\n    setIsURLInputVisible(false);\n  };\n\n  const onSubmitSrc = (event) => {\n    event.preventDefault();\n    if (src && onSelectURL) {\n      onSelectURL(src);\n      closeURLInput();\n    }\n  };\n\n  const renderPlaceholder = (content, onClick) => {\n    let { instructions, title } = labels;\n\n    if (!mediaUpload && !onSelectURL) {\n      instructions = __(\n        \"To edit this block, you need permission to upload media.\",\n        \"presto-player\"\n      );\n    }\n\n    // set class names\n    const placeholderClassName = classnames(\n      \"block-editor-media-placeholder\",\n      className,\n      {\n        \"is-appender\": isAppender,\n      }\n    );\n\n    return (\n      <Placeholder\n        icon={icon}\n        label={title}\n        instructions={instructions}\n        className={placeholderClassName}\n        notices={notices}\n        onClick={onClick}\n        onDoubleClick={onDoubleClick}\n        preview={mediaPreview}\n      >\n        {children}\n        {content}\n      </Placeholder>\n    );\n  };\n\n  const renderCancelLink = () => {\n    return (\n      onCancel && (\n        <Button\n          className=\"block-editor-media-placeholder__cancel-button\"\n          title={__(\"Cancel\", \"presto-player\")}\n          isLink\n          onClick={onCancel}\n        >\n          {__(\"Cancel\", \"presto-player\")}\n        </Button>\n      )\n    );\n  };\n\n  const renderUrlSelectionUI = () => {\n    return (\n      onSelectURL && (\n        <div className=\"block-editor-media-placeholder__url-input-container\">\n          {url && (\n            <Button\n              data-cy=\"video-url\"\n              className=\"block-editor-media-placeholder__button\"\n              onClick={openURLInput}\n              isPressed={isURLInputVisible}\n              isTertiary\n            >\n              {__(\"Video URL\", \"presto-player\")}\n            </Button>\n          )}\n          {isURLInputVisible && (\n            <InsertFromURLPopover\n              src={src}\n              onChange={onChangeSrc}\n              onSubmit={onSubmitSrc}\n              onClose={closeURLInput}\n            />\n          )}\n        </div>\n      )\n    );\n  };\n\n  const renderMediaUploadChecked = () => {\n    const mediaLibraryButton = (\n      <MediaUpload\n        title={\n          isPrivate\n            ? __(\"Select or Upload Private Video\", \"presto-player\")\n            : __(\"Select or Upload Video\", \"presto-player\")\n        }\n        addToGallery={addToGallery}\n        gallery={false}\n        multiple={false}\n        onSelect={(event) => {\n          // set private/public url params\n          helpers.unsetUrlParams();\n          onSelect(event);\n        }}\n        onClose={() => {\n          // unset private/public url params\n          helpers.unsetUrlParams();\n        }}\n        allowedTypes={allowedTypes}\n        value={Array.isArray(value) ? value.map(({ id }) => id) : value.id}\n        render={({ open }) => {\n          return (\n            <Button\n              data-cy=\"add-video\"\n              isPrimary\n              onClick={(event) => {\n                event.stopPropagation();\n                helpers.unsetUrlParams();\n                if (isPrivate) {\n                  helpers.setUrlPrivate(baseCurrentUrl);\n                } else {\n                  helpers.setUrlPublic(baseCurrentUrl);\n                }\n                open();\n              }}\n            >\n              {isPrivate\n                ? __(\"Add/Select Private Video\", \"presto-player\")\n                : __(\"Add/Select Video\", \"presto-player\")}\n            </Button>\n          );\n        }}\n      />\n    );\n\n    if (mediaUpload) {\n      const content = (\n        <>\n          {mediaLibraryButton}\n          {!!allowURLs && renderUrlSelectionUI()}\n          {renderCancelLink()}\n        </>\n      );\n      return renderPlaceholder(content);\n    }\n\n    return renderPlaceholder(mediaLibraryButton);\n  };\n\n  return (\n    <MediaUploadCheck fallback={renderPlaceholder(renderUrlSelectionUI())}>\n      {renderMediaUploadChecked()}\n    </MediaUploadCheck>\n  );\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/master/packages/block-editor/src/components/media-placeholder/README.md\n */\nexport default withFilters(\"editor.MediaPlaceholder\")(MediaPlaceholder);\n","const { __ } = wp.i18n;\nconst { withNotices, BaseControl, ToggleControl, Notice } = wp.components;\nconst { dispatch } = wp.data;\n\nimport MediaPlaceholder from \"@/admin/blocks/shared/placeholder\";\nimport ProBadge from \"@/admin/blocks/shared/components/ProBadge\";\n\n//constants\nconst ALLOWED_MEDIA_TYPES = [\"video\"];\n\nexport default withNotices(\n  ({\n    noticeUI,\n    onSelect,\n    children,\n    onSelectURL,\n    onUploadError,\n    setAttributes,\n    attributes,\n  }) => {\n    const { visibility } = attributes;\n    const isPrivate = visibility === \"private\";\n\n    return (\n      <div>\n        <MediaPlaceholder\n          icon={\n            isPrivate ? (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"presto-block-icon\"\n              >\n                <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n                <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n              </svg>\n            ) : (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"presto-block-icon\"\n              >\n                <polygon points=\"23 7 16 12 23 17 23 7\"></polygon>\n                <rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\n              </svg>\n            )\n          }\n          labels={{\n            title: isPrivate\n              ? __(\"Presto Private Video\", \"presto-player\")\n              : __(\"Presto Video\", \"presto-player\"),\n            instructions: isPrivate\n              ? __(\n                  \"Upload a video file, or pick one from your media library.\",\n                  \"presto-player\"\n                )\n              : __(\n                  \"Upload a video file, pick one from your media library, or add one with a URL.\",\n                  \"presto-player\"\n                ),\n          }}\n          onSelect={onSelect}\n          onSelectURL={onSelectURL}\n          switcher={true}\n          isPrivate={isPrivate}\n          allowURLs={!isPrivate}\n          accept=\"video/*\"\n          setAttributes={setAttributes}\n          allowedTypes={ALLOWED_MEDIA_TYPES}\n          value={attributes}\n          notices={noticeUI}\n          onError={onUploadError}\n        >\n          <div style={{ width: \"100%\" }}>\n            <BaseControl className=\"presto-player__placeholder-control\">\n              <ToggleControl\n                label={\n                  <div>\n                    {__(\"Make Private\", \"presto-player\")}{\" \"}\n                    {!prestoPlayer?.isPremium && <ProBadge />}\n                  </div>\n                }\n                help={\n                  isPrivate\n                    ? __(\n                        \"This video is only accessible to those who are logged in.\",\n                        \"presto-player\"\n                      )\n                    : __(\n                        \"This video is currently accessible to everyone.\",\n                        \"presto-player\"\n                      )\n                }\n                checked={isPrivate}\n                onChange={(isPrivate) => {\n                  if (!prestoPlayer?.isPremium) {\n                    dispatch(\"presto-player/player\").setProModal(true);\n                    return;\n                  }\n                  setAttributes({\n                    visibility: isPrivate ? \"private\" : \"public\",\n                  });\n                }}\n              />\n            </BaseControl>\n\n            {!!children && <div style={{ width: \"100%\" }}>{children}</div>}\n\n            {!!isPrivate && (\n              <Notice status=\"warning\" isDismissible={false}>\n                <div>\n                  <div>\n                    <strong>{__(\"Note\", \"presto-player\")}</strong>\n                  </div>\n                  {__(\n                    \"Private videos use php to stream your video. Keep in mind this will use up disk space and bandwidth so it may not be an appropriate choice for some hosts.\",\n                    \"presto-player\"\n                  )}\n                </div>\n              </Notice>\n            )}\n          </div>\n        </MediaPlaceholder>\n      </div>\n    );\n  }\n);\n","/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\nconst { getBlobByURL, isBlobURL } = wp.blob;\nconst {\n  Button,\n  Disabled,\n  Toolbar,\n  Notice,\n  withNotices,\n  Placeholder,\n  Spinner,\n} = wp.components;\n\nconst { BlockControls, InspectorControls } = wp.editor;\nconst { compose } = wp.compose;\nconst { useEffect, useState } = wp.element;\nconst { dispatch } = wp.data;\nconst { createBlock } = wp.blocks;\n\nimport { isHLS } from \"@/shared/util\";\n\n// hocs\nimport withPlayerEdit from \"../with-player-edit\";\nimport withPlayerData from \"../with-player-data\";\n\n/**\n * Internal dependencies\n */\nimport HostedPlaceholder from \"./HostedPlaceholder\";\nimport TracksEditor from \"@/admin/blocks/shared/tracks/TracksEditor\";\nimport BlockInspectorControls from \"@/admin/blocks/shared/BlockInspectorControls\";\nimport Player from \"@/admin/blocks/shared/Player\";\n\nimport { determineVideoUrlType } from \"@/shared/util.js\";\n\n//constants\nconst ALLOWED_MEDIA_TYPES = [\"video\"];\n\nexport default compose([withPlayerData(), withPlayerEdit()])(\n  withNotices(\n    ({\n      noticeUI,\n      attributes,\n      setAttributes,\n      noticeOperations,\n      branding,\n      loading,\n      presetData,\n      createVideo,\n      onRemoveSrc,\n      renderKey,\n      lockSave,\n      unlockSave,\n      clientId,\n      defaultPreset,\n    }) => {\n      const { poster, src, id, tracks } = attributes;\n      const [upgradeNotice, setUpgradeNotice] = useState(\"\");\n\n      const showNotice = (e) => {\n        noticeOperations.removeAllNotices();\n        noticeOperations.createErrorNotice(e?.message);\n      };\n\n      useEffect(() => {\n        if (!id && isBlobURL(src)) {\n          const file = getBlobByURL(src);\n          if (file) {\n            mediaUpload({\n              filesList: [file],\n              onFileChange: ([{ url }]) => {\n                setAttributes({ src: url });\n              },\n              onError: (message) => {\n                noticeOperations.createErrorNotice(message);\n              },\n              allowedTypes: ALLOWED_MEDIA_TYPES,\n            });\n          }\n        }\n      }, []);\n\n      function onSelectVideo(media) {\n        if (!media || !media.url) {\n          // in this case there was an error\n          // previous attributes should be removed\n          // because they may be temporary blob urls\n          setAttributes({ src: undefined, id: undefined });\n          return;\n        }\n        // sets the block's attribute and updates the edit component from the\n        // selected media\n        setAttributes({\n          src: media.url,\n          preset: defaultPreset?.id,\n          attachment_id: media.id,\n        });\n\n        lockSave();\n        createVideo({\n          src: media.url,\n          type: \"attachment\",\n          attachment_id: media.id,\n        })\n          .catch((e) => {\n            setAttributes({ src: \"\" });\n            showNotice(e);\n          })\n          .finally(unlockSave);\n      }\n\n      function onSelectURL(newSrc) {\n        setAttributes({ attachment_id: null });\n        if (newSrc && isHLS(newSrc)) {\n          if (!prestoPlayer?.isPremium) {\n            setUpgradeNotice(\n              <Notice status=\"info\" onRemove={() => setUpgradeNotice(\"\")}>\n                <div>\n                  <div>\n                    <strong>\n                      {__(\n                        \"Get HLS Streaming and more with Presto Player Pro!\",\n                        \"presto-player\"\n                      )}\n                    </strong>\n                  </div>\n\n                  {__(\n                    \"Stream HLS links and more with Presto Player Pro.\",\n                    \"presto-player\"\n                  )}\n                  <div\n                    style={{\n                      marginTop: \"1em\",\n                    }}\n                  >\n                    <Button isPrimary>{__(\"Upgrade\", \"presto-player\")}</Button>\n                  </div>\n                </div>\n              </Notice>\n            );\n            return;\n          }\n        }\n\n        if (newSrc !== src) {\n          const { type } = determineVideoUrlType(newSrc);\n          if (type === \"youtube\") {\n            const youtubeBlock = createBlock(\"presto-player/youtube\", {\n              src: newSrc,\n            });\n            dispatch(\"core/editor\").replaceBlock(clientId, youtubeBlock);\n            return;\n          }\n\n          if (type === \"vimeo\") {\n            const vimeoBlock = createBlock(\"presto-player/vimeo\", {\n              src: newSrc,\n            });\n            dispatch(\"core/editor\").replaceBlock(clientId, vimeoBlock);\n            return;\n          }\n\n          setAttributes({ src: newSrc, attachmend_id: null });\n          setAttributes({ preset: defaultPreset?.id });\n\n          lockSave();\n          createVideo({ src: newSrc, type: \"link\" })\n            .catch((e) => {\n              setAttributes({ src: \"\" });\n              showNotice(e);\n            })\n            .finally(unlockSave);\n        }\n      }\n\n      function onUploadError(message) {\n        noticeOperations.removeAllNotices();\n        noticeOperations.createErrorNotice(message);\n      }\n\n      if (!src) {\n        return (\n          <div>\n            <HostedPlaceholder\n              onSelect={onSelectVideo}\n              onSelectURL={onSelectURL}\n              setAttributes={setAttributes}\n              attributes={attributes}\n              onError={onUploadError}\n            >\n              {upgradeNotice}\n            </HostedPlaceholder>\n          </div>\n        );\n      }\n\n      // loading presets still\n      if (loading || !id) {\n        return (\n          <Placeholder className=\"presto-player__placeholder is-loading\">\n            <Spinner />\n          </Placeholder>\n        );\n      }\n\n      return (\n        <div>\n          <BlockControls>\n            <TracksEditor\n              tracks={tracks}\n              onChange={(newTracks) => {\n                setAttributes({ tracks: newTracks });\n              }}\n            />\n            <Toolbar>\n              <Button onClick={() => onRemoveSrc()}>\n                {__(\"Replace\", \"presto-player\")}\n              </Button>\n            </Toolbar>\n          </BlockControls>\n\n          <InspectorControls>\n            <BlockInspectorControls\n              setAttributes={setAttributes}\n              attributes={attributes}\n            />\n          </InspectorControls>\n\n          <figure>\n            {/*\n            Disable the video tag so the user clicking on it won't play the\n            video when the controls are enabled.\n            */}\n            <Disabled>\n              <Player\n                poster={poster}\n                src={src}\n                id={id}\n                type={\"hosted\"}\n                attributes={attributes}\n                setAttributes={setAttributes}\n                preset={presetData}\n                branding={branding}\n                key={renderKey}\n              />\n            </Disabled>\n          </figure>\n        </div>\n      );\n    }\n  )\n);\n","const { __ } = wp.i18n;\nimport edit from \"./edit\";\nimport blockOptions from \"../block-options\";\n\n/**\n * Block Name\n */\nexport const name = \"presto-player/self-hosted\";\n\n/**\n * Block Options\n */\nexport const options = {\n  ...blockOptions,\n\n  title: __(\"Presto Video\", \"presto-player\"),\n\n  description: __(\"Presto Self-hosted video block.\", \"presto-player\"),\n\n  variations: [\n    {\n      name: \"public\",\n      isDefault: true,\n      title: __(\"Presto Video\", \"presto-player\"),\n      description: __(\"Presto Self-hosted video block.\", \"presto-player\"),\n      attributes: { visibility: \"public\" },\n    },\n    ...(prestoPlayer?.isPremium\n      ? [\n          {\n            name: \"private\",\n            title: __(\"Private Private Video\", \"presto-player\"),\n            icon: (\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"presto-block-icon\"\n              >\n                <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n                <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n              </svg>\n            ),\n            description: __(\n              \"Private video self-hosted block.\",\n              \"presto-player\"\n            ),\n            attributes: { visibility: \"private\" },\n          },\n        ]\n      : []),\n  ],\n\n  icon: (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className=\"presto-block-icon\"\n    >\n      <polygon points=\"23 7 16 12 23 17 23 7\"></polygon>\n      <rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\n    </svg>\n  ),\n\n  edit,\n};\n","/**\n * External dependencies\n */\nimport classnames from \"classnames\";\n\n/**\n * WordPress dependencies\n */\nconst { useInstanceId } = wp.compose;\nconst { __ } = wp.i18n;\nconst { VisuallyHidden, Button, Icon } = wp.components;\nconst { useRef } = wp.element;\n\nfunction InserterSearchForm({ className, onChange, value, placeholder }) {\n  const instanceId = useInstanceId(InserterSearchForm);\n  const searchInput = useRef();\n\n  return (\n    <div className={\"block-editor-inserter__search\"} style={{ padding: 0 }}>\n      <VisuallyHidden\n        as=\"label\"\n        htmlFor={`block-editor-inserter__search-${instanceId}`}\n      >\n        {placeholder}\n      </VisuallyHidden>\n      <input\n        ref={searchInput}\n        className=\"block-editor-inserter__search-input\"\n        id={`block-editor-inserter__search-${instanceId}`}\n        type=\"search\"\n        placeholder={placeholder}\n        onChange={(event) => onChange(event.target.value)}\n        autoComplete=\"off\"\n        value={value || \"\"}\n      />\n      <div className=\"block-editor-inserter__search-icon\">\n        {!!value && (\n          <Button\n            icon={\"close-small\"}\n            label={__(\"Reset search\", \"presto-player\")}\n            onClick={() => {\n              onChange(\"\");\n              searchInput.current.focus();\n            }}\n          />\n        )}\n        {!value && <Icon icon={\"search\"} />}\n      </div>\n    </div>\n  );\n}\n\nexport default InserterSearchForm;\n","export default ({ icon, title, id, selectBlock, i }) => {\n  return (\n    <button\n      type=\"button\"\n      id={`video-${id}`}\n      tabIndex={i}\n      onClick={selectBlock}\n      role=\"option\"\n      className=\"components-button block-editor-block-types-list__item editor-block-list-item-kadence-spacer\"\n    >\n      <span className=\"block-editor-block-types-list__item-icon\">\n        <span className=\"block-editor-block-icon has-colors\">{icon}</span>\n      </span>\n      <span className=\"block-editor-block-types-list__item-title\">{title}</span>\n    </button>\n  );\n};\n","const { __ } = wp.i18n;\n\nconst { Panel, PanelBody, Button, Spinner } = wp.components;\nconst { PluginSidebar, PluginSidebarMoreMenuItem } = wp.editPost;\nconst { Fragment, useEffect, useState, useCallback } = wp.element;\nconst { dispatch, useSelect } = wp.data;\nconst { createBlock, getBlockType } = wp.blocks;\nconst { apiFetch } = wp;\n\nimport SearchForm from \"./SearchForm\";\nimport Video from \"./Video\";\nconst { parse } = wp.blockSerializationDefaultParser;\n\n//create your forceUpdate hook\nfunction useForceUpdate() {\n  const [value, setValue] = useState(0); // integer state\n  return () => setValue((value) => value + 1); // update the state to force render\n}\n\nexport default () => {\n  const forceUpdate = useForceUpdate();\n  const icon = (\n    <svg viewBox=\"0 0 35 34\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g clip-path=\"url(#clip0)\">\n        <path\n          d=\"M23.3722 16.9766L33.2059 11.2991L33.2059 22.6541L23.3722 16.9766Z\"\n          fillOpacity=\"0.7\"\n        />\n        <path\n          d=\"M23.3745 5.6227L33.2082 11.3002L23.3745 16.9776L23.3745 5.6227Z\"\n          fillOpacity=\"0.75\"\n        />\n        <path\n          d=\"M23.3745 5.62242L23.3745 16.9773L13.5409 11.2999L23.3745 5.62242Z\"\n          fillOpacity=\"0.8\"\n        />\n        <path\n          d=\"M23.399 5.613L13.5654 11.2905L13.5654 -0.0644536L23.399 5.613Z\"\n          fillOpacity=\"0.85\"\n        />\n        <path\n          d=\"M13.5699 11.3038L13.5699 22.6587L3.73623 16.9813L13.5699 11.3038Z\"\n          fillOpacity=\"0.8\"\n        />\n        <path\n          d=\"M13.5699 -0.0245525L13.5699 11.3304L3.73623 5.6529L13.5699 -0.0245525Z\"\n          fillOpacity=\"0.9\"\n        />\n        <path\n          d=\"M13.5699 22.6451L13.5699 34L3.73623 28.3226L13.5699 22.6451Z\"\n          fillOpacity=\"0.7\"\n        />\n        <path\n          d=\"M23.3745 16.9774L33.2082 22.6549L23.3745 28.3323L23.3745 16.9774Z\"\n          fillOpacity=\"0.65\"\n        />\n        <path\n          d=\"M3.73774 16.9774L13.5714 22.6549L3.73774 28.3323L3.73774 16.9774Z\"\n          fillOpacity=\"0.75\"\n        />\n        <path\n          d=\"M3.73774 5.63149L13.5714 11.3089L3.73774 16.9864L3.73774 5.63149Z\"\n          fillOpacity=\"0.85\"\n        />\n        <path\n          d=\"M23.3745 16.9772L23.3745 28.3321L13.5409 22.6546L23.3745 16.9772Z\"\n          fillOpacity=\"0.6\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0\">\n          <rect width=\"35\" height=\"34\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n\n  const [hasMore, setHasMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // search\n  const [search, setSearch] = useState(\"\");\n  const searchFor = (term) => {\n    setPage(1);\n    setSearch(term);\n  };\n  const debounceOnSearch = useCallback(\n    _.debounce((term) => {\n      doFetch({ replace: true, term });\n    }, 250),\n    []\n  );\n  useEffect(() => {\n    debounceOnSearch(search);\n  }, [search]);\n\n  // fetch\n  useEffect(() => {\n    setIsLoading(true);\n    doFetch({ replace: false });\n  }, [page]);\n\n  // get from store\n  const { videos, total_pages, hasResolved } = useSelect(\n    (select) => {\n      return select(\"presto-player/player\").getReusableVideos();\n    },\n    [search, page]\n  );\n\n  const doFetch = async ({ replace, term }) => {\n    let res = await apiFetch({\n      path: wp.url.addQueryArgs(`wp/v2/presto-videos`, {\n        search: term,\n        page,\n        per_page: 10,\n      }),\n      parse: false,\n    });\n    let videos = await res.json();\n    const total = res.headers && parseInt(res.headers.get(\"X-WP-Total\"));\n    const total_pages =\n      res.headers && parseInt(res.headers.get(\"X-WP-TotalPages\"));\n\n    if (!replace) {\n      dispatch(\"presto-player/player\").appendVideos(videos);\n      dispatch(\"presto-player/player\").updateVideos({\n        hasResolved: true,\n        total,\n        total_pages,\n      });\n    } else {\n      dispatch(\"presto-player/player\").updateVideos({\n        videos,\n        hasResolved: true,\n        total,\n        total_pages,\n      });\n    }\n    forceUpdate();\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    setHasMore(page < total_pages);\n  }, [page, total_pages]);\n\n  const nextPage = () => {\n    let newPage = page + 1;\n    newPage = newPage > total_pages ? total_pages : newPage;\n    setPage(newPage);\n  };\n\n  const getIcon = (video) => {\n    const blocks = parse(video?.content?.raw);\n    if (blocks?.[0]?.innerBlocks?.[0]?.blockName) {\n      const type = getBlockType(blocks?.[0]?.innerBlocks?.[0]?.blockName);\n      return type?.icon?.src ? type.icon.src : \"\";\n    }\n    return \"\";\n  };\n\n  const emptyPlaceholder = () => {\n    if (videos.length) {\n      return;\n    }\n\n    if (search) {\n      return <p>{__(\"No videos found.\", \"presto-player\")}</p>;\n    }\n\n    return (\n      <Button href=\"post-new.php?post_type=pp_video_block\" isSecondary>\n        {__(\"Create A Reusable Video\", \"presto-player\")}\n      </Button>\n    );\n  };\n\n  const videosPanel = () => {\n    if (!hasResolved) {\n      return <Spinner />;\n    }\n\n    return (\n      <div\n        role=\"listbox\"\n        className=\"block-editor-block-types-list presto-player__panel-grid-list\"\n        aria-label={__(\"Media Hub\", \"presto-player\")}\n      >\n        {videos.length\n          ? videos.map((video, i) => {\n              return (\n                <Video\n                  selectBlock={(e) => {\n                    dispatch(\"core/editor\").insertBlock(\n                      createBlock(\"presto-player/reusable-display\", {\n                        id: video?.id,\n                      })\n                    );\n                  }}\n                  icon={getIcon(video)}\n                  title={video?.title?.raw || \"Untitled\"}\n                  id={video?.id}\n                  i={i}\n                  key={video?.id}\n                />\n              );\n            })\n          : emptyPlaceholder()}\n        {!search && hasMore && videos.length ? (\n          <div\n            style={{\n              \"margin-top\": \"20px\",\n              \"text-align\": \"center\",\n              display: \"flex\",\n              \"justify-content\": \"center\",\n              width: \"100%\",\n            }}\n          >\n            <Button isSecondary isSmall onClick={nextPage} isBusy={isLoading}>\n              Load More\n            </Button>\n          </div>\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <Fragment>\n      <PluginSidebarMoreMenuItem target=\"presto-player-sidebar\" icon={icon}>\n        {__(\"Presto Player\", \"presto-player\")}\n      </PluginSidebarMoreMenuItem>\n      <PluginSidebar\n        name=\"presto-player-sidebar\"\n        title={__(\"Presto Player\", \"presto-player\")}\n        icon={icon}\n      >\n        <PanelBody>\n          <h2 style={{ marginTop: 0 }}>{__(\"Media Hub\", \"presto-player\")}</h2>\n          <SearchForm\n            placeholder=\"Search media...\"\n            value={search}\n            onChange={(search) => searchFor(search)}\n          />\n          <div className=\"block-editor-inserter__panel-content\">\n            {videosPanel()}\n          </div>\n        </PanelBody>\n      </PluginSidebar>\n    </Fragment>\n  );\n};\n","import render from \"./render\";\n\n/**\n * Block Name\n */\nexport const name = \"presto-player\";\n\nexport const options = {\n  render,\n};\n","// In your application's entrypoint\nconst { __ } = wp.i18n;\nconst { InnerBlocks, useBlockProps } = wp.blockEditor;\nconst { BlockControls, InspectorControls } = wp.editor;\nconst {\n  Disabled,\n  Toolbar,\n  Button,\n  PanelBody,\n  Panel,\n  Placeholder,\n  Spinner,\n} = wp.components;\nconst { useSelect, dispatch } = wp.data;\nconst { useState, useEffect } = wp.element;\nconst { parse } = wp.blockSerializationDefaultParser;\n\nexport default ({ attributes, isSelected, clientId }) => {\n  const { id } = attributes;\n  const blockProps = useBlockProps();\n  const [hasResolved, setHasResolved] = useState(false);\n  const [block, setBlock] = useState([]);\n  const [link, setLink] = useState(\"\");\n\n  const video = useSelect((select) => {\n    if (!id) {\n      return;\n    }\n    return select(\"presto-player/player\").getReusableVideo(id);\n  });\n\n  useEffect(() => {\n    wp.data.dispatch(\"core/block-editor\").selectBlock(clientId);\n  }, [hasResolved]);\n\n  // lock inner blocks\n  const innerBlocks = useSelect((select) => {\n    return select(\"core/editor\").getBlocksByClientId(clientId)[0].innerBlocks;\n  });\n  if (innerBlocks && video?.id) {\n    innerBlocks.forEach(function (block) {\n      dispatch(\"core/editor\").updateBlockAttributes(block.clientId, {\n        selectionOverrideClientId: clientId,\n      });\n    });\n  }\n\n  useEffect(() => {\n    if (video.id) {\n      setHasResolved(true);\n      // set inner block\n      const blocks = parse(video?.content?.raw);\n      setBlock([\n        blocks?.[0]?.innerBlocks[0].blockName,\n        blocks?.[0]?.innerBlocks[0].attrs,\n      ]);\n\n      setLink(`post.php?post=${video.id}&action=edit`);\n    }\n  }, [video]);\n\n  if (!hasResolved) {\n    return (\n      <div {...blockProps}>\n        <Placeholder>\n          <Spinner />\n        </Placeholder>\n      </div>\n    );\n  }\n\n  if (!block) {\n    return;\n  }\n\n  return (\n    <>\n      <InspectorControls>\n        <PanelBody>\n          <p>\n            This is a reusable video that you can edit once and place anywhere.\n          </p>\n          <Button isSecondary href={\"edit.php?post_type=pp_video_block\"}>\n            {__(\"Manage Media Hub\", \"presto-player\")}\n          </Button>\n        </PanelBody>\n      </InspectorControls>\n      <div className={\"block-library-block__reusable-block-container\"}>\n        <div {...blockProps}>\n          {isSelected && (\n            <div className=\"reusable-block-edit-panel\">\n              <b className=\"reusable-block-edit-panel__info\">\n                {video?.title?.raw}\n              </b>\n              <Button\n                isSecondary\n                href={link}\n                className=\"reusable-block-edit-panel__button\"\n              >\n                {__(\"Edit Reusable Video\", \"presto-player\")}\n              </Button>\n            </div>\n          )}\n          <Disabled>\n            <InnerBlocks\n              template={[block]}\n              templateLock={\"all\"}\n              renderAppender={false}\n            />\n          </Disabled>\n        </div>\n      </div>\n    </>\n  );\n};\n","// In your application's entrypoint\nconst { InnerBlocks, useBlockProps } = wp.blockEditor;\nimport edit from \"./edit\";\n\n/**\n * Block Name\n */\nexport const name = \"presto-player/reusable-display\";\n\n/**\n * Block Options\n */\nexport const options = {\n  title: \"Reusable Block Display\",\n\n  category: \"presto\",\n\n  attributes: {\n    id: Number,\n  },\n\n  supports: {\n    align: true,\n    inserter: false,\n    reusable: false,\n    html: false,\n  },\n\n  icon: (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className=\"presto-block-icon\"\n    >\n      <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n      <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\"></line>\n      <path d=\"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z\"></path>\n    </svg>\n  ),\n\n  edit,\n\n  // dynamic save function\n  save: function () {\n    return null;\n  },\n};\n","/**\n * WordPress dependencies\n */\nconst {\n  Button,\n  Disabled,\n  Toolbar,\n  Placeholder,\n  Spinner,\n  withNotices,\n} = wp.components;\nconst { BlockControls, InspectorControls } = wp.editor;\nconst { useEffect } = wp.element;\nconst { __ } = wp.i18n;\nconst { compose } = wp.compose;\n\n// hocs\nimport withPlayerEdit from \"../with-player-edit\";\nimport withPlayerData from \"../with-player-data\";\n\n/**\n * Internal dependencies\n */\n// import TracksEditor from \"@/admin/blocks/shared/tracks/TracksEditor\";\nimport BlockInspectorControls from \"@/admin/blocks/shared/BlockInspectorControls\";\nimport Player from \"@/admin/blocks/shared/Player\";\nimport LinkPlaceholder from \"@/admin/blocks/shared/LinkPlaceholder\";\nimport { getVimeoId } from \"@/shared/util.js\";\nimport { usePrevious } from \"@/admin/blocks/util\";\n\nexport default compose([withPlayerData(), withPlayerEdit()])(\n  withNotices(\n    ({\n      attributes,\n      setAttributes,\n      branding,\n      noticeOperations,\n      loading,\n      createVideo,\n      lockSave,\n      unlockSave,\n      presetData,\n      onRemoveSrc,\n      renderKey,\n    }) => {\n      const { poster, src, id } = attributes;\n\n      const showNotice = (e) => {\n        noticeOperations.removeAllNotices();\n        noticeOperations.createErrorNotice(e?.message);\n      };\n\n      // make sure to save/get attachment id if src is set\n      const prevSrc = usePrevious(src);\n      useEffect(() => {\n        // reset id only if we're changing the src\n        if (prevSrc) {\n          setAttributes({ id: 0 });\n        }\n        let video_id = getVimeoId(src);\n        setAttributes({ video_id });\n\n        lockSave();\n        createVideo({ src, external_id: video_id, type: \"vimeo\" })\n          .catch((e) => {\n            setAttributes({ src: \"\" });\n            showNotice(e);\n          })\n          .finally(unlockSave);\n      }, [src]);\n\n      // handle url update\n      function onSelectURL(newSrc) {\n        if (newSrc !== src) {\n          setAttributes({ src: newSrc });\n        }\n      }\n\n      if (!src) {\n        return (\n          <div>\n            <LinkPlaceholder\n              icon={\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"24\"\n                  height=\"24\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  className=\"presto-block-icon\"\n                >\n                  <path d=\"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z\" />\n                </svg>\n              }\n              label={__(\"Presto Vimeo Video\", \"presto-player\")}\n              instructions={__(\"Enter Vimeo Video URL\", \"presto-player\")}\n              placeholder={__(\"Vimeo URL\", \"presto-player\")}\n              attributes={attributes}\n              setAttributes={setAttributes}\n              onSelectURL={onSelectURL}\n            />\n          </div>\n        );\n      }\n\n      // loading presets or id still\n      if (loading || !id) {\n        return (\n          <Placeholder className=\"presto-player__placeholder is-loading\">\n            <Spinner />\n          </Placeholder>\n        );\n      }\n\n      return (\n        <>\n          <BlockControls>\n            <Toolbar>\n              {/* <TracksEditor\n              tracks={tracks}\n              onChange={(newTracks) => {\n                setAttributes({ tracks: newTracks });\n              }}\n            /> */}\n              <Button onClick={() => onRemoveSrc()}>\n                {__(\"Replace\", \"presto-player\")}\n              </Button>\n            </Toolbar>\n          </BlockControls>\n\n          <InspectorControls>\n            <BlockInspectorControls\n              setAttributes={setAttributes}\n              attributes={attributes}\n            />\n          </InspectorControls>\n\n          <figure>\n            {/*\n            Disable the video tag so the user clicking on it won't play the\n            video when the controls are enabled.\n            */}\n            <Disabled>\n              <Player\n                poster={poster}\n                src={src}\n                type=\"vimeo\"\n                id={id}\n                attributes={attributes}\n                setAttributes={setAttributes}\n                preset={presetData}\n                branding={branding}\n                key={renderKey}\n              />\n            </Disabled>\n          </figure>\n        </>\n      );\n    }\n  )\n);\n","const { __ } = wp.i18n;\nimport edit from \"./edit\";\nimport blockOptions from \"../block-options\";\n\n/**\n * Block Name\n */\nexport const name = \"presto-player/vimeo\";\n\n/**\n * Block Options\n */\nexport const options = {\n  ...blockOptions,\n\n  attributes: {\n    ...blockOptions.attributes,\n    video_id: {\n      type: String,\n    },\n  },\n\n  title: __(\"Presto Vimeo Video\", \"presto-player\"),\n\n  description: __(\n    \"A vimeo video wrapped in an awesome player.\",\n    \"presto-player\"\n  ),\n\n  icon: (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className=\"presto-block-icon\"\n    >\n      <path d=\"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z\" />\n    </svg>\n  ),\n\n  edit,\n};\n","/**\n * WordPress dependencies\n */\nconst {\n  Button,\n  Disabled,\n  Toolbar,\n  Placeholder,\n  Spinner,\n  withNotices,\n} = wp.components;\nconst { BlockControls, InspectorControls } = wp.editor;\nconst { useEffect } = wp.element;\nconst { __ } = wp.i18n;\nconst { compose } = wp.compose;\n\n// hocs\nimport withPlayerEdit from \"../with-player-edit\";\nimport withPlayerData from \"../with-player-data\";\n\n/**\n * Internal dependencies\n */\nimport BlockInspectorControls from \"@/admin/blocks/shared/BlockInspectorControls\";\nimport Player from \"@/admin/blocks/shared/Player\";\nimport LinkPlaceholder from \"@/admin/blocks/shared/LinkPlaceholder\";\nimport { getYoutubeId } from \"@/shared/util.js\";\nimport { usePrevious } from \"@/admin/blocks/util\";\n\nexport default compose([withPlayerData(), withPlayerEdit()])(\n  withNotices(\n    ({\n      attributes,\n      setAttributes,\n      noticeOperations,\n      branding,\n      createVideo,\n      loading,\n      presetData,\n      onRemoveSrc,\n      lockSave,\n      unlockSave,\n      renderKey,\n    }) => {\n      const { poster, src, id } = attributes;\n\n      const showNotice = (e) => {\n        noticeOperations.removeAllNotices();\n        noticeOperations.createErrorNotice(e?.message);\n      };\n\n      // make sure to save/get attachment id if src is set\n      const prevSrc = usePrevious(src);\n      useEffect(() => {\n        // reset id only if we're changing the src\n        if (prevSrc) {\n          setAttributes({ id: 0 });\n        }\n        let video_id = getYoutubeId(src);\n        setAttributes({ video_id });\n\n        lockSave();\n        createVideo({ src, external_id: video_id, type: \"youtube\" })\n          .catch((e) => {\n            setAttributes({ src: \"\" });\n            showNotice(e);\n          })\n          .finally(unlockSave);\n      }, [src]);\n\n      // handle url update\n      function onSelectURL(newSrc) {\n        if (newSrc !== src) {\n          setAttributes({ src: newSrc });\n        }\n      }\n\n      if (!src) {\n        return (\n          <div>\n            <LinkPlaceholder\n              icon={\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"24\"\n                  height=\"24\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  className=\"presto-block-icon\"\n                >\n                  <path d=\"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z\"></path>\n                  <polygon points=\"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02\"></polygon>\n                </svg>\n              }\n              label={__(\"Presto Youtube Video\", \"presto-player\")}\n              instructions={__(\"Enter Youtube Video URL\", \"presto-player\")}\n              placeholder={__(\"Youtube URL\", \"presto-player\")}\n              attributes={attributes}\n              setAttributes={setAttributes}\n              onSelectURL={onSelectURL}\n            />\n          </div>\n        );\n      }\n\n      // loading presets or id still\n      if (loading || !id) {\n        return (\n          <Placeholder className=\"presto-player__placeholder is-loading\">\n            <Spinner />\n          </Placeholder>\n        );\n      }\n\n      return (\n        <>\n          <BlockControls>\n            <Toolbar>\n              <Button onClick={() => onRemoveSrc()}>\n                {__(\"Replace\", \"presto-player\")}\n              </Button>\n            </Toolbar>\n          </BlockControls>\n\n          <InspectorControls>\n            <BlockInspectorControls\n              setAttributes={setAttributes}\n              attributes={attributes}\n            />\n          </InspectorControls>\n\n          <figure>\n            {/*\n        Disable the video tag so the user clicking on it won't play the\n        video when the controls are enabled.\n\t\t\t\t*/}\n            <Disabled>\n              <Player\n                poster={poster}\n                src={src}\n                type=\"youtube\"\n                id={id}\n                attributes={attributes}\n                setAttributes={setAttributes}\n                preset={presetData}\n                branding={branding}\n                key={renderKey}\n              />\n            </Disabled>\n          </figure>\n        </>\n      );\n    }\n  )\n);\n","// In your application's entrypoint\nconst { __ } = wp.i18n;\nimport edit from \"./edit\";\nimport blockOptions from \"../block-options\";\n\n/**\n * Block Name\n */\nexport const name = \"presto-player/youtube\";\n\n/**\n * Block Options\n */\nexport const options = {\n  ...blockOptions,\n\n  attributes: {\n    ...blockOptions.attributes,\n    video_id: {\n      type: String,\n    },\n  },\n\n  title: __(\"Presto Youtube Video\", \"presto-player\"),\n\n  description: __(\n    \"A youtube video wrapped in an awesome player.\",\n    \"presto-player\"\n  ),\n\n  icon: (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className=\"presto-block-icon\"\n    >\n      <path d=\"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z\"></path>\n      <polygon points=\"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02\"></polygon>\n    </svg>\n  ),\n\n  edit,\n};\n"],"sourceRoot":""}