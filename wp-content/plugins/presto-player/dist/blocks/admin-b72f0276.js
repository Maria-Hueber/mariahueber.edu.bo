/*!
 * 
 * Presto Player
 * 
 * @author Presto Made, Inc
 * @version 0.1.0
 * @link undefined
 * @license GPL
 * 
 * Copyright (c) 2021 Presto Made, Inc
 * 
 * This software is released under the GPL License
 * https://opensource.org/licenses/GPL
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprestoPlayerblocksJsonp=window.wpackioprestoPlayerblocksJsonp||[]).push([[2],[,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=wp.i18n.__;t.a=function(){return React.createElement("div",{className:"presto-player__pro-badge"},n("Pro","presto-player"))}},,function(e,t,r){"use strict";var n,a=r(5),o=(n={visibility:{type:String,default:"public"},color:{type:String,default:"#00b3ff"},blockAlignment:{type:String},mutedPreview:{type:Object,default:{enabled:!1,captions:!1}},mutedOverlay:{type:Object,default:{enabled:!1,src:"",width:200,focalPoint:{x:.5,y:.5}}},mutedPreviewCaptions:{type:Boolean},mutedOverlayType:{type:String,default:"text"},mutedOverlayText:{type:String,default:"Click to play"},mutedOverlaySrc:{type:String},mutedOverlayImageWidth:{type:Number,default:200},mutedOverlayFocalPoint:{type:Object}},Object(a.a)(n,"mutedOverlay",{type:Object,default:{enabled:!1,type:"text",text:"",src:"",width:200,focalPoint:{x:.5,y:.5}}}),Object(a.a)(n,"autoplay",{type:Boolean}),Object(a.a)(n,"preload",{type:String}),Object(a.a)(n,"playsInline",{type:Boolean}),Object(a.a)(n,"id",{type:Number}),Object(a.a)(n,"attachment_id",{type:Number}),Object(a.a)(n,"src",{type:String}),Object(a.a)(n,"imageID",{type:Number}),Object(a.a)(n,"poster",{type:String}),Object(a.a)(n,"content",{type:Boolean}),Object(a.a)(n,"preset",{type:Number}),Object(a.a)(n,"chapters",{type:Array,default:[]}),Object(a.a)(n,"tracks",{type:"array",items:{type:"object"},default:[]}),n);t.a={attributes:o,category:"presto",supports:{align:!0},save:function(){return null}}},function(e,t,r){"use strict";function n(e){var t,r=(e||"").match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return r&&11===(null==r||null===(t=r[2])||void 0===t?void 0:t.length)?r[2]:null}function a(e){var t=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/.exec(e||"");return(null==t?void 0:t[5])||""}function o(e){var t=a(e);if(t)return{video_id:t,type:"vimeo"};var r=n(e);return r?{video_id:r,type:"youtube"}:{$video_id:0,$type:"none"}}function l(e){return"string"==typeof e&&e.includes(".m3u8")}r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return l}))},function(e,t,r){"use strict";var n=r(5),a=r(35);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=wp.data.useSelect;t.a=function(e){var t,r,n,o=e.src,i=e.preset,s=e.branding,u=e.attributes,p=e.adminPreview,d=e.type,b=u.chapters,m=u.mutedOverlay,y=u.mutedPreview,v=c((function(e){var t;return null===(t=e("presto-player/player"))||void 0===t?void 0:t.youtube()})),f=c((function(e){var t;return null===(t=e("presto-player/player"))||void 0===t?void 0:t.playerCSS()}));return React.createElement("div",{className:"wp-block-video presto-block-video",style:l(l(l({"--presto-player-border-radius":"".concat(null==i?void 0:i.border_radius,"px")},null!=i&&i.caption_background?{"--plyr-captions-background":i.caption_background}:{}),null!=s&&s.color?{"--plyr-color-main":s.color}:{}),{},{"--presto-player-email-border-radius":"".concat((null==i||null===(t=i.email_collection)||void 0===t?void 0:t.border_radius)||0,"px"),"--presto-player-logo-width":"".concat((null==s?void 0:s.logo_width)||75,"px")})},React.createElement(a.c,{src:o,css:f,isAdmin:!0,preload:"metadata",preset:i,bunny:{thumbnail:null==u?void 0:u.previewThumbnail,preview:null==u?void 0:u.preview},youtube:{channelId:null==v?void 0:v.channel_id},branding:s,chapters:b,blockAttributes:u,poster:u.poster,provider:d},React.createElement("div",{slot:"player-end"},(null==y?void 0:y.enabled)&&(null==m?void 0:m.enabled)&&React.createElement("div",{className:"presto-player__overlay is-image",style:{position:"absolute",width:"".concat((null==m?void 0:m.width)||100,"%"),left:"".concat(100*((null==m||null===(r=m.focalPoint)||void 0===r?void 0:r.x)||.5),"%"),top:"".concat(100*((null==m||null===(n=m.focalPoint)||void 0===n?void 0:n.y)||.5),"%")}},React.createElement("img",{src:null==m?void 0:m.src,style:{transform:"translateX(-50%) translateY(-50%)"}})),p)))}},function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return c}));var n=wp.element,a=n.useRef,o=n.useEffect;function l(e){var t=a();return o((function(){t.current=e})),t.current}function c(e){var t=e.status,r=void 0===t?"success":t,n=e.message;wp.data.dispatch("core/notices").createNotice(r,n,{type:"snackbar"})}},,function(e,t,r){"use strict";var n=wp.data.withSelect;t.a=function(e){return n((function(e){return{branding:e("presto-player/player").branding(),loading:e("presto-player/player").presetsLoading(),presets:e("presto-player/player").getPresets(),defaultPreset:e("presto-player/player").getDefaultPreset()}}))}},function(e,t,r){"use strict";var n=r(17),a=r(5),o=r(20);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=wp.i18n.__,s=wp.components,u=(s.PanelRow,s.TextControl,s.SelectControl,s.BaseControl),p=s.Button,d=s.FocalPointPicker,b=s.RangeControl,m=wp.blockEditor,y=m.MediaUpload,v=m.MediaUploadCheck,f=(wp.element.useState,["image"]),h=function(e){var t=e.attributes,r=e.setAttributes,n=e.instanceId,a=t.mutedOverlay,o="video-block__overlay-image-description-".concat(n);return React.createElement(React.Fragment,null,React.createElement(v,null,React.createElement(u,{className:"editor-video-overlay-control"},React.createElement(u.VisualLabel,null,React.createElement("p",null,i("Overlay Image","presto-player"))),React.createElement(y,{title:i("Select overlay image","presto-player"),onSelect:function(e){r({mutedOverlay:c(c({},a),{src:e.url})})},allowedTypes:f,render:function(e){var t=e.open;return React.createElement(p,{className:"presto-setting__poster",isPrimary:!0,onClick:t},null!=a&&a.src?i("Replace","presto-player"):i("Select","presto-player"))}}),React.createElement("p",{id:o,hidden:!0},null!=a&&a.src?sprintf(i("The current overlay image url is %s","presto-player"),null==a?void 0:a.src):i("There is no overlay image currently selected","presto-player")),!(null==a||!a.src)&&React.createElement(p,{onClick:function(){r({mutedOverlay:c(c({},a),{src:""})})},className:"presto-setting__remove-poster",isTertiary:!0},i("Remove","presto-player")))),!(null==a||!a.src)&&React.createElement(d,{url:"",dimensions:{width:160,height:90},value:null==a?void 0:a.focalPoint,onChange:function(e){return r({mutedOverlay:c(c({},a),{focalPoint:e})})}}),!(null==a||!a.src)&&React.createElement(b,{label:i("Max Width (%)","presto-player"),value:null==a?void 0:a.width,onChange:function(e){return r({mutedOverlay:c(c({},a),{width:e})})},min:1,max:100}))};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=wp.i18n.__,j=wp.components,E=j.ToggleControl,R=j.SelectControl,_=j.BaseControl,k=j.Button,P=j.PanelRow,x=j.Icon,C=j.Flex,S=wp.data.dispatch,N=wp.blockEditor,D=N.MediaUpload,T=N.MediaUploadCheck,B=["image"],L=function(e){var t=e.setAttributes,r=e.attributes,l=e.instanceId,c=r.mutedPreview,i=r.autoplay,s=r.playsInline,u=r.preload,p=r.poster,d=r.mutedOverlay,b="video-block__poster-image-description-".concat(l),m=function(e){return function(r){t(Object(a.a)({},e,r))}};var y,v;return React.createElement(React.Fragment,null,!i&&React.createElement(React.Fragment,null,React.createElement(E,{label:React.createElement(React.Fragment,null,w("Muted Autoplay Preview","presto-player")," ",!(null!==(y=prestoPlayer)&&void 0!==y&&y.isPremium)&&React.createElement(n.a,null)),onChange:function(e){var r;null!==(r=prestoPlayer)&&void 0!==r&&r.isPremium?t({mutedPreview:O(O({},c),{enabled:e})}):S("presto-player/player").setProModal(!0)},checked:null==c?void 0:c.enabled,className:"presto-setting__mutedPreview",help:w("Shows a muted preview of the video.","presto-player")}),!(null==c||!c.enabled)&&!(null!=r&&r.video_id)&&React.createElement(P,null,React.createElement(E,{label:w("Muted Preview Captions","presto-player"),onChange:function(e){t({mutedPreview:O(O({},c),{captions:e})})},checked:null==c?void 0:c.captions,className:"presto-setting__mutedPreviewCaptions",help:w("Play captions during muted autoplay","presto-player")})),!!c.enabled&&React.createElement(P,null,React.createElement(E,{label:React.createElement(React.Fragment,null,w("Muted Preview Overlay","presto-player")," ",!(null!==(v=prestoPlayer)&&void 0!==v&&v.isPremium)&&React.createElement(n.a,null)),onChange:function(e){var r;null!==(r=prestoPlayer)&&void 0!==r&&r.isPremium?t({mutedOverlay:O(O({},d),{enabled:e})}):S("presto-player/player").setProModal(!0)},checked:null==d?void 0:d.enabled,className:"presto-setting__mutedOverlay",help:w("Show an image over the top of the video either before or after the video.","presto-player")})),(null==d?void 0:d.enabled)&&(null==c?void 0:c.enabled)&&React.createElement(h,{attributes:r,setAttributes:t})),!(null!=c&&c.enabled)&&React.createElement(E,{label:w("Autoplay","presto-player"),className:"presto-setting__autoplay",onChange:m("autoplay"),checked:i,help:function(e){return e?w("Note: Autoplaying videos may cause usability issues for some visitors.","presto-player"):null}}),React.createElement(P,null,React.createElement(E,{label:w("Play inline","presto-player"),className:"presto-setting__playsInline","data-cy":"playsInline",onChange:m("playsInline"),checked:s,help:w("On mobile browsers, play the video on the page instead of opening it up fullscreen.","presto-player")})),!(null!=r&&r.video_id)&&React.createElement(P,null,React.createElement(R,{label:React.createElement(C,null,React.createElement("div",null,w("Performance Preference","presto-player")),React.createElement("a",{href:"https://prestoplayer.com/docs/performance-preferences-explained",target:"_blank",style:{textDecoration:"none"}},React.createElement(x,{icon:"editor-help"}))),className:"presto-setting__preload",value:u,onChange:function(e){return t({preload:e})},help:(!!(null!=r&&r.src&&Object(o.d)(null==r?void 0:r.src)&&["metadata","none"].includes(u))||"none"===u&&!p)&&w("A poster image is recommended for this setting.","presto-player"),options:[{value:"auto",label:w("Video Playback Speed","presto-player")},{value:"metadata",label:w("Page Load Speed","presto-player")},{value:"none",label:w("Page Load Speed (Extreme)","presto-player")}]})),React.createElement(T,null,React.createElement(_,{className:"editor-video-poster-control"},React.createElement(_.VisualLabel,null,React.createElement("p",null,w("Poster image","presto-player"))),React.createElement(D,{title:w("Select poster image","presto-player"),onSelect:function(e){t({poster:e.url})},allowedTypes:B,render:function(e){var t=e.open;return React.createElement(k,{className:"presto-setting__poster",isPrimary:!0,onClick:t,"aria-describedby":b},w(p?"Replace":"Select","presto-player"))}}),React.createElement("p",{id:b,hidden:!0},p?sprintf(w("The current poster image url is %s","presto-player"),p):w("There is no poster image currently selected","presto-player")),!!p&&React.createElement(k,{onClick:function(){t({poster:""})},className:"presto-setting__remove-poster",isTertiary:!0},w("Remove","presto-player")))))},A=r(6),I=r(1),V=r(3),F=r.n(V),U=wp.i18n.__,M=wp.components,z=M.ColorPicker,H=M.Button,W=M.withNotices,Y=M.BaseControl,G=M.RangeControl,q=wp.blockEditor,Z=q.MediaUpload,K=q.MediaUploadCheck,Q=wp.compose.useInstanceId,X=wp.element.useState,J=wp.data,$=J.dispatch,ee=J.useSelect,te=["image"];var re=W((function e(t){t.setAttributes,t.attributes,t.type;var r,a=Q(e),o=X(1),l=Object(I.a)(o,2),c=l[0],i=l[1],s=ee((function(e){return e("presto-player/player").branding()})),u=function(){var e=Object(A.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("presto-player/player").saveOptions({branding:s});case 2:wp.data.dispatch("core/notices").createNotice("success","Player branding saved.",{type:"snackbar",isDismissible:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement("div",{className:"presto-player__panel--branding"},React.createElement("p",null,U("Here you can select the global player branding This will apply to all players on the site.","presto-player")),React.createElement(K,null,React.createElement(Y,{className:"editor-video-poster-control"},React.createElement(Y.VisualLabel,null,React.createElement("p",null,U("Logo Overlay","presto-player")," ",!(null!==(r=prestoPlayer)&&void 0!==r&&r.isPremium)&&React.createElement(n.a,null))),React.createElement(Z,{title:U("Select logo overlay image","presto-player"),onSelect:function(e){$("presto-player/player").updateBranding("logo",e.url)},allowedTypes:te,render:function(e){var t=e.open;return React.createElement(H,{className:"presto-setting__logo",isSecondary:!0,onClick:function(){var e;null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium?t():$("presto-player/player").setProModal(!0)},"aria-describedby":"video-block__logo-image-description-".concat(a)},null!=s&&s.logo?U("Replace","presto-player"):U("Select","presto-player"))}}),React.createElement("p",{id:"video-block__logo-image-description-".concat(a),hidden:!0},null!=s&&s.logo?sprintf(U("The current logo image url is %s","presto-player"),null==s?void 0:s.logo):U("There is no logo image currently selected","presto-player")),!(null==s||!s.logo)&&React.createElement(H,{onClick:function(){$("presto-player/player").updateBranding("logo","")},isTertiary:!0},U("Remove","presto-player")))),!(null==s||!s.logo)&&React.createElement(G,{label:U("Logo Max Width","presto-player"),value:(null==s?void 0:s.logo_width)||150,onChange:function(e){return $("presto-player/player").updateBranding("logo_width",e)},min:1,max:400}),React.createElement(z,{color:null==s?void 0:s.color,onChangeComplete:function(e){$("presto-player/player").updateBranding("color",e.hex)},key:c,disableAlpha:!0}),(null==s?void 0:s.color)&&React.createElement(Y,null,React.createElement(H,{isSecondary:!0,onClick:function(){var e,t;$("presto-player/player").updateBranding("color",(null===(e=prestoPlayer)||void 0===e||null===(t=e.defaults)||void 0===t?void 0:t.color)||"#00b3ff"),i(c+1)}},U("Reset Color","presto-player"))),React.createElement(H,{isPrimary:!0,onClick:u},U("Save Branding","presto-player")))})),ne=r(8),ae=wp.i18n.__,oe=wp.components,le=oe.Flex,ce=oe.FlexItem,ie=oe.FlexBlock,se=oe.TextControl,ue=oe.Button,pe=wp.element.useState,de=function(e){var t=e.update,r=e.add,n=e.remove,o=e.className,l=e.time,c=e.title,i=(e.disabled,e.showNotice,pe(l)),s=Object(I.a)(i,2),u=s[0],p=s[1];return React.createElement(le,{align:"center",className:o},React.createElement(ce,null,React.createElement(se,Object(a.a)({className:"presto-player__caption--time",style:{width:"60px"},placeholder:"0:00",value:u,onChange:function(e){return p(e)},onBlur:function(){var e=function(e){var t=e;if(!(t=t.replace(/[^\d\d:\d\d.-]/g,"")).includes(":"))return"".concat(t,":00");0===t.substr(0,t.indexOf(":")).length&&(t="0".concat(t));var r=t.indexOf(":");return t=t.substring(0,r+3)}(u);t({time:e}),p(e)},autoComplete:"off"},"placeholder","0:00"))),React.createElement(ie,null,React.createElement(se,{className:"presto-player__caption--title",placeholder:ae("Title","presto-player"),value:c||"",onChange:function(e){return t({title:e})},autoComplete:"off"})),React.createElement(ce,null,n&&React.createElement(ue,{icon:"minus",className:"ph-chapter__remove",style:{marginBottom:"8px"},label:ae("Remove Chapter","presto-player"),onClick:n}),r&&React.createElement(ue,{icon:"plus-alt",className:"ph-chapter__add",label:ae("Add Chapter","presto-player"),style:{marginBottom:"8px"},onClick:function(){r(),p("")}})))};function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}wp.i18n.__;var ye,ve,fe=wp.element.useState,he=wp.data.dispatch,ge=function(e){var t,r=e.setAttributes,n=e.attributes,a=function(){he("presto-player/player").setProModal(!0)};if(null===(t=prestoPlayer)||void 0===t||!t.isPremium)return React.createElement(de,{disabled:!0,className:"ph-chapter is-new",time:"",title:"",update:function(){},showNotice:a,add:a});var o=n.chapters,l=fe({title:"",time:""}),c=Object(I.a)(l,2),i=c[0],s=c[1];return React.createElement(React.Fragment,null,(o||[]).sort((function(e,t){return parseInt(e.time.split(":")[0])-parseInt(t.time.split(":")[0])==0?parseInt(e.time.split(":")[1])-parseInt(t.time.split(":")[1]):parseInt(e.time.split(":")[0])-parseInt(t.time.split(":")[0])})).map((function(e,t){return React.createElement(de,{key:"".concat(t,"-").concat(e.time),className:"ph-chapter",time:e.time,title:e.title,chapter:e,update:function(t){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.indexOf(e),a=o.map((function(e,r){return r!==n?e:me(me({},e),t)}));r({chapters:a})}(e,t)},remove:function(){!function(e){var t=o.indexOf(e);r({chapters:o.filter((function(e,r){return r!==t}))})}(e)}})})),React.createElement(de,{className:"ph-chapter is-new",time:i.time,title:i.title,update:function(e){s(me(me({},i),e))},add:function(){i.time&&i.title&&(r({chapters:[].concat(Object(ne.a)(o||[]),[{time:i.time,title:i.title}])}),s({title:"",time:""}))}}))},Oe=r(4),we=r(0),je=r(22),Ee=wp.i18n.__,Re=wp.components,_e=Re.ToggleControl,ke=Re.BaseControl,Pe=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(ke,null,React.createElement("h3",null,Ee("Controls","presto-player"))),React.createElement(ke,{className:"presto-player__control--large-play"},React.createElement(_e,{label:Ee("Large Play Button","presto-player"),help:Ee("Adds a large play button over the top of the player.","presto-player"),onChange:function(e){r({"play-large":e})},checked:t["play-large"]})),React.createElement(ke,{className:"presto-player__control--rewind"},React.createElement(_e,{label:Ee("Rewind","presto-player"),help:Ee("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({rewind:e})},checked:t.rewind})),React.createElement(ke,{className:"presto-player__control--play"},React.createElement(_e,{label:Ee("Small Play Button","presto-player"),help:Ee("Adds a small play button to the bottom of the player.","presto-player"),onChange:function(e){r({play:e})},checked:t.play})),React.createElement(ke,{className:"presto-player__control--fast-forward"},React.createElement(_e,{label:Ee("Fast Forward","presto-player"),help:Ee("Adds a 10 second rewind button to the player.","presto-player"),onChange:function(e){r({"fast-forward":e})},checked:t["fast-forward"]})),React.createElement(ke,{className:"presto-player__control--progress"},React.createElement(_e,{label:Ee("Progress Bar","presto-player"),help:Ee("Shows a seekable progress bar.","presto-player"),onChange:function(e){r({progress:e})},checked:t.progress})),React.createElement(ke,{className:"presto-player__control--current-time"},React.createElement(_e,{label:Ee("Current Time","presto-player"),help:Ee("Shows the video timestamp.","presto-player"),onChange:function(e){r({"current-time":e})},checked:t["current-time"]})),React.createElement(ke,{className:"presto-player__control--volume"},React.createElement(_e,{label:Ee("Volume","presto-player"),help:Ee("Shows a volume bar.","presto-player"),onChange:function(e){r({volume:e,mute:e})},checked:t.volume})),React.createElement(ke,{className:"presto-player__control--speed"},React.createElement(_e,{label:Ee("Speed","presto-player"),help:Ee("Shows playback speed controls.","presto-player"),onChange:function(e){r({speed:e})},checked:t.speed})),React.createElement(ke,{className:"presto-player__control--pip"},React.createElement(_e,{label:Ee("Picture In Picture (HTML5 only)","presto-player"),help:Ee("Allows users to dock the player on their screen and watch when using other app on their computer.","presto-player"),onChange:function(e){r({pip:e})},checked:t.pip})),React.createElement(ke,{className:"presto-player__control--fullscreen"},React.createElement(_e,{label:Ee("Fullscreen","presto-player"),help:Ee("Adds a button to allow the player to be fullscreen.","presto-player"),onChange:function(e){r({fullscreen:e})},checked:t.fullscreen})))},xe=wp.i18n.__,Ce=wp.components,Se=Ce.ToggleControl,Ne=Ce.BaseControl,De=Ce.HorizontalRule,Te=Ce.__experimentalAlignmentMatrixControl,Be=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(Ne,null,React.createElement("h3",null,xe("Behavior","presto-player"))),React.createElement(Ne,null,React.createElement(Se,{label:xe("Auto-Hide Controls","presto-player"),help:xe("Hide video controls automatically after 2 seconds of no mouse movement.","presto-player"),onChange:function(e){r({auto_hide:e})},checked:t.auto_hide})),React.createElement(Ne,null,React.createElement(Se,{label:xe("Save Play Position","presto-player"),help:xe("Saves the user's play position so when they come back to the page they can continue the video from where they left off.","presto-player"),onChange:function(e){r({save_player_position:e})},checked:t.save_player_position})),React.createElement(Ne,null,React.createElement(Se,{label:xe("Captions On By Default","presto-player"),help:xe("Toggles if captions should be active by default.","presto-player"),onChange:function(e){r({captions_enabled:e})},checked:t.captions_enabled})),React.createElement(Ne,null,React.createElement(Se,{label:xe("Sticky On Scroll","presto-player"),help:xe("Stick videos to the side of the screen when the page is scrolled and the video is playing.","presto-player"),onChange:function(e){r({sticky_scroll:e})},checked:t.sticky_scroll})),!!t.sticky_scroll&&React.createElement(React.Fragment,null,React.createElement(Ne,{label:xe("Choose a position for your sticky player.","presto-player")},React.createElement(Te,{value:t.sticky_scroll_position,onChange:function(e){r({sticky_scroll_position:e})}}))),React.createElement(De,null),React.createElement(Ne,null),React.createElement(Ne,null,React.createElement("h3",null,xe("Youtube","presto-player"))),React.createElement(Ne,null,React.createElement(Se,{label:xe("Hide Youtube UI (Experimental)","presto-player"),help:xe("Hides the Youtube logo and related videos.","presto-player"),onChange:function(e){r({hide_youtube:e})},checked:t.hide_youtube})),React.createElement(Ne,null,React.createElement(Se,{label:xe("Lazy Load Videos","presto-player"),help:xe("Improves page loading performance by only loading the video when clicked.","presto-player"),onChange:function(e){r({lazy_load_youtube:e})},checked:t.lazy_load_youtube})))},Le=wp.i18n.__,Ae=wp.components,Ie=Ae.ToggleControl,Ve=Ae.BaseControl,Fe=Ae.RangeControl,Ue=Ae.SelectControl,Me=Ae.ColorPicker,ze=function(e){var t=e.state,r=e.updateState,n=e.className;return React.createElement("div",{className:n},React.createElement(Ve,null,React.createElement("h3",null,Le("Style","presto-player"))),React.createElement(Ve,null,React.createElement(Ie,{label:Le("Hide Logo","presto-player"),help:Le("Hides the logo on this video.","presto-player"),onChange:function(e){r({hide_logo:e})},checked:t.hide_logo})),React.createElement(Ve,null,React.createElement(Fe,{label:Le("Round Corners","presto-player"),help:Le("Player border radius size.","presto-player"),value:(null==t?void 0:t.border_radius)||0,onChange:function(e){return r({border_radius:e})},min:0,max:25})),React.createElement(Ve,null,React.createElement(Ue,{label:Le("Caption Style","presto-player"),labelPosition:"top",value:null==t?void 0:t.caption_style,options:[{label:Le("Default","presto-player"),value:"default"},{label:Le("Full","presto-player"),value:"full"}],onChange:function(e){r({caption_style:e})}})),React.createElement(Ve,null,React.createElement(Ve.VisualLabel,null,React.createElement("p",null,Le("Caption Background","presto-player"))),React.createElement(Me,{color:(null==t?void 0:t.caption_background)||"#000000",onChangeComplete:function(e){r({caption_background:e.hex})},disableAlpha:!0})))},He=function(){return React.createElement("div",null,React.createElement("presto-player-skeleton",{style:{width:"30%",marginBottom:"10px"}}),React.createElement("presto-player-skeleton",{style:{height:"2rem",marginBottom:"20px"}}))},We=wp.i18n.__,Ye=wp.components,Ge=Ye.SelectControl,qe=Ye.TextControl,Ze=Ye.Notice,Ke=wp.element,Qe=Ke.useEffect,Xe=Ke.useState,Je=function(e){var t=e.options,r=e.updateEmailState,n=Xe(!1),a=Object(I.a)(n,2),o=a[0],l=a[1],c=Xe([{value:null,label:We("Choose an audience","presto-player")}]),i=Object(I.a)(c,2),s=i[0],u=i[1],p=Xe(""),d=Object(I.a)(p,2),b=d[0],m=d[1],y=function(){var e=Object(A.a)(F.a.mark((function e(){var t,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/mailchimp/lists"});case 4:t=e.sent,r=s,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.name}])})),u(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&m(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Qe((function(){y()}),[]),o?React.createElement("div",null,React.createElement(He,null),React.createElement(He,null)):b?React.createElement(Ze,{className:"presto-notice",status:"error",isDismissible:!1},b):React.createElement("div",null,React.createElement(Ge,{label:We("Choose an audience","presto-player"),value:null==t?void 0:t.provider_list,options:s,onChange:function(e){return r({provider_list:e})}}),React.createElement(qe,{label:We("Tag","presto-player"),help:React.createElement("p",null,We("Give this contact an optional tag when they are added to the list.","presto-player")),value:null==t?void 0:t.provider_tag,onChange:function(e){return r({provider_tag:e})}}))},$e=wp.i18n.__,et=wp.components,tt=et.SelectControl,rt=et.Notice,nt=wp.element,at=nt.useEffect,ot=nt.useState,lt=function(e){var t=e.options,r=e.updateEmailState,n=ot(!1),a=Object(I.a)(n,2),o=a[0],l=a[1],c=ot([{value:null,label:$e("Choose a group","presto-player")}]),i=Object(I.a)(c,2),s=i[0],u=i[1],p=ot(""),d=Object(I.a)(p,2),b=d[0],m=d[1],y=function(){var e=Object(A.a)(F.a.mark((function e(){var t,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/mailerlite/groups"});case 4:t=e.sent,r=s,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.name}])})),u(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&m(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return at((function(){y()}),[]),o?React.createElement(He,null):b?React.createElement(rt,{className:"presto-notice",status:"error",isDismissible:!1},b):React.createElement("div",null,React.createElement(tt,{label:$e("Choose a group","presto-player"),value:null==t?void 0:t.provider_list,options:s,onChange:function(e){return r({provider_list:e})}}))},ct=wp.i18n.__,it=wp.components,st=it.SelectControl,ut=it.Notice,pt=wp.element,dt=pt.useEffect,bt=pt.useState,mt=function(e){var t=e.options,r=e.updateEmailState,n=bt(!1),a=Object(I.a)(n,2),o=a[0],l=a[1],c=bt(!1),i=Object(I.a)(c,2),s=i[0],u=i[1],p=bt([{value:null,label:ct("Choose a list","presto-player")}]),d=Object(I.a)(p,2),b=d[0],m=d[1],y=bt([{value:null,label:ct("Choose a tag","presto-player")}]),v=Object(I.a)(y,2),f=v[0],h=v[1],g=bt(""),O=Object(I.a)(g,2),w=O[0],j=O[1],E=function(){var e=Object(A.a)(F.a.mark((function e(){var t,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/activecampaign/lists"});case 4:t=e.sent,r=b,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.name||ct("Default list","presto-player")}])})),m(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&j(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(A.a)(F.a.mark((function e(){var t,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/activecampaign/tags"});case 4:t=e.sent,r=f,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.tag}])})),h(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&j(e.t0.message);case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return dt((function(){E(),R()}),[]),w?React.createElement(ut,{className:"presto-notice",status:"error",isDismissible:!1},w):React.createElement("div",null,o?React.createElement(He,null):b.length>1&&React.createElement(st,{label:ct("Choose a list","presto-player"),value:null==t?void 0:t.provider_list,options:b,onChange:function(e){return r({provider_list:e})}}),s?React.createElement(He,null):f.length>1&&React.createElement(st,{label:ct("Choose a tag","presto-player"),value:null==t?void 0:t.provider_tag,options:f,onChange:function(e){return r({provider_tag:e})}}))},yt=wp.i18n.__,vt=wp.components,ft=vt.SelectControl,ht=vt.Notice,gt=wp.element,Ot=gt.useEffect,wt=gt.useState,jt=function(e){var t=e.options,r=e.updateEmailState,n=wt(!1),a=Object(I.a)(n,2),o=a[0],l=a[1],c=wt(!1),i=Object(I.a)(c,2),s=i[0],u=i[1],p=wt([{value:null,label:yt("Choose a list","presto-player")}]),d=Object(I.a)(p,2),b=d[0],m=d[1],y=wt([{value:null,label:yt("Choose a tag","presto-player")}]),v=Object(I.a)(y,2),f=v[0],h=v[1],g=wt(""),O=Object(I.a)(g,2),w=O[0],j=O[1],E=function(){var e=Object(A.a)(F.a.mark((function e(){var t,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/fluentcrm/lists"});case 4:t=e.sent,r=b,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.title||e.slug}])})),m(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&j(e.t0.message);case 13:return e.prev=13,l(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(A.a)(F.a.mark((function e(){var t,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/fluentcrm/tags"});case 4:t=e.sent,r=f,(t||[]).forEach((function(e){r=[].concat(Object(ne.a)(r),[{value:e.id,label:e.title||e.slug}])})),h(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),null!==e.t0&&void 0!==e.t0&&e.t0.message&&j(e.t0.message);case 13:return e.prev=13,u(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}();return Ot((function(){E(),R()}),[]),w?React.createElement(ht,{className:"presto-notice",status:"error",isDismissible:!1},w):React.createElement("div",null,o?React.createElement(He,null):b.length>1&&React.createElement(ft,{label:yt("Choose a list","presto-player"),value:null==t?void 0:t.provider_list,options:b,onChange:function(e){return r({provider_list:e})}}),s?React.createElement(He,null):f.length>1&&React.createElement(ft,{label:yt("Choose a tag","presto-player"),value:null==t?void 0:t.provider_tag,options:f,onChange:function(e){return r({provider_tag:e})}}))},Et=wp.i18n.__,Rt=wp.components,_t=Rt.SelectControl,kt=Rt.Button,Pt=Rt.Flex,xt=Rt.Icon,Ct=wp.element,St=Ct.useEffect,Nt=Ct.useState,Dt=function(e){var t=e.options,r=e.updateEmailState,n=Nt(!1),a=Object(I.a)(n,2),o=a[0],l=a[1],c=Nt([{value:"none",label:Et("None","presto-player")}]),i=Object(I.a)(c,2),s=i[0],u=i[1],p=Nt(""),d=Object(I.a)(p,2),b=d[0],m=d[1],y={presto_player_activecampaign:{label:"ActiveCampaign",value:"activecampaign"},presto_player_mailchimp:{label:"MailChimp",value:"mailchimp"},presto_player_mailerlite:{label:"MailerLite",value:"mailerlite"},presto_player_fluentcrm:{label:"FluentCRM",value:"fluentcrm"}},v=function(){var e=Object(A.a)(F.a.mark((function e(){var t,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),m(""),e.prev=2,e.next=5,wp.apiFetch({path:"wp/v2/settings"});case 5:t=e.sent,r=s,Object.keys(t).forEach((function(e){var n;null!=y&&y[e]&&null!==(n=t[e])&&void 0!==n&&n.connected&&(r=[].concat(Object(ne.a)(r),[y[e]]))})),u(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),null!==e.t0&&void 0!==e.t0&&e.t0.message&&m(e.t0.message);case 14:return e.prev=14,l(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();St((function(){v()}),[]);return o?React.createElement(He,null):React.createElement("div",null,b,s.length>1?React.createElement("div",null,React.createElement(_t,{label:Et("Choose an email provider","presto-player"),value:null==t?void 0:t.provider,options:s,onChange:function(e){return r({provider:e})}}),function(){var e=s.find((function(e){return e.value===(null==t?void 0:t.provider)}));if(Object.keys(e||{}).length)switch(null==t?void 0:t.provider){case"mailchimp":return React.createElement(Je,{options:t,updateEmailState:r});case"mailerlite":return React.createElement(lt,{options:t,updateEmailState:r});case"activecampaign":return React.createElement(mt,{options:t,updateEmailState:r});case"fluentcrm":return React.createElement(jt,{options:t,updateEmailState:r})}}()):React.createElement(Pt,null,React.createElement(kt,{target:"_blank",href:"/wp-admin/edit.php?post_type=pp_video_block&page=presto-player-settings#/integrations",isSecondary:!0,isSmall:!0},Et("Connect a provider","presto-player")),React.createElement(kt,{isSmall:!0,onClick:function(e){e.preventDefault(),v()}},React.createElement(xt,{icon:"update"}))))};function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Lt,At,It,Vt,Ft,Ut,Mt=wp.i18n.__,zt=wp.components,Ht=zt.ToggleControl,Wt=zt.BaseControl,Yt=zt.RangeControl,Gt=zt.TextControl,qt=zt.Button,Zt=zt.TextareaControl,Kt=zt.Notice,Qt=function(e){var t=e.state,r=e.updateState,n=e.className,a=t.email_collection,o=t.cta,l=function(e){r(Bt(Bt({},t),{},{email_collection:Bt(Bt({},a),e)}))};return Object(we.b)("div",{className:n},Object(we.b)(Wt,null,Object(we.b)("h3",null,Mt("Email Capture","presto-player"))),Object(we.b)(Wt,{className:"presto-player__control--large-play"},Object(we.b)(Ht,{label:Mt("Enable","presto-player"),help:Mt("Show an email collection form and message over your video.","presto-player"),onChange:function(e){l({enabled:e})},checked:null==a?void 0:a.enabled})),!(null==a||!a.enabled)&&Object(we.b)(React.Fragment,null,Object(we.b)(Wt,{className:"presto-player__control--percentage-watched"},Object(we.b)(Yt,{label:Mt("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){l({percentage:e})},marks:[{value:0,label:Mt("Start","presto-player")},{value:50,label:Mt("50% Watched","presto-player")},{value:100,label:Mt("End","presto-player")}],shiftStep:5,value:(null==a?void 0:a.percentage)||0})),(null==o?void 0:o.enabled)&&(null==a?void 0:a.percentage)===(null==o?void 0:o.percentage)&&Object(we.b)(Kt,{css:Object(we.a)(ye||(ye=Object(Oe.a)(["\n                margin: 0 0 30px 0 !important;\n              "]))),status:"warning",isDismissible:!1},Mt("You already have a Call To Action set display at the same time.","presto-player"),Object(we.b)(qt,{onClick:function(){r(Bt(Bt({},t),{},{cta:Bt(Bt({},o),{enabled:!1})}))},isLink:!0,css:Object(we.a)(ve||(ve=Object(Oe.a)(["\n                  margin-top: 10px !important;\n                "])))},Mt("Disable Call To Action","presto-player"))),Object(we.b)(Wt,{className:"presto-player__control--large-play"},Object(we.b)(Ht,{label:Mt("Allow Skipping","presto-player"),help:Mt("Let the viewer skip","presto-player"),onChange:function(e){l({allow_skip:e})},checked:null==a?void 0:a.allow_skip})),Object(we.b)(Wt,{className:"presto-player__control--large-play"},Object(we.b)(Zt,{label:Mt("Headline","presto-player"),help:Mt("The headline for your form.","presto-player"),value:null==a?void 0:a.headline,onChange:function(e){l({headline:e})}})),Object(we.b)(Wt,{className:"presto-player__control--large-play"},Object(we.b)(Zt,{label:Mt("Bottom Text","presto-player"),help:Mt("Text displayed below the form. HTML allowed.","presto-player"),value:null==a?void 0:a.bottom_text,onChange:function(e){l({bottom_text:e})}})),Object(we.b)(Wt,{className:"presto-player__control--large-play"},Object(we.b)(Gt,{label:Mt("Play Button Text","presto-player"),help:Object(we.b)("p",null,Mt("Submit button text","presto-player")),value:null==a?void 0:a.button_text,onChange:function(e){return l({button_text:e})}})),Object(we.b)("h3",null,Mt("Integrate","presto-player")),Object(we.b)(Wt,null,Object(we.b)(Dt,{updateEmailState:l,options:a})),Object(we.b)("h3",null,Mt("Style","presto-player")),Object(we.b)(Wt,null,Object(we.b)(Yt,{label:Mt("Round Corners","presto-player"),help:Mt("Border radius of form elements.","presto-player"),value:(null==a?void 0:a.border_radius)||0,onChange:function(e){return l({border_radius:e})},min:0,max:25}))))};function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $t,er,tr=wp.i18n.__,rr=wp.components,nr=rr.Button,ar=rr.Popover,or=rr.Icon,lr=wp.blockEditor.__experimentalLinkControl,cr=wp.element.useState,ir=wp.url.prependHTTP,sr=function(e){var t=e.setSettings,r=e.settings,n=cr(!1),a=Object(I.a)(n,2),o=a[0],l=a[1],c=r.url,i=cr(),s=Object(I.a)(i,2),u=s[0],p=s[1],d=Jt({url:null==r?void 0:r.url,type:null==r?void 0:r.type,id:null==r?void 0:r.id,opensInNewTab:null==r?void 0:r.opensInNewTab},u),b=function(e){e=Jt(Jt({},u),e);var r=d.opensInNewTab!==e.opensInNewTab&&d.url===e.url&&void 0===e.url;if(p(r?e:void 0),!r){var n=ir(e.url);t({url:n,type:e.type,id:void 0!==e.id&&null!==e.id?String(e.id):void 0,opensInNewTab:e.opensInNewTab})}};return Object(we.b)("span",null,c?Object(we.b)("div",{css:Object(we.a)(Lt||(Lt=Object(Oe.a)(["\n            display: flex;\n            justify-content: space-between;\n          "])))},Object(we.b)("div",{css:Object(we.a)(At||(At=Object(Oe.a)(["\n              max-width: 85%;\n              overflow: hidden;\n              display: flex;\n              align-items: center;\n            "])))},Object(we.b)("a",{href:"#",css:Object(we.a)(It||(It=Object(Oe.a)(["\n                padding: 10px;\n                background: #f3f3f3;\n                border-radius: 4px;\n                width: 100%;\n                display: inline-flex;\n                align-items: center;\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                text-decoration: none;\n              "]))),onClick:function(){return l(!o)}},Object(we.b)(or,{icon:"edit",css:Object(we.a)(Vt||(Vt=Object(Oe.a)(["\n                  cursor: pointer;\n                  opacity: 0.75;\n                  margin: 0 2px;\n                  font-size: 16px;\n                  width: 16px;\n                  height: 16px;\n                  text-decoration: none;\n                "])))}),c),o&&Object(we.b)(ar,{position:"bottom center",onClose:function(){return l(!1)}},Object(we.b)(lr,{value:r,onChange:b}))),Object(we.b)("div",{css:Object(we.a)(Ft||(Ft=Object(Oe.a)(["\n              display: flex;\n              align-items: center;\n            "])))},Object(we.b)(or,{onClick:function(){confirm(tr("Are you sure you wish to remove this link?","presto-player"))&&t({})},icon:"trash",className:"presto-icon",css:Object(we.a)(Ut||(Ut=Object(Oe.a)(["\n                cursor: pointer;\n                opacity: 0.75;\n                margin: 0 2px;\n                fontsize: 18px;\n                width: 18px;\n                height: 18px;\n\n                &:hover {\n                  color: #cc1818;\n                }\n              "])))}))):Object(we.b)("span",null,Object(we.b)(nr,{isPrimary:!0,isSmall:!0,onClick:function(){return l(!o)}},tr("Add Link","presto-player")),o&&Object(we.b)(ar,{position:"bottom center",onClose:function(){return l(!1)}},Object(we.b)(lr,{value:r,onChange:b}))))},ur=wp.components,pr=ur.ColorPicker,dr=ur.ColorIndicator,br=ur.Popover,mr=ur.Button,yr=(ur.Flex,wp.element),vr=yr.useState,fr=yr.useEffect,hr=wp.i18n.__,gr=function(e){var t=e.color,r=e.setColor,n=vr(!1),a=Object(I.a)(n,2),o=a[0],l=a[1],c=vr(t),i=Object(I.a)(c,2),s=i[0],u=i[1];return fr((function(){o&&t&&u(t)}),[o]),Object(we.b)("span",null,Object(we.b)(dr,{css:{width:"25px",height:"25px",borderRadius:"9999px"},colorValue:t,onClick:function(){return l(!o)}}),!!o&&Object(we.b)(br,{position:"bottom left"},Object(we.b)(pr,{color:t||"",onChangeComplete:function(e){return(null==e?void 0:e.hex)&&r(e)},disableAlpha:!0}),Object(we.b)("div",{css:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px"}},Object(we.b)(mr,{css:{margin:"0 5px"},isTertiary:!0,onClick:function(){r({hex:null}),l(!1)}},hr("Reset","presto-player")),Object(we.b)("div",{css:{display:"flex",justifyContent:"flex-end",padding:"10px"}},Object(we.b)(mr,{css:{margin:"0 5px"},isTertiary:!0,onClick:function(){r({hex:s}),l(!1)}},hr("Cancel","presto-player")),Object(we.b)(mr,{isPrimary:!0,onClick:function(){return l(!1)}},hr("Apply","presto-player"))))))};function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jr=wp.i18n.__,Er=wp.components,Rr=Er.ToggleControl,_r=Er.BaseControl,kr=Er.RangeControl,Pr=Er.TextControl,xr=Er.Flex,Cr=Er.Button,Sr=Er.TextareaControl,Nr=Er.Notice,Dr=wp.element.useEffect,Tr=wp.data.useSelect;function Br(e){var t=e.state,r=e.updateState,n=e.className,o=t.cta,l=t.email_collection,c=Tr((function(e){return e("presto-player/player").branding()})),i={percentage:100,show_rewatch:!0,show_skip:!0,headline:jr("Want to learn more?","presto-player"),show_button:!0,button_text:jr("Click Here","presto-player"),button_link:{opensInNewTab:!0}};Dr((function(){Object.keys(i).forEach((function(e){var r;void 0===(null==t||null===(r=t.cta)||void 0===r?void 0:r[e])&&s(Object(a.a)({},e,i[e]))}))}),[t]);var s=function(e){r(wr(wr({},t),{},{cta:wr(wr({},o),e)}))};return Object(we.b)("div",{className:n},Object(we.b)(_r,null,Object(we.b)("h3",null,jr("Call To Action","presto-player"))),Object(we.b)(_r,{className:"presto-player__control--large-play"},Object(we.b)(Rr,{label:jr("Enable","presto-player"),help:jr("Show an email collection form and message over your video.","presto-player"),onChange:function(e){s({enabled:e})},checked:null==o?void 0:o.enabled})),!(null==o||!o.enabled)&&Object(we.b)(React.Fragment,null,Object(we.b)(_r,{className:"presto-player__control--percentage-watched"},Object(we.b)(kr,{label:jr("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){s({percentage:e})},marks:[{value:0,label:jr("Start","presto-player")},{value:50,label:jr("50% Watched","presto-player")},{value:100,label:jr("End","presto-player")}],shiftStep:5,value:null==o?void 0:o.percentage})),(null==l?void 0:l.enabled)&&(null==l?void 0:l.percentage)===(null==o?void 0:o.percentage)&&Object(we.b)(Nr,{css:Object(we.a)($t||($t=Object(Oe.a)(["\n                  margin: 0 0 30px 0 !important;\n                "]))),status:"warning",isDismissible:!1},jr("You already have an email capture set display at the same time.","presto-player"),Object(we.b)(Cr,{onClick:function(){r(wr(wr({},t),{},{email_collection:wr(wr({},l),{enabled:!1})}))},isLink:!0,css:Object(we.a)(er||(er=Object(Oe.a)(["\n                    margin-top: 10px !important;\n                  "])))},jr("Disable Email Capture","presto-player"))),100===(null==o?void 0:o.percentage)?Object(we.b)(_r,{className:"presto-player__control--show-rewatch"},Object(we.b)(Rr,{label:jr("Show Rewatch Button","presto-player"),help:jr("Show a rewatch button at the end of the video.","presto-player"),onChange:function(e){s({show_rewatch:e})},checked:null==o?void 0:o.show_rewatch})):Object(we.b)(_r,{className:"presto-player__control--show-skip"},Object(we.b)(Rr,{label:jr("Allow Skipping","presto-player"),help:jr("Let the user continue watching the video.","presto-player"),onChange:function(e){s({show_skip:e})},checked:null==o?void 0:o.show_skip})),Object(we.b)(_r,{className:"presto-player__control--button-link"},Object(we.b)(_r.VisualLabel,null,Object(we.b)("p",null," ",jr("Link","presto-player"))),Object(we.b)(sr,{setSettings:function(e){s({button_link:e})},settings:(null==o?void 0:o.button_link)||{}})),Object(we.b)(_r,{className:"presto-player__control--headline"},Object(we.b)(Sr,{label:jr("Headline","presto-player"),help:jr("The headline for your form.","presto-player"),value:null==o?void 0:o.headline,onChange:function(e){s({headline:e})}})),Object(we.b)(_r,{className:"presto-player__control--bottom-text"},Object(we.b)(Sr,{label:jr("Bottom Text","presto-player"),help:jr("Text displayed below the form. HTML allowed.","presto-player"),value:null==o?void 0:o.bottom_text,onChange:function(e){s({bottom_text:e})}})),Object(we.b)(_r,{className:"presto-player__control--show-button"},Object(we.b)(Rr,{label:jr("Show Button","presto-player"),help:jr("Show a call to action button.","presto-player"),onChange:function(e){s({show_button:e})},checked:null==o?void 0:o.show_button})),!(null==o||!o.show_button)&&Object(we.b)("div",null,Object(we.b)(_r,{className:"presto-player__control--button-text"},Object(we.b)(Pr,{label:jr("Button Text","presto-player"),help:Object(we.b)("p",null,jr("Button text for the Call To Action","presto-player")),value:null==o?void 0:o.button_text,onChange:function(e){return s({button_text:e})}})),Object(we.b)("h3",null,jr("Style","presto-player")),Object(we.b)(_r,null,Object(we.b)(kr,{label:jr("Round Corners","presto-player"),help:jr("Border radius of form elements.","presto-player"),value:(null==o?void 0:o.button_radius)||0,onChange:function(e){return s({button_radius:e})},min:0,max:25})),Object(we.b)(_r,{className:"presto-player__control--button-color"},Object(we.b)(xr,null,Object(we.b)(_r.VisualLabel,null,jr("Button Color","presto-player")),Object(we.b)(gr,{color:(null==o?void 0:o.button_color)||(null==c?void 0:c.color),setColor:function(e){return s({button_color:e&&e.hex})}}))),Object(we.b)(_r,{className:"presto-player__control--button-text-color"},Object(we.b)(xr,null,Object(we.b)(_r.VisualLabel,null,jr("Button Text Color","presto-player")),Object(we.b)(gr,{color:(null==o?void 0:o.button_text_color)||"#ffffff",setColor:function(e){return s({button_text_color:e&&e.hex})}})))),Object(we.b)(_r,null,Object(we.b)(kr,{label:jr("Background Opacity","presto-player"),help:jr("Opacity percentage of the cover background.","presto-player"),value:(null==o?void 0:o.background_opacity)||75,onChange:function(e){return s({background_opacity:e})},min:0,max:100}))))}Br.defaultProps={catName:"Sandy",eyeColor:"deepblue",age:"120"};var Lr,Ar,Ir,Vr=Br;function Fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mr=wp.i18n.__,zr=wp.components,Hr=zr.TextControl,Wr=zr.ExternalLink,Yr=zr.Button,Gr=(zr.Flex,wp.element),qr=Gr.useState,Zr=Gr.useEffect,Kr=wp.data,Qr=Kr.useSelect,Xr=Kr.dispatch,Jr=function(e){var t=e.onClose,r=qr(""),n=Object(I.a)(r,2),a=n[0],o=n[1],l=qr(!1),c=Object(I.a)(l,2),i=c[0],s=c[1],u=wp.data.useSelect((function(e){return e("core").canUser("read","settings")})),p=Qr((function(e){return e("presto-player/player").youtube()}));Zr((function(){o(p.channel_id)}),[null==p?void 0:p.channel_id]);var d=function(){var e=Object(A.a)(F.a.mark((function e(r){var n,o;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),s(!0),Xr("presto-player/player").updateYoutube({channel_id:a}),n=Ur(Ur({},p),{channel_id:a}),e.prev=4,e.next=7,wp.apiFetch({path:"wp/v2/settings",method:"POST",data:{presto_player_youtube:n}});case 7:null!=(o=e.sent)&&o.presto_player_youtube&&(Xr("presto-player/player").setYoutube(null==o?void 0:o.presto_player_youtube),t()),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,11,13,16]])})));return function(t){return e.apply(this,arguments)}}();return u?Object(we.b)("form",{onSubmit:d},Object(we.b)(Hr,{css:Object(we.a)(Lr||(Lr=Object(Oe.a)(["\n          margin-bottom: 0 !important;\n        "]))),label:Mr("Youtube Channel ID","presto-player"),help:Object(we.b)("p",null,Object(we.b)(Wr,{href:"https://support.google.com/youtube/answer/3250431?hl=en"},Mr("Find my channel id","presto-player"))),value:a,onChange:function(e){return o(e)}}),Object(we.b)(Yr,{disabled:i,isBusy:i,css:Object(we.a)(Ar||(Ar=Object(Oe.a)(["\n          margin-bottom: 1em;\n        "]))),isPrimary:!0,type:"submot"},Mr("Save","presto-player")),Object(we.b)(Yr,{onClick:t,css:Object(we.a)(Ir||(Ir=Object(Oe.a)(["\n          margin-bottom: 1em;\n        "]))),isTertiary:!0},Mr("Cancel","presto-player"))):""};function $r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function en(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tn=wp.i18n.__,rn=wp.components,nn=rn.ToggleControl,an=rn.Flex,on=rn.Button,ln=rn.BaseControl,cn=rn.RangeControl,sn=rn.TextControl,un=rn.SelectControl,pn=rn.TextareaControl,dn=wp.element,bn=dn.useEffect,mn=dn.useState,yn=wp.data.useSelect,vn=function(e){var t=e.state,r=e.updateState,n=e.className,a=t.action_bar,o=mn(!1),l=Object(I.a)(o,2),c=l[0],i=l[1],s=yn((function(e){return e("presto-player/player").branding()})),u=yn((function(e){return e("presto-player/player").youtube()})),p=function(e){r(en(en({},t),{},{action_bar:en(en({},a),e)}))};bn((function(){null!=a&&a.text||p({text:"Like this video?"}),null!=a&&a.button_type||p({button_type:"custom"}),null!=a&&a.button_text||p({button_text:"Click Here"})}),[t]);return React.createElement("div",{className:n},React.createElement(ln,null,React.createElement("h3",null,tn("Action Bar","presto-player"))),React.createElement(ln,{className:"presto-player__control--large-play"},React.createElement(nn,{label:tn("Enable","presto-player"),help:tn("Show an action bar below your video while it's playing.","presto-player"),onChange:function(e){p({enabled:e})},checked:null==a?void 0:a.enabled})),!(null==a||!a.enabled)&&React.createElement(React.Fragment,null,React.createElement(ln,{className:"presto-player__control--percentage-watched"},React.createElement(cn,{label:tn("Display At (Percentage)","presto-player"),labelPosition:"top",onChange:function(e){p({percentage_start:e})},marks:[{value:0,label:tn("Start","presto-player")},{value:50,label:tn("50% Watched","presto-player")},{value:100,label:tn("End","presto-player")}],shiftStep:5,value:(null==a?void 0:a.percentage_start)||0})),React.createElement(ln,{className:"presto-player__control--large-play"},React.createElement(pn,{label:tn("Text","presto-player"),help:tn("Action bar text.","presto-player"),value:null==a?void 0:a.text,onChange:function(e){return p({text:e})}})),React.createElement(ln,{className:"presto-player__control--large-play"},React.createElement(an,null,React.createElement(ln.VisualLabel,null,tn("Action Bar Background","presto-player")),React.createElement(gr,{color:(null==a?void 0:a.background_color)||"#1d1d1d",setColor:function(e){return p({background_color:e&&e.hex})}}))),React.createElement(ln,null,React.createElement("h3",null,tn("Button","presto-player"))),React.createElement(ln,{className:"presto-player__control--button-type"},React.createElement(un,{label:tn("Button Type","presto-player"),value:null==a?void 0:a.button_type,options:[{value:"custom",label:tn("Custom","presto-player")},{value:"youtube",label:tn("YouTube Subscribe","presto-player")},{value:"none",label:tn("None","presto-player")}],onChange:function(e){return p({button_type:e})}})),"youtube"===(null==a?void 0:a.button_type)&&(null==u?void 0:u.channel_id)&&React.createElement(nn,{label:tn("Show Count","presto-player"),help:tn("Show your follower count.","presto-player"),onChange:function(e){p({button_count:e})},checked:null==a?void 0:a.button_count}),function(){if("youtube"===(null==a?void 0:a.button_type))return c?React.createElement(Jr,{onClose:function(){return i(!1)}}):React.createElement("div",null,React.createElement(on,{isSecondary:!0,onClick:function(e){e.preventDefault(),i(!0)}},null!=u&&u.channel_id?tn("Update Youtube Channel Id","presto-player"):tn("Add Youtube Channel Id","presto-player")),React.createElement("br",null),React.createElement("br",null),React.createElement("br",null))}(),"custom"===(null==a?void 0:a.button_type)&&React.createElement("div",null,React.createElement(ln,{className:"presto-player__control--button-text"},React.createElement(sn,{label:tn("Button Text","presto-player"),help:React.createElement("p",null,tn("Submit button text","presto-player")),value:null==a?void 0:a.button_text,onChange:function(e){return p({button_text:e})}})),React.createElement(ln,{className:"presto-player__control--button-text"},React.createElement(ln.VisualLabel,null,React.createElement("p",null," ",tn("Button Link","presto-player"))),React.createElement(sr,{setSettings:function(e){p({button_link:e})},settings:(null==a?void 0:a.button_link)||{}})),React.createElement(ln,{className:"presto-player__control--button-radius"},React.createElement(cn,{label:tn("Round Corners","presto-player"),help:tn("Border radius of the button","presto-player"),value:(null==a?void 0:a.button_radius)||0,onChange:function(e){return p({button_radius:e})},min:0,max:25})),React.createElement(ln,{className:"presto-player__control--button-color"},React.createElement(an,null,React.createElement(ln.VisualLabel,null,tn("Button Color","presto-player")),React.createElement(gr,{color:(null==a?void 0:a.button_color)||(null==s?void 0:s.color),setColor:function(e){return p({button_color:e&&e.hex})}}))),React.createElement(ln,{className:"presto-player__control--button-text-color"},React.createElement(an,null,React.createElement(ln.VisualLabel,null,tn("Button Text Color","presto-player")),React.createElement(gr,{color:(null==a?void 0:a.button_text_color)||"#ffffff",setColor:function(e){return p({button_text_color:e&&e.hex})}}))))))},fn=r(27),hn=r.n(fn),gn=wp.i18n.__,On=wp.element,wn=On.useState,jn=On.useEffect,En=lodash,Rn=En.partial,_n=En.noop,kn=En.find,Pn=wp.components,xn=Pn.NavigableMenu,Cn=Pn.Animate,Sn=function(e){var t,r=e.className,n=e.children,o=e.items,l=e.title,c=e.orientation,i=void 0===c?"horizontal":c,s=e.activeClass,u=void 0===s?"is-active":s,p=e.onSelect,d=void 0===p?_n:p,b=wn(null),m=Object(I.a)(b,2),y=m[0],v=m[1],f=wn("left"),h=Object(I.a)(f,2),g=(h[0],h[1]),O=function(e){v(e),d&&d(e)},w=function(e,t){t.click()},j=kn(o,{name:y}),E="".concat(null!==(t=null==j?void 0:j.name)&&void 0!==t?t:"none");return jn((function(){g(y?"right":"left")}),[y]),React.createElement("div",{className:r},React.createElement(Cn,{type:"slide-in",origin:j?"right":"left"},(function(e){var t=e.className;return j?React.createElement("div",{key:E,"aria-labelledby":E,role:"itempanel",id:"".concat(E,"-view"),className:hn()(t,"presto-player__menu-content")},React.createElement("div",{className:"presto-player__menu-items"},React.createElement("div",{className:"presto-player__menu-item is-back-button",onClick:function(){return O("")}},React.createElement("svg",{class:"back-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",role:"img","aria-hidden":"true",focusable:"false"},React.createElement("path",{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),gn("Back","presto-player"))),n(j)):React.createElement("div",{className:hn()(t,"is-from-right")},!!l&&React.createElement("h2",null,l),React.createElement(xn,{role:"itemlist",orientation:i,onNavigate:w,className:hn()("presto-player__menu-items")},o.map((function(e){return React.createElement("div",{className:hn()("presto-player__menu-item",e.className,Object(a.a)({},u,e.name===y)),itemId:"".concat(e.name),"aria-controls":"".concat(e.name,"-view"),selected:e.name===y,key:e.name,onClick:Rn(O,e.name)},!!e.icon&&React.createElement("div",{class:"presto-player__menu-icon"},e.icon),e.title,React.createElement("svg",{className:"submenu-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",role:"img",ariaHidden:"true",focusable:"false"},React.createElement("path",{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})))}))))})))},Nn=r(21),Dn=r(35);function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ln,An,In=wp.i18n.__,Vn=wp.components.Disabled,Fn=wp.element,Un=Fn.useState,Mn=Fn.useEffect,zn=function(e){var t=e.state,r=e.branding,n=e.menu,a=Un(1),o=Object(I.a)(a,2),l=o[0],c=o[1],i=t.email_collection,s=t.cta;Mn((function(){c(l+1)}),[t.skin,t["play-large"],t.rewind,t.play,t["fast-forward"],t.progress,t["current-time"],t.mute,t.volume,t.speed,t.pip,t.fullscreen,t.hide_logo]);var u={email:!(null==i||!i.enabled)&&React.createElement(Dn.b,{className:"email-overlay",slot:"player-end",headline:null==i?void 0:i.headline,defaultHeadline:In("Enter your email to watch this video.","presto-player"),bottomText:null==i?void 0:i.bottom_text,allowSkip:null==i?void 0:i.allow_skip,skipText:In("Skip","presto-player"),buttonText:null==i?void 0:i.button_text,placeholder:In("Email address","presto-player")}),cta:!(null==s||!s.enabled)&&React.createElement(Dn.a,{className:"cta-overlay",style:Bn(Bn(Bn({"--presto-player-button-border-radius":"".concat(s.button_radius,"px")},null!=s&&s.background_opacity?{"--presto-player-cta-background-opacity":"".concat((null==s?void 0:s.background_opacity)/100)}:{}),s.button_color?{"--presto-player-button-color":"".concat(s.button_color)}:{}),s.button_text_color?{"--presto-player-button-text":"".concat(s.button_text_color)}:{}),slot:"player-end",headline:null==s?void 0:s.headline,"bottom-text":null==s?void 0:s.bottom_text,"button-link":null==s?void 0:s.button_link,"allow-skip":100!==(null==s?void 0:s.percentage)&&(null==s?void 0:s.show_skip),borderRadius:null==s?void 0:s.border_radius,"allow-rewatch":100===(null==s?void 0:s.percentage)&&(null==s?void 0:s.show_rewatch),"skip-text":In("Skip","presto-player"),"show-button":null==s?void 0:s.show_button,"button-text":null==s?void 0:s.button_text})};return React.createElement(Vn,{isDisabled:!u.email},React.createElement("div",{className:"presto-player__wrapper"},React.createElement(Nn.a,{preset:t,branding:r,attributes:{chapters:[],poster:"https://source.unsplash.com/daily"},setAttributes:function(){},key:l,adminPreview:u[n]})))};function Hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Yn=wp.i18n.__,Gn=wp.components,qn=Gn.TextControl,Zn=Gn.BaseControl,Kn=Gn.Icon,Qn=Gn.Notice,Xn=Gn.Button,Jn=Gn.Flex,$n=Gn.FlexItem,ea=Gn.SelectControl,ta=Gn.FlexBlock,ra=Gn.Modal,na=wp.element.useState,aa=wp.data.useSelect;var oa=function(e){var t=e.type,r=void 0===t?"new":t,n=e.closeModal,a=e.addPreset,o=e.onSave,l=e.updatePreset,c=e.name,i=void 0===c?"":c,s=e.preset,u=void 0===s?{"play-large":!0,rewind:!0,play:!0,"fast-forward":!0,progress:!0,"current-time":!0,mute:!0,volume:!0,speed:!1,pip:!1,fullscreen:!0,save_player_position:!1,reset_on_end:!1,auto_hide:!0,sticky_scroll:!1,hide_logo:!1,border_radius:0,skin:"default",caption_style:"default",caption_background:"#000000",hide_youtube:!1,lazy_load_youtube:!1,cta:{},email_collection:{},action_bar:{}}:s,p=na(!1),d=Object(I.a)(p,2),b=d[0],m=d[1],y=na(""),v=Object(I.a)(y,2),f=v[0],h=v[1],g=na(""),O=Object(I.a)(g,2),w=O[0],j=O[1],E=na(i),R=Object(I.a)(E,2),_=R[0],k=R[1],P=na(u),x=Object(I.a)(P,2),C=x[0],S=x[1],N=aa((function(e){return e("presto-player/player").branding()})),D={message:Yn("The preset could not be saved. Please reload the page and try again.","presto-player")},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(Wn(Wn({},C),e))},B=function(){var e=Object(A.a)(F.a.mark((function e(){var t,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,t=Wn(Wn({},C),{name:_}),e.next=5,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"preset/").concat(u.id),{_method:"PUT"}),data:t});case 5:if(r=e.sent){e.next=8;break}throw D;case 8:l(r),n(),o&&o(r),Object(je.a)({message:Yn("Preset updated!","presto-player")}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),h(null!==e.t0&&void 0!==e.t0&&e.t0.message?e.t0.message:D);case 17:return e.prev=17,m(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(A.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,wp.apiFetch({method:"POST",url:prestoPlayer.root+prestoPlayer.prestoVersionString+"preset",data:Wn(Wn({},{name:_}),C)});case 4:if(t=e.sent){e.next=7;break}throw D;case 7:a(t),n(),o&&o(t),Object(je.a)({message:Yn("Preset created!","presto-player")}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),h(null!==e.t0&&void 0!==e.t0&&e.t0.message?e.t0.message:D);case 16:return e.prev=16,m(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),V=[{name:"controls",title:Yn("Controls","presto-player"),icon:Object(we.b)(Kn,{icon:"admin-settings"}),component:Object(we.b)(Pe,{updateState:T,state:C})},{name:"behavior",title:Yn("Behavior","presto-player"),icon:Object(we.b)(Kn,{icon:"admin-generic"}),component:Object(we.b)(Be,{updateState:T,state:C})},{name:"style",title:Yn("Style","presto-player"),icon:Object(we.b)(Kn,{icon:"admin-customizer"}),component:Object(we.b)(ze,{updateState:T,state:C})},{name:"email",title:Yn("Email Capture","presto-player"),icon:Object(we.b)(Kn,{icon:"email"}),component:Object(we.b)(Qt,{updateState:T,state:C})},{name:"cta",title:Yn("Call To Action","presto-player"),icon:Object(we.b)(Kn,{icon:"megaphone"}),component:Object(we.b)(Vr,{updateState:T,state:C})},{name:"action_bar",title:Yn("Action Bar","presto-player"),icon:Object(we.b)(Kn,{icon:"cover-image"}),component:Object(we.b)(vn,{updateState:T,state:C})}];return Object(we.b)(ra,{title:Yn("edit"==r?"Edit A Video Preset":"Create A New Video Preset","presto-player"),onRequestClose:n,className:"presto-player__modal-presets",overlayClassName:"presto-player__modal-presets-overlay"},Object(we.b)("div",{className:"presto-player__preset-options","data-cy":"preset-modal"},Object(we.b)(qn,{value:_,hideLabelFromVision:!0,label:Yn("Preset Name","presto-player"),onChange:function(e){return k(e)},placeholder:Yn("Enter a preset name...","presto-player"),className:"presto-player__modal--style-name",autoFocus:!0}),Object(we.b)(Jn,{align:"stretch",className:"presto-player__style-preview-area"},Object(we.b)($n,{className:"presto-player__style-sidebar"},Object(we.b)("div",null,Object(we.b)(Sn,{items:V,title:Yn("Customize","presto-player"),onSelect:j},(function(e){return e.component})))),Object(we.b)(ta,{className:"presto-player__style-preview-panel"},Object(we.b)("div",{style:{position:"absolute",top:0,left:0,padding:"20px"}},Object(we.b)(ea,{label:Yn("Skin","presto-player"),labelPosition:"side",value:null==C?void 0:C.skin,hideLabelFromVision:!0,options:[{label:Yn("Basic","presto-player"),value:"default"},{label:Yn("Stacked","presto-player"),value:"stacked"}],onChange:function(e){T({skin:e})}})),Object(we.b)(zn,{state:C,branding:N,menu:w}))),Object(we.b)("br",null),f&&Object(we.b)(Zn,null,Object(we.b)(Qn,{className:"presto-player__modal--error-notice",status:"error",isDismissible:!1,style:{margin:0}},f.replace(/(<([^>]+)>)/gi,""))),Object(we.b)("div",{css:Object(we.a)(Ln||(Ln=Object(Oe.a)(["\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n          "])))},Object(we.b)("div",{css:Object(we.a)(An||(An=Object(Oe.a)(["\n              opacity: 0.5;\n              font-size: 12px;\n            "])))},"Preset ID: ",u.id),Object(we.b)("div",null,Object(we.b)(Xn,{isTertiary:!0,onClick:n,style:{margin:"0 6px"}},Yn("Cancel","presto-player")),Object(we.b)(Xn,{isPrimary:!0,isBusy:b,disabled:b,onClick:function(){if(_)return"edit"===r?B():L();h(Yn("You must enter a name for the preset.","presto-player"))},"data-cy":"submit-preset"},Yn("edit"==r?"Update Preset":"Create Preset","presto-player"))))))},la=wp.i18n.__,ca=wp.components,ia=ca.Icon,sa=ca.Spinner,ua=ca.Modal,pa=ca.Button,da=ca.ButtonGroup,ba=wp.element.useState,ma=function(e){var t,r,n=e.preset,a=e.index,o=e.isActive,l=e.remove,c=e.setPreset,i=e.onEdit,s=ba(!1),u=Object(I.a)(s,2),p=u[0],d=u[1],b=ba(!1),m=Object(I.a)(b,2),y=m[0],v=m[1],f=function(){return v(!1)},h=function(){var e=Object(A.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.id){e.next=3;break}return l(n),e.abrupt("return");case 3:return e.prev=3,d(!0),e.next=7,wp.apiFetch({method:"POST",url:wp.url.addQueryArgs("".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"preset/").concat(n.id),{_method:"DELETE"})});case 7:e.sent&&(l(n),wp.data.dispatch("core/notices").createNotice("success",la("Preset trashed.","presto-player"),{type:"snackbar",isDismissible:!0})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0),null!==e.t0&&void 0!==e.t0&&e.t0.message&&wp.data.dispatch("core/notices").createNotice("error",e.t0.message,{type:"snackbar",isDismissible:!0});case 15:return e.prev=15,v(!1),d(!1),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[3,11,15,19]])})));return function(){return e.apply(this,arguments)}}();return p?React.createElement("div",{className:"block-editor-block-styles__item",role:"button",tabIndex:a,"aria-label":"Fill",style:{color:o?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:o?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0,display:"flex","align-items":"center","justify-content":"center"}},React.createElement(sa,null))):React.createElement("div",{className:"block-editor-block-styles__item presto-preset-".concat(n.slug),onClick:function(){c(n)},role:"button",tabIndex:a,"aria-label":"Fill",style:{color:o?"var(--wp-admin-theme-color)":"inherit"}},React.createElement("div",{className:"block-editor-block-styles__item-preview",style:{border:o?"2px solid var(--wp-admin-theme-color)":"2px solid #e3e3e3",margin:0}},React.createElement("div",{style:{textAlign:"center",width:"100%",color:o?"var(--wp-admin-theme-color)":"inherit",opacity:o?1:.75}},null!=n&&n.icon?React.createElement(ia,{icon:null==n?void 0:n.icon,style:{fontSize:"30px",width:"30px",height:"30px"}}):React.createElement("h1",{style:{opacity:.75}},(null==n||null===(t=n.name)||void 0===t||null===(r=t.charAt(0))||void 0===r?void 0:r.toUpperCase())||"Untitled"))),React.createElement("div",{className:"block-editor-block-styles__item-label",style:{fontWeight:"bold",textTransform:"capitalize"}},(null==n?void 0:n.name)||"Untitled"),!(null!=n&&n.is_locked)&&React.createElement("div",{className:"block-editor-block-styles__item-edit"},React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:i},React.createElement(ia,{icon:"edit"})),React.createElement("div",{className:"block-editor-block-styles__item-edit-icon",onClick:function(){return v(!0)}},React.createElement(ia,{icon:"trash"}))),y&&React.createElement(ua,{title:la("Trash Preset?","presto-player"),onRequestClose:f,style:{maxWidth:"250px"}},React.createElement("p",null,React.createElement("strong",null,la("Warning!","presto-player")," "),la("Any videos assigned to this preset will automatically use the default preset.","presto-player")),React.createElement(da,null,React.createElement(pa,{isDestructive:!0,onClick:h,style:{margin:"0 4px"}},la("Trash","presto-player")),React.createElement(pa,{isTertiary:!0,onClick:f,style:{margin:"0 4px",boxShadow:"none"}},la("Cancel","presto-player")))))},ya=wp.i18n.__,va=wp.components,fa=va.withNotices,ha=va.BaseControl,ga=va.Spinner,Oa=va.Button,wa=wp.element,ja=wa.useState,Ea=wa.useEffect,Ra=wp.data,_a=Ra.useSelect,ka=Ra.dispatch;var Pa=fa((function(e){var t,r=e.attributes,a=e.setAttributes,o=ja(!1),l=Object(I.a)(o,2),c=l[0],i=l[1],s=function(){return i(!1)},u=ja(null),p=Object(I.a)(u,2),d=p[0],b=p[1],m=ja(null),y=Object(I.a)(m,2),v=y[0],f=y[1],h=ja(!0),g=Object(I.a)(h,2),O=g[0],w=g[1],j=_a((function(e){return e("presto-player/player").getPresets()})),E=function(e){ka("presto-player/player").addPreset(e)},R=function(e){ka("presto-player/player").removePreset(e)};Ea((function(){w(!j.length)}),[j]);var _=function(e){a({preset:e.id})};return O?React.createElement("div",{className:"presto-settings__loading"},React.createElement(ga,null)):React.createElement(React.Fragment,null,j.length?React.createElement("p",null,ya("Select a video configuration preset, or add your own.","presto-player")):"",React.createElement(ha,null,React.createElement("div",{className:"block-editor-block-styles"},(j||[]).length?j.map((function(e,t){return React.createElement(ma,{setPreset:_,index:t,isActive:(null==r?void 0:r.preset)===e.id,preset:e,key:e.id,onEdit:function(){f(e.name),b(e),i("edit")},remove:R})})):ya("No style presets. You can create a new style by clicking 'Add New Style'.","presto-plugin"))),React.createElement(ha,null,React.createElement(Oa,{isPrimary:!0,"data-cy":"add-new-preset",onClick:function(){var e;null!==(e=prestoPlayer)&&void 0!==e&&e.isPremium?i("new"):ka("presto-player/player").setProModal(!0)}},ya("Add New Preset","presto-player")),!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(n.a,null)),"new"==c&&React.createElement(oa,{closeModal:s,addPreset:E,type:"new",onSave:_}),"edit"==c&&React.createElement(oa,{closeModal:s,addPreset:E,updatePreset:function(e){ka("presto-player/player").updatePreset(e)},type:"edit",preset:d,name:v}))})),xa=wp.components.PanelBody,Ca=wp.i18n.__;t.a=function(e){var t,r,a=e.attributes,o=e.setAttributes;return React.createElement(React.Fragment,null,React.createElement(xa,{title:React.createElement(React.Fragment,null,Ca("Chapters","presto-player")," ",!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(n.a,null)),initialOpen:null===(r=prestoPlayer)||void 0===r?void 0:r.isPremium},React.createElement(ge,{setAttributes:o,attributes:a})),React.createElement(xa,{title:Ca("Video settings","presto-player")},React.createElement(L,{setAttributes:o,attributes:a})),React.createElement(xa,{title:Ca("Video Preset","presto-player")},React.createElement(Pa,{setAttributes:o,attributes:a})),React.createElement(xa,{title:Ca("Global Player Branding","presto-player"),initialOpen:!1},React.createElement(re,{setAttributes:o,attributes:a})))}},function(e,t,r){"use strict";var n=r(5),a=r(6),o=r(1),l=r(3),c=r.n(l),i=r(22),s=wp.apiFetch;s.use(s.createNonceMiddleware(prestoPlayer.nonce)),s.use(s.createRootURLMiddleware(prestoPlayer.root+prestoPlayer.prestoVersionString));var u=s;function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=wp.compose.createHigherOrderComponent,m=wp.element,y=m.useEffect,v=m.useState;t.a=function(){return b((function(e){return function(t){var r=t.presets,n=t.attributes,l=t.setAttributes,s=t.defaultPreset,p=t.isSelected,b=t.branding,m=v({}),f=Object(o.a)(m,2),h=f[0],g=f[1],O=v(1),w=Object(o.a)(O,2),j=w[0],E=w[1],R=n.poster,k=n.chapters;y((function(){p&&null!=n&&n.id&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")}),[p]),y((function(){p&&null!=n&&n.selectionOverrideClientId&&wp.data.dispatch("core/block-editor").selectBlock(null==n?void 0:n.selectionOverrideClientId)}),[p]),y((function(){if(r&&r.length){var e=r.find((function(e){return e.id===(null==n?void 0:n.preset)}));e?g(e):(g(s),l({preset:null==s?void 0:s.id}))}}),[r,null==n?void 0:n.preset]),y((function(){P()}),[R,h,k,b.logo]);var P=function(){E(j+1)},x=Object(i.b)(k);y((function(){var e=null==k?void 0:k.map((function(e){return e.time})),t=null==x?void 0:x.map((function(e){return e.time}));_.difference(e,t).length&&P()}),[k]);var C=function(){var e=Object(a.a)(c.a.mark((function e(t){var r,n,a,o,i,s,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.src,n=t.external_id,a=t.attachment_id,o=t.type,i=t.title,r||n||a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u({method:"POST",path:"/presto-player/v1/videos",data:d(d({attachment_id:a,post_id:wp.data.select("core/editor").getCurrentPostId(),external_id:n},i?{title:i}:{}),{},{src:r,type:o})});case 5:s=e.sent,p=s.id,l({id:p});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!=n&&n.preset||l({preset:null==s?void 0:s.id}),React.createElement(e,Object.assign({},t,{lockSave:function(){return wp.data.dispatch("core/editor").lockPostSaving("presto-player")},unlockSave:function(){return wp.data.dispatch("core/editor").unlockPostSaving("presto-player")},createVideo:C,onUpdate:P,onRemoveSrc:function(){confirm("Remove this video?")&&l(d(d(d(d({src:"",id:void 0},null!=n&&n.thumbnail?{thumbnail:null}:{}),null!=n&&n.preview?{preview:null}:{}),null!=n&&n.previewSrc?{previewSrc:null}:{}),null!=n&&n.previewThumbnail?{previewThumbnail:null}:{}))},presetData:h,setPresetData:g,renderKey:j}))}}),"withPlayerEdit")}},,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return w})),r.d(t,"c",(function(){return j}));var n=r(50),a=r(51),o=r(52),l=r(53),c=r(45),i=r(32),s=r.n(i),u=function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))},p=r(16),d=function(e,t,r){var n=t.className||t.class,a=r.className||r.class,o=y(e),l=y(n?n.split(" "):[]),c=y(a?a.split(" "):[]),i=[];return o.forEach((function(e){l.has(e)?(i.push(e),l.delete(e)):c.has(e)||i.push(e)})),l.forEach((function(e){return i.push(e)})),i.join(" ")},b=function(e,t){var r="on"+e,n=r in t;if(!n){var a=t.createElement("div");a.setAttribute(r,"return;"),n="function"==typeof a[r]}return n},m=function(e,t,r){var n=e.__events||(e.__events={}),a=n[t];a&&e.removeEventListener(t,a),e.addEventListener(t,n[t]=function(e){r&&r.call(this,e)})},y=function(e){var t=new Map;return e.forEach((function(e){return t.set(e,e)})),t},v=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.forEach((function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)}))}};function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var h=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},g=function(e,t,r){var l=e.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(""),c=function(t){Object(o.a)(i,t);var c=f(i);function i(e){var t;return Object(n.a)(this,i),(t=c.call(this,e)).setComponentElRef=function(e){t.componentEl=e},t}return Object(a.a)(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Element){var n=d(e.classList,t,r);""!==n&&(e.className=n),Object.keys(t).forEach((function(r){if("children"!==r&&"style"!==r&&"ref"!==r&&"class"!==r&&"className"!==r&&"forwardedRef"!==r)if(0===r.indexOf("on")&&r[2]===r[2].toUpperCase()){var n=r.substring(2),a=n[0].toLowerCase()+n.substring(1);"undefined"==typeof document||b(a,document)||m(e,a,t[r])}else{e[r]=t[r],"string"===Object(p.a)(t[r])?e.setAttribute(u(r),t[r]):e[r]=t[r]}}))}}(this.componentEl,this.props,e)}},{key:"render",value:function(){var t=this.props,n=t.children,a=t.forwardedRef,o=t.style,l=(t.className,t.ref,h(t,["children","forwardedRef","style","className","ref"])),c=Object.keys(l).reduce((function(e,t){if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var r=t.substring(2).toLowerCase();"undefined"!=typeof document&&b(r,document)&&(e[t]=l[t])}else e[t]=l[t];return e}),{});r&&(c=r(this.props,c));var i=Object.assign(Object.assign({},c),{ref:v(a,this.setComponentElRef),style:o});return s.a.createElement(e,i,n)}}],[{key:"displayName",get:function(){return l}}]),i}(s.a.Component);return t&&(c.contextType=t),function(e,t){var r=function(t,r){return s.a.createElement(e,Object.assign({},t,{forwardedRef:r}))};return r.displayName=t,s.a.forwardRef(r)}(c,l)},O=g("presto-cta-overlay-ui"),w=g("presto-email-overlay-ui"),j=g("presto-player")},,function(e,t,r){"use strict";r.d(t,"a",(function(){return N}));var n=r(8),a=r(49),o=r(1),l=r(5);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=wp.i18n,u=s.__,p=s.sprintf,d=wp.components,b=d.NavigableMenu,m=d.MenuItem,y=d.FormFileUpload,v=d.MenuGroup,f=d.ToolbarGroup,h=d.ToolbarButton,g=d.Dropdown,O=(d.SVG,d.Rect,d.Path,d.Button),w=d.TextControl,j=(d.SelectControl,wp.blockEditor),E=j.MediaUpload,R=j.MediaUploadCheck,_=wp.data.useSelect,k=wp.element.useState,P=["text/vtt"],x=React.createElement("svg",{viewBox:"0 0 29 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5014 20.2854H28.6316V0.764648H0.110825V20.2854H11.241L14.3712 24.2854L17.5014 20.2854ZM14.3712 21.0401L16.5269 18.2854H26.6316V2.76465H2.11082V18.2854H12.2155L14.3712 21.0401Z"}),React.createElement("path",{d:"M10.4503 14.9446C9.56226 14.9446 8.76226 14.7606 8.05026 14.3926C7.33826 14.0166 6.77826 13.4966 6.37026 12.8326C5.97026 12.1606 5.77026 11.4006 5.77026 10.5526C5.77026 9.70464 5.97026 8.94864 6.37026 8.28464C6.77826 7.61264 7.33826 7.09264 8.05026 6.72464C8.76226 6.34864 9.56226 6.16064 10.4503 6.16064C11.2663 6.16064 11.9943 6.30464 12.6343 6.59264C13.2743 6.88064 13.8023 7.29664 14.2183 7.84064L12.4303 9.43664C11.9103 8.78064 11.2983 8.45264 10.5943 8.45264C10.0023 8.45264 9.52626 8.64464 9.16626 9.02864C8.80626 9.40464 8.62626 9.91264 8.62626 10.5526C8.62626 11.1926 8.80626 11.7046 9.16626 12.0886C9.52626 12.4646 10.0023 12.6526 10.5943 12.6526C11.2983 12.6526 11.9103 12.3246 12.4303 11.6686L14.2183 13.2646C13.8023 13.8086 13.2743 14.2246 12.6343 14.5126C11.9943 14.8006 11.2663 14.9446 10.4503 14.9446Z"}),React.createElement("path",{d:"M19.2042 14.9446C18.3162 14.9446 17.5162 14.7606 16.8042 14.3926C16.0922 14.0166 15.5322 13.4966 15.1242 12.8326C14.7242 12.1606 14.5242 11.4006 14.5242 10.5526C14.5242 9.70464 14.7242 8.94864 15.1242 8.28464C15.5322 7.61264 16.0922 7.09264 16.8042 6.72464C17.5162 6.34864 18.3162 6.16064 19.2042 6.16064C20.0202 6.16064 20.7482 6.30464 21.3882 6.59264C22.0282 6.88064 22.5562 7.29664 22.9722 7.84064L21.1842 9.43664C20.6642 8.78064 20.0522 8.45264 19.3482 8.45264C18.7562 8.45264 18.2802 8.64464 17.9202 9.02864C17.5602 9.40464 17.3802 9.91264 17.3802 10.5526C17.3802 11.1926 17.5602 11.7046 17.9202 12.0886C18.2802 12.4646 18.7562 12.6526 19.3482 12.6526C20.0522 12.6526 20.6642 12.3246 21.1842 11.6686L22.9722 13.2646C22.5562 13.8086 22.0282 14.2246 21.3882 14.5126C20.7482 14.8006 20.0202 14.9446 19.2042 14.9446Z"}));function C(e){var t,r=e.tracks,n=e.onEditPress;return t=0===r.length?React.createElement("p",{className:"block-library-video-tracks-editor__tracks-informative-message"},u("Captions are .vtt files that help make your content more accesible to a wider range of users.","presto-player")):r.map((function(e,t){return React.createElement("div",{key:t,className:"block-library-video-tracks-editor__track-list-track"},React.createElement("span",null,e.label," "),React.createElement(O,{isTertiary:!0,onClick:function(){return n(t)},"aria-label":p(u("Edit %s","presto-player"),e.label)},u("Edit","presto-player")))})),React.createElement(v,{label:u("Captions","presto-player"),className:"block-library-video-tracks-editor__track-list"},t)}function S(e){var t=e.track,r=e.onChange,n=e.onClose,a=e.onRemove,o=t.src,l=void 0===o?"":o,c=t.label,s=void 0===c?"":c,p=t.srcLang,d=void 0===p?"":p,m=(t.kind,l.startsWith("blob:")?"":l.substring(l.lastIndexOf("/")+1));return React.createElement(b,null,React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor"},React.createElement("span",{className:"block-library-video-tracks-editor__single-track-editor-edit-track-label"},u("Edit caption track","presto-player")),React.createElement("span",null,u("File","presto-player"),": ",React.createElement("b",null,m)),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-label-language"},React.createElement(w,{autoFocus:!0,onChange:function(e){return r(i(i({},t),{},{label:e}))},label:u("Label","presto-player"),value:s,help:u("Title of track","presto-player")}),React.createElement(w,{onChange:function(e){return r(i(i({},t),{},{srcLang:e}))},label:u("Source language","presto-player"),value:d,help:u("Language tag (en, fr, etc.)","presto-player")})),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-buttons-container"},React.createElement(O,{isSecondary:!0,onClick:function(){var e={},a=!1;""===s&&(e.label=u("English","presto-player"),a=!0),""===d&&(e.srcLang="en",a=!0),a&&r(i(i({},t),e)),n()}},u("Close","presto-player")),React.createElement(O,{isDestructive:!0,isLink:!0,onClick:a},u("Remove track","presto-player")))))}function N(e){var t=e.tracks,r=void 0===t?[]:t,l=e.onChange,c=_((function(e){return e("core/block-editor").getSettings().mediaUpload}),[]),s=k(null),p=Object(o.a)(s,2),d=p[0],O=p[1];return c?React.createElement(g,{contentClassName:"block-library-video-tracks-editor",renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return React.createElement(f,null,React.createElement(h,{label:u("Captions","presto-player"),showTooltip:!0,"aria-expanded":t,"aria-haspopup":"true",onClick:r,icon:x}))},renderContent:function(e){return Object(a.a)(e),null!==d?React.createElement(S,{track:r[d],onChange:function(e){var t=Object(n.a)(r);t[d]=e,l(t)},onClose:function(){return O(null)},onRemove:function(){l(r.filter((function(e,t){return t!==d}))),O(null)}}):React.createElement(React.Fragment,null,React.createElement(b,null,React.createElement(C,{tracks:r,onEditPress:O}),React.createElement(v,{className:"block-library-video-tracks-editor__add-tracks-container",label:u("Add caption languages","presto-player")},React.createElement(E,{onSelect:function(e){var t=e.url,a=r.length;l([].concat(Object(n.a)(r),[{src:t}])),O(a)},allowedTypes:P,render:function(e){var t=e.open;return React.createElement(m,{icon:"media",onClick:t},u("Open Media Library","presto-player"))}}),React.createElement(R,null,React.createElement(y,{onChange:function(e){var t=e.target.files,a=r.length;c({allowedTypes:P,filesList:t,onFileChange:function(e){var t=Object(o.a)(e,1)[0].url,c=Object(n.a)(r);c[a]||(c[a]={}),c[a]=i(i({},r[a]),{},{src:t}),l(c),O(a)}})},accept:".vtt,text/vtt",render:function(e){var t=e.openFileDialog;return React.createElement(m,{icon:"upload",onClick:function(){t()}},u("Upload","presto-player"))}})))))}}):null}},,function(e,t,r){"use strict";var n=r(1),a=wp.components,o=a.Button,l=a.Placeholder,c=a.TextControl,i=a.Flex,s=a.FlexItem,u=a.FlexBlock,p=wp.element.useState,d=wp.i18n.__;t.a=function(e){var t=e.attributes,r=(e.setAttributes,e.icon),a=e.onSelectURL,b=e.label,m=e.instructions,y=e.placeholder,v=t.src,f=p({src:v}),h=Object(n.a)(f,2),g=h[0],O=h[1];return React.createElement(l,{icon:r,label:b||d("Presto Embedded Video","presto-player"),instructions:m||d("Enter video URL","presto-player")},React.createElement("form",{onSubmit:function(e){e.preventDefault(),a(g.url)}},React.createElement(i,{style:{width:"100%",maxWidth:"400px"}},React.createElement(u,null,React.createElement(c,{type:"url",className:"presto-link-placeholder-input",placeholder:y||d("Youtube URL","presto-player"),value:g.url,onChange:function(e){return O({url:e})}})),React.createElement(s,null,React.createElement(o,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},d("Add Video","presto-player"))))))}},,,,,,,,,,,,,,,function(e,t,r){r(42),e.exports=r(67)},,function(e,t,r){var n={"./bunny/index.js":66,"./hosted/index.js":68,"./reusable-display/index.js":71,"./reusable-edit/index.js":61,"./vimeo/index.js":72,"./youtube/index.js":73};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=56},,,,,function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return v})),r.d(t,"options",(function(){return f}));var n=wp.i18n.__,a=wp.blockEditor,o=a.InnerBlocks,l=a.useBlockProps,c=wp.data,i=c.useSelect,s=c.dispatch,u=wp.components,p=u.Button,d=u.Placeholder,b=wp.plugins,m=(b.getPlugins,b.unregisterPlugin),y=wp.element.useEffect,v="presto-player/reusable-edit",f={title:"Reusable Block Container",category:"presto",supports:{inserter:!1,reusable:!1,html:!1},icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),React.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),edit:function(e){var t=l(),r=e.clientId,a=e.isSelected,c=i((function(e){return e("core/block-editor").getBlock(r).innerBlocks}));y((function(){a&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")}),[a]),s("core/block-editor").setTemplateValidity(!0),y((function(){m("presto-player")}),[]);var u,b=function(e){var t=wp.blocks.createBlock("presto-player/".concat(e));return s("core/block-editor").insertBlock(t,0,r)};return null!=c&&c.length?React.createElement("div",null,React.createElement("div",t,React.createElement(o,{templateLock:!1,renderAppender:function(){return 0===c.length&&React.createElement(o.ButtonBlockAppender,null)}}))):React.createElement("div",null,React.createElement("div",t,React.createElement(d,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),instructions:n("Choose a video type to get started.","presto-player"),label:n("Choose a Video Type","presto-player")},React.createElement(p,{isPrimary:!0,onClick:function(){b("self-hosted")}},n("Video","presto-player")),React.createElement(p,{isPrimary:!0,onClick:function(){b("youtube")}},n("Youtube","presto-player")),React.createElement(p,{isPrimary:!0,onClick:function(){b("vimeo")}},n("Vimeo","presto-player")),null!==(u=prestoPlayer)&&void 0!==u&&u.isPremium?React.createElement(p,{isPrimary:!0,onClick:function(){b("bunny")}},n("Bunny.net","presto-player")):""),React.createElement(o,{templateLock:!1,renderAppender:function(){return!1}})))},save:function(){var e=l.save();return React.createElement("div",e,React.createElement(o.Content,null))}}},function(e,t,r){var n={"./reusable-videos/index.js":69};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=62},,,,function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return xa})),r.d(t,"options",(function(){return Ca}));var n={};r.r(n),r.d(n,"videos",(function(){return K})),r.d(n,"collections",(function(){return Q})),r.d(n,"uploads",(function(){return X})),r.d(n,"isPrivate",(function(){return J})),r.d(n,"isLoading",(function(){return $})),r.d(n,"errors",(function(){return ee})),r.d(n,"videosFetched",(function(){return te})),r.d(n,"currentCollection",(function(){return re})),r.d(n,"ui",(function(){return ne})),r.d(n,"requestType",(function(){return ae}));var a={};r.r(a),r.d(a,"setVideos",(function(){return oe})),r.d(a,"addVideos",(function(){return le})),r.d(a,"removeVideo",(function(){return ce})),r.d(a,"setCollections",(function(){return ie})),r.d(a,"addCollection",(function(){return se})),r.d(a,"setIsPrivate",(function(){return ue})),r.d(a,"setSearch",(function(){return pe})),r.d(a,"setCollectionRequest",(function(){return de})),r.d(a,"setUploads",(function(){return be})),r.d(a,"addUploads",(function(){return me})),r.d(a,"removeUpload",(function(){return ye})),r.d(a,"setVideosFetched",(function(){return ve})),r.d(a,"setLoading",(function(){return fe})),r.d(a,"setUI",(function(){return he})),r.d(a,"addError",(function(){return ge})),r.d(a,"removeError",(function(){return Oe}));var o,l,c=r(5),i=r(6),s=r(1),u=r(3),p=r.n(u),d=r(26),b=r(24),m=r(37),y=function(e){var t=e.file,r=e.path,n=e.onProgress,a=e.onComplete,o=e.onError,l=0,c=!1,s=Math.min(prestoPlayerAdmin.wp_max_upload_size-1e6,159e5),u=Math.max(s,19e5);u=Math.min(u,104857600);var d=function(){var e=Object(i.a)(p.a.mark((function e(i){var s,b,m,y,v;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i+u+1,b=t.slice(i,s),m=Math.ceil(t.size/(u+1)),l++,n(l/m*100),(y=new FormData).append("file",b),y.append("name",t.name),y.append("chunk",l),y.append("chunks",m),e.prev=10,e.next=13,wp.apiFetch({path:r,method:"POST",body:y});case 13:if(v=e.sent,!c){e.next=17;break}return console.log("cancelled"),e.abrupt("return");case 17:s<t.size?(n(void 0),d(s)):a(v),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(10),o(e.t0),console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t){return e.apply(this,arguments)}}();return l=0,new FileReader,d(0),{cancel:function(){c=!0}}},v=r(4),f=function(e){var t=e.item,r=e.onClick,n=e.className;var a,o=function(){return!(null==t||!t.encodeProgress)&&100!==t.encodeProgress};return React.createElement("div",{className:"presto-player__media-list-item ".concat(n),onClick:r},React.createElement("div",{className:"presto-player__media-list-item-icon"},React.createElement("svg",Object(c.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},"strokeLinecap","round"),React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}))),React.createElement("div",{className:"presto-player__media-list-item-title"},null==t?void 0:t.title),o()&&React.createElement("div",{className:"presto-player__media-list-item-size"},"Encoding..."),!o()&&React.createElement("div",{className:"presto-player__media-list-item-size"},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(null==t?void 0:t.size)),!o()&&React.createElement("div",{className:"presto-player__media-list-item-modified"},(a=t.updated_at,new Date(a).toLocaleString())))},h=function(e){var t,r=e.item,n=e.onClick,a=e.className;return React.createElement("div",{className:"presto-player__media-list-item ".concat(a),onClick:n},React.createElement("div",{className:"presto-player__media-list-item-icon"},React.createElement("svg",Object(c.a)({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"},"strokeLinecap","round"),React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}))),React.createElement("div",{className:"presto-player__media-list-item-title"},null==r?void 0:r.title),React.createElement("div",{className:"presto-player__media-list-item-size"},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(null==r?void 0:r.size)),React.createElement("div",{className:"presto-player__media-list-item-modified"},(t=r.updated_at,new Date(t).toLocaleString())))},g=r(0),O=wp.i18n.__,w=wp.components,j=w.Modal,E=w.Spinner,R=w.Button,_=w.BaseControl,k=w.Flex,P=w.FlexBlock,x=w.Notice,C=w.Card,S=w.CardBody,N=w.Disabled,D=w.DropZone,T=w.FormFileUpload,B=w.DropZoneProvider,L=wp.element,A=L.useEffect,I=L.useState,V=L.useRef,F=function(e){var t=e.onClose,r=e.title,n=e.header,a=e.onLoad,c=e.items,i=e.folders,u=e.fetching,p=e.progressMessage,d=e.onSelect,b=e.error,m=e.onDelete,y=e.onUpload,w=e.progress,L=I({}),F=Object(s.a)(L,2),U=F[0],M=F[1],z=I(!1),H=Object(s.a)(z,2),W=H[0],Y=H[1],G=V();A((function(){a&&a()}),[]);var q,Z,K,Q,X=function(){m(U),Y(!1)},J=function(){return Object.keys(U||{}).length};return Object(g.b)(j,{title:n||O("Add Media","presto-player"),onRequestClose:t,className:"presto-player__media-modal presto-player__full-modal",overlayClassName:"presto-player__modal-overlay"},Object(g.b)("div",{className:"presto-player__media-modal-layout","data-cy":"media-modal"},Object(g.b)("div",{className:"presto-player__media-modal-header"},Object(g.b)("div",{className:"presto-player__media-modal-upload",css:Object(g.a)(o||(o=Object(v.a)(["\n              display: flex;\n              align-items: center;\n            "])))},Object(g.b)(T,{isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(y(e.target.files),jQuery(e.target).val(null))}},O("Upload New Video","presto-player")),Object(g.b)("div",{css:Object(g.a)(l||(l=Object(v.a)(["\n                margin-left: 10px;\n              "])))},O("Or drag a file here to upload.","presto-player"))),b&&Object(g.b)(x,{status:"error",isDismissible:!1},b)),Object(g.b)("div",{className:"presto-player__media-modal-content"},Object(g.b)(B,null,u?Object(g.b)(k,{className:"presto-player__media-loading"},Object(g.b)(P,{style:{textAlign:"center"}},w?Object(g.b)(React.Fragment,null,Object(g.b)("div",null,Object(g.b)("strong",null,p||O("Uploading","presto-player"))),Object(g.b)("div",null,O("Please don't navigate away from this page.","presto-player")),Object(g.b)("progress",{className:"presto-progress",max:"100",value:w,style:{width:"100px"}})):Object(g.b)(E,null))):null!=c&&c.length?Object(g.b)("div",{className:"presto-player__media-list"},Object(g.b)("h2",null,r),i&&Object(g.b)("div",{className:"presto-player__media-list-folders"},i.map((function(e){return Object(g.b)(h,{key:e.id,item:e})}))),Object(g.b)("div",{className:"presto-player__media-list-items"},c.map((function(e){return Object(g.b)(f,{item:e,key:e.id,onClick:function(){M(U===e?{}:e)},className:U===e?"is-selected":""})})))):Object(g.b)(k,{"align-items":"center",className:"presto-player__media-not-found"},Object(g.b)("div",null,Object(g.b)("h2",null,"Drop video files here to upload"),Object(g.b)("p",null,"or browse for a video"),Object(g.b)(T,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(y(e.target.files),jQuery(e.target).val(null))}},O("Upload New Video","presto-player")))),Object(g.b)(D,{label:"Drop files",onFilesDrop:y}))),Object(g.b)("div",{className:"presto-player__media-modal-sidebar"},J()?Object(g.b)("div",{className:"presto-player__media-modal-sidebar-content"},Object(g.b)(_,null,Object(g.b)(N,{key:U.id},null!=U&&U.thumbnail?Object(g.b)("img",{src:null==U?void 0:U.thumbnail,style:{maxWidth:"100%"}}):Object(g.b)("video",{preload:"metadata"},Object(g.b)("source",{src:U.previewUrl})))),Object(g.b)(_,null,Object(g.b)(_.VisualLabel,null,O("Name","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},U.title)),!(null==U||!U.visibility)&&Object(g.b)(_,null,Object(g.b)(_.VisualLabel,null,O("Visibility","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},U.visibility)),Object(g.b)(_,null,Object(g.b)(_.VisualLabel,null,O("Size","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},function(e){if(0==e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}((null==U?void 0:U.size)||0))),Object(g.b)(_,null,Object(g.b)(_.VisualLabel,null,O("Created","presto-player")),Object(g.b)("h3",{style:{marginTop:"5px"}},(q=null==U?void 0:U.created_at,Z=(q=new Date(q)).getHours(),K=q.getMinutes(),Q=Z>=12?"pm":"am",Z=(Z%=12)||12,K=K<10?"0"+K:K,q.getDate()+"-"+(q.getMonth()+1)+"-"+q.getFullYear()+" at "+Z+":"+K+Q))),Object(g.b)(_,null,W?Object(g.b)(C,null,Object(g.b)(S,null,Object(g.b)("p",null,Object(g.b)("strong",null,"Are you sure?")),Object(g.b)("p",null,"Are you sure you want to delete this video?"),Object(g.b)(R,{isDestructive:!0,onClick:X},"Yes"),Object(g.b)(R,{onClick:function(){return Y(!1)}},"Cancel"))):Object(g.b)(R,{isDestructive:!0,onClick:function(){Y(!W)}},O("Delete video","presto-player")))):Object(g.b)(React.Fragment,null)),Object(g.b)("div",{className:"presto-player__media-modal-footer"},Object(g.b)(R,{isPrimary:!0,disabled:!J(),onClick:function(){U&&(d(U),t())},ref:G},O("Choose","presto-player")))))},U=wp.i18n.__,M=wp.element,z=M.useState,H=M.useEffect,W=function(e){var t=e.closePopup,r=e.noticeOperations,n=e.onSelect,a=e.isPrivate,o=z([]),l=Object(s.a)(o,2),c=l[0],u=l[1],d=z(!1),b=Object(s.a)(d,2),m=b[0],v=b[1],f=z(0),h=Object(s.a)(f,2),g=h[0],O=h[1],w=z(""),j=Object(s.a)(w,2),E=j[0],R=j[1],_=z(""),k=Object(s.a)(_,2),P=k[0],x=k[1],C=a?"private-videos":"public-videos";H((function(){O(0),x("")}),[]);var S=function(){var e=Object(i.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(""),v(!0),R(U("Uploading","presto-player")),y({file:t[0],path:"presto-player/v1/bunny/upload",onProgress:function(e){O(e-10)},onComplete:N,onError:function(e){x(e.message),O(0),v(!1)}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(p.a.mark((function e(t){var r,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.name,R(U("Storing","presto-player")),e.prev=2,e.next=5,wp.apiFetch({path:"presto-player/v1/bunny/".concat(C),method:"POST",data:{path:r,name:n}});case 5:a=e.sent,u(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),x(e.t0.message),console.error(e.t0);case 13:return e.prev=13,O(0),v(!1),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[2,9,13,17]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u((c||[]).filter((function(e){return e!==t}))),e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/".concat(C),method:"DELETE",data:{name:null==t?void 0:t.title}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/".concat(C)});case 4:t=e.sent,u(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x(e.t0.message);case 11:return e.prev=11,v(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return React.createElement(F,{onClose:t,progressMessage:E,fetching:m,error:P,onUpload:S,onLoad:T,items:c,progress:g,onDelete:D,onSelect:n,onError:function(e){r.removeAllNotices(),r.createErrorNotice(e)},header:U(a?"Bunny.net Private Video Storage":"Bunny.net Public Video Storage","presto-player"),title:U(a?"Private Video Library":"Public Video Library","presto-player")})},Y=r(8);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z=(0,wp.data.combineReducers)({videosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEOS":return t.value;case"ADD_VIDEOS":return[].concat(Object(Y.a)(e),Object(Y.a)(t.value));case"ADD_VIDEO":return[].concat(Object(Y.a)(e),[t.value]);case"UPDATE_VIDEO":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:q(q({},e),t.value)}));case"REMOVE_VIDEO":return e.filter((function(e){return e.guid!==t.value.guid}))}return e},collectionsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLLECTIONS":return t.value;case"ADD_COLLECTION":return[].concat(Object(Y.a)(e),[t.value]);case"UPDATE_COLLECTION":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:q(q({},e),t.value)}));case"REMOVE_COLLECTION":return e.filter((function(e){return e!==t.value}))}return e},uploadsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UPLOADS":return t.value;case"ADD_UPLOADS":return[].concat(Object(Y.a)(e),Object(Y.a)(t.value));case"ADD_UPLOAD":return[].concat(Object(Y.a)(e),[t.value]);case"UPDATE_UPLOAD":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:q(q({},e),t.value)}));case"REMOVE_UPLOAD":return e.filter((function(e){return e!==t.value}))}return e},requestReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{private:!1,collection:"",search:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRIVATE_REQUEST":return q(q({},e),{},{private:t.value});case"SET_SEARCH_REQUEST":return q(q({},e),{},{search:t.value});case"SET_COLLECTION_REQUEST":return q(q({},e),{},{collection:t.value})}return e},UIReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,videosFetched:!1,createCollection:!1,selectedId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return q(q({},e),{},{loading:t.value});case"SET_VIDEOS_FETCHED":return q(q({},e),{},{videosFetched:t.value});case"SET_UI_ITEM":return q(q({},e),{},Object(c.a)({},t.item,t.value))}return e},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return[].concat(Object(Y.a)(e),[t.value]);case"REMOVE_ERROR":return e.filter((function(e){return e!==t.value}))}return e}});function K(e){return(null==e?void 0:e.videosReducer)||[]}function Q(e){return(null==e?void 0:e.collectionsReducer)||[]}function X(e){return(null==e?void 0:e.uploadsReducer)||[]}function J(e){var t;return!(null==e||null===(t=e.requestReducer)||void 0===t||!t.private)}function $(e){var t;return(null==e||null===(t=e.UIReducer)||void 0===t?void 0:t.loading)||!1}function ee(e){return(null==e?void 0:e.errorReducer)||[]}function te(e){var t;return(null==e||null===(t=e.UIReducer)||void 0===t?void 0:t.videosFetched)||!1}function re(e){var t;return null==e||null===(t=e.requestReducer)||void 0===t?void 0:t.collection}function ne(e,t){var r;return null==e||null===(r=e.UIReducer)||void 0===r?void 0:r[t]}function ae(e){var t;return null!=e&&null!==(t=e.requestReducer)&&void 0!==t&&t.private?"private":"public"}function oe(e){return{type:"SET_VIDEOS",value:e}}function le(e){return{type:"ADD_VIDEOS",value:e}}function ce(e){return{type:"REMOVE_VIDEO",value:e}}function ie(e){return{type:"SET_COLLECTIONS",value:e}}function se(e){return{type:"ADD_COLLECTION",value:e}}function ue(e){return{type:"SET_PRIVATE_REQUEST",value:e}}function pe(e){return{type:"SET_SEARCH",value:e}}function de(e){return{type:"SET_COLLECTION_REQUEST",value:e}}function be(e){return{type:"SET_UPLOADS",value:e}}function me(e){return{type:"ADD_UPLOADS",value:e}}function ye(e){return{type:"REMOVE_UPLOAD",value:e}}function ve(e){return{type:"SET_VIDEOS_FETCHED",value:e}}function fe(e){return{type:"SET_LOADING",value:e}}function he(e,t){return{type:"SET_UI_ITEM",item:e,value:t}}function ge(e){return{type:"ADD_ERROR",value:e}}function Oe(e){return{type:"REMOVE_ERROR",value:e}}(0,wp.data.registerStore)("presto-player/bunny-popup",{reducer:Z,selectors:n,actions:a});var we,je,Ee,Re,_e,ke,Pe,xe,Ce,Se,Ne,De,Te,Be,Le,Ae,Ie,Ve,Fe,Ue,Me,ze=function(e){return 3==(null==e?void 0:e.status)&&(null==e?void 0:e.availableResolutions.length)},He=function(e){return ze(e)||4===(null==e?void 0:e.status)},We=function(e){return 0==(null==e?void 0:e.status)?"Processing":1==(null==e?void 0:e.status)?"Uploaded":2==(null==e?void 0:e.status)?"Processing":ze(e)?"Playable":3==(null==e?void 0:e.status)?"Encoding":4==(null==e?void 0:e.status)?"Live":5==(null==e?void 0:e.status)?"Error":6==(null==e?void 0:e.status)?"Upload Failed":void 0},Ye=function(e){return null==e||null==e?"":new Date(1e3*e).toISOString().substr(11,8)},Ge=function(e){if(null==e||0==e)return"Unknown";if(0==e)return"0 b";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return(e/Math.pow(1024,t)).toFixed(2)+" "+["b","KB","MB","GB","TB"][t]},qe=wp.i18n.__,Ze=wp.components,Ke=Ze.Button,Qe=Ze.BaseControl,Xe=Ze.Disabled,Je=Ze.Card,$e=Ze.CardBody,et=wp.element,tt=et.useState,rt=(et.useContext,et.useEffect),nt=wp.data,at=nt.dispatch,ot=nt.useSelect,lt=function(){var e=tt(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=tt(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],u=tt(null),d=Object(s.a)(u,2),b=d[0],m=d[1],y=ot((function(e){return e("presto-player/bunny-popup").isPrivate()})),f=ot((function(e){return e("presto-player/bunny-popup").ui("selectedId")})),h=ot((function(e){return e("presto-player/bunny-popup").videos()}));rt((function(){m(f?h.find((function(e){return e.guid===f})):null)}),[h,f]);var O=function(){var e=Object(i.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.apiFetch({path:"presto-player/v1/bunny/stream/videos/".concat(b.id),method:"DELETE",data:{type:y?"private":"public"}});case 2:at("presto-player/bunny-popup").removeVideo(b),at("presto-player/bunny-popup").setUI("selectedId",null),c(!1),n(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(g.a)(we||(we=Object(v.a)(["\n    margin-top: 5px;\n  "])));if(!b)return"";var j,E,R,_,k=function(e){return y?null==e?void 0:e.webPURLSigned:null==e?void 0:e.webPURL};return b&&Object(g.b)("div",{className:"presto-player__media-modal-sidebar-content"},Object(g.b)(Qe,{css:Object(g.a)(je||(je=Object(v.a)(["\n            position: relative;\n          "])))},Object(g.b)(Xe,{key:b.id},He(b)&&k(b)&&Object(g.b)("img",{src:k(b),css:{maxWidth:"100%"}})),Object(g.b)(Ke,{isSmall:!0,isPrimary:!0,isBusy:!He(b),css:Object(g.a)(Ee||(Ee=Object(v.a)(["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "])),He(b)?"position: absolute;":"")},We(b))),Object(g.b)(Qe,null,Object(g.b)(Qe.VisualLabel,null,qe("Name","presto-player")),Object(g.b)("h3",{css:w},b.title)),!(null==b||!b.visibility)&&Object(g.b)(Qe,null,Object(g.b)(Qe.VisualLabel,null,qe("Visibility","presto-player")),Object(g.b)("h3",{css:w},b.visibility)),Object(g.b)(Qe,null,Object(g.b)(Qe.VisualLabel,null,qe("Size","presto-player")),Object(g.b)("h3",{css:w},Ge((null==b?void 0:b.size)||0))),Object(g.b)(Qe,null,Object(g.b)(Qe.VisualLabel,null,qe("Length","presto-player")),Object(g.b)("h3",{css:w},Ye(null==b?void 0:b.length))),Object(g.b)(Qe,null,Object(g.b)(Qe.VisualLabel,null,qe("Created","presto-player")),Object(g.b)("h3",{css:w},(j=null==b?void 0:b.created_at,E=(j=new Date(j)).getHours(),R=j.getMinutes(),_=E>=12?"pm":"am",E=(E%=12)||12,R=R<10?"0"+R:R,j.getDate()+"-"+(j.getMonth()+1)+"-"+j.getFullYear()+" at "+E+":"+R+_))),Object(g.b)(Qe,null,r?Object(g.b)(Je,null,Object(g.b)($e,null,Object(g.b)("p",null,Object(g.b)("strong",null,qe("Are you sure?","presto-player"))),Object(g.b)("p",null,qe("Are you sure you want to delete this video?","presto-player")),Object(g.b)(Ke,{isDestructive:!0,disabled:l,isBusy:l,onClick:function(e){e.preventDefault(),O(),c(!0)}},qe("Yes","presto-player")),Object(g.b)(Ke,{onClick:function(){return n(!1)}},qe("Cancel","presto-player")))):Object(g.b)(Ke,{isDestructive:!0,onClick:function(){n(!r)}},qe("Delete video","presto-player"))))},ct=function(e){var t=e.className,r=e.progress;return Object(g.b)("div",{className:t},Object(g.b)("div",{css:Object(g.a)(Re||(Re=Object(v.a)(["\n          height: 100%;\n          background-color: var(--wp-admin-theme-color, #007cba);\n        "]))),style:{width:"".concat(r,"%")}}))},it=function(e){var t=e.progress;return Object(g.b)("div",{css:Object(g.a)(_e||(_e=Object(v.a)(["\n        max-width: 100%;\n        object-fit: cover;\n        width: 100%;\n        height: 140px;\n        background-color: #222;\n        color: white;\n        text-decoration: none;\n        text-align: center;\n        box-sizing: border-box;\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      "])))},Object(g.b)(ct,{progress:t,css:Object(g.a)(ke||(ke=Object(v.a)(["\n          width: 100%;\n          border-radius: 0px;\n          margin: 0 15px;\n          background-color: #e3e3e3;\n          height: 3px;\n        "])))}))},st=function(e){var t=e.thumbnail,r=e.title,n=e.footer,a=e.badge,o=e.before,l=e.after;return Object(g.b)("div",Object.assign({className:"presto-player__video-thumb",css:Object(g.a)(Pe||(Pe=Object(v.a)(["\n        cursor: pointer;\n        user-select: none;\n        display: inline-block;\n        position: relative;\n        margin-right: 20px;\n        font-weight: bold;\n        margin-bottom: 20px;\n        width: 220px;\n        flex: 0 0 220px;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        overflow: hidden;\n      "])))},e),!!o&&o,!!t&&t,Object(g.b)("div",{css:Object(g.a)(xe||(xe=Object(v.a)(["\n          margin: 14px;\n        "])))},!!a&&Object(g.b)("div",{css:Object(g.a)(Ce||(Ce=Object(v.a)(["\n              position: absolute;\n              top: 8px;\n              right: 8px;\n            "])))},a),!!r&&Object(g.b)("span",{css:Object(g.a)(Se||(Se=Object(v.a)(["\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              overflow: hidden;\n              width: 100%;\n              max-width: 100%;\n              display: inline-block;\n              margin-bottom: 7px;\n              font-size: 13px;\n            "])))},r),!!n&&Object(g.b)("div",{css:Object(g.a)(Ne||(Ne=Object(v.a)(["\n              font-size: 12px;\n              opacity: 0.75;\n              margin-bottom: 7px;\n            "])))},n)),!!l&&l)},ut=wp.components,pt=ut.Icon,dt=ut.Button,bt=wp.element,mt=bt.useEffect,yt=bt.useState,vt=wp.data,ft=vt.useSelect,ht=vt.dispatch,gt=function(e){var t=e.video,r=yt(),n=Object(s.a)(r,2),a=n[0],o=n[1],l=ft((function(e){return e("presto-player/bunny-popup").isPrivate()})),c=ft((function(e){return e("presto-player/bunny-popup").ui("selectedId")}));mt((function(){o(c?c===t.guid:null)}),[c]);return Object(g.b)(st,{onClick:function(){ht("presto-player/bunny-popup").setUI("selectedId",null==t?void 0:t.guid)},css:Object(g.a)(Fe||(Fe=Object(v.a)(["\n        ","\n        border: 1px solid\n          ",";\n      "])),a&&"box-shadow: 0 0 0 0px #fff, 0 0 0 3px var(--wp-admin-theme-color, #007cba);",a?"var(--wp-admin-theme-color, #007cba)":"#e0e0e0"),thumbnail:function(){if(t.status<3)return Object(g.b)(it,{progress:t.encodeProgress});var e=l?null==t?void 0:t.thumbnailURLSigned:null==t?void 0:t.thumbnailURL;return e?Object(g.b)("img",{css:Object(g.a)(Te||(Te=Object(v.a)(["\n            max-width: 100%;\n            object-fit: cover;\n            width: 100%;\n            height: 140px;\n            display: block;\n          "]))),src:e}):void 0}(),badge:Object(g.b)(dt,{isSmall:!0,isPrimary:!0,isBusy:!He(t),css:Object(g.a)(De||(De=Object(v.a)(["\n        font-size: 11px;\n        color: #ffffff;\n        padding: 2px 10px;\n        border-radius: 9999px;\n      "])))},We(t)),title:t.title,footer:Object(g.b)("div",{css:Object(g.a)(Be||(Be=Object(v.a)(["\n        display: flex;\n        align-items: center;\n      "])))},Object(g.b)("span",{css:Object(g.a)(Le||(Le=Object(v.a)(["\n          margin-right: 10px;\n          display: flex;\n          align-items: center;\n        "])))},Object(g.b)(pt,{css:Object(g.a)(Ae||(Ae=Object(v.a)(["\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n            opacity: 0.5;\n          "]))),icon:"clock",size:14}),Object(g.b)("span",null,Ye(t.length))),Object(g.b)("span",{css:Object(g.a)(Ie||(Ie=Object(v.a)(["\n          display: flex;\n          align-items: center;\n        "])))},Object(g.b)(pt,{css:Object(g.a)(Ve||(Ve=Object(v.a)(["\n            opacity: 0.5;\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n          "]))),icon:"database",size:14}),Object(g.b)("span",null,Ge(t.storageSize)))),after:3===t.status?Object(g.b)(ct,{css:Object(g.a)(Ue||(Ue=Object(v.a)(["\n              width: 100%;\n              border-radius: 0px;\n              margin: 0;\n              background-color: #e3e3e3;\n              height: 3px;\n            "]))),progress:t.encodeProgress}):""})},Ot=wp.components,wt=Ot.Flex,jt=Ot.FlexBlock,Et=Ot.Spinner,Rt=function(e){var t=e.className;return Object(g.b)(wt,{className:t},Object(g.b)(jt,{css:{textAlign:"center"}},Object(g.b)(Et,null)))};function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pt,xt,Ct,St,Nt,Dt,Tt,Bt,Lt,At,It=wp.i18n.__,Vt=wp.element,Ft=Vt.useState,Ut=Vt.useEffect,Mt=Vt.Fragment,zt=wp.components,Ht=zt.Flex,Wt=zt.FormFileUpload,Yt=zt.Notice,Gt=wp.data,qt=Gt.dispatch,Zt=Gt.useSelect,Kt=function(){var e=Ft(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Ft(""),o=Object(s.a)(a,2),l=o[0],c=o[1],u=Zt((function(e){return e("presto-player/bunny-popup").videosFetched()})),d=Zt((function(e){return e("presto-player/bunny-popup").videos()})),b=Zt((function(e){return e("presto-player/bunny-popup").requestType()})),m=Zt((function(e){return e("presto-player/bunny-popup").currentCollection()}));Ut((function(){u||y()}),[u]),Ut((function(){var e=setInterval((function(){y({sync:!0})}),3e3);return function(){return clearInterval(e)}}),[u]);var y=function(){var e=Object(i.a)(p.a.mark((function e(){var t,r,n,a,o=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{sync:!1},r=t.sync,e.prev=1,e.next=4,wp.apiFetch({path:wp.url.addQueryArgs("presto-player/v1/bunny/stream/videos",kt(kt({type:b},null!=m&&m.guid?{collection:null==m?void 0:m.guid}:{}),{},{items_per_page:500}))});case 4:n=e.sent,qt("presto-player/bunny-popup").setVideos(null==n?void 0:n.items),c(""),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(1),401!==(null===e.t0||void 0===e.t0||null===(a=e.t0.data)||void 0===a?void 0:a.status)){e.next=14;break}return c(It("Please wait. Pullzone cache is clearing. This may take a minute or two...")),e.abrupt("return");case 14:r||qt("presto-player/bunny-popup").addError(e.t0.message);case 15:return e.prev=15,qt("presto-player/bunny-popup").setVideosFetched(!0),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,9,15,18]])})));return function(){return e.apply(this,arguments)}}();return l?Object(g.b)(Yt,{status:"warning",isDismissible:!1},Object(g.b)("div",{css:{display:"flex",alignItems:"center"}},Object(g.b)(Rt,{css:{flex:1}}),l)):u?Object(g.b)(Mt,null,d&&d.length?Object(g.b)("div",null,!(null!=m&&m.guid)&&Object(g.b)("h2",null,It("Videos","presto-player")),d.map((function(e){if((null==e?void 0:e.collectionId)===((null==m?void 0:m.guid)||""))return Object(g.b)(gt,{key:e.id,video:e,onClick:function(){n(r.guid===e.guid?{}:e)},selected:r.guid===e.guid})}))):Object(g.b)(Ht,{align:"center",justify:"center",css:Object(g.a)(Me||(Me=Object(v.a)(["\n          height: 100%;\n          text-align: center;\n        "])))},Object(g.b)("div",null,Object(g.b)("h2",null,It("Drop video files here to upload","presto-player")),Object(g.b)("p",null,It("or browse for a video","presto-player")),Object(g.b)(Wt,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(qt("presto-player/bunny-popup").addUploads(e.target.files),jQuery(e.target).val(null))}},It("Upload New Video","presto-player"))))):Object(g.b)(Rt,{css:{flex:1}})},Qt=wp.components.Icon,Xt=wp.data.dispatch,Jt=function(e){var t=e.collection;return Object(g.b)(st,{onClick:function(e){e.preventDefault(),Xt("presto-player/bunny-popup").setCollectionRequest(t),Xt("presto-player/bunny-popup").setVideosFetched(!1)},title:Object(g.b)("div",null,Object(g.b)(Qt,{icon:"open-folder",css:Object(g.a)(Pt||(Pt=Object(v.a)(["\n              color: var(--wp-admin-theme-color);\n              margin-right: 10px;\n            "])))}),t.name),footer:Object(g.b)("div",null,t.videoCount," Videos")})},$t=wp.i18n.__,er=wp.element.useEffect,tr=wp.data,rr=tr.useSelect,nr=tr.dispatch,ar=function(){var e=rr((function(e){return e("presto-player/bunny-popup").collections()})),t=rr((function(e){return e("presto-player/bunny-popup").requestType()})),r=function(){var e=Object(i.a)(p.a.mark((function e(){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("presto-player/v1/bunny/stream/collections",{type:t})});case 3:r=e.sent,nr("presto-player/bunny-popup").setCollections(null==r?void 0:r.items),e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==(null===e.t0||void 0===e.t0||null===(n=e.t0.data)||void 0===n?void 0:n.status)){e.next=11;break}return e.abrupt("return");case 11:nr("presto-player/bunny-popup").addError(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return er((function(){r()}),[]),!!e.length&&Object(g.b)("div",null,Object(g.b)("h2",null,$t("Collections","presto-player")),Object(g.b)("div",{css:Object(g.a)(xt||(xt=Object(v.a)(["\n            display: flex;\n            align-items: stretch;\n            overflow: auto;\n          "])))},e.map((function(e){return Object(g.b)(Jt,{collection:e,key:e.guid})}))))},or=wp.i18n.__,lr=wp.components,cr=lr.Button,ir=lr.TextControl,sr=lr.Modal,ur=lr.BaseControl,pr=wp.element,dr=pr.useState,br=pr.Fragment,mr=wp.data,yr=mr.dispatch,vr=mr.useSelect,fr=function(){var e=dr(""),t=Object(s.a)(e,2),r=t[0],n=t[1],a=dr(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],u=vr((function(e){return e("presto-player/bunny-popup").requestType()})),d=vr((function(e){return e("presto-player/bunny-popup").ui("createCollection")})),b=function(e){yr("presto-player/bunny-popup").setUI("createCollection",e)},m=function(){var e=Object(i.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/stream/collections",method:"POST",data:{type:u,name:r}});case 4:t=e.sent,yr("presto-player/bunny-popup").addCollection(t),yr("presto-player/bunny-popup").setCollectionRequest(t),yr("presto-player/bunny-popup").setVideosFetched(!1),n(""),b(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.prev=15,c(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return Object(g.b)(br,null,Object(g.b)(cr,{isSecondary:!0,onClick:function(){return b(!0)}},or("Create Collection","presto-player")),d&&Object(g.b)(sr,{overlayClassName:"presto-modal",title:"Create New Collection",shouldCloseOnClickOutside:!1,isDismissible:!1},Object(g.b)(ir,{css:Object(g.a)(Ct||(Ct=Object(v.a)(["\n              margin-bottom: 15px;\n            "]))),tabIndex:"0",placeholder:or("Enter a collection name","presto-player"),value:r,onChange:function(e){return n(e)}}),Object(g.b)(ur,null,Object(g.b)(cr,{isBusy:l,disabled:l,isPrimary:!0,onClick:function(){m()}},or("Create","presto-player"))," ",Object(g.b)(cr,{onClick:function(){return b(!1)}},or("Cancel","presto-player")))))},hr=wp.i18n.__,gr=wp.components,Or=gr.Flex,wr=gr.FlexBlock,jr=gr.FlexItem,Er=(gr.Button,gr.FormFileUpload),Rr=wp.data.dispatch,_r=function(e){var t=e.afterUpload;return Object(g.b)(Or,null,Object(g.b)(wr,null,Object(g.b)(Or,{justify:"flex-start"},Object(g.b)(Er,{multiple:!0,isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(Rr("presto-player/bunny-popup").addUploads(e.target.files),jQuery(e.target).val(null))}},hr("Upload Videos","presto-player"))," ",Object(g.b)(fr,null),!!t&&t)),Object(g.b)(jr,null))},kr=wp.i18n.__,Pr=wp.components.Button,xr=wp.element,Cr=xr.useState,Sr=xr.useEffect,Nr=wp.data.useSelect,Dr=function(e){var t=e.onChoose,r=Cr(null),n=Object(s.a)(r,2),a=n[0],o=n[1],l=Cr(!1),c=Object(s.a)(l,2),i=c[0],u=c[1],p=Nr((function(e){return e("presto-player/bunny-popup").ui("selectedId")})),d=Nr((function(e){return e("presto-player/bunny-popup").videos()}));return Sr((function(){o(p?d.find((function(e){return e.guid===p})):null)}),[d,p]),Sr((function(){3==(null==a?void 0:a.status)&&null!=a&&a.availableResolutions.length?u(!0):u((null==a?void 0:a.status)>3&&(null==a?void 0:a.status)<5)}),[null==a?void 0:a.availableResolutions]),React.createElement(Pr,{isPrimary:!0,disabled:!i,onClick:function(){return t(a)}},null!=a&&a.id&&!i?kr("Please wait, video is encoding...","presto-player"):kr("Choose","presto-player"))},Tr=wp.components.Icon,Br=function(e){var t=e.children,r=e.onClick;return Object(g.b)("span",{onClick:r,css:Object(g.a)(St||(St=Object(v.a)(["\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n        color: var(--wp-admin-theme-color, #007cba);\n        padding: 6px 0;\n      "])))},Object(g.b)(Tr,{css:Object(g.a)(Nt||(Nt=Object(v.a)(["\n          width: 14px;\n          height: 14px;\n          font-size: 14px;\n          margin-right: 5px;\n        "]))),icon:"arrow-left-alt",size:14}),Object(g.b)("span",null,t))},Lr=wp.i18n.__,Ar=wp.element.useState,Ir=wp.data,Vr=Ir.dispatch,Fr=Ir.useSelect,Ur=wp.components,Mr=Ur.Button,zr=Ur.Modal,Hr=Ur.BaseControl,Wr=function(){var e=Ar(!1),t=Object(s.a)(e,2),r=t[0],n=t[1],a=Ar(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],u=Ar(""),d=Object(s.a)(u,2),b=(d[0],d[1],Fr((function(e){return e("presto-player/bunny-popup").currentCollection()}))),m=Fr((function(e){return e("presto-player/bunny-popup").requestType()})),y=function(){var e=Object(i.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/stream/collections/".concat(null==b?void 0:b.guid),method:"DELETE",data:{type:m}});case 4:n(!1),Vr("presto-player/bunny-popup").setCollectionRequest(""),Vr("presto-player/bunny-popup").setVideosFetched(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(!1),Vr("presto-player/bunny-popup").addError(e.t0.message);case 13:return e.prev=13,c(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return Object(g.b)("div",{css:Object(g.a)(Dt||(Dt=Object(v.a)(["\n        margin-bottom: 2em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      "])))},Object(g.b)("div",null,Object(g.b)(Br,{onClick:function(){Vr("presto-player/bunny-popup").setCollectionRequest(""),Vr("presto-player/bunny-popup").setVideosFetched(!1)}},Lr("Back To Main Folder","presto-player")),Object(g.b)("h2",null,b.name)),Object(g.b)(Mr,{isDestructive:!0,onClick:function(){return n(!0)}},Lr("Delete Collection","presto-player")),r&&Object(g.b)(zr,{shouldCloseOnClickOutside:!1,overlayClassName:"presto-modal",title:"Delete Collection",onRequestClose:function(){return n(!1)}},Object(g.b)("h2",null,Lr("Are you sure you want to delete the collection? ","presto-player")),Object(g.b)("p",null,Lr("This will also delete all videos inside of the collection.","presto-player")),Object(g.b)(Hr,null,Object(g.b)(Mr,{isDestructive:!0,disabled:l,isBusy:l,onClick:y},Lr("Delete","presto-player"))," ",Object(g.b)(Mr,{onClick:function(){return n(!1)}},Lr("Cancel","presto-player")))))};function Yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}wp.components.Icon;var qr,Zr,Kr,Qr,Xr,Jr,$r,en,tn,rn,nn,an,on,ln=wp.element,cn=ln.useState,sn=ln.useEffect,un=(ln.useContext,wp.data),pn=un.useSelect,dn=(un.dispatch,wp.i18n.__),bn=function(e){var t,r=e.file,n=e.name,a=e.onComplete,o=cn(0),l=Object(s.a)(o,2),c=l[0],u=l[1],d=cn(dn("Uploading","presto-player")),b=Object(s.a)(d,2),m=(b[0],b[1]),f=cn(""),h=Object(s.a)(f,2),O=h[0],w=h[1],j=cn(!1),E=Object(s.a)(j,2),R=E[0],_=E[1],k=pn((function(e){return e("presto-player/bunny-popup").requestType()})),P=pn((function(e){return e("presto-player/bunny-popup").currentCollection()})),x=function(){var e=Object(i.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(dn("Uploading","presto-player")),t=y({file:null!=r&&r[0]?null==r?void 0:r[0]:r,path:"presto-player/v1/bunny/stream/upload",onProgress:function(e){u(e)},onComplete:C,onError:function(e){w(e.message),m(dn("Error","presto-player")),u(0)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(p.a.mark((function e(t){var r,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.name,m(dn("Creating","presto-player")),e.prev=2,e.next=5,wp.apiFetch({path:"presto-player/v1/bunny/stream/videos",method:"POST",data:Gr({type:k,name:n},null!=P&&P.guid?{collection:P.guid}:{})});case 5:a=e.sent,_(!0),S({path:r,video:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),w(e.t0.message);case 13:return e.prev=13,u(0),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(p.a.mark((function e(t){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.path,n=t.video,e.next=3,wp.apiFetch({path:"presto-player/v1/bunny/stream/store",method:"POST",data:{type:k,path:r,guid:n.guid}});case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return sn((function(){return x(),function(){t&&t.cancel()}}),[]),R?"":Object(g.b)("div",{css:Object(g.a)(Tt||(Tt=Object(v.a)(["\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        animation: components-button__busy-animation 2500ms infinite linear;\n        opacity: 1;\n        padding: 6px 12px;\n        border-radius: 99999px;\n        border: 1px solid #dddddd;\n        background-size: 100px 100%;\n        background-image: linear-gradient(\n          -45deg,\n          #ffffff 33%,\n          #f3f3f3 33%,\n          #f3f3f3 70%,\n          #ffffff 70%\n        );\n      "])))},Object(g.b)("div",{css:Object(g.a)(Bt||(Bt=Object(v.a)(["\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          max-width: 150px;\n          text-overflow: ellipsis;\n          font-weight: bold;\n        "])))},!!O&&O,!!n&&n," ",r.name,"..."),Object(g.b)("div",{css:Object(g.a)(Lt||(Lt=Object(v.a)(["\n          display: flex;\n          align-items: center;\n        "])))},Object(g.b)(ct,{css:Object(g.a)(At||(At=Object(v.a)(["\n            width: 50px;\n            height: 3px;\n            margin: 0 5px;\n            background: #e3e3e3;\n            border-radius: 9999px;\n            overflow: hidden;\n          "]))),progress:c})))},mn=wp.data.useSelect,yn=function(e){var t=e.removeUpload,r=(e.isPrivate,mn((function(e){return e("presto-player/bunny-popup").uploads()})));return r.length?Object(g.b)("div",{css:Object(g.a)(qr||(qr=Object(v.a)(["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "])))},r.length&&r.map((function(e){return Object(g.b)(bn,{css:Object(g.a)(Zr||(Zr=Object(v.a)(["\n                margin-right: 0px;\n              "]))),file:e,onComplete:function(){return t(e)}})}))):""},vn=wp.i18n.__,fn=wp.components.Modal,hn=function(e){var t=e.onClose,r=e.title,n=e.header,a=e.error,o=e.mainContent,l=e.sidebar,c=e.footer;return Object(g.b)(fn,{title:r||vn("Add Media","presto-player"),onRequestClose:t,css:Object(g.a)(Kr||(Kr=Object(v.a)(["\n        width: 100%;\n        height: 100%;\n        max-width: calc(100% - 32px);\n        max-height: calc(100% - 32px);\n\n        .components-modal__content {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n      "]))),overlayClassName:"presto-player__modal-overlay"},Object(g.b)("div",{css:Object(g.a)(Qr||(Qr=Object(v.a)(['\n          @media screen and (min-width: 780px) {\n            margin: -24px;\n            display: grid;\n            flex: 1;\n            max-height: calc(100vh - 68px);\n            grid-template-columns: 1fr 1fr minmax(0px, 267px);\n            grid-template-rows: minmax(50px, auto) 1fr 60px;\n            grid-template-areas:\n              "header header sidebar"\n              "main main sidebar"\n              "footer footer footer";\n            overflow: hidden;\n          }\n        ']))),"data-cy":"media-modal"},Object(g.b)("div",{css:Object(g.a)(Xr||(Xr=Object(v.a)(["\n            grid-area: header;\n            padding: 24px 24px 12px 24px;\n          "])))},Object(g.b)("div",{css:Object(g.a)(Jr||(Jr=Object(v.a)(["\n              display: flex;\n              align-items: center;\n\n              > * {\n                margin-right: 10px;\n              }\n            "])))},n),a),Object(g.b)("div",{css:Object(g.a)($r||($r=Object(v.a)(["\n            grid-area: main;\n            display: grid;\n            overflow: hidden;\n\n            .components-drop-zone__provider {\n              overflow: hidden;\n              display: grid;\n            }\n\n            .components-drop-zone {\n              z-index: 99;\n            }\n          "])))},o),Object(g.b)("div",{css:Object(g.a)(en||(en=Object(v.a)(["\n            display: none;\n            grid-area: sidebar;\n            padding: 0 16px;\n            z-index: 75;\n            background: #f3f3f3;\n            border-left: 1px solid #ddd;\n            overflow: auto;\n\n            @media screen and (min-width: 780px) {\n              display: block;\n            }\n\n            .sidebar-content {\n              padding: 16px 0;\n            }\n          "])))},l),Object(g.b)("div",{css:Object(g.a)(tn||(tn=Object(v.a)(["\n            grid-area: footer;\n            border-top: 1px solid #ddd;\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 8px;\n          "])))},c)))},gn=wp.i18n.__,On=wp.components,wn=(On.Button,On.DropZone),jn=On.DropZoneProvider,En=On.Notice,Rn=wp.element,_n=(Rn.useState,Rn.useEffect),kn=(Rn.Fragment,wp.data),Pn=kn.dispatch,xn=kn.useSelect,Cn=function(e){var t=e.onClose,r=e.onChoose,n=xn((function(e){return e("presto-player/bunny-popup").isPrivate()})),a=xn((function(e){return e("presto-player/bunny-popup").uploads()})),o=xn((function(e){return e("presto-player/bunny-popup").currentCollection()})),l=xn((function(e){return e("presto-player/bunny-popup").errors()}));_n((function(){Pn("presto-player/bunny-popup").setVideosFetched(!1),Pn("presto-player/bunny-popup").setCollections([]),Pn("presto-player/bunny-popup").setVideos([])}),[]);var c=function(e){Pn("presto-player/bunny-popup").addUploads(e)},i=gn(n?"Private Stream Library":"Public Stream Library","presto-player"),s=Object(g.b)(_r,{afterUpload:Object(g.b)(yn,{uploads:a,removeUpload:function(e){Pn("presto-player/bunny-popup").removeUpload(e)},isPrivate:n})}),u=Object(g.b)(lt,null),p=Object(g.b)(Dr,{onChoose:r});return Object(g.b)(hn,{title:i,header:s,mainContent:Object(g.b)(jn,{css:Object(g.a)(rn||(rn=Object(v.a)(["\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n        "])))},Object(g.b)("div",{css:Object(g.a)(nn||(nn=Object(v.a)(["\n            padding: 12px 24px;\n            overflow: auto;\n            display: flex;\n            flex-direction: column;\n          "])))},!!l.length&&l.map((function(e){return Object(g.b)(En,{css:Object(g.a)(an||(an=Object(v.a)(["\n                    margin: 0 0 20px 0;\n                  "]))),status:"error",onRemove:function(){return Pn("presto-player/bunny-popup").removeError(e)}},e)})),o?Object(g.b)(Wr,null):Object(g.b)(ar,null),Object(g.b)("div",{css:Object(g.a)(on||(on=Object(v.a)(["\n              display: flex;\n              align-items: stretch;\n            "])))},Object(g.b)(Kt,null)),Object(g.b)(wn,{label:"Drop files",onFilesDrop:c}))),onClose:function(){a.length?confirm("Discard your uploads?")&&(t(),Pn("presto-player/bunny-popup").setUploads([])):t()},footer:p,sidebar:u})},Sn=wp.i18n.__,Nn=wp.element.useEffect,Dn=wp.data.dispatch,Tn=function(e){var t=e.closePopup,r=e.onSelect,n=e.isPrivate;return Nn((function(){Dn("presto-player/bunny-popup").setIsPrivate(n)}),[n]),React.createElement(Cn,{onClose:t,onChoose:function(e){e.url=e.playlistURL,e.thumbnail=e.thumbnailURL,e.preview=e.webPURL,r(e)},header:Sn(n?"Private Stream Library":"Public Stream Library","presto-player"),title:Sn(n?"Private Video Stream":"Public Video Stream","presto-player")})},Bn=wp.i18n.__,Ln=wp.element.useState,An="".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"bunny/"),In=wp.i18n.__,Vn=wp.element.useState,Fn="".concat(prestoPlayer.root).concat(prestoPlayer.prestoVersionString,"bunny/stream/"),Un=wp.i18n.__,Mn=wp.components,zn=Mn.Button,Hn=Mn.TextControl,Wn=Mn.Placeholder,Yn=Mn.Flex,Gn=Mn.FlexBlock,qn=Mn.ExternalLink,Zn=Mn.Spinner,Kn=Mn.FlexItem,Qn=Mn.Notice,Xn=wp.element.useEffect,Jn=function(e){var t=e.onRefetch,r=e.type,n=e.autoSubmit,a="stream"===r?function(e){var t=Vn(""),r=Object(s.a)(t,2),n=r[0],a=r[1],o=Vn(""),l=Object(s.a)(o,2),c=l[0],u=l[1],d=Vn(!1),b=Object(s.a)(d,2),m=b[0],y=b[1],v=Vn(0),f=Object(s.a)(v,2),h=f[0],g=f[1],O=Vn(""),w=Object(s.a)(O,2),j=w[0],E=w[1],R=function(e){return e.includes("Authorization has been denied")?"Your API key is incorrect. Please double-check to make sure you've copied it correctly.":e.includes("localhost")?"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.":e};return{saveKey:function(){var t=Object(i.a)(p.a.mark((function t(){var r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(""),t.prev=1,y(!0),g(0),u(In("Validating API Key...","presto-player")),t.next=7,wp.apiFetch({url:"".concat(Fn,"api-key"),method:"POST",data:{api_key:n}});case 7:if(r=t.sent,r.success){t.next=11;break}throw{message:"Could not save the API key. Please double check it to make sure it's correct."};case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),g(0),E(null!==t.t0&&void 0!==t.t0&&t.t0.message?R(t.t0.message):"Something went wrong. Please try again"),t.abrupt("return");case 18:return t.prev=18,g(1),y(!1),u(""),t.finish(18);case 23:return t.prev=23,y(!0),u(In("Setting up public video library. This make take a few moments...","presto-player")),t.next=28,wp.apiFetch({url:"".concat(Fn,"library"),method:"POST",data:{type:"public"}});case 28:a=t.sent,a.id,t.next=37;break;case 32:return t.prev=32,t.t1=t.catch(23),g(0),E(null!==t.t1&&void 0!==t.t1&&t.t1.message?R(t.t1.message):"Something went wrong. Please try again"),t.abrupt("return");case 37:return t.prev=37,g(2),y(!1),u(""),t.finish(37);case 42:return t.prev=42,y(!0),u(In("Setting up private video library. This make take a few moments...","presto-player")),t.next=47,wp.apiFetch({url:"".concat(Fn,"library"),method:"POST",data:{type:"private"}});case 47:t.next=54;break;case 49:return t.prev=49,t.t2=t.catch(42),g(0),E(null!==t.t2&&void 0!==t.t2&&t.t2.message?R(t.t2.message):"Something went wrong. Please try again"),t.abrupt("return");case 54:return t.prev=54,g(2),y(!1),u(""),t.finish(54);case 59:e();case 60:case"end":return t.stop()}}),t,null,[[1,13,18,23],[23,32,37,42],[42,49,54,59]])})));return function(){return t.apply(this,arguments)}}(),setApikey:a,step:h,saveMessage:c,saving:m,error:j,totalSteps:3}}(t):function(e){var t=Ln(""),r=Object(s.a)(t,2),n=r[0],a=r[1],o=Ln(""),l=Object(s.a)(o,2),c=l[0],u=l[1],d=Ln(!1),b=Object(s.a)(d,2),m=b[0],y=b[1],v=Ln(0),f=Object(s.a)(v,2),h=f[0],g=f[1],O=Ln(""),w=Object(s.a)(O,2),j=w[0],E=w[1],R=function(e){return e.includes("Authorization has been denied")?"Your API key is incorrect. Please double-check to make sure you've copied it correctly.":e.includes("localhost")?"You cannot use a CDN on a local site. Please use Bunny.net on a live, publicly accessible site.":e};return{saveKey:function(){var t=Object(i.a)(p.a.mark((function t(){var r,a,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(""),t.prev=1,y(!0),g(0),u(Bn("Validating API Key...","presto-player")),t.next=7,wp.apiFetch({url:"".concat(An,"api-key"),method:"POST",data:{api_key:n}});case 7:if(r=t.sent,r.success){t.next=11;break}throw{message:"Could not save the API key. Please double check it to make sure it's correct."};case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),g(0),E(null!==t.t0&&void 0!==t.t0&&t.t0.message?R(t.t0.message):"Something went wrong. Please try again"),t.abrupt("return");case 18:return t.prev=18,g(1),y(!1),u(""),t.finish(18);case 23:return t.prev=23,y(!0),u(Bn("Setting up storage zones. This make take a few minutes...","presto-player")),t.next=28,wp.apiFetch({url:"".concat(An,"storage-zones"),method:"POST"});case 28:a=t.sent,a.id,t.next=37;break;case 32:return t.prev=32,t.t1=t.catch(23),g(0),E(null!==t.t1&&void 0!==t.t1&&t.t1.message?R(t.t1.message):"Something went wrong. Please try again"),t.abrupt("return");case 37:return t.prev=37,g(2),y(!1),u(""),t.finish(37);case 42:return t.prev=42,y(!0),u(Bn("Setting up pull zones. This make take a few minutes...","presto-player")),t.next=47,wp.apiFetch({url:"".concat(An,"pull-zones"),method:"POST"});case 47:o=t.sent,o.id,t.next=56;break;case 51:return t.prev=51,t.t2=t.catch(42),g(0),E(null!==t.t2&&void 0!==t.t2&&t.t2.message?R(t.t2.message):"Something went wrong. Please try again"),t.abrupt("return");case 56:return t.prev=56,g(3),y(!1),u(""),t.finish(56);case 61:e();case 62:case"end":return t.stop()}}),t,null,[[1,13,18,23],[23,32,37,42],[42,51,56,61]])})));return function(){return t.apply(this,arguments)}}(),setApikey:a,step:h,saveMessage:c,saving:m,error:j,totalSteps:3}}(t),o=a.saveKey,l=a.apikey,c=a.setApikey,u=a.saveMessage,d=a.saving,b=a.totalSteps,m=a.step,y=a.error;return Xn((function(){n&&o()}),[n]),React.createElement(Wn,{label:Un("Bunny.net Video","presto-player"),instructions:React.createElement(React.Fragment,null,Un("Enter your Bunny.net API key, which can be found on your Bunny CDN Account page.","presto-player")," ",React.createElement(qn,{href:"https://bunnycdn.com/dashboard/account"},Un("Get My API Key","presto-player")))},d?React.createElement(Yn,null,React.createElement(Kn,null,React.createElement(Zn,null)),React.createElement(Gn,null,u,React.createElement("progress",{className:"presto-progress",max:b,value:m,style:{width:"100%"}}))):React.createElement("form",{onSubmit:function(e){e.preventDefault(),o()}},y&&React.createElement(Yn,{style:{width:"100%"}},React.createElement(Gn,null,React.createElement(Qn,{status:"error",isDismissible:!1},y))),React.createElement(Yn,{style:{width:"100%",maxWidth:"400px"}},React.createElement(Gn,null,React.createElement(Hn,{value:l,onChange:function(e){return c(e)},className:"presto-link-placeholder-input",type:"password",autoComplete:"off",placeholder:Un("Your Bunny.net API Key","presto-player"),required:!0})),React.createElement(Kn,null,React.createElement(zn,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},Un("Next","presto-player")," →")))))},$n=r(25),ea=r(21);function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var na=wp.components,aa=na.Button,oa=na.Disabled,la=na.DropdownMenu,ca=na.Spinner,ia=na.Toolbar,sa=na.withNotices,ua=na.BaseControl,pa=na.Placeholder,da=na.ToggleControl,ba=wp.editor,ma=ba.BlockControls,ya=ba.InspectorControls,va=wp.i18n.__,fa=wp.compose.compose,ha=wp.element,ga=ha.useEffect,Oa=ha.useState,wa=ha.Fragment,ja=wp.data.dispatch,Ea=fa([Object(b.a)(),Object(d.a)()])(sa((function(e){var t,r,n=e.attributes,a=e.setAttributes,o=e.noticeOperations,l=e.branding,c=e.presetData,u=e.createVideo,d=e.lockSave,b=e.unlockSave,y=e.onRemoveSrc,v=e.renderKey,f=e.defaultPreset,h=n.poster,g=n.src,O=n.id,w=n.tracks,j=n.visibility,E=n.previewSrc,R=n.thumbnail,_=Oa(""),k=Object(s.a)(_,2),P=k[0],x=k[1],C=Oa(!1),S=Object(s.a)(C,2),N=S[0],D=S[1],T=Oa(""),B=Object(s.a)(T,2),L=B[0],A=B[1],I=Oa({stream:!1,storage:!1}),V=Object(s.a)(I,2),F=V[0],U=V[1],M=Oa(!1),z=Object(s.a)(M,2),H=z[0],Y=z[1],G=Oa(!1),q=Object(s.a)(G,2),Z=q[0],K=q[1],Q=Oa(!1),X=Object(s.a)(Q,2),J=(X[0],X[1]),$=Oa(!1),ee=Object(s.a)($,2),te=ee[0],re=ee[1],ne=wp.data.useSelect((function(e){return e("core").canUser("read","settings")})),ae="private"===j,oe=null===(t=prestoPlayerAdmin)||void 0===t||null===(r=t.bunny)||void 0===r?void 0:r.disable_legacy_storage;function le(e){e.url?(a(ra(ra({src:e.url,preset:null==f?void 0:f.id},null!=e&&e.thumbnail?{thumbnail:e.thumbnail}:{}),null!=e&&e.preview?{preview:e.preview}:{})),console.log({media:e}),D(!0),d(),u(ra({src:e.url,type:"bunny",title:e.title},null!=e&&e.guid?{external_id:e.guid}:{})).catch((function(e){a({src:""}),console.error(e)})).finally((function(){b(),D(!1)}))):a({src:void 0,id:void 0})}ga((function(){ja("presto-player/bunny-popup").setIsPrivate("private"===j)}),[j]),ga((function(){var e,t,r,n,a,o;U({storage:null===(e=prestoPlayerAdmin)||void 0===e||null===(t=e.isSetup)||void 0===t||null===(r=t.bunny)||void 0===r?void 0:r.storage,stream:null===(n=prestoPlayerAdmin)||void 0===n||null===(a=n.isSetup)||void 0===a||null===(o=a.bunny)||void 0===o?void 0:o.stream})}),[]);var ce=function(){var e=Object(i.a)(p.a.mark((function e(){var t,r,n,a,o,l,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:"wp/v2/settings"});case 3:t=e.sent,r=t.presto_player_bunny_pull_zones,n=t.presto_player_bunny_storage_zones,a=t.presto_player_bunny_stream_private,o=t.presto_player_bunny_stream_public,K(!0),a||Y(!0),c=(l=function(e){return!(null==e||!e.private_id||null==e||!e.public_id)})(r)||l(n),i=(null==a?void 0:a.pull_zone_url)&&(null==o?void 0:o.pull_zone_url),U({storage:c,stream:i}),A(c||i?"":"stream");case 15:return e.prev=15,J(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,,15,18]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(i.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wp.apiFetch({path:"presto-player/v1/bunny/sign",method:"POST",data:{url:t,id:0}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();ga((function(){ne?ce():K(!0)}),[ne]);var se=function(){var e=Object(i.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ae){e.next=7;break}return e.next=3,ie(g);case 3:t=e.sent,a({previewSrc:t}),e.next=8;break;case 7:a({previewSrc:g});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ga((function(){se()}),[g]);var ue=function(){var e=Object(i.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ae){e.next=7;break}return e.next=3,ie(R);case 3:(t=e.sent)&&(console.log({previewThumbnail:t}),a({previewThumbnail:t})),e.next=8;break;case 7:a({previewThumbnail:R});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ga((function(){ue()}),[R]);var pe=function(){var e=[];return!H&&e.push({title:F.stream?va("Reconnect Stream","presto-player"):va("Connect Stream","presto-player"),onClick:function(){A("stream"),re(!1)}}),!oe&&e.push({title:F.storage?va("Reconnect Storage (Classic)","presto-player"):va("Connect Storage (Classic)","presto-player"),onClick:function(){return A("storage")}}),React.createElement(la,{icon:"ellipsis",label:va("Connection Options","presto-player"),controls:e})};return N||!Z?React.createElement(pa,{className:"presto-player__placeholder is-loading"},React.createElement(ca,null)):"stream"===L?React.createElement(Jn,{type:"stream",autoSubmit:te,onRefetch:function(){K(!1),ce()}}):"storage"===L?React.createElement(Jn,{type:"storage",onRefetch:function(){K(!1),ce()}}):O?React.createElement(React.Fragment,null,React.createElement(ma,null,React.createElement(m.a,{tracks:w,onChange:function(e){a({tracks:e})}}),React.createElement(ia,null,React.createElement(aa,{onClick:function(){return y()}},va("Replace","presto-player")))),React.createElement(ya,null,React.createElement($n.a,{setAttributes:a,attributes:n})),React.createElement("figure",{className:"wp-block-video"},React.createElement(oa,null,React.createElement(ea.a,{poster:h,src:E,id:O,type:"bunny",attributes:n,setAttributes:a,preset:c,branding:l,key:v})))):React.createElement("div",null,React.createElement(pa,{label:va(ae?"Bunny.net Private Video":"Bunny.net Video","presto-player"),icon:ae?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})):React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polyline",{points:"8 17 12 21 16 17"}),React.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),React.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})),instructions:React.createElement(React.Fragment,null,va("Add or select a Bunny.net video","presto-player"))},React.createElement(ua,{className:"presto-player__placeholder-control"},React.createElement(da,{label:"Private Video",help:ae?"Video is only accessible to those who are logged in.":"Video is accessible to everyone.",checked:ae,onChange:function(e){a({visibility:e?"private":"public"})}})),React.createElement(wa,null,F.stream&&React.createElement(aa,{isPrimary:!0,onClick:function(){return x("stream")}},va(ae?"Add/Select Private Video Stream":"Add/Select Video Stream","presto-player")),!oe&&F.storage&&React.createElement(aa,{isSecondary:F.stream,isPrimary:!F.stream,onClick:function(){return x("storage")}},va(ae?"Add/Select Private Video (Classic)":"Add/Select Video (Classic)","presto-player")),!F.stream&&!H&&F.storage&&React.createElement(aa,{isSecondary:!0,onClick:function(){re(!0),A("stream")}},va("Enable Bunny.net Stream!","presto-player")),!!ne&&pe())),"storage"===P&&React.createElement(W,{isPrivate:ae,closePopup:function(){return x("")},noticeOperations:o,onSelect:le}),"stream"===P&&React.createElement(Tn,{isPrivate:ae,closePopup:function(){return x("")},noticeOperations:o,onSelect:le}))}))),Ra=r(19);function _a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pa=wp.i18n.__,xa="presto-player/bunny",Ca=ka(ka({},Ra.a),{},{attributes:ka(ka({},Ra.a.attributes),{thumbnail:{type:String,default:""},preview:{type:String,default:""}}),premium:!0,title:Pa("Presto Bunny.net Video","presto-player"),description:Pa("Serve video through Bunny.net CDN.","presto-player"),variations:[{name:"public",isDefault:!0,title:Pa("Presto Bunny.net Video","presto-player"),description:Pa("Serve public video through Bunny.net CDN.","presto-player"),attributes:{visibility:"public"}},{name:"private",title:Pa("Presto Bunny.net Private Video","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})),description:Pa("Serve private, secure video through Bunny.net CDN.","presto-player"),attributes:{visibility:"private"}}],icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polyline",{points:"8 17 12 21 16 17"}),React.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),React.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})),edit:Ea})},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"getPresets",(function(){return v})),r.d(n,"getReusableVideos",(function(){return f})),r.d(n,"getReusableVideo",(function(){return h})),r.d(n,"getDefaultPreset",(function(){return g})),r.d(n,"presetsLoading",(function(){return O})),r.d(n,"branding",(function(){return w})),r.d(n,"playerCSS",(function(){return j})),r.d(n,"youtube",(function(){return E})),r.d(n,"proModal",(function(){return R}));var a={};r.r(a),r.d(a,"setPresetLoading",(function(){return k})),r.d(a,"setVideosLoading",(function(){return P})),r.d(a,"setProModal",(function(){return x})),r.d(a,"setVideos",(function(){return C})),r.d(a,"updateVideos",(function(){return S})),r.d(a,"appendVideos",(function(){return N})),r.d(a,"addVideo",(function(){return D})),r.d(a,"setPresets",(function(){return T})),r.d(a,"addPreset",(function(){return B})),r.d(a,"updatePreset",(function(){return L})),r.d(a,"removePreset",(function(){return A})),r.d(a,"setBranding",(function(){return I})),r.d(a,"updateBranding",(function(){return V})),r.d(a,"saveOptions",(function(){return F})),r.d(a,"fetchOptions",(function(){return U})),r.d(a,"fetchFromAPI",(function(){return M})),r.d(a,"fetchFromWPAPI",(function(){return z})),r.d(a,"setYoutube",(function(){return H})),r.d(a,"updateYoutube",(function(){return W})),r.d(a,"setPresetSettings",(function(){return Y}));var o=r(5),l=r(8);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=wp.data,u=s.combineReducers,p=s.dispatch,d=wp.apiFetch,b=lodash.pick,m=function(e,t){return e.find((function(e){return e.id===t.id}))?e:[].concat(Object(l.a)(e),[t])},y=u({presetReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRESET":return t.value;case"ADD_PRESET":return[].concat(Object(l.a)(e),[t.value]);case"UPDATE_PRESET":return e.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:i(i({},e),t.value)}));case"REMOVE_PRESET":return e.filter((function(e){return e!==t.value}))}return e},presetLoadingReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRESET_LOADING":return e.value}},videosLoadingReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_VIDEOS_LOADING":return e.value}},videosReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0,total_pages:0,videos:[],hasResolved:!1,isError:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEOS":return t.value;case"UPDATE_VIDEOS":return i(i({},e),t.value);case"APPEND_VIDEOS":var r=e;return(t.value||[]).forEach((function(e){r.videos=m(r.videos,e)})),r;case"ADD_VIDEO":return i(i({},e),{},{videos:m(e.videos,t.value)});case"UPDATE_VIDEO":return i(i({},e),{},{videos:e.videos.map((function(e,r){var n;return e.id!==(null===(n=t.value)||void 0===n?void 0:n.id)?e:i(i({},e),t.value)}))});case"REMOVE_VIDEO":return i(i({},e),{},{videos:e.videos.filter((function(e){return e!==t.value}))})}return e},proModalReducer:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRO_MODAL":return e.value}},brandingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BRANDING":return t.value;case"UPDATE_BRANDING":return i(i({},e),{},Object(o.a)({},t.name,t.value))}return e},youtubeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_YOUTUBE":return t.value;case"UPDATE_YOUTUBE":return i(i({},e),{},Object(o.a)({},t.name,t.value))}return e},presetSettingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRESET_SETTINGS":return t.value}return e},optionsApi:function(e,t){switch(t.type){case"FETCH_OPTIONS":return d({path:"/presto-player/v1/settings/"}).then((function(e){p("presto-player/player").setBranding(e.presto_player_branding),p("presto-player/player").setYoutube(e.presto_player_youtube),p("presto-player/player").setPresetSettings(e.presto_player_presets)}));case"SAVE_OPTIONS":var r={presto_player_branding:b(null==t?void 0:t.branding,["logo","color","logo_width"])};return Object.keys(r).forEach((function(e){return(null==r[e]||!Object.keys((null==r?void 0:r[e])||{}).length)&&delete r[e]})),d({path:"/presto-player/v1/settings",method:"POST",data:r}),r}}});function v(e){return(null==e?void 0:e.presetReducer)||[]}function f(e){return(null==e?void 0:e.videosReducer)||[]}function h(e,t){var r,n;return(null==e||null===(r=e.videosReducer)||void 0===r||null===(n=r.videos)||void 0===n?void 0:n.find((function(e){return(null==e?void 0:e.id)===t})))||[]}function g(e){var t,r=null==e||null===(t=e.presetSettingsReducer)||void 0===t?void 0:t.default_player_preset,n=r&&((null==e?void 0:e.presetReducer)||[]).find((function(e){return e.id&&e.id===r}));return n||(n=((null==e?void 0:e.presetReducer)||[]).find((function(e){return"default"==e.slug}))),n||(n=((null==e?void 0:e.presetReducer)||[])[0]),n}function O(e){return!(null==e||!e.presetLoadingReducer)}function w(e){return null==e?void 0:e.brandingReducer}function j(e){var t;return null==e||null===(t=e.brandingReducer)||void 0===t?void 0:t.player_css}function E(e){return null==e?void 0:e.youtubeReducer}function R(e){return null==e?void 0:e.proModalReducer}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){return{type:"SET_PRESET_LOADING",value:e}}function P(e){return{type:"SET_VIDEOS_LOADING",value:e}}function x(e){return{type:"SET_PRO_MODAL",value:e}}function C(e){return{type:"SET_VIDEOS",value:e}}function S(e){return{type:"UPDATE_VIDEOS",value:e}}function N(e){return{type:"APPEND_VIDEOS",value:e}}function D(e){return{type:"ADD_VIDEO",value:e}}function T(e){return{type:"SET_PRESET",value:e}}function B(e){return{type:"ADD_PRESET",value:e}}function L(e){return{type:"UPDATE_PRESET",value:e}}function A(e){return{type:"REMOVE_PRESET",value:e}}function I(e){return{type:"SET_BRANDING",value:e}}function V(e,t){return{type:"UPDATE_BRANDING",name:e,value:t}}function F(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:"SAVE_OPTIONS"},e)}function U(){return{type:"FETCH_OPTIONS"}}function M(e){return{type:"FETCH_FROM_API",path:e}}function z(e,t){return{type:"FETCH_FROM_WP_API",path:e,args:t}}function H(e){return{type:"SET_YOUTUBE",value:e}}function W(e,t){return{type:"UPDATE_YOUTUBE",name:e,value:t}}function Y(e){return{type:"SET_PRESET_SETTINGS",value:e}}var G=r(6),q=r(3),Z=r.n(q);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var X=wp.apiFetch,J={FETCH_FROM_API:function(e){return X({url:prestoPlayer.root+prestoPlayer.prestoVersionString+e.path})},FETCH_FROM_WP_API:function(e){return Object(G.a)(Z.a.mark((function t(){var r,n,a,o,l,c,i;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.args,n=e.path,a=void 0===n?"":n,t.next=3,X(Q(Q(Q({path:wp.url.addQueryArgs("wp/v2/".concat(a),null==r?void 0:r.query)},null!=r&&r.data?{data:r.data}:{}),null==r?void 0:r.options),{},{parse:!1}));case 3:return o=t.sent,t.next=6,o.json();case 6:return l=t.sent,c=o.headers&&o.headers.get("X-WP-Total"),i=o.headers&&o.headers.get("X-WP-TotalPages"),t.abrupt("return",new Promise((function(e,t){e({data:l,total:c,total_pages:i})})));case 10:case"end":return t.stop()}}),t)})))()}},$={getPresets:Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,M("preset");case 3:return t=e.sent,k(!1),e.abrupt("return",T(t));case 6:case"end":return e.stop()}}),e)})),getReusableVideo:Z.a.mark((function e(t){var r,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="presto-videos/".concat(t),e.next=3,z(r,{});case 3:return n=e.sent,e.abrupt("return",D((null==n?void 0:n.data)||{}));case 5:case"end":return e.stop()}}),e)}))},ee=(0,wp.data.registerStore)("presto-player/player",{reducer:y,selectors:n,actions:a,controls:J,resolvers:$}),te=r(17),re=wp.components,ne=re.Modal,ae=re.Button,oe=wp.data,le=oe.dispatch,ce=oe.useSelect,ie=function(){return ce((function(e){return e("presto-player/player").proModal()}))?React.createElement(ne,{title:"Pro Feature",onRequestClose:function(){le("presto-player/player").setProModal(!1)}},React.createElement("h2",null,"Unlock Presto Player ",React.createElement(te.a,null)),React.createElement("p",null,"Get this feature and more with the Pro version of Presto Player!"),React.createElement(ae,{href:"https://prestoplayer.com",target:"_blank",isPrimary:!0},"Learn More")):""},se=wp.blocks,ue=se.registerBlockType,pe=se.unregisterBlockType,de=wp.plugins,be=de.registerPlugin,me=de.unregisterPlugin,ye=wp.data,ve=ye.select,fe=ye.dispatch,he=wp.element.render,ge=function(){return null},Oe=function(e){var t=e.getContext,r=e.register,n=e.unregister,a=e.before,o=void 0===a?ge:a,l=e.after,c=void 0===l?ge:l,i={};!function(){o();var e=t(),a=[];e.keys().forEach((function(t){var o=e(t);o!==i[t]&&(i[t]&&n(i[t]),r(o),a.push(o.name),i[t]=o)})),c(a)}()},we=null;Oe({getContext:function(){return r(56)},register:function(e){var t,r=e.name,n=e.options;null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium?ue(r,n):n.premium||ue(r,n)},unregister:function(e){var t=e.name;return pe(t)},before:function(){we=ve("core/editor").getSelectedBlockClientId(),fe("core/editor").clearSelectedBlock()},after:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];ve("core/editor").getBlocks().forEach((function(t){var r=t.name,n=t.clientId;e.includes(r)&&fe("core/editor").selectBlock(n)})),we?fe("core/editor").selectBlock(we):fe("core/editor").clearSelectedBlock(),we=null}}),Oe({getContext:function(){return r(62)},register:function(e){var t=e.name,r=e.options;return be(t,r)},unregister:function(e){var t=e.name;return me(t)}}),jQuery("body").append('<div id="presto-plugin-app"></div>'),he(React.createElement(ie,null),document.getElementById("presto-plugin-app")),fe("presto-player/player").fetchOptions();var je=!1;wp.data.subscribe((function(){var e=wp.data.select("core/editor").isSavingPost(),t=wp.data.select("core/editor").isAutosavingPost();if(e&&!t){if(je)return;je=!0;var r=ee.getState().brandingReducer;fe("presto-player/player").saveOptions({branding:r}).then((function(){je=!1}))}}))},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return ye})),r.d(t,"options",(function(){return ve}));var n=r(8),a=r(5),o=r(1),l=r(20),c=r(26),i=r(24),s=r(27),u=r.n(s);var p={setUrlPrivate:function(){var e=-1===window.location.href.indexOf("?")?"?":"&",t=window.location.href+e+"presto_video_type=private";window.history.pushState({path:t},"",t)},setUrlPublic:function(){var e=-1===window.location.href.indexOf("?")?"?":"&",t=window.location.href+e+"presto_video_type=public";window.history.pushState({path:t},"",t)},unsetUrlParams:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=new URL(e);return t.forEach((function(e){r.searchParams.delete(e)})),r.href}(window.location.href,["presto_video_type"]);window.history.pushState({path:e},"",e)}},d=(lodash.noop,window.location.href),b=wp.components,m=b.Button,y=(b.Notice,b.Placeholder),v=(b.DropZone,b.withFilters),f=(b.BaseControl,b.ToggleControl,b.FormFileUpload,wp.i18n.__),h=wp.element,g=h.useState,O=h.useEffect,w=wp.data.useSelect,j=(wp.deprecated,wp.editor),E=j.MediaUpload,R=j.MediaUploadCheck,_=j.URLPopover,k=function(e){var t=e.src,r=e.onChange,n=e.onSubmit,a=e.onClose;return React.createElement(_,{onClose:a},React.createElement("form",{className:"block-editor-media-placeholder__url-input-form",onSubmit:n},React.createElement("input",{"data-cy":"url-input",className:"block-editor-media-placeholder__url-input-field",type:"url","aria-label":f("URL","presto-player"),placeholder:f("Paste or type a Youtube, Vimeo or .mp4 video URL","presto-player"),onChange:r,value:t}),React.createElement(m,{"data-cy":"url-submit",className:"block-editor-media-placeholder__url-input-submit-button",icon:"editor-break",label:f("Apply","presto-player"),type:"submit"})))};var P,x=v("editor.MediaPlaceholder")((function(e){var t=e.value,r=void 0===t?{}:t,n=e.allowedTypes,a=void 0===n?[]:n,l=e.className,c=e.icon,i=e.url,s=void 0===i||i,b=e.labels,v=void 0===b?{}:b,h=e.mediaPreview,j=e.notices,_=e.isAppender,P=e.isPrivate,x=e.addToGallery,C=e.onSelect,S=e.onCancel,N=e.onSelectURL,D=e.onDoubleClick,T=e.children,B=e.allowURLs,L=w((function(e){return(0,e("core/block-editor").getSettings)().mediaUpload}),[]),A=g(""),I=Object(o.a)(A,2),V=I[0],F=I[1],U=g(!1),M=Object(o.a)(U,2),z=M[0],H=M[1];O((function(){var e;F(null!==(e=null==r?void 0:r.src)&&void 0!==e?e:"")}),[r]);var W=function(e){F(e.target.value)},Y=function(){H(!0)},G=function(){H(!1)},q=function(e){e.preventDefault(),V&&N&&(N(V),G())},Z=function(e,t){var r=v.instructions,n=v.title;L||N||(r=f("To edit this block, you need permission to upload media.","presto-player"));var a=u()("block-editor-media-placeholder",l,{"is-appender":_});return React.createElement(y,{icon:c,label:n,instructions:r,className:a,notices:j,onClick:t,onDoubleClick:D,preview:h},T,e)},K=function(){return N&&React.createElement("div",{className:"block-editor-media-placeholder__url-input-container"},s&&React.createElement(m,{"data-cy":"video-url",className:"block-editor-media-placeholder__button",onClick:Y,isPressed:z,isTertiary:!0},f("Video URL","presto-player")),z&&React.createElement(k,{src:V,onChange:W,onSubmit:q,onClose:G}))};return React.createElement(R,{fallback:Z(K())},function(){var e=React.createElement(E,{title:f(P?"Select or Upload Private Video":"Select or Upload Video","presto-player"),addToGallery:x,gallery:!1,multiple:!1,onSelect:function(e){p.unsetUrlParams(),C(e)},onClose:function(){p.unsetUrlParams()},allowedTypes:a,value:Array.isArray(r)?r.map((function(e){return e.id})):r.id,render:function(e){var t=e.open;return React.createElement(m,{"data-cy":"add-video",isPrimary:!0,onClick:function(e){e.stopPropagation(),p.unsetUrlParams(),P?p.setUrlPrivate(d):p.setUrlPublic(d),t()}},f(P?"Add/Select Private Video":"Add/Select Video","presto-player"))}});if(L){var t=React.createElement(React.Fragment,null,e,!!B&&K(),S&&React.createElement(m,{className:"block-editor-media-placeholder__cancel-button",title:f("Cancel","presto-player"),isLink:!0,onClick:S},f("Cancel","presto-player")));return Z(t)}return Z(e)}())})),C=r(17),S=wp.i18n.__,N=wp.components,D=N.withNotices,T=N.BaseControl,B=N.ToggleControl,L=N.Notice,A=wp.data.dispatch,I=["video"],V=D((function(e){var t,r=e.noticeUI,n=e.onSelect,a=e.children,o=e.onSelectURL,l=e.onUploadError,c=e.setAttributes,i=e.attributes,s="private"===i.visibility;return React.createElement("div",null,React.createElement(x,{icon:s?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})):React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),labels:{title:S(s?"Presto Private Video":"Presto Video","presto-player"),instructions:S(s?"Upload a video file, or pick one from your media library.":"Upload a video file, pick one from your media library, or add one with a URL.","presto-player")},onSelect:n,onSelectURL:o,switcher:!0,isPrivate:s,allowURLs:!s,accept:"video/*",setAttributes:c,allowedTypes:I,value:i,notices:r,onError:l},React.createElement("div",{style:{width:"100%"}},React.createElement(T,{className:"presto-player__placeholder-control"},React.createElement(B,{label:React.createElement("div",null,S("Make Private","presto-player")," ",!(null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium)&&React.createElement(C.a,null)),help:S(s?"This video is only accessible to those who are logged in.":"This video is currently accessible to everyone.","presto-player"),checked:s,onChange:function(e){var t;null!==(t=prestoPlayer)&&void 0!==t&&t.isPremium?c({visibility:e?"private":"public"}):A("presto-player/player").setProModal(!0)}})),!!a&&React.createElement("div",{style:{width:"100%"}},a),!!s&&React.createElement(L,{status:"warning",isDismissible:!1},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,S("Note","presto-player"))),S("Private videos use php to stream your video. Keep in mind this will use up disk space and bandwidth so it may not be an appropriate choice for some hosts.","presto-player"))))))})),F=r(37),U=r(25),M=r(21),z=wp.i18n.__,H=wp.blob,W=H.getBlobByURL,Y=H.isBlobURL,G=wp.components,q=G.Button,Z=G.Disabled,K=G.Toolbar,Q=G.Notice,X=G.withNotices,J=G.Placeholder,$=G.Spinner,ee=wp.editor,te=ee.BlockControls,re=ee.InspectorControls,ne=wp.compose.compose,ae=wp.element,oe=ae.useEffect,le=ae.useState,ce=wp.data.dispatch,ie=wp.blocks.createBlock,se=["video"],ue=ne([Object(i.a)(),Object(c.a)()])(X((function(e){e.noticeUI;var t=e.attributes,r=e.setAttributes,n=e.noticeOperations,a=e.branding,c=e.loading,i=e.presetData,s=e.createVideo,u=e.onRemoveSrc,p=e.renderKey,d=e.lockSave,b=e.unlockSave,m=e.clientId,y=e.defaultPreset,v=t.poster,f=t.src,h=t.id,g=t.tracks,O=le(""),w=Object(o.a)(O,2),j=w[0],E=w[1],R=function(e){n.removeAllNotices(),n.createErrorNotice(null==e?void 0:e.message)};return oe((function(){if(!h&&Y(f)){var e=W(f);e&&mediaUpload({filesList:[e],onFileChange:function(e){var t=Object(o.a)(e,1)[0].url;r({src:t})},onError:function(e){n.createErrorNotice(e)},allowedTypes:se})}}),[]),f?c||!h?React.createElement(J,{className:"presto-player__placeholder is-loading"},React.createElement($,null)):React.createElement("div",null,React.createElement(te,null,React.createElement(F.a,{tracks:g,onChange:function(e){r({tracks:e})}}),React.createElement(K,null,React.createElement(q,{onClick:function(){return u()}},z("Replace","presto-player")))),React.createElement(re,null,React.createElement(U.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(Z,null,React.createElement(M.a,{poster:v,src:f,id:h,type:"hosted",attributes:t,setAttributes:r,preset:i,branding:a,key:p})))):React.createElement("div",null,React.createElement(V,{onSelect:function(e){e&&e.url?(r({src:e.url,preset:null==y?void 0:y.id,attachment_id:e.id}),d(),s({src:e.url,type:"attachment",attachment_id:e.id}).catch((function(e){r({src:""}),R(e)})).finally(b)):r({src:void 0,id:void 0})},onSelectURL:function(e){var t;if(r({attachment_id:null}),e&&Object(l.d)(e)&&(null===(t=prestoPlayer)||void 0===t||!t.isPremium))return void E(React.createElement(Q,{status:"info",onRemove:function(){return E("")}},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,z("Get HLS Streaming and more with Presto Player Pro!","presto-player"))),z("Stream HLS links and more with Presto Player Pro.","presto-player"),React.createElement("div",{style:{marginTop:"1em"}},React.createElement(q,{isPrimary:!0},z("Upgrade","presto-player"))))));if(e!==f){var n=Object(l.a)(e).type;if("youtube"===n){var a=ie("presto-player/youtube",{src:e});return void ce("core/editor").replaceBlock(m,a)}if("vimeo"===n){var o=ie("presto-player/vimeo",{src:e});return void ce("core/editor").replaceBlock(m,o)}r({src:e,attachmend_id:null}),r({preset:null==y?void 0:y.id}),d(),s({src:e,type:"link"}).catch((function(e){r({src:""}),R(e)})).finally(b)}},setAttributes:r,attributes:t,onError:function(e){n.removeAllNotices(),n.createErrorNotice(e)}},j))}))),pe=r(19);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=wp.i18n.__,ye="presto-player/self-hosted",ve=be(be({},pe.a),{},{title:me("Presto Video","presto-player"),description:me("Presto Self-hosted video block.","presto-player"),variations:[{name:"public",isDefault:!0,title:me("Presto Video","presto-player"),description:me("Presto Self-hosted video block.","presto-player"),attributes:{visibility:"public"}}].concat(Object(n.a)(null!==(P=prestoPlayer)&&void 0!==P&&P.isPremium?[{name:"private",title:me("Private Private Video","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),React.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})),description:me("Private video self-hosted block.","presto-player"),attributes:{visibility:"private"}}]:[])),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),React.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),edit:ue})},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return V})),r.d(t,"options",(function(){return F}));var n=r(6),a=r(1),o=r(3),l=r.n(o),c=(r(27),wp.compose.useInstanceId),i=wp.i18n.__,s=wp.components,u=s.VisuallyHidden,p=s.Button,d=s.Icon,b=wp.element.useRef;var m=function e(t){t.className;var r=t.onChange,n=t.value,a=t.placeholder,o=c(e),l=b();return React.createElement("div",{className:"block-editor-inserter__search",style:{padding:0}},React.createElement(u,{as:"label",htmlFor:"block-editor-inserter__search-".concat(o)},a),React.createElement("input",{ref:l,className:"block-editor-inserter__search-input",id:"block-editor-inserter__search-".concat(o),type:"search",placeholder:a,onChange:function(e){return r(e.target.value)},autoComplete:"off",value:n||""}),React.createElement("div",{className:"block-editor-inserter__search-icon"},!!n&&React.createElement(p,{icon:"close-small",label:i("Reset search","presto-player"),onClick:function(){r(""),l.current.focus()}}),!n&&React.createElement(d,{icon:"search"})))},y=function(e){var t=e.icon,r=e.title,n=e.id,a=e.selectBlock,o=e.i;return React.createElement("button",{type:"button",id:"video-".concat(n),tabIndex:o,onClick:a,role:"option",className:"components-button block-editor-block-types-list__item editor-block-list-item-kadence-spacer"},React.createElement("span",{className:"block-editor-block-types-list__item-icon"},React.createElement("span",{className:"block-editor-block-icon has-colors"},t)),React.createElement("span",{className:"block-editor-block-types-list__item-title"},r))},v=wp.i18n.__,f=wp.components,h=(f.Panel,f.PanelBody),g=f.Button,O=f.Spinner,w=wp.editPost,j=w.PluginSidebar,E=w.PluginSidebarMoreMenuItem,R=wp.element,k=R.Fragment,P=R.useEffect,x=R.useState,C=R.useCallback,S=wp.data,N=S.dispatch,D=S.useSelect,T=wp.blocks,B=T.createBlock,L=T.getBlockType,A=wp.apiFetch,I=wp.blockSerializationDefaultParser.parse;var V="presto-player",F={render:function(){var e,t,r,o=(e=x(0),(t=Object(a.a)(e,2))[0],r=t[1],function(){return r((function(e){return e+1}))}),c=React.createElement("svg",{viewBox:"0 0 35 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{"clip-path":"url(#clip0)"},React.createElement("path",{d:"M23.3722 16.9766L33.2059 11.2991L33.2059 22.6541L23.3722 16.9766Z",fillOpacity:"0.7"}),React.createElement("path",{d:"M23.3745 5.6227L33.2082 11.3002L23.3745 16.9776L23.3745 5.6227Z",fillOpacity:"0.75"}),React.createElement("path",{d:"M23.3745 5.62242L23.3745 16.9773L13.5409 11.2999L23.3745 5.62242Z",fillOpacity:"0.8"}),React.createElement("path",{d:"M23.399 5.613L13.5654 11.2905L13.5654 -0.0644536L23.399 5.613Z",fillOpacity:"0.85"}),React.createElement("path",{d:"M13.5699 11.3038L13.5699 22.6587L3.73623 16.9813L13.5699 11.3038Z",fillOpacity:"0.8"}),React.createElement("path",{d:"M13.5699 -0.0245525L13.5699 11.3304L3.73623 5.6529L13.5699 -0.0245525Z",fillOpacity:"0.9"}),React.createElement("path",{d:"M13.5699 22.6451L13.5699 34L3.73623 28.3226L13.5699 22.6451Z",fillOpacity:"0.7"}),React.createElement("path",{d:"M23.3745 16.9774L33.2082 22.6549L23.3745 28.3323L23.3745 16.9774Z",fillOpacity:"0.65"}),React.createElement("path",{d:"M3.73774 16.9774L13.5714 22.6549L3.73774 28.3323L3.73774 16.9774Z",fillOpacity:"0.75"}),React.createElement("path",{d:"M3.73774 5.63149L13.5714 11.3089L3.73774 16.9864L3.73774 5.63149Z",fillOpacity:"0.85"}),React.createElement("path",{d:"M23.3745 16.9772L23.3745 28.3321L13.5409 22.6546L23.3745 16.9772Z",fillOpacity:"0.6"})),React.createElement("defs",null,React.createElement("clipPath",{id:"clip0"},React.createElement("rect",{width:"35",height:"34",fill:"white"})))),i=x(!1),s=Object(a.a)(i,2),u=s[0],p=s[1],d=x(1),b=Object(a.a)(d,2),f=b[0],w=b[1],R=x(!1),S=Object(a.a)(R,2),T=S[0],V=S[1],F=x(""),U=Object(a.a)(F,2),M=U[0],z=U[1],H=C(_.debounce((function(e){Z({replace:!0,term:e})}),250),[]);P((function(){H(M)}),[M]),P((function(){V(!0),Z({replace:!1})}),[f]);var W=D((function(e){return e("presto-player/player").getReusableVideos()}),[M,f]),Y=W.videos,G=W.total_pages,q=W.hasResolved,Z=function(){var e=Object(n.a)(l.a.mark((function e(t){var r,n,a,c,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.replace,n=t.term,e.next=3,A({path:wp.url.addQueryArgs("wp/v2/presto-videos",{search:n,page:f,per_page:10}),parse:!1});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,i=a.headers&&parseInt(a.headers.get("X-WP-Total")),s=a.headers&&parseInt(a.headers.get("X-WP-TotalPages")),r?N("presto-player/player").updateVideos({videos:c,hasResolved:!0,total:i,total_pages:s}):(N("presto-player/player").appendVideos(c),N("presto-player/player").updateVideos({hasResolved:!0,total:i,total_pages:s})),o(),V(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();P((function(){p(f<G)}),[f,G]);var K=function(){var e=f+1;w(e=e>G?G:e)},Q=function(e){var t,r,n,a,o=I(null==e||null===(t=e.content)||void 0===t?void 0:t.raw);if(null!=o&&null!==(r=o[0])&&void 0!==r&&null!==(n=r.innerBlocks)&&void 0!==n&&null!==(a=n[0])&&void 0!==a&&a.blockName){var l,c,i,s,u=L(null==o||null===(l=o[0])||void 0===l||null===(c=l.innerBlocks)||void 0===c||null===(i=c[0])||void 0===i?void 0:i.blockName);return null!=u&&null!==(s=u.icon)&&void 0!==s&&s.src?u.icon.src:""}return""};return React.createElement(k,null,React.createElement(E,{target:"presto-player-sidebar",icon:c},v("Presto Player","presto-player")),React.createElement(j,{name:"presto-player-sidebar",title:v("Presto Player","presto-player"),icon:c},React.createElement(h,null,React.createElement("h2",{style:{marginTop:0}},v("Media Hub","presto-player")),React.createElement(m,{placeholder:"Search media...",value:M,onChange:function(e){return t=e,w(1),void z(t);var t}}),React.createElement("div",{className:"block-editor-inserter__panel-content"},q?React.createElement("div",{role:"listbox",className:"block-editor-block-types-list presto-player__panel-grid-list","aria-label":v("Media Hub","presto-player")},Y.length?Y.map((function(e,t){var r;return React.createElement(y,{selectBlock:function(t){N("core/editor").insertBlock(B("presto-player/reusable-display",{id:null==e?void 0:e.id}))},icon:Q(e),title:(null==e||null===(r=e.title)||void 0===r?void 0:r.raw)||"Untitled",id:null==e?void 0:e.id,i:t,key:null==e?void 0:e.id})})):function(){if(!Y.length)return M?React.createElement("p",null,v("No videos found.","presto-player")):React.createElement(g,{href:"post-new.php?post_type=pp_video_block",isSecondary:!0},v("Create A Reusable Video","presto-player"))}(),!M&&u&&Y.length?React.createElement("div",{style:{"margin-top":"20px","text-align":"center",display:"flex","justify-content":"center",width:"100%"}},React.createElement(g,{isSecondary:!0,isSmall:!0,onClick:K,isBusy:T},"Load More")):""):React.createElement(O,null)))))}}},,function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return R})),r.d(t,"options",(function(){return _}));var n=r(1),a=wp.i18n.__,o=wp.blockEditor,l=o.InnerBlocks,c=o.useBlockProps,i=wp.editor,s=(i.BlockControls,i.InspectorControls),u=wp.components,p=u.Disabled,d=(u.Toolbar,u.Button),b=u.PanelBody,m=(u.Panel,u.Placeholder),y=u.Spinner,v=wp.data,f=v.useSelect,h=v.dispatch,g=wp.element,O=g.useState,w=g.useEffect,j=wp.blockSerializationDefaultParser.parse,E=wp.blockEditor,R=(E.InnerBlocks,E.useBlockProps,"presto-player/reusable-display"),_={title:"Reusable Block Display",category:"presto",attributes:{id:Number},supports:{align:!0,inserter:!1,reusable:!1,html:!1},icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("circle",{cx:"12",cy:"12",r:"10"}),React.createElement("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),React.createElement("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})),edit:function(e){var t,r=e.attributes,o=e.isSelected,i=e.clientId,u=r.id,v=c(),g=O(!1),E=Object(n.a)(g,2),R=E[0],_=E[1],k=O([]),P=Object(n.a)(k,2),x=P[0],C=P[1],S=O(""),N=Object(n.a)(S,2),D=N[0],T=N[1],B=f((function(e){if(u)return e("presto-player/player").getReusableVideo(u)}));w((function(){wp.data.dispatch("core/block-editor").selectBlock(i)}),[R]);var L=f((function(e){return e("core/editor").getBlocksByClientId(i)[0].innerBlocks}));return L&&null!=B&&B.id&&L.forEach((function(e){h("core/editor").updateBlockAttributes(e.clientId,{selectionOverrideClientId:i})})),w((function(){if(B.id){var e,t,r;_(!0);var n=j(null==B||null===(e=B.content)||void 0===e?void 0:e.raw);C([null==n||null===(t=n[0])||void 0===t?void 0:t.innerBlocks[0].blockName,null==n||null===(r=n[0])||void 0===r?void 0:r.innerBlocks[0].attrs]),T("post.php?post=".concat(B.id,"&action=edit"))}}),[B]),R?x?React.createElement(React.Fragment,null,React.createElement(s,null,React.createElement(b,null,React.createElement("p",null,"This is a reusable video that you can edit once and place anywhere."),React.createElement(d,{isSecondary:!0,href:"edit.php?post_type=pp_video_block"},a("Manage Media Hub","presto-player")))),React.createElement("div",{className:"block-library-block__reusable-block-container"},React.createElement("div",v,o&&React.createElement("div",{className:"reusable-block-edit-panel"},React.createElement("b",{className:"reusable-block-edit-panel__info"},null==B||null===(t=B.title)||void 0===t?void 0:t.raw),React.createElement(d,{isSecondary:!0,href:D,className:"reusable-block-edit-panel__button"},a("Edit Reusable Video","presto-player"))),React.createElement(p,null,React.createElement(l,{template:[x],templateLock:"all",renderAppender:!1}))))):void 0:React.createElement("div",v,React.createElement(m,null,React.createElement(y,null)))},save:function(){return null}}},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return x})),r.d(t,"options",(function(){return C}));var n=r(5),a=r(26),o=r(24),l=r(25),c=r(21),i=r(39),s=r(20),u=r(22),p=wp.components,d=p.Button,b=p.Disabled,m=p.Toolbar,y=p.Placeholder,v=p.Spinner,f=p.withNotices,h=wp.editor,g=h.BlockControls,O=h.InspectorControls,w=wp.element.useEffect,j=wp.i18n.__,E=(0,wp.compose.compose)([Object(o.a)(),Object(a.a)()])(f((function(e){var t=e.attributes,r=e.setAttributes,n=e.branding,a=e.noticeOperations,o=e.loading,p=e.createVideo,f=e.lockSave,h=e.unlockSave,E=e.presetData,R=e.onRemoveSrc,_=e.renderKey,k=t.poster,P=t.src,x=t.id,C=Object(u.b)(P);return w((function(){C&&r({id:0});var e=Object(s.b)(P);r({video_id:e}),f(),p({src:P,external_id:e,type:"vimeo"}).catch((function(e){r({src:""}),function(e){a.removeAllNotices(),a.createErrorNotice(null==e?void 0:e.message)}(e)})).finally(h)}),[P]),P?o||!x?React.createElement(y,{className:"presto-player__placeholder is-loading"},React.createElement(v,null)):React.createElement(React.Fragment,null,React.createElement(g,null,React.createElement(m,null,React.createElement(d,{onClick:function(){return R()}},j("Replace","presto-player")))),React.createElement(O,null,React.createElement(l.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(b,null,React.createElement(c.a,{poster:k,src:P,type:"vimeo",id:x,attributes:t,setAttributes:r,preset:E,branding:n,key:_})))):React.createElement("div",null,React.createElement(i.a,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z"})),label:j("Presto Vimeo Video","presto-player"),instructions:j("Enter Vimeo Video URL","presto-player"),placeholder:j("Vimeo URL","presto-player"),attributes:t,setAttributes:r,onSelectURL:function(e){e!==P&&r({src:e})}}))}))),R=r(19);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=wp.i18n.__,x="presto-player/vimeo",C=k(k({},R.a),{},{attributes:k(k({},R.a.attributes),{},{video_id:{type:String}}),title:P("Presto Vimeo Video","presto-player"),description:P("A vimeo video wrapped in an awesome player.","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.875 10.063c-2.442 5.217-8.337 12.319-12.063 12.319-3.672 0-4.203-7.831-6.208-13.043-.987-2.565-1.624-1.976-3.474-.681l-1.128-1.455c2.698-2.372 5.398-5.127 7.057-5.28 1.868-.179 3.018 1.098 3.448 3.832.568 3.593 1.362 9.17 2.748 9.17 1.08 0 3.741-4.424 3.878-6.006.243-2.316-1.703-2.386-3.392-1.663 2.673-8.754 13.793-7.142 9.134 2.807z"})),edit:E})},function(e,t,r){"use strict";r.r(t),r.d(t,"name",(function(){return x})),r.d(t,"options",(function(){return C}));var n=r(5),a=r(26),o=r(24),l=r(25),c=r(21),i=r(39),s=r(20),u=r(22),p=wp.components,d=p.Button,b=p.Disabled,m=p.Toolbar,y=p.Placeholder,v=p.Spinner,f=p.withNotices,h=wp.editor,g=h.BlockControls,O=h.InspectorControls,w=wp.element.useEffect,j=wp.i18n.__,E=(0,wp.compose.compose)([Object(o.a)(),Object(a.a)()])(f((function(e){var t=e.attributes,r=e.setAttributes,n=e.noticeOperations,a=e.branding,o=e.createVideo,p=e.loading,f=e.presetData,h=e.onRemoveSrc,E=e.lockSave,R=e.unlockSave,_=e.renderKey,k=t.poster,P=t.src,x=t.id,C=Object(u.b)(P);return w((function(){C&&r({id:0});var e=Object(s.c)(P);r({video_id:e}),E(),o({src:P,external_id:e,type:"youtube"}).catch((function(e){r({src:""}),function(e){n.removeAllNotices(),n.createErrorNotice(null==e?void 0:e.message)}(e)})).finally(R)}),[P]),P?p||!x?React.createElement(y,{className:"presto-player__placeholder is-loading"},React.createElement(v,null)):React.createElement(React.Fragment,null,React.createElement(g,null,React.createElement(m,null,React.createElement(d,{onClick:function(){return h()}},j("Replace","presto-player")))),React.createElement(O,null,React.createElement(l.a,{setAttributes:r,attributes:t})),React.createElement("figure",null,React.createElement(b,null,React.createElement(c.a,{poster:k,src:P,type:"youtube",id:x,attributes:t,setAttributes:r,preset:f,branding:a,key:_})))):React.createElement("div",null,React.createElement(i.a,{icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),React.createElement("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})),label:j("Presto Youtube Video","presto-player"),instructions:j("Enter Youtube Video URL","presto-player"),placeholder:j("Youtube URL","presto-player"),attributes:t,setAttributes:r,onSelectURL:function(e){e!==P&&r({src:e})}}))}))),R=r(19);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=wp.i18n.__,x="presto-player/youtube",C=k(k({},R.a),{},{attributes:k(k({},R.a.attributes),{},{video_id:{type:String}}),title:P("Presto Youtube Video","presto-player"),description:P("A youtube video wrapped in an awesome player.","presto-player"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"presto-block-icon"},React.createElement("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),React.createElement("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})),edit:E})}],[[54,1,4]]]);
//# sourceMappingURL=admin-b72f0276.js.map