/*!
 * 
 * Presto Player
 * 
 * @author Presto Made, Inc
 * @version 0.1.0
 * @link undefined
 * @license GPL
 * 
 * Copyright (c) 2021 Presto Made, Inc
 * 
 * This software is released under the GPL License
 * https://opensource.org/licenses/GPL
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackioprestoPlayersettingsJsonp=window.wpackioprestoPlayersettingsJsonp||[]).push([[0],{30:function(e,t,n){n(31),e.exports=n(46)},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"settings",(function(){return c})),n.d(a,"ui",(function(){return p})),n.d(a,"notices",(function(){return u}));var r={};n.r(r),n.d(r,"setSettings",(function(){return m})),n.d(r,"updateSetting",(function(){return d})),n.d(r,"setSaving",(function(){return y})),n.d(r,"addNotice",(function(){return v})),n.d(r,"removeNotice",(function(){return g}));var l=n(26),o=n(0);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return e.settingsReducer}function p(e){return e.uiReducer}function u(e){return e.uiReducer.notices||[]}function m(e){return{type:"SET_SETTINGS",settings:e}}function d(e,t,n){return{type:"UPDATE_SETTING",name:e,value:t,optionName:n}}function y(e){return{type:"SET_SAVING",value:e}}function v(e){return{type:"SET_NOTICE",notice:e}}function g(e){return{type:"REMOVE_NOTICE",id:e}}var h={reducer:(0,wp.data.combineReducers)({settingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SETTINGS":return t.settings;case"UPDATE_SETTING":return i(i({},e),{},Object(o.a)({},"presto_player_".concat(t.optionName),i(i({},e["presto_player_".concat(t.optionName)]),{},Object(o.a)({},t.name,t.value))))}return e},uiReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notices:[],saving:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SAVING":return i(i({},e),{},{saving:t.value});case"SET_NOTICE":return i(i({},e),{},{notices:[].concat(Object(l.a)(e.notices),[i({id:e.notices.length},t.notice)])});case"REMOVE_NOTICE":return i(i({},e),{},{notices:e.notices.filter((function(e){return e.id!==t.id}))})}return e}}),selectors:a,actions:r},f=n(2),R=n(7);R.a.use(R.a.createNonceMiddleware(prestoPlayer.nonce)),R.a.use(R.a.createRootURLMiddleware(prestoPlayer.root+prestoPlayer.wpVersionString));var b=R.a,E=(n(35),wp.i18n.__),w=wp.data,N=w.dispatch,k=w.useSelect,S=prestoPlayer.root+prestoPlayer.wpVersionString;function P(){return k((function(e){return e("presto-player/settings").settings()}))}function O(e){var t={};return["presto_player_analytics","presto_player_branding","presto_player_bunny_storage_zones","presto_player_bunny_pull_zones","presto_player_bunny_stream","presto_player_bunny_stream_public","presto_player_bunny_stream_private","presto_player_google_analytics","presto_player_uninstall","presto_player_mailchimp","presto_player_mailerlite","presto_player_youtube","presto_player_activecampaign","presto_player_fluentcrm"].forEach((function(n){t[n]=e[n]?e[n]:{}})),t}window.lodash=_.noConflict();var C=n(22),x=n(23),j=n(12),T=n(27),D=n(24),B=n(16),I=n(25),A=n.n(I);function M(e){return{path:e.pathname,hash:e.hash,query:A.a.parse(e.search)}}var z=n(28),F=Object(z.a)(),G=wp.element.createContext({route:M(F.location)}),q=n(6),L=wp.element.useContext;function U(e){var t=e.path,n=e.onRoute,a=e.children,r=L(G).route,l=Object(q.a)("".concat(t))("".concat(r.hash.substr(1)));return l?(n&&n(),React.createElement("div",null,wp.element.cloneElement(a,{route:l}))):null}var V=n(4),Y=n.n(V);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var K=wp.element.useContext;function H(e){var t=e.to,n=e.onClick,a=e.children,r=e.activeClassName,l=K(G).route,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);delete s.activeClassName;return React.createElement("a",Object.assign({},s,{className:Y()(Object(o.a)({},r,Object(q.a)("".concat(t))("".concat(l.hash.substr(1)))),e.className),onClick:function(e){e.preventDefault(),l.path!==t&&(n&&n(e),F.push("#".concat(t)))}}),a)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(B.a)(e);if(t){var r=Object(B.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(D.a)(this,n)}}var Q=function(e){Object(T.a)(n,e);var t=J(n);function n(e){var a;Object(C.a)(this,n),a=t.call(this,e),Object(o.a)(Object(j.a)(a),"handleRouteChange",(function(e){var t=M(null==e?void 0:e.location);a.setState({route:t})})),a.routes=Object.keys(e.routes).map((function(t){return e.routes[t].path})),a.unlisten=F.listen(a.handleRouteChange);var r=M(F.location);return a.state={route:r,defaultRoute:(null==e?void 0:e.defaultRoute)?"#".concat(null==e?void 0:e.defaultRoute):"#/"},a}return Object(x.a)(n,[{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.NotFound,this.state),a=n.route,r=n.defaultRoute;if(!a.hash)return F.push(r),React.createElement("div",null);var l=!1;(this.routes||[]).forEach((function(e){var t=Object(q.a)(a.hash.substr(1))("".concat(a.hash.substr(1)));t&&(l={name:e,data:t})}));var o={route:a,matched:l},s=!l;return React.createElement(G.Provider,{value:o},s?React.createElement("div",null,"Not found"):t)}}]),n}(wp.element.Component),X={general:{path:"/general"},integrations:{path:"/integrations"}},Z=wp.i18n.__,$=wp.components.Button,ee=wp.data.useSelect,te=function(e){var t=e.style,n=e.className,a=P(),r=ee((function(e){return e("presto-player/settings").ui()}));return React.createElement($,{isPrimary:!0,style:t,className:n,disabled:r.saving,onClick:function(e){e.preventDefault(),function(e){N("presto-player/settings").setSaving(!0),b({url:"".concat(S,"settings/"),method:"POST",data:e}).then((function(e){N("presto-player/settings").setSettings(O(e)),N("presto-player/settings").addNotice({content:E("Settings saved.","presto-player")})})).catch((function(e){N("presto-player/settings").addNotice({content:e.message?e.message:"Something went wrong.",className:"is-snackbar-error"})})).finally((function(){N("presto-player/settings").setSaving(!1)}))}(a)}},Z("Save Changes","presto-player"))},ne=n(1),ae=n.n(ne),re=n(3),le=wp.data.useSelect,oe=function(){return le((function(e){return e("presto-player/settings").settings()}))},se=function(e,t){var n,a=oe();return t?null==a||null===(n=a["presto_player_".concat(e)])||void 0===n?void 0:n[t]:null==a?void 0:a["presto_player_".concat(e)]},ie=wp.i18n.__,ce=wp.element.useState,pe=wp.components,ue=pe.Modal,me=pe.Button,de=function(e){var t=e.children,n=e.disabled,a=ce(!1),r=Object(f.a)(a,2),l=r[0],o=r[1];return n?React.createElement("div",null,React.createElement("div",{className:"presto-options__disabled-overlay",onClick:function(e){return o(!0),e.preventDefault(),!1}},React.createElement("div",null,t)),!!l&&React.createElement(ue,{title:null==n?void 0:n.title,onRequestClose:function(){return o(!1)}},React.createElement("h2",null,null==n?void 0:n.heading),React.createElement("p",null,null==n?void 0:n.message),React.createElement(me,{href:null==n?void 0:n.link,target:"_blank",isPrimary:!0},ie("Learn More","presto-player")))):React.createElement("div",null,t)},ye=(wp.i18n.__,wp.components),ve=ye.Card,_e=ye.CardBody,ge=ye.CardFooter,he=function(e){var t=e.title,n=e.description,a=e.children,r=e.disabled,l=e.hideSaveButton;return React.createElement(de,{disabled:r},React.createElement(ve,{size:"large",className:"presto-options__card"},React.createElement(_e,{className:"presto-options__card-body"},React.createElement("div",{className:"presto-flow",style:{"--presto-flow-space":"2em"}},React.createElement("div",{className:"presto-flow",style:{"--presto-flow-space":"1em"}},t&&React.createElement("h2",{style:{marginBottom:0}},t," ",!!r&&React.createElement("div",{className:"presto-options__pro-badge"},"Pro")),n&&React.createElement("p",null,n)),React.createElement("div",null,a))),l?React.createElement("br",null):React.createElement(ge,{isShady:!0},React.createElement("div",null,React.createElement(te,{form:"presto-settings-form"})))))},fe=function(e){var t=e.children,n=e.title,a=e.description;return React.createElement("div",{className:"presto-flow presto-settings__page"},React.createElement("div",{className:"presto-flow",style:{"--presto-flow-space":"1em"}},n&&React.createElement("h1",null,n),a&&React.createElement("p",null,a)),React.createElement("div",{className:"presto-settings__body "},React.createElement("div",{className:"presto-flow"},t)))},Re=wp.components,be=Re.ColorPicker,Ee=Re.BaseControl,we=wp.data.dispatch,Ne=function(e){var t=e.option,n=e.value,a=e.optionName,r=e.className;return React.createElement("div",{className:Y()(r,"presto-settings__setting is-color-control")},React.createElement(Ee,{label:null==t?void 0:t.name,help:null==t?void 0:t.help},React.createElement("br",null),React.createElement("br",null),React.createElement(be,{color:n,onChangeComplete:function(e){return we("presto-player/settings").updateSetting(t.id,e.hex,a)},disableAlpha:!0})))},ke=wp.components,Se=ke.ToggleControl,Pe=ke.Modal,Oe=ke.Button,Ce=wp.data.dispatch,xe=wp.element.useState,je=wp.i18n.__,Te=function(e){var t,n,a,r,l,o=e.option,s=e.value,i=e.optionName,c=e.className,p=xe(!1),u=Object(f.a)(p,2),m=u[0],d=u[1];return React.createElement("div",{className:Y()(c,"presto-settings__setting is-toggle-control")},React.createElement(Se,{label:(null==o?void 0:o.description)||(null==o?void 0:o.name),checked:s,help:null==o?void 0:o.help,onChange:function(e){(null==o?void 0:o.confirm)&&e?d(!0):Ce("presto-player/settings").updateSetting(o.id,e,i)}}),m&&React.createElement(Pe,{className:"presto-player__modal-confirm",title:null==o||null===(t=o.confirm)||void 0===t?void 0:t.title,style:{"max-width":"350px"},onRequestClose:function(){return d(!1)}},(null==o||null===(n=o.confirm)||void 0===n?void 0:n.heading)&&React.createElement("h2",null,null==o||null===(a=o.confirm)||void 0===a?void 0:a.heading),(null==o||null===(r=o.confirm)||void 0===r?void 0:r.message)&&React.createElement("p",null,null==o||null===(l=o.confirm)||void 0===l?void 0:l.message),React.createElement(Oe,{className:"presto-player__modal-confirm-button",isDestructive:!0,onClick:function(){Ce("presto-player/settings").updateSetting(o.id,!0,i),d(!1)}},je("Okay","presto-player")),React.createElement(Oe,{onClick:function(){return d(!1)}},je("Cancel","presto-player"))))},De=wp.i18n.__,Be=wp.components,Ie=Be.Button,Ae=(Be.RangeControl,Be.BaseControl),Me=wp.mediaUtils.MediaUpload,ze=wp.data.dispatch,Fe=function(e){var t=e.option,n=e.value,a=e.optionName,r=e.className,l=e.maxWidth;return React.createElement("div",{className:Y()(r,"presto-settings__setting is-media-control")},React.createElement(Ae,{className:"editor-video-poster-control"},React.createElement(Ae.VisualLabel,null,React.createElement("p",null,null==t?void 0:t.name)),n&&React.createElement(Ae,null,React.createElement("img",{style:{maxWidth:l,border:"1px solid #dcdcdc"},src:n})),React.createElement(Me,{title:null==t?void 0:t.help,onSelect:function(e){ze("presto-player/settings").updateSetting(t.id,e.url,a)},allowedTypes:null==t?void 0:t.allowed_types,render:function(e){var t=e.open;return React.createElement(Ie,{isSecondary:!0,onClick:t,className:n?"button-replace":"button-select"},De(n?"Replace":"Select","presto-player"))}}),React.createElement("p",{id:"video-block__logo-image-description-".concat(null==t?void 0:t.id),hidden:!0},n?sprintf(De("The current logo image url is %s","presto-player"),n):De("There is no logo image currently selected","presto-player")),!!n&&React.createElement(Ie,{onClick:function(e){ze("presto-player/settings").updateSetting(t.id,"",a),e.preventDefault()},isTertiary:!0,className:"button-remove"},De("Remove","presto-player"))),React.createElement("br",null))},Ge=wp.i18n.__,qe=wp.data.dispatch,Le=wp.components.RangeControl,Ue=function(){var e,t,n,a,r,l=oe(),o=function(){var e;return!(null===(e=prestoPlayer)||void 0===e?void 0:e.isPremium)&&{title:Ge("Pro Feature","presto-player"),heading:Ge("Unlock Presto Player Pro","presto-player"),message:Ge("Get this feature and more with the Pro version of Presto Player!","presto-player"),link:"https://prestoplayer.com"}};return React.createElement(fe,{title:Ge("General","presto-player"),description:Ge("Branding, analytics and uninstall data.","presto-player")},React.createElement(he,{title:Ge("Branding","presto-player"),description:Ge("Global player branding options","presto-player")},React.createElement(de,{disabled:o()},React.createElement(Fe,{className:"presto-player__setting--logo",option:{name:React.createElement(React.Fragment,null,Ge("Logo","presto-player")," ",o()&&React.createElement("span",{className:"presto-options__pro-badge"},Ge("Pro","presto-player"))),id:"logo",default:""},maxWidth:se("branding","logo_width")||150,value:se("branding","logo"),optionName:"branding"}),React.createElement("div",{style:{maxWidth:"500px"}},React.createElement(Le,{className:"presto-player__setting--logo-width",label:Ge("Logo Max Width","presto-player"),value:se("branding","logo_width")||150,onChange:function(e){qe("presto-player/settings").updateSetting("logo_width",e,"branding")},min:1,max:400}))),React.createElement(Ne,{className:"presto-player__setting--brand-color",option:{name:Ge("Brand Color","presto-player"),id:"color",default:""},value:se("branding","color"),optionName:"branding"})),React.createElement(he,{title:Ge("Analytics","presto-player"),disabled:o(),description:Ge("Analytics settings for video plays, watch times and more.","presto-player")},React.createElement("div",null,React.createElement(Te,{className:"presto-player__setting--analytics-enable",option:{id:"enable",name:Ge("Enable","presto-player"),help:Ge("Enable view analytics for your videos","presto-player")},value:null==l||null===(e=l.presto_player_analytics)||void 0===e?void 0:e.enable,optionName:"analytics"}),!!(null==l||null===(t=l.presto_player_analytics)||void 0===t?void 0:t.enable)&&React.createElement(Te,{className:"presto-player__setting--purge-data",option:{id:"purge_data",name:Ge("Auto-Purge Data (recommended)","presto-player"),help:Ge("Automatically purge data older than 90 days.","presto-player")},value:void 0===(null==l||null===(n=l.presto_player_analytics)||void 0===n?void 0:n.purge_data)||(null==l||null===(a=l.presto_player_analytics)||void 0===a?void 0:a.purge_data),optionName:"analytics"}))),React.createElement(he,{title:Ge("Uninstall Options","presto-player"),description:Ge("Options to remove data on uninstall.","presto-player")},React.createElement(Te,{className:"presto-player__setting--uninstall",option:{id:"uninstall_data",name:Ge("Remove data on uninstall","presto-player"),help:Ge("This removes all data on uninstall.","presto-player"),confirm:{title:Ge("Caution: Data Loss","presto-player"),heading:Ge("Are you sure?","presto-player"),message:Ge("Are you sure you want to remove all the data from this plugin? This is irreversible!","presto-player")}},value:null==l||null===(r=l.presto_player_uninstall)||void 0===r?void 0:r.uninstall_data,optionName:"uninstall"})))},Ve=wp.components.TextControl,Ye=wp.data.dispatch,We=function(e){var t=e.option,n=e.value,a=e.optionName,r=e.className;return React.createElement("div",{className:"presto-settings__setting is-text-control"},React.createElement(Ve,Object.assign({className:Y()(r,"presto-settings__setting is-media-control"),label:null==t?void 0:t.name,value:n,type:null==t?void 0:t.type,help:null==t?void 0:t.help,placeholder:null==t?void 0:t.placeholder,onChange:function(e){return Ye("presto-player/settings").updateSetting(t.id,e,a)}},e)))},Ke=wp.i18n.__,He=wp.components,Je=He.Button,Qe=He.Panel,Xe=He.PanelBody,Ze=He.Flex,$e=He.Modal,et=He.FlexBlock,tt=He.FlexItem,nt=He.PanelRow,at=wp.element.useState,rt=function(e){var t=e.connected,n=e.title,a=e.children,r=e.onConnect,l=e.isBusy,o=e.connectButtonText,s=e.disconnectButtonText,i=e.onDisconnect,c=at(!1),p=Object(f.a)(c,2),u=p[0],m=p[1];return React.createElement(Qe,null,React.createElement(Xe,{title:React.createElement(Ze,null,React.createElement(et,null,n),React.createElement(tt,null,t?React.createElement(Je,{isSmall:!0,isPrimary:!0,style:{marginRight:"30px"}},Ke("Connected","presto-player")):React.createElement(Je,{isSmall:!0,isSecondary:!0,style:{marginRight:"30px"}},Ke("Not Connected","presto-player")))),initialOpen:!1},React.createElement("form",{onSubmit:function(e){e.preventDefault(),r()},disabled:l},a,React.createElement(nt,null,React.createElement("div",null,t?React.createElement("div",null," ",React.createElement(Je,{isSecondary:!0,isBusy:l,disabled:l,onClick:function(e){e.preventDefault(),m(!0)}},s||Ke("Disconnect","presto-player"))):React.createElement(Je,{isPrimary:!0,isBusy:l,disabled:l,type:"submit"},o||Ke("Connect","presto-player")))))),u&&React.createElement($e,{className:"presto-player__modal-confirm",title:Ke("Are you sure?","presto-player"),style:{"max-width":"350px"},onRequestClose:function(){return m(!1)}},React.createElement("p",null,Ke("Are you sure you want to disconnect this integration?","presto-player")),React.createElement(Je,{className:"presto-player__modal-confirm-button",isDestructive:!0,onClick:function(){i&&i(),m(!1)}},Ke("Disconnect","presto-player")),React.createElement(Je,{onClick:function(){return m(!1)}},Ke("Cancel","presto-player"))))},lt=wp.i18n.__,ot=wp.element.useState,st=wp.data.dispatch,it=wp.apiFetch,ct=wp.compose.createHigherOrderComponent,pt=function(){return ct((function(e){return function(t){var n=ot(""),a=Object(f.a)(n,2),r=a[0],l=a[1],o=ot(""),s=Object(f.a)(o,2),i=s[0],c=s[1],p=ot(!1),u=Object(f.a)(p,2),m=u[0],d=u[1],y=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n,a,r,o,s,i,p,u;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,a=t.data,r=void 0===a?{}:a,o=t.message,s=void 0===o?lt("Success","presto-player"):o,i=t.success,p=t.error,l(""),c(""),d(!0),st("presto-player/settings").setSaving(!0),e.prev=5,e.next=8,it({path:n,method:"post",data:r});case 8:u=e.sent,i&&i(u),c(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&(l(e.t0.message),p&&p(e.t0));case 16:return e.prev=16,d(!1),st("presto-player/settings").setSaving(!1),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[5,13,16,20]])})));return function(t){return e.apply(this,arguments)}}();return React.createElement(e,Object.assign({success:i,setSuccess:c,setError:l,error:r,isBusy:m,makeRequest:y},t))}}),"withIntegration")},ut=wp.i18n.__,mt=wp.components,dt=mt.BaseControl,yt=mt.ExternalLink,vt=mt.PanelRow,_t=mt.Notice,gt=wp.data.dispatch,ht=(0,wp.compose.compose)([pt()])((function(e){var t=e.settings,n=e.success,a=e.setSuccess,r=e.error,l=e.setError,o=e.isBusy,s=e.makeRequest,i=se("mailchimp","api_key"),c=se("mailchimp","connected"),p=function(e){gt("presto-player/settings").updateSetting("api_key",(null==e?void 0:e.api_key)||"","mailchimp"),gt("presto-player/settings").updateSetting("connected",(null==e?void 0:e.connected)||!1,"mailchimp")},u=function(){var e=Object(re.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({path:"/presto-player/v1/mailchimp/disconnect",message:ut("Disconnected","presto-player"),success:p,error:p});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(rt,{title:ut("Mailchimp"),connected:c,onDisconnect:u,onConnect:function(){s({path:"/presto-player/v1/mailchimp/connect",data:{api_key:i},message:ut("Connected","presto-player"),success:p,error:p})},isBusy:o},r&&React.createElement(vt,null,React.createElement(_t,{className:"presto-notice",status:"error",onRemove:function(){return l("")}},r)),n&&React.createElement(vt,null,React.createElement(_t,{className:"presto-notice",status:"success",onRemove:function(){return a("")}},n)),React.createElement(vt,null,React.createElement(dt,null,React.createElement(We,{className:"presto-player__setting--mailchimp-api_key",option:{id:"api_key",name:ut("Your Mailchimp API key","presto-player"),help:React.createElement("p",null,ut("You can create a new key on your mailchimp account page.","presto-player")," ",React.createElement(yt,{href:"https://us11.admin.mailchimp.com/account/api/"},ut("Get My API Key","presto-player"))),type:"password"},value:null==t?void 0:t.api_key,optionName:"mailchimp",required:!0}))))})),ft=wp.i18n.__,Rt=wp.components,bt=Rt.BaseControl,Et=Rt.ExternalLink,wt=Rt.PanelRow,Nt=Rt.Notice,kt=(wp.element.useState,wp.data.dispatch),St=(wp.apiFetch,(0,wp.compose.compose)([pt()])((function(e){var t=e.settings,n=e.success,a=e.setSuccess,r=e.error,l=e.setError,o=e.isBusy,s=e.makeRequest,i=se("mailerlite","api_key"),c=se("mailerlite","connected"),p=function(e){kt("presto-player/settings").updateSetting("api_key",(null==e?void 0:e.api_key)||"","mailerlite"),kt("presto-player/settings").updateSetting("connected",(null==e?void 0:e.connected)||!1,"mailerlite")},u=function(){var e=Object(re.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({path:"/presto-player/v1/mailerlite/disconnect",message:ft("Disconnected","presto-player"),success:p,error:p});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(rt,{title:ft("Mailerlite"),connected:c,onDisconnect:u,onConnect:function(){s({path:"/presto-player/v1/mailerlite/connect",data:{api_key:i},message:ft("Connected","presto-player"),success:p,error:p})},isBusy:o},r&&React.createElement(wt,null,React.createElement(Nt,{className:"presto-notice",status:"error",onRemove:function(){return l("")}},r)),n&&React.createElement(wt,null,React.createElement(Nt,{className:"presto-notice",status:"success",onRemove:function(){return a("")}},n)),React.createElement(wt,null,React.createElement(bt,null,React.createElement(We,{className:"presto-player__setting--mailerlite-api_key",option:{id:"api_key",name:ft("Your Mailerlite API key","presto-player"),help:React.createElement("p",null,ft("You can create a new key on your MailerLite account page.","presto-player")," ",React.createElement(Et,{href:"https://app.mailerlite.com/integrations/api/"},ft("Get My API Key","presto-player"))),type:"password"},value:null==t?void 0:t.api_key,optionName:"mailerlite",required:!0}))))}))),Pt=wp.i18n.__,Ot=wp.components,Ct=Ot.PanelRow,xt=Ot.Notice,jt=wp.data.dispatch,Tt=(0,wp.compose.compose)([pt()])((function(e){e.settings,e.success,e.setSuccess;var t=e.error,n=e.setError,a=e.isBusy,r=e.makeRequest,l=se("fluentcrm","connected"),o=function(e){jt("presto-player/settings").updateSetting("connected",(null==e?void 0:e.connected)||!1,"fluentcrm")},s=function(){var e=Object(re.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({path:"/presto-player/v1/fluentcrm/disconnect",message:Pt("Deactivated","presto-player"),success:o,error:o});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(rt,{title:Pt("FluentCRM"),connected:l,onConnect:function(){r({path:"/presto-player/v1/fluentcrm/connect",message:Pt("Installed and connected","presto-player"),success:o,error:o})},onDisconnect:s,connectButtonText:Pt("Install FluentCRM Plugin","presto-player"),disconnectButtonText:Pt("Deactivate FluentCRM Plugin","presto-player"),isBusy:a},t&&React.createElement(Ct,null,React.createElement(xt,{className:"presto-notice",status:"error",onRemove:function(){return n("")}},t)),l&&React.createElement(Ct,null,React.createElement(xt,{className:"presto-notice",status:"success",isDismissible:!1},Pt("Installed and connected!","presto-player"))))})),Dt=wp.i18n.__,Bt=wp.components,It=Bt.BaseControl,At=Bt.PanelRow,Mt=Bt.Notice,zt=wp.data.dispatch,Ft=(0,wp.compose.compose)([pt()])((function(e){var t=e.settings,n=e.success,a=e.setSuccess,r=e.error,l=e.setError,o=e.isBusy,s=e.makeRequest,i=se("activecampaign","api_key"),c=se("activecampaign","url"),p=se("activecampaign","connected"),u=function(e){zt("presto-player/settings").updateSetting("api_key",(null==e?void 0:e.api_key)||"","activecampaign"),zt("presto-player/settings").updateSetting("url",(null==e?void 0:e.url)||"","activecampaign"),zt("presto-player/settings").updateSetting("connected",(null==e?void 0:e.connected)||!1,"activecampaign")},m=function(){var e=Object(re.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({path:"/presto-player/v1/activecampaign/disconnect",message:Dt("Disconnected","presto-player"),success:u,error:u});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement(rt,{title:Dt("ActiveCampaign"),connected:p,onConnect:function(){s({path:"/presto-player/v1/activecampaign/connect",data:{api_key:i,url:c},message:Dt("Connected","presto-player"),success:u,error:u})},onDisconnect:m,isBusy:o},r&&React.createElement(At,null,React.createElement(Mt,{className:"presto-notice",status:"error",onRemove:function(){return l("")}},r)),n&&React.createElement(At,null,React.createElement(Mt,{className:"presto-notice",status:"success",onRemove:function(){return a("")}},n)),React.createElement(At,null,React.createElement(It,null,React.createElement(We,{className:"presto-player__setting--activecampaign-url",option:{id:"url",name:Dt("Your ActiveCampaign Url","presto-player"),help:React.createElement("p",null,Dt("You can find this on your Settings > Developer page.","presto-player")," ")},value:null==t?void 0:t.url,optionName:"activecampaign",type:"url",required:!0}),React.createElement(We,{className:"presto-player__setting--activecampaign-api_key",option:{id:"api_key",name:Dt("Your ActiveCampaign API key","presto-player"),help:React.createElement("p",null,Dt("You can find this on your Settings > Developer page.","presto-player")," "),type:"password"},value:null==t?void 0:t.api_key,optionName:"activecampaign",required:!0}))))})),Gt=wp.i18n.__,qt=wp.components,Lt=qt.Button,Ut=qt.Panel,Vt=qt.PanelBody,Yt=qt.Flex,Wt=qt.FlexBlock,Kt=qt.Notice,Ht=qt.Spinner,Jt=wp.element,Qt=Jt.useState,Xt=Jt.useEffect,Zt=function(){var e=Qt(0),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Qt(0),l=Object(f.a)(r,2),o=l[0],s=l[1],i=Qt(""),c=Object(f.a)(i,2),p=c[0],u=c[1],m=Qt(0),d=Object(f.a)(m,2),y=d[0],v=d[1],_=function(){var e=Object(re.a)(ae.a.mark((function e(){var t,r,l,o;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(""),e.prev=1,e.next=4,wp.apiFetch({path:"/presto-player/v1/email/export",method:"post",data:{step:n}});case 4:t=e.sent,r=t.percentage,l=t.step,o=t.url,a(l),s(r),v(o),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s(0),u((null===e.t0||void 0===e.t0?void 0:e.t0.message)||Gt("Something went wrong","presto-player"));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return Xt((function(){n&&"done"!=n&&_()}),[n]),Xt((function(){y&&window.open(y)}),[y]),React.createElement(Ut,null,React.createElement(Vt,{title:React.createElement(Yt,null,React.createElement(Wt,null,Gt("Other","presto-player"))),initialOpen:!1},React.createElement("h2",null,Gt("Manual Export","presto-player")),React.createElement("p",null,Gt("Using a service not listed here? You can export contacts and manually upload them to a service.","presto-player")),p&&React.createElement(Kt,{className:"presto-notice",status:"error",onRemove:function(){return u("")}},p),React.createElement(Yt,{align:"center",justify:"flex-start"},React.createElement(Lt,{isPrimary:!0,onClick:function(e){a(1),s(1),e.preventDefault()}},Gt("Download CSV File","presto-player")),!!o&&React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement(Ht,{style:{marginTop:0}}),React.createElement("span",null,"Exporting... ",o,"% Complete")))))},$t=wp.components,en=$t.Button,tn=$t.Card,nn=$t.CardBody,an=(wp.data.dispatch,function(e){var t,n,a,r=e.option,l=(e.value,e.optionName,e.className);return React.createElement(tn,{isBorderless:!0,className:l},React.createElement(nn,{isShady:!0},!!(null==r?void 0:r.name)&&React.createElement("h2",null,r.name),!!r.help&&React.createElement("p",null,r.help),!!(null==r||null===(t=r.button)||void 0===t?void 0:t.text)&&React.createElement(en,{isPrimary:!0,target:null==r||null===(n=r.button)||void 0===n?void 0:n.target,href:null==r||null===(a=r.button)||void 0===a?void 0:a.link},r.button.text)))}),rn=wp.i18n.__,ln=function(){var e=se("bunny_stream_public","video_library_id"),t=se("bunny_stream_public","video_library_api_key"),n=se("bunny_stream_public","pull_zone_url"),a=se("bunny_stream_private","video_library_id"),r=se("bunny_stream_private","video_library_api_key"),l=se("bunny_stream_private","pull_zone_url"),o=se("bunny_stream_private","token_auth_key");return React.createElement("div",null,React.createElement(We,{className:"presto-player__setting--stream_public_id",option:{id:"video_library_id",name:rn("Public Video Library ID","presto-player"),help:rn("The ID of the video library to use.","presto-player")},value:e,optionName:"bunny_stream_public"}),React.createElement(We,{className:"presto-player__setting--stream_public_video_library_api_key",option:{id:"video_library_api_key",name:rn("Public Token Authentication Key","presto-player"),help:rn("The API key for the above video library for read/write access.","presto-player")},type:"password",value:t,optionName:"bunny_stream_public"}),React.createElement(We,{className:"presto-player__setting--stream_public_pull_zone_url",option:{id:"pull_zone_url",name:rn("Public CDN Hostname","presto-player"),help:rn("The public cdn hostename for the video library.","presto-player")},value:n,optionName:"bunny_stream_public"}),React.createElement(We,{className:"presto-player__setting--stream_private_id",option:{id:"video_library_id",name:rn("Private Video Library ID","presto-player"),help:rn("The ID of the video library to use.","presto-player")},value:a,optionName:"bunny_stream_private"}),React.createElement(We,{className:"presto-player__setting--stream_private_api_key",option:{id:"private_api_key",name:rn("Private Video Read/Write API Key","presto-player"),help:rn("The API key for the above video library for read/write access.","presto-player")},type:"password",value:r,optionName:"bunny_stream_private"}),React.createElement(We,{className:"presto-player__setting--stream_private_pull_zone_url",option:{id:"pull_zone_url",name:rn("Private CDN Hostname","presto-player"),help:rn("The private cdn hostename for the video library.","presto-player")},value:l,optionName:"bunny_stream_private"}),React.createElement(We,{className:"presto-player__setting--stream_private_token_auth_key",option:{id:"token_auth_key",name:rn("Private Video Token Authentication Key","presto-player"),help:rn("The token authentication key used to sign private urls","presto-player")},type:"password",value:o,optionName:"bunny_stream_private"}))},on=wp.i18n.__,sn=wp.components,cn=sn.ToggleControl,pn=sn.ExternalLink,un=wp.element,mn=un.useState,dn=un.Fragment,yn=n(37),vn=function(){var e,t,n,a,r,l,o,s,i,c,p,u,m,d=oe(),y=mn(!1),v=Object(f.a)(y,2),_=v[0],g=v[1],h=function(){var e;return!(null===(e=prestoPlayer)||void 0===e?void 0:e.isPremium)&&{title:on("Pro Feature","presto-player"),heading:on("Unlock Presto Player Pro","presto-player"),message:on("Get this feature and more with the Pro version of Presto Player!","presto-player"),link:"https://prestoplayer.com"}};return React.createElement(fe,{title:on("Integrations","presto-player"),description:on("Third party integrations and connections.","presto-player")},React.createElement(he,{title:on("Google Analytics","presto-player"),description:on("Analytics settings for video plays, watch times and more.","presto-player"),disabled:h()},React.createElement(Te,{className:"presto-player__setting--google-analytics",option:{id:"enable",name:on("Enable","presto-player"),help:on("Send analytics events to your Google Analytics account.","presto-player")},value:se("google_analytics","enable"),optionName:"google_analytics"}),React.createElement(Te,{className:"presto-player__setting--use-existing-tag",option:{id:"use_existing_tag",name:on("Use existing on-page tag?","presto-player"),help:on("Should we use an existing google analytics (v4) tag? If not, we'll output one for you.","presto-player")},value:se("google_analytics","use_existing_tag"),optionName:"google_analytics"}),React.createElement(We,{className:"presto-player__setting--measurement-id",option:{id:"measurement_id",name:on("Measurement ID","presto-player"),help:on("Enter a Google Analytics Measurement ID, which can be found on your analytics admin page.","presto-player")},value:se("google_analytics","measurement_id"),optionName:"google_analytics"})),React.createElement(he,{title:on("YouTube","presto-player"),description:on("Settings for YouTube videos.","presto-player")},React.createElement(Te,{className:"presto-player__setting--youtube-nocookie",option:{id:"nocookie",name:on("Privacy-Enhanced Mode","presto-player"),help:on("Embed YouTube videos without using cookies that track viewing behaviour.","presto-player")},value:se("youtube","nocookie"),optionName:"youtube"}),React.createElement(We,{className:"presto-player__setting--youtube-channel-id",option:{id:"channel_id",name:on("Channel ID","presto-player"),help:React.createElement("div",null,on("Enter the ID of your channel to enable Youtube Subscribe button functionality.","presto-player")," ",React.createElement(pn,{href:"https://support.google.com/youtube/answer/3250431?hl=en"},on("Find my channel id","presto-player")))},value:se("youtube","channel_id"),optionName:"youtube"})),(!(null===(p=prestoPlayer)||void 0===p?void 0:p.isPremium)||!!((null===(u=prestoPlayer)||void 0===u?void 0:u.proVersion)&&yn(null===(m=prestoPlayer)||void 0===m?void 0:m.proVersion,"0.9.0")>=0))&&React.createElement(he,{hideSaveButton:!0,title:on("Email Capture","presto-player"),description:on("Integrate Presto Player with an email provider for email capture.","presto-player"),disabled:h()},React.createElement(Ft,{settings:null==d?void 0:d.presto_player_activecampaign}),React.createElement(Tt,{settings:null==d?void 0:d.presto_player_fluentcrm}),React.createElement(ht,{settings:null==d?void 0:d.presto_player_mailchimp}),React.createElement(St,{settings:null==d?void 0:d.presto_player_mailerlite}),React.createElement(Zt,null)),(null===(e=window)||void 0===e||null===(t=e.prestoPlayer)||void 0===t||null===(n=t.isSetup)||void 0===n?void 0:n.bunny)?React.createElement(React.Fragment,null,React.createElement(he,{title:on("Bunny.net Settings","presto-player"),description:on("Modify bunny.net settings.","presto-player")},(null==d?void 0:d.presto_player_bunny_stream)&&React.createElement(dn,null,React.createElement(We,{option:{id:"hls_start_level",name:on("Initial Quality Level","presto-player"),help:on("You can set the default quality start level for all streams (i.e. 240, 360, 480, 720, 1080, etc). Set this lower to prevent initial buffering if your users have slow connections. Set this higher to start with a higher quality stream.","presto-player")},placeholder:"480",type:"number",value:null==d||null===(a=d.presto_player_bunny_stream)||void 0===a?void 0:a.hls_start_level,optionName:"bunny_stream"}),React.createElement("br",null),React.createElement(Te,{className:"presto-player__setting--use-existing-tag",option:{id:"disable_legacy_storage",name:on("Disable Classic Bunny.net Storage","presto-player"),help:on("This will disable Bunny.net classic storage in your block UI.","presto-player")},value:null==d||null===(r=d.presto_player_bunny_stream)||void 0===r?void 0:r.disable_legacy_storage,optionName:"bunny_stream"}),React.createElement("br",null)),React.createElement(cn,{label:on("Edit Bunny.net Settings","presto-player"),help:on("Edit Bunny.net connection settings. Only edit this if you know what you're doing.","presto-player"),checked:_,onChange:g}),!!_&&React.createElement(React.Fragment,null,(null==d?void 0:d.presto_player_bunny_stream_public)&&React.createElement(dn,null,React.createElement("h2",{style:{marginTop:"40px"}},on("Bunny.net Stream","presto-player")),React.createElement(ln,null)),React.createElement("h2",{style:{marginTop:"40px"}},on("Bunny.net Storage (Classic)","presto-player")),React.createElement("p",{style:{fontSize:"12px",color:"#757575"}},on('Note: To Change your API key, please click "Reconnect" from a bunny block.',"presto-player")),React.createElement(We,{className:"presto-player__setting--pull_public_id",option:{id:"public_id",name:on("Public ID","presto-player"),help:on("The ID of the public pull zone to use.","presto-player")},value:null==d||null===(l=d.presto_player_bunny_pull_zones)||void 0===l?void 0:l.public_id,optionName:"bunny_pull_zones"}),React.createElement(We,{className:"presto-player__setting--pull_private_name",option:{id:"public_hostname",name:on("Public Host Name","presto-player"),help:on("The hostname to use for this pullzone.","presto-player")},value:null==d||null===(o=d.presto_player_bunny_pull_zones)||void 0===o?void 0:o.public_hostname,optionName:"bunny_pull_zones"}),React.createElement(We,{className:"presto-player__setting--pull_private_id",option:{id:"private_id",name:on("Private ID","presto-player"),help:on("The ID of the private pull zone to use.","presto-player")},value:null==d||null===(s=d.presto_player_bunny_pull_zones)||void 0===s?void 0:s.private_id,optionName:"bunny_pull_zones"}),React.createElement(We,{className:"presto-player__setting--pull_private_name",option:{id:"private_hostname",name:on("Private Host Name","presto-player"),help:on("The hostname to use for this pullzone.","presto-player")},value:null==d||null===(i=d.presto_player_bunny_pull_zones)||void 0===i?void 0:i.private_hostname,optionName:"bunny_pull_zones"}),React.createElement(We,{className:"presto-player__setting--pull_private_name",option:{id:"private_security_key",name:on("Private Url Token Authentication Key","presto-player"),help:on("Update the security token used to sign private urls.","presto-player"),type:"password"},value:null==d||null===(c=d.presto_player_bunny_pull_zones)||void 0===c?void 0:c.private_security_key,optionName:"bunny_pull_zones"})))):React.createElement(he,null,React.createElement(an,{className:"presto-player__setting--bunny-cta",option:{name:on("Bunny.net Video","presto-player"),help:on("To get started with Bunny.net, add a Bunny.net video to your page.","presto-player"),type:"cta",button:{text:"Learn More",link:"https://prestoplayer.com/secure-video-with-bunny-net",target:"_blank"}}})))},_n=wp.i18n.__,gn=wp.components,hn=gn.Card,fn=gn.SnackbarList,Rn=gn.Flex,bn=gn.FlexBlock,En=gn.FlexItem,wn=gn.Spinner,Nn=wp.data,kn=Nn.dispatch,Sn=Nn.useSelect,Pn=wp.element,On=Pn.useState,Cn=Pn.useEffect;var xn=function(){var e,t,n,a,r,l=On(!0),o=Object(f.a)(l,2),s=o[0],i=o[1];window.onhashchange=function(){window.scrollTo(0,0)},Cn((function(){b({url:"".concat(S,"settings/")}).then((function(e){return N("presto-player/settings").setSettings(O(e)),e})).then((function(){i(!1)}))}),[]);var c=Sn((function(e){return e("presto-player/settings").notices()})),p=function(){window.scrollTo(0,0)};return s?React.createElement("div",{className:"presto-settings__loading"},React.createElement(wn,null)):React.createElement("div",{className:"presto-settings"},React.createElement(Q,{routes:X,defaultRoute:null==X||null===(e=X.general)||void 0===e?void 0:e.path},React.createElement(hn,{className:"presto-settings__navigation"},React.createElement(Rn,null,React.createElement(bn,null,React.createElement("div",{role:"tablist","aria-orientation":"horizontal",className:"components-tab-panel__tabs"},React.createElement(H,{to:null==X||null===(t=X.general)||void 0===t?void 0:t.path,type:"button",role:"tab",activeClassName:"is-active",className:"components-button components-tab-panel__tabs-item presto-player__nav-general"},_n("General","presto-player")),React.createElement(H,{to:null==X||null===(n=X.integrations)||void 0===n?void 0:n.path,type:"button",role:"tab",activeClassName:"is-active",className:"components-button components-tab-panel__tabs-item presto-player__nav-integrations"},_n("Integrations","presto-player")))),React.createElement(En,null,React.createElement(te,{style:{margin:"0 10px"},form:"presto-settings-form"})))),React.createElement(U,{path:null==X||null===(a=X.general)||void 0===a?void 0:a.path,onRoute:p},React.createElement(Ue,null)),React.createElement(U,{path:null==X||null===(r=X.integrations)||void 0===r?void 0:r.path,onRoute:p},React.createElement(vn,null))),React.createElement(fn,{className:"presto-settings-page-notices",notices:c,onRemove:function(e){kn("presto-player/settings").removeNotice(e)}}))},jn=(n(45),wp.element.render);(0,wp.data.registerStore)("presto-player/settings",h),jn(React.createElement(xn,null),document.getElementById("presto-settings-page"))}},[[30,1,2]]]);
//# sourceMappingURL=admin-1a0df110.js.map